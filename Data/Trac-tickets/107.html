<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      #107 (CF Data Model 1.7)
     – CF Metadata
    </title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="/trac/search" />
        <link rel="prev" href="./106.html" title="ticket #106" />
        <link rel="last" href="./176.html" title="ticket #176" />
        <link rel="help" href="/trac/wiki/TracGuide" />
        <link rel="alternate" href="./107?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="./107?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="./107?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" />
        <link rel="next" href="./108.html" title="ticket #108" />
        <link rel="start" href="/trac/wiki" />
        <link rel="stylesheet" href="/trac/chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="/trac/chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="./1.html" title="ticket #1" />
        <link rel="shortcut icon" href="/trac/chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="/trac/chrome/common/trac.ico" type="image/x-icon" />
    <style id="trac-noscript" type="text/css">.trac-noscript { display: none !important }</style>
      <link type="application/opensearchdescription+xml" rel="search" href="/trac/search/opensearch" title="Search CF Metadata" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="b8aeac20bf7fd49b63339caa";
      var comments_prefs={"comments_only":"false","comments_order":"oldest"};
    </script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/jquery.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/babel.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/trac.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/search.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/folding.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/wikitoolbar.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/resizer.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/auto_preview.js"></script>
    <script type="text/javascript">
      jQuery("#trac-noscript").remove();
      jQuery(document).ready(function($) {
        $(".trac-autofocus").focus();
        $(".trac-target-new").attr("target", "_blank");
        setTimeout(function() { $(".trac-scroll").scrollToTop() }, 1);
        $(".trac-disable-on-submit").disableOnSubmit();
      });
    </script>
    <script type="text/javascript" src="/trac/chrome/common/js/threaded_comments.js"></script>
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
      /*<![CDATA[*/
        $("#attachments").toggleClass("collapsed");
        $("#trac-up-attachments").click(function () {
          $("#attachments").removeClass("collapsed");
          return true;
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
        function setRevertHandler() {
          $("button.trac-revert").click(function() {
            var div = $("div", this);
            var field_name = div[0].id.substr(7);
            var field_value = div.text();
            var input = $("#propertyform *[name=field_" + field_name + "]");
            if (input.length > 0) {
              if (input.filter("input[type=radio]").length > 0) {
                input.val([field_value]);
              } else if (input.filter("input[type=checkbox]").length > 0) {
                input.val(field_value == "1" ? [field_value] : []);
              } else {
                input.val(field_value);
              }
            } else { // Special case for CC checkbox
              input = $("#propertyform input[name=cc_update]").val([]);
            }
            input.change();
            $(this).closest("li").remove();
            return false;
          });
        }
        setRevertHandler();
        var comment_focused = false;
        $("#comment").focus(function() { comment_focused = true; })
                     .blur(function() { comment_focused = false; });
        $("#propertyform").autoSubmit({preview: '1'}, function(data, reply) {
          var items = $(reply);
          // Update ticket box
          $("#ticket").replaceWith(items.filter('#ticket'));
          // Update changelog with original order
          $("#changelog").replaceWith(items.filter("#changelog"));
          // Reorder comments
          applyCommentsOrder(
            $('#prefs input[name="trac-comments-order"]:checked').val());
          // Show warning
          var new_changes = $("#changelog .trac-new");
          $("#trac-edit-warning").toggle(new_changes.length != 0);
          if (new_changes.length != 0)
            $("#changelog").parent().show().removeClass("collapsed");
          // Update view time
          $("#propertyform input[name='view_time']").replaceWith(items.filter("input[name='view_time']"));
          // Update preview
          var preview = $("#ticketchange").html(items.filter('#preview').children());
          var show_preview = preview.children().length != 0;
          $("#ticketchange").toggle(show_preview);
          setRevertHandler();
          // Collapse property form if comment editor has focus
          if (show_preview && comment_focused)
            $("#modify").parent().addClass("collapsed");
          // Execute scripts to load stylesheets
          items.filter("script").appendTo("head");
        }, "#ticketchange .trac-loading");
        $("#trac-comment-editor").autoSubmit({preview_comment: '1'}, function(data, reply) {
          var comment = $("#trac-comment-editor").next("div.comment").html(reply);
          comment.toggle(comment.children().length != 0);
        }, "#changelog .trac-loading");
        /*]]>*/
      });
    </script>
  </head>
  <body>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
        <ul>
          <li class="first"><span>&larr; <a class="prev" href="./106.html" title="ticket #106">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="./108.html" title="ticket #108">Next Ticket</a> &rarr;</span></li>
        </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
        <div id="ticket" class="trac-content ">
  <div class="date">
    <p>Opened <a class="timeline" href="/trac/timeline?from=2013-10-30T10%3A36%3A43-07%3A00&amp;precision=second" title="See timeline at 10/30/13 10:36:43">7 years ago</a></p>
    <p>Last modified <a class="timeline" href="/trac/timeline?from=2015-02-27T07%3A11%3A34-08%3A00&amp;precision=second" title="See timeline at 02/27/15 07:11:34">6 years ago</a></p>
  </div>
  <h2>
    <a href="./107.html" class="trac-id">#107</a>
    <span class="trac-status">
      <a href="/trac/query?status=new">new</a>
    </span>
    <span class="trac-type">
      <a href="/trac/query?status=!closed&amp;type=task">task</a>
    </span>
  </h2>
  <h1 id="trac-ticket-title" class="searchable">
    <span class="summary">CF Data Model 1.7</span>
  </h1>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable"><a href="/trac/query?status=!closed&amp;reporter=markh">markh</a></td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">cf-conventions@…</td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="/trac/query?status=!closed&amp;priority=medium">medium</a>
        </td>
        <th id="h_milestone" class="missing">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="missing milestone"></a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="/trac/query?status=!closed&amp;component=cf-conventions">cf-conventions</a>
        </td>
        <th id="h_version" class="missing">
          Version:
        </th>
        <td headers="h_version">
              <a href="/trac/query?status=!closed&amp;version="></a>
        </td>
    </tr><tr>
        <th id="h_keywords" class="missing">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
        <th id="h_cc" class="missing">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <h1 id="CFDataModelversion1.7">CF Data Model version 1.7</h1>
<p>
The latest draft of the data model is:
</p>
<ul><li><a class="wiki" href="/trac/wiki/DataModelDraft">Draft of the data model for CF1.7</a>
</li></ul><p>
The <a class="wiki" href="/trac/wiki/dataModelTermsOfReference">Terms of Reference</a> for the model are agreed.
</p>
<p>
This ticket is a follow up activity to <a class="new ticket" href="./95.html" title="task: Development of CF 1.5 Data Model (new)">#95</a> and <a class="new ticket" href="./68.html" title="enhancement: CF data model and reference implementation in Python (new)">#68</a> which both focussed on CF1.5 but did not reach a conclusion.
</p>

    </div>
  </div>
</div>
          

        <div>
          <div class="trac-noscript" style="position: relative">
            <form id="prefs" method="get" action="/trac/prefs" style="position: absolute; right: 0">
              <div id="trac-comments-order">
                <input type="radio" id="trac-comments-oldest" name="trac-comments-order" value="oldest" checked="checked" />
                <label for="trac-comments-oldest">Oldest first</label>
                <input type="radio" id="trac-comments-newest" name="trac-comments-order" value="newest" />
                <label for="trac-comments-newest">Newest first</label>
                <span id="trac-threaded-toggle" style="display: none">
                  <input type="radio" id="trac-comments-threaded" name="trac-comments-order" value="threaded" />
                  <label for="trac-comments-threaded">Threaded</label>
                </span>
              </div>
              <div>
                <input id="trac-comments-only-toggle" type="checkbox" />
                <label for="trac-comments-only-toggle">Comments only</label>
              </div>
            </form>
          </div>
          <h3 class="foldable">Change History <span class="trac-count">(85)</span></h3>
          <div id="changelog">
              <div class="change" id="trac-change-1-1383322229000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:1" class="cnum">
    <a href="#comment:1">comment:1</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-11-01T09%3A10%3A29-07%3A00&amp;precision=second" title="See timeline at 11/01/13 09:10:29">7 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Mark
</p>
<p>
I agree that it would be good to move things along, but I don't think we've finished the data model for CF 1.5 yet, which we agreed is where we would start (point 4 of your terms of reference). We began that in ticket 68 and continued in 95. Ticket 95 hasn't been abandoned, though. Because of our irreconcilable views on scalar coordinates, we digressed to tickets 104 and 105 to address that one point. If we can agree ticket 104, we can go back to the discussion of the data model in ticket 95! I hope we will be able to do that soon. In ticket 95 we have agreed a lot of text describing the data model, but there are still some aspects of the model that we haven't discussed, especially transforms.
</p>
<p>
The outcome of ticket 95, presuming we succeeding in agreeing it, will be a data model document for CF 1.5. Once we have that, we can update it for CF 1.6, in which the main issue will be discrete sampling geometries. I haven't thought about it carefully, but I suspect that the changes in the data model to update it further to CF 1.7 will be minor, or even nil. There are lots of tickets making useful changes, but I don't immediately see any conceptual changes. However, I don't want to anticipate that discussion!
</p>
<p>
Best wishes
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-2-1384037789000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:2" class="cnum">
    <a href="#comment:2">comment:2</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-11-09T14%3A56%3A29-08%3A00&amp;precision=second" title="See timeline at 11/09/13 14:56:29">7 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear all
</p>
<p>
Mark argues that we should start work on the data model for CF 1.7 (the next version i.e. CF 1.6 plus all the agreed tickets), instead of concluding the data model for CF 1.5. I'm keen that we should build on what we already agreed for CF 1.5, since it will be mostly unchanged, and Mark agrees with that. I have therefore posted several documents on the wiki. I've put them there as annexes to this posting. I suggest that those wiki documents should <em>not</em> be edited; instead, as we debate changes to the wording of the data model, we can post new wiki documents. Keeping lengthy text out of the ticket itself should make it more readable; that was one of Mark's concerns.
</p>
<p>
The documents I have posted are:
</p>
<ul><li><a class="wiki" href="/trac/wiki/Ticket107Text9Nov13From95">Text agreed in ticket 95</a> with some small proposed changes
</li><li><a class="wiki" href="/trac/wiki/Ticket107Text9Nov13CellMeasures">Proposed text for cell measures</a>
</li><li><a class="wiki" href="/trac/wiki/Ticket107Text9Nov13CellMethods">Proposed text for cell methods</a>
</li><li><a class="wiki" href="/trac/wiki/Ticket107Text9Nov13Transforms">Proposed text for transforms</a>, from ticket 95
</li><li><a class="wiki" href="/trac/wiki/Ticket107Text9Nov13Properties">Proposed text for properties</a>
</li></ul><p>
I suggest that the first one should not need any discussion, unless anyone can see something in it which is different in CF 1.6 or CF 1.7. Following John Caron's comments in ticket 95, I have added text stating that dimension/auxiliary coordinates are independent/dependent. All of the text in that document comes verbatim from ticket 95, except for the changes marked.
</p>
<p>
The proposal for transforms was posted by David at the end of ticket 95. The other three documents contain text from <a class="ext-link" href="http://www.met.reading.ac.uk/~david/cfdm_0.7.html"><span class="icon">​</span>the data model that David and I proposed for CF 1.5</a>.
</p>
<p>
I must admit that I haven't yet thought in detail about what CF 1.6 or CF 1.7 might require but, as I said above, I don't think there should be major changes needed.
</p>
<p>
Best wishes
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3-1384264311000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:3" class="cnum">
    <a href="#comment:3">comment:3</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-11-12T05%3A51%3A51-08%3A00&amp;precision=second" title="See timeline at 11/12/13 05:51:51">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Thank you for all the reference information Jonathan, that is most helpful.
</p>
<p>
I suggest we start with some of the smaller, easily defined aspects of the model (to get our collective eye in).  
</p>
<p>
I suggest that cell_measures are a good example of such a well_constrained, limited scope type; perhaps we could address this first.
</p>
<p>
There is a text proposed here to define cell_measures within the scope of the data model:
<a class="ext-link" href="https://cf-pcmdi.llnl.gov/trac/wiki/Ticket107Text9Nov13CellMeasures"><span class="icon">​</span>https://cf-pcmdi.llnl.gov/trac/wiki/Ticket107Text9Nov13CellMeasures</a>
</p>
<p>
The relevant CF NetCDF section is here:
<a class="ext-link" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/ch07s02.html"><span class="icon">​</span>http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/ch07s02.html</a>
</p>
<p>
I invite comments on the definition of cell_measures within the scope of the data model.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4-1384956693000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:4" class="cnum">
    <a href="#comment:4">comment:4</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-11-20T06%3A11%3A33-08%3A00&amp;precision=second" title="See timeline at 11/20/13 06:11:33">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I suggest we adopt a commonly used naming convention for types or constructs in a data model: each use in the descriptive text is capitalised, with camel case, to help readers identify where a reference is to an explicit entity in our model; 
</p>
<blockquote>
<p>
e.g. CellMeasure
</p>
</blockquote>
<p>
I think that the suggested text would benefit from some more specific details, particularly on what is allowed and what is not.  So, 'allowed: area, volume' rather than 'e.g. area'.
</p>
<p>
I have put my suggestions in a text block <a class="ext-link" href="https://cf-pcmdi.llnl.gov/trac/wiki/markhDataModelDrafting"><span class="icon">​</span>here</a> to illustrate my points. I think this is a little better than the text proposed <a class="ticket" href="./107#comment:3" title="Comment 3">above</a>.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5-1386105628000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:5" class="cnum">
    <a href="#comment:5">comment:5</a>
  </span>
          <span>follow-ups:</span>
    <a href="#comment:6" class="follow-up">↓ 6</a>
    <a href="#comment:7" class="follow-up">↓ 7</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-12-03T13%3A20%3A28-08%3A00&amp;precision=second" title="See timeline at 12/03/13 13:20:28">7 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Mark
</p>
<p>
I am sorry if I appear to be awkward, but having compared our versions I prefer ours to yours in most respects. These are the differences:
</p>
<ul><li>You prefer "CellMeasure" to "cell measure construct". Maybe "construct" isn't the best word, but we've used it in all the previously agreed text. I appreciate that your nomenclature would be more compact, but we should be consistent throughout the document. Could we postpone this until we've agreed all the sections?
</li><li>Layout. I formatted the text in the same way as the text we have already agreed. Your style is different. I think we ought to return to the question of form when we've finished the contents.
</li><li>I gave just one example of the measure property and units, whereas you have listed the allowed values. I think that for the data model we do not need to be exhaustive, because the allowed values are a matter for vocabulary; they don't affect the concept. Actually, I would rather remove the single example than list all possibilities in the data model document!
</li><li>Purpose of cell measures. I agree we need this. It's not in my version because I moved it to the <a class="ext-link" href="https://cf-pcmdi.llnl.gov/trac/wiki/Ticket107Text9Nov13From95"><span class="icon">​</span>Field part of the document</a>. That's because you suggested, and we agreed, that it was better in the case of coordinates to put the description of purpose at the level of the Field itself. Hence for consistency I did the same for all the other components of the Field. My proposed text is "A cell measure construct provides information about the size or shape of the cells defined by an ordered list of one or more domain axes of the field."
</li><li>I say "contain", you say "define". This is not a big difference, but we say "contain" elsewhere. These are the components of the construct.
</li><li>About the dimensions, I wrote, "[Its] shape is determined by the domain axes in the order listed, optionally omitting any domain axes of size one. ... It is assumed that the metric does not depend on any of the domain axes of the field which are not specified, along which the values are implicitly propagated," and you wrote, "[Its] shape is consistent with the domain axes mediating the references from the containing Field." To my mind, your version is less explicit and less clear. I think we could omit "optionally omitting ... size one" from my version, because I suppose a dependence on a size-one dimension is in effect not a dependence, since there is no variation, so it's covered by the sentence about implicit propagation. That sentence is important. It is not required that a cell measures variable has all the dimensions of the data variable.
</li><li>I don't think the point about controlled vocabularies is needed here. However, we could mention that when we deal with properties.
</li><li>You have omitted the final part, which relates to the data model to CF-netCDF files. I think the user is likely to find that information helpful, so I feel that we should keep it.
</li></ul><p>
Cheers
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6-1386168880000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:6" class="cnum">
    <a href="#comment:6">comment:6</a>
  </span>
        in reply to:
    <a href="#comment:5">↑ 5</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-12-04T06%3A54%3A40-08%3A00&amp;precision=second" title="See timeline at 12/04/13 06:54:40">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:5" title="Comment 5">jonathan</a>:
</p>
<p>
thank you for the comments, responses to some of them are here:
</p>
<blockquote class="citation">
<ul><li>I say "contain", you say "define". This is not a big difference, but we say "contain" elsewhere. These are the components of the construct.
</li></ul></blockquote>
<p>
This makes sense, I have updated the <a class="wiki" href="/trac/wiki/markhDataModelDrafting">draft</a> accordingly.
</p>
<blockquote class="citation">
<ul><li>I gave just one example of the measure property and units, whereas you have listed the allowed values. I think that for the data model we do not need to be exhaustive, because the allowed values are a matter for vocabulary; they don't affect the concept. Actually, I would rather remove the single example than list all possibilities in the data model document! 
</li><li>I don't think the point about controlled vocabularies is needed here. However, we could mention that when we deal with properties.
</li></ul></blockquote>
<p>
I wonder if these are two sides of the same coin.  If we have a 'Properties' section of the model with reference to appropriate controlled vocabularies, we could capture all of the information about controlled vocabularies and scope there.
</p>
<p>
I think we must be exhaustive somewhere, defining how to comprehend the correct vocabulary: we have to define what is allowed.  I am content to put this information under a Properties section, rather than in this section, if that is preferred.  I suggest we get onto Properties next, to get the referencing and scope in shape.
</p>
<blockquote class="citation">
<ul><li>You have omitted the final part, which relates to the data model to CF-netCDF files. I think the user is likely to find that information helpful, so I feel that we should keep it.
</li></ul></blockquote>
<p>
I understand.  The first sentence seems the most relevant so I have added this to the <a class="wiki" href="/trac/wiki/markhDataModelDrafting">draft</a>; does the second sentence really add value here? I am not so sure.
</p>
<p>
to be continued...
mark
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7-1386179332000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:7" class="cnum">
    <a href="#comment:7">comment:7</a>
  </span>
        in reply to:
    <a href="#comment:5">↑ 5</a>
        ;
          <span>follow-up:</span>
    <a href="#comment:8" class="follow-up">↓ 8</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-12-04T09%3A48%3A52-08%3A00&amp;precision=second" title="See timeline at 12/04/13 09:48:52">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:5" title="Comment 5">jonathan</a>:
 
</p>
<blockquote class="citation">
<ul><li>You prefer "CellMeasure" to "cell measure construct". Maybe "construct" isn't the best word, but we've used it in all the previously agreed text. I appreciate that your nomenclature would be more compact, but we should be consistent throughout the document. Could we postpone this until we've agreed all the sections?
</li></ul></blockquote>
<p>
I would rather not postpone this, I think it makes a significant difference to readability, giving a visual clue each time a 'first class citizen' in the CF data model is mentioned.  I think it would be a helpful approach to adopt.
</p>
<blockquote class="citation">
<ul><li>Layout. I formatted the text in the same way as the text we have already agreed. Your style is different. I think we ought to return to the question of form when we've finished the contents.
</li></ul></blockquote>
<p>
I think that the form aids readability, which I think we should aim to deliver.  I think we should aim for clarity and conciseness at each step.
</p>
<p>
That said, the layout of the <a class="wiki" href="/trac/wiki/markhDataModelDrafting">draft</a> now looks quite similar to the layout of <a class="wiki" href="/trac/wiki/Ticket107Text9Nov13CellMeasures">Ticket107Text9Nov13CellMeasures</a> so perhaps there isn't much of an issue here.
</p>
<blockquote class="citation">
<ul><li>Purpose of cell measures. I agree we need this. It's not in my version because I moved it to the <a class="ext-link" href="https://cf-pcmdi.llnl.gov/trac/wiki/Ticket107Text9Nov13From95"><span class="icon">​</span>Field part of the document</a>. That's because you suggested, and we agreed, that it was better in the case of coordinates to put the description of purpose at the level of the Field itself. Hence for consistency I did the same for all the other components of the Field. My proposed text is "A cell measure construct provides information about the size or shape of the cells defined by an ordered list of one or more domain axes of the field."
</li></ul></blockquote>
<p>
I am not overly concerned about where a description of purpose resides; this seems like an easy thing to change at a later date.  I wonder whether we can carry each one around with the construct for now and decide to collate them later.
</p>
<p>
Having re-read the text I put and your text, I feel that neither has quite captured the essence.  
</p>
<p>
I think that the part 
</p>
<blockquote>
<p>
<em>defined by an ordered list of one or more domain axes of the field</em>
</p>
</blockquote>
<p>
is not necessary, not adding much information to the description.
</p>
<p>
I think that the use of the term 
</p>
<blockquote>
<p>
<em>shape</em>
</p>
</blockquote>
<p>
is unhelpful here, as <em>shape</em> may be used when discussing arrays shapes, or used to refer to a geometric spatial <em>shape</em>  neither of which are in scope here.
</p>
<p>
I don't think that
</p>
<blockquote>
<p>
<em>A CellMeasure describes a measurement or parameter for cells within a domain; one is commonly used where the defined measure is not inferable from coordinates.</em>
</p>
</blockquote>
<p>
captures what we want either.  The measurement is with reference to spatial aspects of the cell, area and volume. 
</p>
<p>
Perhaps:
</p>
<blockquote>
<p>
<strong>A CellMeasure provides information about the spatial size of cells within a domain.</strong>
</p>
</blockquote>
<p>
As this information is often inferable and CellMeasures are used in cases where it is not, we could add a statement:
</p>
<blockquote>
<p>
<strong>The presence of a CellMeasure indicates that the defined spatial size of the cells should not be inferred.</strong>
</p>
</blockquote>
<blockquote class="citation">
<ul><li>About the dimensions, I wrote, "[Its] shape is determined by the domain axes in the order listed, optionally omitting any domain axes of size one. ... It is assumed that the metric does not depend on any of the domain axes of the field which are not specified, along which the values are implicitly propagated," and you wrote, "[Its] shape is consistent with the domain axes mediating the references from the containing Field." To my mind, your version is less explicit and less clear. I think we could omit "optionally omitting ... size one" from my version, because I suppose a dependence on a size-one dimension is in effect not a dependence, since there is no variation, so it's covered by the sentence about implicit propagation. That sentence is important. It is not required that a cell measures variable has all the dimensions of the data variable.
</li></ul></blockquote>
<p>
I am slightly concerned by the sentence 
</p>
<blockquote>
<p>
<em>It is assumed that the metric does not depend on any of the domain axes of the field which are not specified, along which the values are implicitly propagated.</em>
</p>
</blockquote>
<p>
I had to think long and hard about this to understand its meaning: I don't think it gives enough clarity.
</p>
<p>
I think that the definition of these relationship will be fairly consistent for AuxiliaryCoordinate, DimensionCoordinate and CellMeasure instances and will need to reference the description of DomainAxis clearly and consistently.
</p>
<p>
The text I propose in the <a class="wiki" href="/trac/wiki/markhDataModelDrafting">draft</a> is an attempt to use a consistent set of terms which will be clearly defined.  We haven't got this far yet, so it's hard to judge the suitability of this phrasing.
</p>
<p>
Perhaps we can put off this discussion until we get back to the wording of the Field - DomainAxis relationship and the mediation of other relationships.  Once we have a nice set of words we can agree how to reference them in the relevant sections.
</p>
<p>
Alternatively, I think we know what condition we are trying to describe, that: the <em>values</em> array can be unambiguously mapped to the containing Field's <em>data</em> array and relevant coordinates.  As this is within the scope of the Field, perhaps we can define the relation there, and for the CellMeasure, simply state that:
</p>
<blockquote>
<p>
<strong>A CellMeasure instance must contain:</strong>
</p>
</blockquote>
<blockquote>
<p>
<strong>* A typed numeric array of metric values</strong>
</p>
</blockquote>
<p>
It is up to a Field to decide whether a CellMeasure is consistent and able to be used.  In principle, any <em>values</em> array is valid for an orphaned CellMeasure, only a Field cares about consistency.
</p>
<p>
The <a class="wiki" href="/trac/wiki/markhDataModelDrafting">draft</a> is now quite similar to the <a class="wiki" href="/trac/wiki/Ticket107Text9Nov13CellMeasures">proposal</a>, although not the same.  I wonder whether it captures the essence of the proposal whilst adding a little clarity for the readers.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8-1386347009000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:8" class="cnum">
    <a href="#comment:8">comment:8</a>
  </span>
        in reply to:
    <a href="#comment:7">↑ 7</a>
        ;
          <span>follow-up:</span>
    <a href="#comment:9" class="follow-up">↓ 9</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-12-06T08%3A23%3A29-08%3A00&amp;precision=second" title="See timeline at 12/06/13 08:23:29">7 years ago</a> by davidhassell
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:7" title="Comment 7">markh</a>:
</p>
<p>
Dear Mark,
</p>
<p>
Some thoughts on your very useful comments:
</p>
<blockquote class="citation">
<p>
Replying to <a class="ticket" href="./107#comment:5" title="Comment 5">jonathan</a>:
 
</p>
<blockquote class="citation">
<ul><li>You prefer "CellMeasure" to "cell measure construct". Maybe "construct" isn't the best word, but we've used it in all the previously agreed text. I appreciate that your nomenclature would be more compact, but we should be consistent throughout the document. Could we postpone this until we've agreed all the sections?
</li></ul></blockquote>
<p>
I would rather not postpone this, I think it makes a significant difference to readability, giving a visual clue each time a 'first class citizen' in the CF data model is mentioned.  I think it would be a helpful approach to adopt.
</p>
</blockquote>
<p>
I'm happy not to postpone this, but would argue for the programming language neutral, plain English version ("cell measure construct") rather than, as I see it, the opposite ("CellMeasure instance")
</p>
<blockquote class="citation">
<p>
Alternatively, I think we know what condition we are trying to describe, that: the <em>values</em> array can be unambiguously mapped to the containing Field's <em>data</em> array and relevant coordinates.  As this is within the scope of the Field, perhaps we can define the relation there, and for the CellMeasure, simply state that:
</p>
<blockquote>
<p>
<strong>A CellMeasure instance must contain:</strong>
</p>
</blockquote>
<blockquote>
<p>
<strong>* A typed numeric array of metric values</strong>
</p>
</blockquote>
</blockquote>
<p>
OK. So long as we say for each construct that they contain an ordered subset of the domain axes (which I think was dropped from Mark's latest draft), I wonder if we need to mention the propagation along missing axes at all, for any construct. Given that the axes are orthogonal, can it be taken as read? 
</p>
<p>
I'm not sure what is being added by the word "typed", here. Is "numeric" not sufficient?
 
</p>
<blockquote class="citation">
<p>
It is up to a Field to decide whether a CellMeasure is consistent and able to be used.  In principle, any <em>values</em> array is valid for an orphaned CellMeasure, only a Field cares about consistency.
</p>
</blockquote>
<p>
There can be no such thing as an orphaned cell measure construct. A cell measure construct can only exist as part of a field construct, I believe.
</p>
<p>
All the best,
</p>
<p>
David
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9-1386594787000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:9" class="cnum">
    <a href="#comment:9">comment:9</a>
  </span>
        in reply to:
    <a href="#comment:8">↑ 8</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-12-09T05%3A13%3A07-08%3A00&amp;precision=second" title="See timeline at 12/09/13 05:13:07">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:8" title="Comment 8">davidhassell</a>:
</p>
<blockquote class="citation">
<blockquote class="citation">
<p>
Alternatively, I think we know what condition we are trying to describe, that: the <em>values</em> array can be unambiguously mapped to the containing Field's <em>data</em> array and relevant coordinates.  As this is within the scope of the Field, perhaps we can define the relation there, and for the CellMeasure, simply state that:
</p>
<blockquote>
<p>
<strong>A CellMeasure instance must contain:</strong>
</p>
</blockquote>
<blockquote>
<p>
<strong>* A typed numeric array of metric values</strong>
</p>
</blockquote>
</blockquote>
<p>
OK. So long as we say for each construct that they contain an ordered subset of the domain axes (which I think was dropped from Mark's latest draft), I wonder if we need to mention the propagation along missing axes at all, for any construct. Given that the axes are orthogonal, can it be taken as read? 
</p>
</blockquote>
<p>
We need to capture the information on DomainAxis relations with cell measures, no doubt.  My intent with this suggestion is that the necessary details may be captured in one place, perhaps in the Field or DomainAxis description, to avoid repeating text in multiple sections and possible inconsistency.
</p>
<p>
Where I said 'It is up to a Field to decide whether a CellMeasure is consistent and able to be used.' I was suggesting that the scope of this discussion is the responsibility of the Field.  
</p>
<blockquote class="citation">
<p>
There can be no such thing as an orphaned cell measure construct. A cell measure construct can only exist as part of a field construct, I believe.
</p>
</blockquote>
<p>
The term orphaned was not intended to indicate anything important here, I am not advocating change, only trying to indicate the correct scope for this information may lie elsewhere (encapsulation: a CellMeasure does not know about the Field which contains it).
</p>
<p>
I am saying that we will need this definition for CellMeasures, DimCoords, AuxCoords and maybe other things, so lets do it once, right and not repeat ourselves.
</p>
<p>
(A minor detail point: these constructs do not 'contain an ordered set of domain axes' they are referenced by them; I don't think we should use that particular wording, it hints at a relation which I don't think exists.)
</p>
<blockquote class="citation">
<p>
I'm not sure what is being added by the word "typed", here. Is "numeric" not sufficient?
</p>
</blockquote>
<p>
"typed" indicates a specific type of array, for example, Int, Float.  I think it is expected for one data type to exist across the whole values array:
</p>
<blockquote>
<p>
'A numeric array of metric values .... The array must all be of the same data type.'
</p>
</blockquote>
<p>
I thought this information could be fully captured by stating:
</p>
<blockquote>
<p>
'A typed numeric array of metric values.'
</p>
</blockquote>
<p>
I am content with either wording.  
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10-1386624336000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:10" class="cnum">
    <a href="#comment:10">comment:10</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:11" class="follow-up">↓ 11</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-12-09T13%3A25%3A36-08%3A00&amp;precision=second" title="See timeline at 12/09/13 13:25:36">7 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Mark
</p>
<ul><li>I agree with David in preferring "cell measure construct" to "CellMeasure", because it's just ordinary words. It should also be borne in mind that the data model is something we will <em>talk</em> about, not just read about, and you can't use visual markup when speaking. In your current draft you use the word "instance". I'm not happy with this because it's a programming term. One reason for proposing the word "construct" is to make this document independent of programming.
</li><li>I think the definition should go in the field construct section. That was your suggestion originally and I agree with it, so I moved it.
</li><li>As regards the purpose, I mentioned "shape" because it is possible or likely that cell measures might be defined for the geometrical form of the grid, such as angles between gridlines. That hasn't been done yet, although it's been discussed. We could foresee the possibility by including "shape" now, or we could modify the data model later. If we adopt the latter, I propose "A cell measure construct provides information about the size of the cells defined by an ordered list of one or more domain axes of the field." The last part is included because it's important to make clear that the construct does not have to refer to <em>all</em> the domain axes; if you just mention "domain", as in your draft, that is not made clear. I don't think it's right to say "one is commonly used where the defined measure is not inferable from coordinates" because there is no prohibition or recommendation against supplying <tt>cell_measures</tt> even when they are inferable.
</li><li>OK to replace "metric of the space" with "metric of the domain". Thanks.
</li><li>I don't think we need references to properties, because I continue to think that we should not list possible values in the data model. That is a matter for vocabulary, not the conceptual model. I gave one example of the measure property and the units just to make clear what we meant.
</li><li>For the last part, I would say, "A numeric array of metric values whose shape is determined by the relevant subset of the domain axes in the order listed." The relevant subset are the ones mentioned in the description of the purpose of the construct. If we say "numeric", "typed" is implied, isn't it. I think it's OK to omit the implicit propagation, as you and David say.
</li></ul><p>
Best wishes
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11-1386863691000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:11" class="cnum">
    <a href="#comment:11">comment:11</a>
  </span>
        in reply to:
    <a href="#comment:10">↑ 10</a>
        ;
          <span>follow-up:</span>
    <a href="#comment:12" class="follow-up">↓ 12</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-12-12T07%3A54%3A51-08%3A00&amp;precision=second" title="See timeline at 12/12/13 07:54:51">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:10" title="Comment 10">jonathan</a>:
</p>
<blockquote class="citation">
<p>
Dear Mark
</p>
</blockquote>
<blockquote class="citation">
<ul><li>I think the definition should go in the field construct section. That was your suggestion originally and I agree with it, so I moved it.
</li></ul></blockquote>
<p>
I'm not sure about this, but I'm happy to consider further.  Please may we leave the text it here for now and decide its proper home when we come the the field construct section?
</p>
<blockquote class="citation">
<ul><li>As regards the purpose, I mentioned "shape" because it is possible or likely that cell measures might be defined for the geometrical form of the grid, such as angles between gridlines. That hasn't been done yet, although it's been discussed. We could foresee the possibility by including "shape" now, or we could modify the data model later. 
</li></ul></blockquote>
<p>
I think we should leave this alone for now
</p>
<blockquote class="citation">
<p>
If we adopt the latter, I propose "A cell measure construct provides information about the size of the cells defined by an ordered list of one or more domain axes of the field." The last part is included because it's important to make clear that the construct does not have to refer to <em>all</em> the domain axes; if you just mention "domain", as in your draft, that is not made clear. 
</p>
</blockquote>
<p>
ok
</p>
<blockquote class="citation">
<p>
I don't think it's right to say "one is commonly used where the defined measure is not inferable from coordinates" because there is no prohibition or recommendation against supplying <tt>cell_measures</tt> even when they are inferable.
</p>
</blockquote>
<p>
My point is not about whether it is prohibited in cases where inference may be made.  Instead I thought to indicate that where a cell measure is supplied, it should be used in preference to any inferred or calculated quantity.  I have strengthened this statement, to be clear.
</p>
<blockquote>
<p>
<em>Where provided, the measure should be used in preference to calculating such a measure from other information.</em>
</p>
</blockquote>
<p>
I think this is the message we want to provide to data interpreters.
</p>
<blockquote class="citation">
<ul><li>I don't think we need references to properties, because I continue to think that we should not list possible values in the data model. That is a matter for vocabulary, not the conceptual model. I gave one example of the measure property and the units just to make clear what we meant.
</li></ul></blockquote>
<p>
I think we have to reference the controlled vocabularies somehow from within the model, they are the keystone of CF.  
</p>
<p>
Are you concerned about listing the recognised <em>names</em> of the properties (e.g. <em>measure</em>) or the allowable values (e.g. <em>area</em>)?
</p>
<p>
Perhaps we can leave these references in brackets just for now, and move onto properties, which I believe should help us shake out most of these details.
</p>
<blockquote class="citation">
<ul><li>For the last part, I would say, "A numeric array of metric values whose shape is determined by the relevant subset of the domain axes in the order listed." The relevant subset are the ones mentioned in the description of the purpose of the construct. 
</li></ul></blockquote>
<p>
I have put this in; I will continue to ponder whether we will be able to remove this later as a result of carefully chosen text for domain axes, fields etc.
</p>
<blockquote class="citation">
<p>
If we say "numeric", "typed" is implied, isn't it. 
</p>
</blockquote>
<p>
I don't think it is, there are multiple types of numeric, such as int, float (and more in some implementations).  The array must have a specified type and not have it vary across its elements, I believe.
</p>
<p>
mark
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12-1386943242000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:12" class="cnum">
    <a href="#comment:12">comment:12</a>
  </span>
        in reply to:
    <a href="#comment:11">↑ 11</a>
        ;
          <span>follow-up:</span>
    <a href="#comment:13" class="follow-up">↓ 13</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-12-13T06%3A00%3A42-08%3A00&amp;precision=second" title="See timeline at 12/13/13 06:00:42">7 years ago</a> by davidhassell
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:11" title="Comment 11">markh</a>:
</p>
<p>
Dear mark
</p>
<blockquote class="citation">
<blockquote class="citation">
<ul><li>As regards the purpose, I mentioned "shape" because it is possible or likely that cell measures might be defined for the geometrical form of the grid, such as angles between gridlines. That hasn't been done yet, although it's been discussed. We could foresee the possibility by including "shape" now, or we could modify the data model later. 
</li></ul></blockquote>
<p>
I think we should leave this alone for now
</p>
</blockquote>
<p>
I don't think we can. The conventions (7.2) explicitly say that cell measures are for "size, shape or location of the cells" and that what is recognised is a matter for a controlled vocabulary This should be reflected in the data model.
</p>
<blockquote class="citation">
<p>
My point is not about whether it is prohibited in cases where inference may be made.  Instead I thought to indicate that where a cell measure is supplied, it should be used in preference to any inferred or calculated quantity.  I have strengthened this statement, to be clear.
</p>
</blockquote>
<blockquote class="citation">
<blockquote>
<p>
<em>Where provided, the measure should be used in preference to calculating such a measure from other information.</em>
</p>
</blockquote>
<p>
I think this is the message we want to provide to data interpreters.
</p>
</blockquote>
<p>
No rules of precedence are stated in the conventions, so I don't think that we should create some for the data model.
</p>
<blockquote class="citation">
<blockquote class="citation">
<p>
If we say "numeric", "typed" is implied, isn't it. 
</p>
</blockquote>
<p>
I don't think it is, there are multiple types of numeric, such as int, float (and more in some implementations).  The array must have a specified type and not have it vary across its elements, I believe.
</p>
</blockquote>
<p>
This is a bit too implementation-specific for me. Why can't an array be conceptually a mixture of floats and integers?
</p>
<p>
All the best,
</p>
<p>
David
</p>

    </div>

              </div>
              <div class="change" id="trac-change-13-1387210684000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:13" class="cnum">
    <a href="#comment:13">comment:13</a>
  </span>
        in reply to:
    <a href="#comment:12">↑ 12</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-12-16T08%3A18%3A04-08%3A00&amp;precision=second" title="See timeline at 12/16/13 08:18:04">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:12" title="Comment 12">davidhassell</a>:
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote class="citation">
<ul><li>As regards the purpose, I mentioned "shape" because it is possible or likely that cell measures might be defined for the geometrical form of the grid, such as angles between gridlines. That hasn't been done yet, although it's been discussed. We could foresee the possibility by including "shape" now, or we could modify the data model later. 
</li></ul></blockquote>
<p>
I think we should leave this alone for now
</p>
</blockquote>
<p>
I don't think we can. The conventions (7.2) explicitly say that cell measures are for "size, shape or location of the cells" and that what is recognised is a matter for a controlled vocabulary This should be reflected in the data model.
</p>
</blockquote>
<p>
OK, let's leave it in then.
</p>
<blockquote class="citation">
<blockquote class="citation">
<p>
My point is not about whether it is prohibited in cases where inference may be made.  Instead I thought to indicate that where a cell measure is supplied, it should be used in preference to any inferred or calculated quantity.  I have strengthened this statement, to be clear.
</p>
</blockquote>
<blockquote class="citation">
<blockquote>
<p>
<em>Where provided, the measure should be used in preference to calculating such a measure from other information.</em>
</p>
</blockquote>
<p>
I think this is the message we want to provide to data interpreters.
</p>
</blockquote>
<p>
No rules of precedence are stated in the conventions, so I don't think that we should create some for the data model.
</p>
</blockquote>
<p>
They are pretty strongly hinted at.  7.2 (cf-netcdf) has a number of uses of language such as 'that cannot be deduced from the coordinates and bounds without special knowledge'; 'In many cases the areas can be calculated from the cell bounds, but there are exceptions'
</p>
<p>
This gives a strong indication that cell metrics may be inferred, but cell_measures are used where inference is a bad idea, not recommended by data producers.  I assumed we wanted to say this more clearly, but I think it is said.  The term 'precedence' is not used, and perhaps it shouldn't be, but I think some statement about use of cell_measures to replace potentially calculated quantities is required: it is what they are for, it seems to me.
</p>
<p>
 
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote class="citation">
<p>
If we say "numeric", "typed" is implied, isn't it. 
</p>
</blockquote>
<p>
I don't think it is, there are multiple types of numeric, such as int, float (and more in some implementations).  The array must have a specified type and not have it vary across its elements, I believe.
</p>
</blockquote>
<p>
This is a bit too implementation-specific for me. Why can't an array be conceptually a mixture of floats and integers?
</p>
</blockquote>
<p>
If you are all happy with this, then we can manage with it, but type was explicitly mentioned in all the previous text and seems important to me.  
</p>
<p>
I would say that numeric does not imply typed. I would also say that there are two statements here: 1. the array should be of one type; 2. that type must be numeric.  I haven't advocated mentioning lists of types in the model text, so it doesn't feel implementation specific to me.
</p>
<p>
I had thought that this was the intent of the initial proposal:
</p>
<blockquote>
<p>
<em>A numeric array of metric values ... The array must all be of the same data type.</em>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-14-1389288590000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:14" class="cnum">
    <a href="#comment:14">comment:14</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-01-09T09%3A29%3A50-08%3A00&amp;precision=second" title="See timeline at 01/09/14 09:29:50">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I feel that the conversation about CellMeasures is nearly concluded.
</p>
<p>
I'd like to suggest we move onto <strong>properties</strong>.  There is <a class="wiki" href="/trac/wiki/Ticket107Text9Nov13Properties">suggested text</a> proposed.
</p>
<p>
I have a starting question, linked to the <a class="ext-link" href="https://cf-pcmdi.llnl.gov./107#comment:10"><span class="icon">​</span>statement</a>:
</p>
<blockquote>
<p>
I don't think we need references to properties, because I continue to think that we should not list possible values in the data model. That is a matter for vocabulary, not the conceptual model.
</p>
</blockquote>
<p>
I would like to understand this statement some more. The data model must reference the controlled vocabularies in some way, it is key to the data model that it uses vocabularies correctly.
</p>
<p>
I can understand the <em>listing possible values</em> leads to far too much text, so I am interested in how we may effectively make the assertion that a particular controlled vocabulary must be used correctly within the data model and how we should reference that vocabulary.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-15-1390482917000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:15" class="cnum">
    <a href="#comment:15">comment:15</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:16" class="follow-up">↓ 16</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-01-23T05%3A15%3A17-08%3A00&amp;precision=second" title="See timeline at 01/23/14 05:15:17">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I would like to raise a concern regarding the proposed text for <a class="wiki" href="/trac/wiki/Ticket107Text9Nov13Properties">properties</a>.
</p>
<p>
There is explicit mention of:
</p>
<ul><li>Conventions
</li><li>history
</li><li>title
</li><li>featureType
</li></ul><p>
as property names valid for Field instances.
</p>
<p>
The CF-NetCDF conventions describe these as file attributes, not valid for individual data variables, in <a class="ext-link" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/apa.html"><span class="icon">​</span>Appendix A</a>. 
</p>
<p>
I can see how featureType and Conventions could be treated as spanning across data variables, and the 'file only' constraint for NetCDF files being a logical extension of how CF instances are encode in NetCDF.  As such I am not concerned by these two.
</p>
<p>
However, the use of history and title is inherited from the <a class="ext-link" href="http://www.unidata.ucar.edu/software/netcdf/docs/netcdf.html#Attribute-Conventions"><span class="icon">​</span>NUG</a> and their use is heavily linked to files, collections of Fields.
</p>
<p>
As the data model does not have a sense of 'a collection of fields' I suggest that these are removed from the data model and put into the list of reserved property names, not to be used except in NetCDF files.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-16-1390581476000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:16" class="cnum">
    <a href="#comment:16">comment:16</a>
  </span>
        in reply to:
    <a href="#comment:15">↑ 15</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-01-24T08%3A37%3A56-08%3A00&amp;precision=second" title="See timeline at 01/24/14 08:37:56">7 years ago</a> by davidhassell
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:15" title="Comment 15">markh</a>:
</p>
<p>
After the discussions in <a class="new ticket" href="./95.html" title="task: Development of CF 1.5 Data Model (new)">#95</a>, I think it was agreed that these attributes do apply to every data variable in the file, although <em>how</em> they apply had varying interpretations and was not resolved.
</p>
<p>
So in that light, I think that they ok to be mentioned.
</p>
<p>
All the best,
</p>
<p>
David
</p>
<p>
 
</p>
<blockquote class="citation">
<p>
I would like to raise a concern regarding the proposed text for <a class="wiki" href="/trac/wiki/Ticket107Text9Nov13Properties">properties</a>.
</p>
<p>
There is explicit mention of:
</p>
<ul><li>Conventions
</li><li>history
</li><li>title
</li><li>featureType
</li></ul><p>
as property names valid for Field instances.
</p>
<p>
The CF-NetCDF conventions describe these as file attributes, not valid for individual data variables, in <a class="ext-link" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/apa.html"><span class="icon">​</span>Appendix A</a>. 
</p>
<p>
I can see how featureType and Conventions could be treated as spanning across data variables, and the 'file only' constraint for NetCDF files being a logical extension of how CF instances are encode in NetCDF.  As such I am not concerned by these two.
</p>
<p>
However, the use of history and title is inherited from the <a class="ext-link" href="http://www.unidata.ucar.edu/software/netcdf/docs/netcdf.html#Attribute-Conventions"><span class="icon">​</span>NUG</a> and their use is heavily linked to files, collections of Fields.
</p>
<p>
As the data model does not have a sense of 'a collection of fields' I suggest that these are removed from the data model and put into the list of reserved property names, not to be used except in NetCDF files.
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-17-1391446906000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:17" class="cnum">
    <a href="#comment:17">comment:17</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:18" class="follow-up">↓ 18</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-03T09%3A01%3A46-08%3A00&amp;precision=second" title="See timeline at 02/03/14 09:01:46">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I have a set of questions regarding the proposed text for <a class="wiki" href="/trac/wiki/Ticket107Text9Nov13Transforms">transforms</a>
</p>
<p>
<a class="closed ticket" href="./70.html" title="enhancement: Connecting coordinates to Grid Mapping variables (closed: fixed)">#70</a> contains an approved change which will be incorporated into CF1.7 enabling coordinates to be explicitly linked to particular grid_mapping attributes in a file.  This facility is not supported by the description of transforms proposed above.
</p>
<p>
I think that we have two types of information represented here.
</p>
<ol><li>We have coordinate reference systems which individual coordinates may be defined with respect to.
</li><li>We have coordinates which may be derived from other coordinates and additional information.
</li></ol><p>
I wonder whether we can address case 2 by providing a derived coordinate type: rather than focusing on the action and having a transform type, we focus on the goal, the coordinate.
</p>
<p>
Case 1 may then be addressed by providing a coordinate reference system type whose sole job is to give context to the horizontal spatial coordinate, just like a calendar definition does for a time coordinate.
</p>
<p>
grid_mapping attributes from CF1.5 and before were provided to enable the relationship between coordinate variables and <a class="ext-link" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/ch05s06.html"><span class="icon">​</span>true latitude and longitude coordinates</a>.  As CF-NetCDF also mandates that latitude and longitude coordinates must be supplied, this information is being duplicated (for good reason, I am not questioning the utility of this approach).
</p>
<p>
In this context singular grid_mapping attributes, as in CF1.5, are transforms, or derived coordinates, depending on your point of view, providing latitude and longitude coordinate derivations; these coordinates happen to exist explicitly in netCDF files, for convenience. The singular grid_mapping attribute is also a coordinate reference system definition for the axis=X and axis=Y coordinates of the data variable.
</p>
<p>
CF1.7 introduces a richer syntax, but it does not change the core semantics, that we would like to define horizontal spatial coordinates with respect to a coordinate reference system.
</p>
<p>
Use of the CF1.7 (<a class="closed ticket" href="./70.html" title="enhancement: Connecting coordinates to Grid Mapping variables (closed: fixed)">#70</a>) syntax does not imply derived coordinates, in my opinion, it is a clear signal that only case 1 applies.
</p>
<p>
Does this approach make logical sense?
</p>

    </div>

              </div>
              <div class="change" id="trac-change-18-1391594176000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:18" class="cnum">
    <a href="#comment:18">comment:18</a>
  </span>
        in reply to:
    <a href="#comment:17">↑ 17</a>
        ;
          <span>follow-up:</span>
    <a href="#comment:19" class="follow-up">↓ 19</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-05T01%3A56%3A16-08%3A00&amp;precision=second" title="See timeline at 02/05/14 01:56:16">7 years ago</a> by davidhassell
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:17" title="Comment 17">markh</a>:
</p>
<p>
Dear Mark,
</p>
<blockquote class="citation">
<p>
I have a set of questions regarding the proposed text for <a class="wiki" href="/trac/wiki/Ticket107Text9Nov13Transforms">transforms</a>
</p>
</blockquote>
<blockquote class="citation">
<p>
<a class="closed ticket" href="./70.html" title="enhancement: Connecting coordinates to Grid Mapping variables (closed: fixed)">#70</a> contains an approved change which will be incorporated into CF1.7 enabling coordinates to be explicitly linked to particular grid_mapping attributes in a file.  This facility is not supported by the description of transforms proposed above.
</p>
</blockquote>
<p>
It would be useful to know why you think this facility is not supported, as I think that it is. I have editted <a class="wiki" href="/trac/wiki/Ticket107Text9Nov13Transforms">the description of transforms</a> to include the first line of the description which didn't make it across from ticket <a class="new ticket" href="./95.html" title="task: Development of CF 1.5 Data Model (new)">#95</a>, namely:
</p>
<blockquote>
<p>
A transform construct defines a mapping from one set of coordinates which can not geo-locate the field construct's data to another set of coordinates that can geo-locate the field construct's data.
</p>
</blockquote>
<p>
Here is the CDL example from ticket <a class="closed ticket" href="./70.html" title="enhancement: Connecting coordinates to Grid Mapping variables (closed: fixed)">#70</a> (multiple grid mappings), with a description of how it would be stored by the proposed Field construct:
</p>
<pre class="wiki">    double x(x) ;
      x:standard_name = "projection_x_coordinate" ;
    double y(y) ;
      y:standard_name = "projection_y_coordinate" ;
    double z(z) ;
      z:standard_name = "height_above_reference_ellipsoid" ;
    double lat(y, x) ;
      lat:standard_name = "latitude" ;
    double lon(y, x) ;
      lon:standard_name = "longitude" ;
    float temp(z, y, x) ;
      temp:standard_name = "air_temperature" ;
      temp:coordinates = "lat lon" ;
      temp:grid_mapping = "crsOSGB: x y crsWGS84: lat lon" ;
    int crsOSGB ;
      crsOSGB:grid_mapping_name = "transverse_mercator";
      crsOSGB:semi_major_axis = 6377563.396 ;
      crsOSGB:inverse_flattening = 299.3249646 ;
      crsOSGB:longitude_of_prime_meridian = 0.0 ;
      crsOSGB:latitude_of_projection_origin = 49.0 ;
      crsOSGB:longitude_of_central_meridian = -2.0 ;
      crsOSGB:scale_factor_at_central_meridian = 0.9996012717 ;
      crsOSGB:false_easting = 400000.0 ;
      crsOSGB:false_northing = -100000.0 ;
      crsOSGB:unit = "metre" ;
    int crsWGS84 ;
      crsWGS84:grid_mapping_name = "latitude_longitude";
      crsWGS84:longitude_of_prime_meridian = 0.0 ;
      crsWGS84:semi_major_axis = 6378137.0 ;
      crsWGS84:inverse_flattening = 298.257223563
</pre><p>
Field contains:
</p>
<ul><li><em>Dimension Coordinates</em>: x, y
</li><li><em>Auxiliary Coordinates</em>: lat, lon
</li><li><em>Transforms</em>           : transform_crsOSGB, transform_crsWGS84
</li></ul><p>
where the transforms contain:
</p>
<p>
transform_crsOSGB:
</p>
<ul><li><em>NAME</em>: "transverse_mercator"
</li><li><em>semi_major_axis</em>: 6377563.396 
</li><li><em>inverse_flattening</em>; 299.3249646 
</li><li><em>longitude_of_prime_meridian</em>: 0.0 
</li><li><em>latitude_of_projection_origin</em>: 49.0 
</li><li><em>longitude_of_central_meridian</em>: -2.0 
</li><li><em>scale_factor_at_central_meridian</em>: 0.9996012717 
</li><li><em>false_easting</em>: 400000.0 
</li><li><em>false_northing</em>: -100000.0 
</li><li><em>unit</em>: "metre" 
</li><li><em>INPUT COORDINATES</em>: x, y
</li></ul><p>
transform_crsWGS84:
</p>
<ul><li><em>NAME</em>: "latitude_longitude"
</li><li><em>longitude_of_prime_meridian</em>: 0
</li><li><em>semi_major_axis</em>: 6378137.0
</li><li><em>inverse_flattening</em>: 298.257223563
</li><li><em>INPUT COORDINATES</em>: lat, lon
</li></ul><p>
  
</p>
<p>
So, transform_crsOSGB defines a mapping from coordinates <strong>x</strong> and <strong>y</strong> to latitude-longitude coordinates on a particularly shaped earth; and transform_crsWGS84 defines a mapping from coordinates <strong>lat</strong> and <strong>lon</strong> to latitude-longitude coordinates on a different particularly shaped earth.
</p>
<p>
All the best,
</p>
<p>
David
</p>

    </div>

              </div>
              <div class="change" id="trac-change-19-1391614944000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:19" class="cnum">
    <a href="#comment:19">comment:19</a>
  </span>
        in reply to:
    <a href="#comment:18">↑ 18</a>
        ;
          <span>follow-up:</span>
    <a href="#comment:20" class="follow-up">↓ 20</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-05T07%3A42%3A24-08%3A00&amp;precision=second" title="See timeline at 02/05/14 07:42:24">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:18" title="Comment 18">davidhassell</a>:
</p>
<blockquote class="citation">
<p>
So, transform_crsOSGB defines a mapping from coordinates <strong>x</strong> and <strong>y</strong> to latitude-longitude coordinates on a particularly shaped earth; and transform_crsWGS84 defines a mapping from coordinates <strong>lat</strong> and <strong>lon</strong> to latitude-longitude coordinates on a different particularly shaped earth.
</p>
</blockquote>
<p>
crsOSGB and crsWGS84 do a lot more than define a transform. They define a coordinate reference system that coordinates are defined with respect to.  This is fundamental and far more powerful than defining a transformation, it provides a well recognised definition of what the coordinate means.
</p>
<p>
A transformation, a derived coordinate, is a useful by-product of the definition of a coordinate reference system, but it is only a by-product.
</p>
<p>
I think this has been implicit in CF for a long time, but with CF-NetCDF1.7 it becomes clear and explicit. I would like it clearly represented in the data model.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-20-1391621993000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:20" class="cnum">
    <a href="#comment:20">comment:20</a>
  </span>
        in reply to:
    <a href="#comment:19">↑ 19</a>
        ;
          <span>follow-up:</span>
    <a href="#comment:21" class="follow-up">↓ 21</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-05T09%3A39%3A53-08%3A00&amp;precision=second" title="See timeline at 02/05/14 09:39:53">7 years ago</a> by davidhassell
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:19" title="Comment 19">markh</a>:
</p>
<p>
Dear Mark,
</p>
<blockquote class="citation">
<p>
Replying to <a class="ticket" href="./107#comment:18" title="Comment 18">davidhassell</a>:
</p>
<blockquote class="citation">
<p>
So, transform_crsOSGB defines a mapping from coordinates <strong>x</strong> and <strong>y</strong> to latitude-longitude coordinates on a particularly shaped earth; and transform_crsWGS84 defines a mapping from coordinates <strong>lat</strong> and <strong>lon</strong> to latitude-longitude coordinates on a different particularly shaped earth.
</p>
</blockquote>
<p>
crsOSGB and crsWGS84 do a lot more than define a transform. They define a coordinate reference system that coordinates are defined with respect to.  This is fundamental and far more powerful than defining a transformation, it provides a well recognised definition of what the coordinate means.
</p>
</blockquote>
<p>
The way I see it, the purpose of a coordinate construct is to geo-locate the data. If it contains enough metadata for its array values to do this, then that is fine. If not then a transform construct provides the extra information needed by the coordinate construct to do that geo-location. Is this different to your coordinate reference system?
</p>
<p>
Perhaps the name "transform construct" is troublesome. If I recall correctly (?), we chose it because its practical purpose in the conventions is to record how one set of coordinates may be <em>transformed</em> into another set of (possibly more meaningful) coordinates. Note that whether the latter set exists, or not, is immaterial to the data model, as is the domain of the transformation (horizontal (grid_mapping), vertical (formula_terms), or anything else). 
</p>
<p>
All the best,
</p>
<p>
David
</p>

    </div>

              </div>
              <div class="change" id="trac-change-21-1391780970000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:21" class="cnum">
    <a href="#comment:21">comment:21</a>
  </span>
        in reply to:
    <a href="#comment:20">↑ 20</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-07T05%3A49%3A30-08%3A00&amp;precision=second" title="See timeline at 02/07/14 05:49:30">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:20" title="Comment 20">davidhassell</a>:
</p>
<p>
 
</p>
<blockquote class="citation">
<p>
The way I see it, the purpose of a coordinate construct is to geo-locate the data. If it contains enough metadata for its array values to do this, then that is fine. 
</p>
</blockquote>
<p>
I don't think a horizontal spatial coordinate will ever contain enough metadata to geo-locate itself accurately without a coordinate reference system. It is the CRS that provides the geolocation for coordinate value.
</p>
<blockquote class="citation">
<p>
If not then a transform construct provides the extra information needed by the coordinate construct to do that geo-location. Is this different to your coordinate reference system?
</p>
</blockquote>
<p>
The coordinate reference system is for geolocation, yes.
</p>
<blockquote class="citation">
<p>
Perhaps the name "transform construct" is troublesome. If I recall correctly (?), we chose it because its practical purpose in the conventions is to record how one set of coordinates may be <em>transformed</em> into another set of (possibly more meaningful) coordinates. Note that whether the latter set exists, or not, is immaterial to the data model, as is the domain of the transformation (horizontal (grid_mapping), vertical (formula_terms), or anything else). 
</p>
</blockquote>
<p>
To me transformation is one of many practical purposes of accurate geolocation.  Another example might be calculating the distance between locations on the geoid.  
</p>
<p>
Early CF focussed on one particular use case, that of providing explicit latitude longitude coordinates where the coordinate variables are not.  This is useful, no doubt, but it is one of many cases.
</p>
<p>
So, whilst I can see the similarity between this case and the parameterised vertical coordinate, with both providing a derived coordinate (or two) as an output, I am not comfortable with all coordinate reference system use cases being handled this way. 
</p>
<p>
I think it helps clarity to have the CRS as an explicit type in the data model and to handle derived coordinates, be they vertical or horizontal, as a separate type.
</p>
<p>
There's no problem with CF-NetCDF having a particular method of encoding this which is sensitive to its historical development.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-22-1391782488000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:22" class="cnum">
    <a href="#comment:22">comment:22</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-07T06%3A14%3A48-08%3A00&amp;precision=second" title="See timeline at 02/07/14 06:14:48">7 years ago</a> by jonblower
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I haven't followed this conversation in detail so hopefully I'm not repeating something. In general, I think it's a good idea to separate the concept of a transform from the concept of a coordinate reference system. I think CF should allow the serialization of CRSs, but not necessarily transforms.
</p>
<p>
My view is coloured by how the Java library Geotoolkit addresses this, which I think works well. A transform is just a function that does not need to know anything about georeferencing - it just takes input values and produces output values. It can be derived from two CRSs (e.g. <a class="ext-link" href="http://www.geotoolkit.org/apidocs/org/geotoolkit/referencing/CRS.html#findMathTransform%28org.opengis.referencing.crs.CoordinateReferenceSystem,%20org.opengis.referencing.crs.CoordinateReferenceSystem%29"><span class="icon">​</span>like this</a>) or by other means.
</p>
<p>
The point is that a transform between two CRSs may not always exist in a readily-serializable mathematical form. Different applications may be happy with different levels of precision in transforms (e.g. sometimes the datum shift is ignored).
</p>
<p>
In short: I would suggest recording the CRS in CF-NetCDF files, but letting applications find the transformation between CRSs. In fact, I think the examples above do describe a CRS, not a transform.
</p>
<p>
(The <a class="ext-link" href="http://www.geoapi.org/snapshot/pending/org/opengis/referencing/operation/MathTransformFactory.html"><span class="icon">​</span>Javadoc for MathTransformFactory</a> has some more info.)
</p>

    </div>

              </div>
              <div class="change" id="trac-change-23-1391786764000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:23" class="cnum">
    <a href="#comment:23">comment:23</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-07T07%3A26%3A04-08%3A00&amp;precision=second" title="See timeline at 02/07/14 07:26:04">7 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Jon said, "...a transform between two CRSs may not always exist in a readily-serializable mathematical form."  In fact, sometimes <strong>no</strong> transform exists.  CRS transforms are a complicated mess.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-24-1391798184000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:24" class="cnum">
    <a href="#comment:24">comment:24</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-07T10%3A36%3A24-08%3A00&amp;precision=second" title="See timeline at 02/07/14 10:36:24">7 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear all
</p>
<p>
The purpose of the CF data model is to describe the CF convention in logical terms. In this case, that means describing what <tt>grid_mapping</tt> does in CF. CF does not have a concept of coordinate reference system as such, but it does have some rather well-defined metadata for grid mapping. So I think we should focus on describing that.
</p>
<p>
I would be interested to know who would be willing to discuss the remaining aspects of the text of the CF data model by teleconference(s). That's not to hide the discussion from everyone else, but because I think it would be a lot more efficient to talk rather than write. The exchanges above (still not concluded) about <tt>cell_measures</tt> show that it's quite detailed. If we could decide most things by talking and then write down the result on the ticket, others could comment if they disagree, so it would not exclude broader participation in reaching a conclusion.
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-25-1391980555000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:25" class="cnum">
    <a href="#comment:25">comment:25</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-09T13%3A15%3A55-08%3A00&amp;precision=second" title="See timeline at 02/09/14 13:15:55">7 years ago</a> by jonblower
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Jonathan,
</p>
<p>
What in your view is the difference between a grid_mapping and a CRS? I've always been a bit confused by the term "mapping" because, in my view, it doesn't describe a mapping but a reference system (what is the "mapping" supposed to be from and to?). I'm not suggesting that the CF data model should describe something that is not already in CF, but I might suggest that a more accurate name might be helpful, and may save some of the confusion between transformations and references.
</p>
<p>
(I might be wrong on the above - I can't check the CF document at the moment because the website is down, so I'm acting on my memory of what the grid_mapping is.)
</p>
<p>
Jon
</p>

    </div>

              </div>
              <div class="change" id="trac-change-26-1392109595000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:26" class="cnum">
    <a href="#comment:26">comment:26</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:28" class="follow-up">↓ 28</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-11T01%3A06%3A35-08%3A00&amp;precision=second" title="See timeline at 02/11/14 01:06:35">7 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Jon
</p>
<p>
The <tt>grid_mapping</tt> is so-called because of its original purpose, which is still its main purpose, of providing the mapping between 2D curvilinear (longitude, latitude) coordinates and the two horizontal dimensions of the grid (map projection coordinates or rotated lon-lat). We don't have to call it <tt>grid_mapping</tt> in the CF data model and indeed David and I proposed to call it <tt>transform</tt> instead, partly because we want to include <tt>formula_terms</tt> too.
</p>
<p>
Best wishes
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-27-1392109840000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:27" class="cnum">
    <a href="#comment:27">comment:27</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-11T01%3A10%3A40-08%3A00&amp;precision=second" title="See timeline at 02/11/14 01:10:40">7 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Perhaps I could reduce the scope of my last question:
</p>
<p>
Is there anyone, apart from Mark (I presume), David and me, who would be interested to discuss the remaining issues about the CF data model <em>except</em> transforms, by teleconference, and (if we can) bring an agreed text back to this ticket? Transforms (<tt>grid_mapping</tt> and <tt>formula_terms</tt>) are more complicated than the other parts, and it would be nice to have agreed the text for everything else, I feel.
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-28-1392283888000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:28" class="cnum">
    <a href="#comment:28">comment:28</a>
  </span>
        in reply to:
    <a href="#comment:26">↑ 26</a>
        ;
          <span>follow-up:</span>
    <a href="#comment:29" class="follow-up">↓ 29</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-13T01%3A31%3A28-08%3A00&amp;precision=second" title="See timeline at 02/13/14 01:31:28">7 years ago</a> by jonblower
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:26" title="Comment 26">jonathan</a>:
 
</p>
<blockquote class="citation">
<p>
The <tt>grid_mapping</tt> is so-called because of its original purpose, which is still its main purpose, of providing the mapping between 2D curvilinear (longitude, latitude) coordinates and the two horizontal dimensions of the grid (map projection coordinates or rotated lon-lat).
</p>
</blockquote>
<p>
Hi Jonathan - To my understanding it is the "coordinates" attribute that points to the curvilinear coordinates. The "grid_mapping" attribute points to something that looks like the definition of a projection (roughly speaking, the mathematical origins of the curvilinear coordinates, not the coordinates themselves), although we also use it for things that aren't projections, like rotated-pole CRSs.
</p>
<p>
I wasn't keen on the idea of using "transform" because mostly one is not describing the transformation but a reference system. E.g. See the British National Grid example in the CF document. This (correctly) just describes the basis of the coordinate system but does not describe how to transform it to other systems.
</p>
<p>
My view is that CRS is the most generic name for these descriptions and might be the most appropriate term to use in a data model.
</p>
<p>
(This does not preclude, of course, the cases in which you really do have a transformation, but these are generally fairly complicated and hard to serialize and, as Jim says above, may not exist at all.)
</p>
<p>
Best wishes,
on
</p>

    </div>

              </div>
              <div class="change" id="trac-change-29-1392284078000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:29" class="cnum">
    <a href="#comment:29">comment:29</a>
  </span>
        in reply to:
    <a href="#comment:28">↑ 28</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-13T01%3A34%3A38-08%3A00&amp;precision=second" title="See timeline at 02/13/14 01:34:38">7 years ago</a> by jonblower
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:28" title="Comment 28">jonblower</a>:
</p>
<blockquote class="citation">
<p>
Best wishes,
on
</p>
</blockquote>
<p>
Er, *Jon* ;-)
</p>

    </div>

              </div>
              <div class="change" id="trac-change-30-1392655715000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:30" class="cnum">
    <a href="#comment:30">comment:30</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-17T08%3A48%3A35-08%3A00&amp;precision=second" title="See timeline at 02/17/14 08:48:35">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I have <a class="wiki" href="/trac/wiki/markhDataModelDraft">drafted some text</a> which we may be able to use or adapt to describe CRSs and derived coordinates for the data model.
</p>
<p>
I have tried to differentiate between the two different uses for <tt>grid_mapping</tt> within netCDF.
</p>
<p>
Does this aid clarity?
</p>
<p>
mark
</p>

    </div>

              </div>
              <div class="change" id="trac-change-31-1392732582000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:31" class="cnum">
    <a href="#comment:31">comment:31</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:32" class="follow-up">↓ 32</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-18T06%3A09%3A42-08%3A00&amp;precision=second" title="See timeline at 02/18/14 06:09:42">7 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Mark,
</p>
<p>
I may have missed a lot as I have followed this stream.  I don't see where the grid_mapping variable ever comes into play in relation to derived coordinates.
</p>
<p>
Jim
</p>

    </div>

              </div>
              <div class="change" id="trac-change-32-1392736481000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:32" class="cnum">
    <a href="#comment:32">comment:32</a>
  </span>
        in reply to:
    <a href="#comment:31">↑ 31</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-18T07%3A14%3A41-08%3A00&amp;precision=second" title="See timeline at 02/18/14 07:14:41">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:31" title="Comment 31">biard</a>:
</p>
<blockquote class="citation">
<p>
Mark,
</p>
<p>
I may have missed a lot as I have followed this stream.  I don't see where the grid_mapping variable ever comes into play in relation to derived coordinates.
</p>
<p>
Jim
</p>
</blockquote>
<p>
I am not sure about this either.  
</p>
<p>
The place where I thought it might be relevant is linked to the description of the <a class="ext-link" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/ch05s06.html"><span class="icon">​</span>grid_mapping attribute's aim</a>: <tt>that the true latitude and longitude coordinates be supplied</tt>.
</p>
<p>
This requirement can be delivered in some situations by a pair of derived coordinates linked to the coordinate variables of the data.  This isn't so helpful for NetCDF files but could be useful in the more general description.
</p>
<p>
I think it would be plausible to remove all mention of grid_mapping from a derived coordinate description; perhaps it would be clearer, my explanation of this case seems a little contrived to me now.
</p>
<p>
thank you
mark
</p>

    </div>

              </div>
              <div class="change" id="trac-change-33-1392798855000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:33" class="cnum">
    <a href="#comment:33">comment:33</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-19T00%3A34%3A15-08%3A00&amp;precision=second" title="See timeline at 02/19/14 00:34:15">7 years ago</a> by jonblower
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hi Mark, Jim,
</p>
<p>
My reading of the standard is that <tt>grid_mapping</tt> points to something that looks like a CRS definition, and the "true latitude and longitude" coordinates are supplied by the <tt>coordinates</tt> attribute. Even though it's redundant, both of these may be used for the convenience of clients.
</p>
<p>
I'm not sure what is meant in Mark's document by a "derived" coordinate. This seems to be an association of coordinates in one CRS with a defined formula to transform into another one. I would argue that vertical sigma coordinates <strong>do</strong> fall into this definition, but horizontal coordinates <strong>do not</strong>, because CF does not (currently) supply the formula to translate to another system (it describes the CRS instead, which is different, leaving the application to figure out the transformation).
</p>
<p>
Cheers,
Jon
</p>

    </div>

              </div>
              <div class="change" id="trac-change-34-1392807699000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:34" class="cnum">
    <a href="#comment:34">comment:34</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-19T03%3A01%3A39-08%3A00&amp;precision=second" title="See timeline at 02/19/14 03:01:39">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I think Jon and Jim's perspectives are clear and helpful.
</p>
<p>
I have updated the <a class="wiki" href="/trac/wiki/markhDataModelDraft">draft</a> crossing out these sections
</p>

    </div>

              </div>
              <div class="change" id="trac-change-35-1392808029000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:35" class="cnum">
    <a href="#comment:35">comment:35</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:36" class="follow-up">↓ 36</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-19T03%3A07%3A09-08%3A00&amp;precision=second" title="See timeline at 02/19/14 03:07:09">7 years ago</a> by jonblower
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Thanks Mark, that looks good to me. A minor semantic point that I wasn't sure about - you say "<strong>Where</strong> the grid_mapping attribute does not define explicit references between coordinates and a CRS..." do you mean "While"?
</p>
<p>
I'm trying to get whether the the explicit references <em>may or may not </em>appear, or whether they <em>never</em> appear.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-36-1392812153000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:36" class="cnum">
    <a href="#comment:36">comment:36</a>
  </span>
        in reply to:
    <a href="#comment:35">↑ 35</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-19T04%3A15%3A53-08%3A00&amp;precision=second" title="See timeline at 02/19/14 04:15:53">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:35" title="Comment 35">jonblower</a>:
</p>
<blockquote class="citation">
<p>
Thanks Mark, that looks good to me. A minor semantic point that I wasn't sure about - you say "<strong>Where</strong> the grid_mapping attribute does not define explicit references between coordinates and a CRS..." do you mean "While"?
</p>
</blockquote>
<p>
In CF NetCDF files there are two allowable syntax approaches for the grid_mapping attribute. 
</p>
<ol><li>One syntax explicitly links a coordinate to a CRS:
<ul><li>e.g. <tt>temp:grid_mapping = "crsOSGB: x y crsWGS84: lat lon" ;</tt>
</li></ul></li><li>The other syntax does not provide explicit links:
<ul><li>e.g. <tt>temp:grid_mapping = "crsOSGB" ;</tt>
</li></ul></li></ol><p>
My aim for this sentence is to make it certain that where the <tt>2.</tt> syntax is used, there is still an explicit reference, and that the X and y coordinate variables are defined with respect to this CRS.
</p>
<p>
In other words, it provides backwards compatibility to the syntax from older version of CF whilst maintaining the same semantics.
</p>
<blockquote class="citation">
<p>
I'm trying to get whether the the explicit references <em>may or may not </em>appear, or whether they <em>never</em> appear.
</p>
</blockquote>
<p>
So, explicit references may or may not appear in a CF NetCDF file, but, if they don't appear explicitly, they are unambiguously implicit.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-37-1392812493000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:37" class="cnum">
    <a href="#comment:37">comment:37</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-19T04%3A21%3A33-08%3A00&amp;precision=second" title="See timeline at 02/19/14 04:21:33">7 years ago</a> by jonblower
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Ah, OK, I'd forgotten about the first syntax, sorry. Makes sense, thanks!
</p>

    </div>

              </div>
              <div class="change" id="trac-change-38-1392827212000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:38" class="cnum">
    <a href="#comment:38">comment:38</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-19T08%3A26%3A52-08%3A00&amp;precision=second" title="See timeline at 02/19/14 08:26:52">7 years ago</a> by davidhassell
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hello, all,
</p>
<p>
Whilst it is great that the data model is going through a phase of being discussed, before alternative models are presented, I think that it would be sensible to agree that the <em>proposed</em> model is not correct, if that is the case. We should also keep in mind that the data model is intended to a minimal, logical representation of CF as it currently stands, and so shouldn't get tied up with CF-netCDF syntax and organization.
</p>
<p>
Some good points have been raised about the name of the construct ("transform"). What if it were called a "Coordinate reference system construct" instead? That seems reasonable to me.
</p>
<p>
Earlier in this thread, I posted an <a class="ticket" href="./107#comment:18" title="Comment 18">example</a> of how the transform (CRS?) construct was easily able to encapsulate the case of multiple grid_mappings. If there are counter examples where the proposed construct can not store the information and relationships, that would, I think, be very useful.
</p>
<p>
Many thanks and all the best,
</p>
<p>
David
</p>

    </div>

              </div>
              <div class="change" id="trac-change-39-1392917203000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:39" class="cnum">
    <a href="#comment:39">comment:39</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-20T09%3A26%3A43-08%3A00&amp;precision=second" title="See timeline at 02/20/14 09:26:43">7 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear David
</p>
<p>
It's a good idea to consider what would be a better name than <tt>transform</tt> for this concept, but I have concerns about calling it <tt>coordinate reference system</tt>. The main purpose of <tt>grid_mapping</tt> is to specify how 2D lon and lat coordinates are related to 1D projected or rotated coordinates. That doesn't sound like a function which I would call "coordinate reference system", though it may involve a CRS. The relationship between dimensional and dimensionless vertical coordinates, which we also include in <tt>transform</tt>, does not usually involve a CRS.
</p>
<p>
Perhaps we should consider distinguishing the reference and transformation aspects of <tt>grid_mapping</tt>. We could decide to regard them as two different parts of the logical model, even though they are joined in one netCDF mechanism.
</p>
<p>
Cheers
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-40-1392918371000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:40" class="cnum">
    <a href="#comment:40">comment:40</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-20T09%3A46%3A11-08%3A00&amp;precision=second" title="See timeline at 02/20/14 09:46:11">7 years ago</a> by jonblower
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Jonathan,
</p>
<p>
David and I are discussing this off-line and will probably post back later. It's possible that we have different views of what a CRS actually is...
</p>
<p>
By the way, the relationship between dimensional and dimensionless vertical coordinates <em>does</em> involve a CRS, in fact it involves two! One for the dimensional coordinates (e.g. "depth in metres below sea level") and one for the dimensionless ones (e.g. a particular sigma coordinate system).
</p>
<p>
As an aside, the phrase "depth in metres below sea level" pretty much completely defines a (vertical) CRS. Horizontal CRSs are more complicated, hence all the varieties and parameters. There may be no single identifiable object in CF that looks like a CRS in all cases (sometimes the information is split between the coordinate variable and some other variable, sometimes the information is implicit) but logically it is there all the same.
</p>
<p>
Happy to involve you in the offline discussions if you have time!
</p>
<p>
Cheers,
Jon
</p>

    </div>

              </div>
              <div class="change" id="trac-change-41-1392993997000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:41" class="cnum">
    <a href="#comment:41">comment:41</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-21T06%3A46%3A37-08%3A00&amp;precision=second" title="See timeline at 02/21/14 06:46:37">7 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hi.
</p>
<p>
While you guys are discussing offline, I'll pitch in some thoughts.
</p>
<p>
The contents of the variable referenced by the grid_mapping attribute are a declaration of a Coordinate Reference System (CRS).  A CRS is a set of equations, parameters, and measurements that define a 2-D or 3-D coordinate system relative to the body of the Earth.  In the simplest case, it is a definition of the ellipsoid to be used to approximate the shape of the Earth and of the (0,0,0) (lon,lat,elevation) point.  In more complicated cases, it is a definition of a geoid surface (usually specified with a grid of points) relative to an ellipsoid.  In still more complicated cases, it is a definition of a "warped cartesian" map projection coordinate system relative to a geoid or ellipsoid.  Transforms may be constructed using the contents of a CRS to convert XYZ coordinates in a map projection to longitude, latitude, and Z (either relative to the geoid or the ellipsoid).  It's interesting to note that the longitude and latitude of a point with a large Z value will be different depending on whether the Z is relative to a geoid or an ellipsoid.  Transforms can also (usually) be constructed between two different CRSs.
</p>
<p>
This is actually a overly simple statement.  There are map projection CRSs that declare a longitude,latitude anchor point, but don't connect the region they were designed for to any global vertical datum, which means you can't fully transform points measured in that CRS to any other CRS.  This is all due to the history of CRSs, where they started as means to connect survey measurements in different regions to one another, and grew incrementally from there to the current state where we have GPS and a global scope.
</p>
<p>
Jon, regarding your aside above, I don't think the phrase "depth in metres below sea level" defines a vertical datum (the surface that defines your zero point relative to the body of the Earth in a CRS).  It may define the Z axis of a coordinate system, but it is not a CRS.
</p>
<p>
Grace and peace,
</p>
<p>
Jim
</p>

    </div>

              </div>
              <div class="change" id="trac-change-42-1392994997000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:42" class="cnum">
    <a href="#comment:42">comment:42</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-21T07%3A03%3A17-08%3A00&amp;precision=second" title="See timeline at 02/21/14 07:03:17">7 years ago</a> by jonblower
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hi Jim,
</p>
<p>
Thanks very much for the useful input. Regarding my example of "depth in metres below sea level", in this case "sea level" is the datum. I know this isn't a very precise datum, but sometimes it's all you have!
</p>
<p>
Best wishes,
Jon
</p>

    </div>

              </div>
              <div class="change" id="trac-change-43-1392995212000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:43" class="cnum">
    <a href="#comment:43">comment:43</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-21T07%3A06%3A52-08%3A00&amp;precision=second" title="See timeline at 02/21/14 07:06:52">7 years ago</a> by jonblower
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
P.S. Here's the formal CRS definition for "depth in metres below sea level": <a class="ext-link" href="http://www.spatialreference.org/ref/epsg/5715/"><span class="icon">​</span>http://www.spatialreference.org/ref/epsg/5715/</a>.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-44-1392997980000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:44" class="cnum">
    <a href="#comment:44">comment:44</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-21T07%3A53%3A00-08%3A00&amp;precision=second" title="See timeline at 02/21/14 07:53:00">7 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Jon,
</p>
<p>
The CRS you reference is "depth below Mean Sea Level (MSL)".  MSL is a vertical datum that defines the mean sea level at numerous points all over the globe relative to the WGS84 ellipsoid, and is precise.  Sea level is a less precise term, and could reference something other than MSL.  Perhaps what you are really referring to is MSL.
</p>
<p>
Jim
</p>

    </div>

              </div>
              <div class="change" id="trac-change-45-1393000236000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:45" class="cnum">
    <a href="#comment:45">comment:45</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-21T08%3A30%3A36-08%3A00&amp;precision=second" title="See timeline at 02/21/14 08:30:36">7 years ago</a> by jonblower
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hi Jim,
</p>
<p>
You're absolutely right, I was a bit loose in my terms. But sometimes you don't know where you are with respect to MSL - a local sea level may be all you have. In this case "local sea level" is still the datum, albeit not one that you can easily convert to another CRS. It's still the zero point of your referencing system.
</p>
<p>
(Sorry, we are probably getting a bit off topic from the original discussion.)
</p>
<p>
Cheers,
Jon
</p>

    </div>

              </div>
              <div class="change" id="trac-change-46-1393002931000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:46" class="cnum">
    <a href="#comment:46">comment:46</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-21T09%3A15%3A31-08%3A00&amp;precision=second" title="See timeline at 02/21/14 09:15:31">7 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Jon,
</p>
<p>
I guess this is the ultimate question.  Local sea level can define the zero point for your depth measurements, and as such it defines a coordinate system, but does it qualify as a Coordinate Reference System vertical datum?  My strong tendency is to say no.  It doesn't mean the depth measurement isn't highly useful, but isn't something that can be located geographically/geodetically.  Now, if you also had the distance from local sea level to the WGS84 ellipsoid for each depth measured, then you would have defined a custom CRS vertical datum that would be unique for that dataset.
</p>
<p>
Grace and peace,
</p>
<p>
Jim
</p>

    </div>

              </div>
              <div class="change" id="trac-change-47-1393006983000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:47" class="cnum">
    <a href="#comment:47">comment:47</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-21T10%3A23%3A03-08%3A00&amp;precision=second" title="See timeline at 02/21/14 10:23:03">7 years ago</a> by jonblower
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hi Jim,
</p>
<p>
I think you are using a stronger definition of CRS than I am. I'm using the ISO definition, which basically says that a CRS needs a reference (datum), the direction away from this reference and the unit of measure (hence "depth below local sea level" is a fully-fledged CRS). I think you are referring to a fully geographic/geodetic CRS, which is clearly more precise of course (and more useful).
</p>
<p>
(I think we will find that not all CRSs in CF are fully geographic/geodetic, for example a vertical CRS based on pressure. It's still useful though and it doesn't mean there is no CRS at all. Any coordinate without a CRS is pretty much useless.)
</p>
<p>
The GeoAPI documentation is based on ISO and is instructive, as is an inspection of the subclasses (types) of CRS: <a class="ext-link" href="http://www.geoapi.org/3.0/javadoc/org/opengis/referencing/crs/CoordinateReferenceSystem.html"><span class="icon">​</span>http://www.geoapi.org/3.0/javadoc/org/opengis/referencing/crs/CoordinateReferenceSystem.html</a>. (The GeoAPI list is not exhaustive of course.)
</p>
<p>
Best wishes,
Jon
</p>

    </div>

              </div>
              <div class="change" id="trac-change-48-1393007902000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:48" class="cnum">
    <a href="#comment:48">comment:48</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-21T10%3A38%3A22-08%3A00&amp;precision=second" title="See timeline at 02/21/14 10:38:22">7 years ago</a> by graybeal
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I just lost a longer response that basically amounts to the same think Jon Blower just said. Stupid TRAC. I include a few references in case they help others. 
</p>
<p>
In short, it should be possible to convert from a 'depth wrt local sea level' to some other, more algorithmic CRS based on earth geoid or ellipsoid), but the error may be high, because local sea levels are more time variant than available sea level measurements or estimates. So while often there is not a precise 'distance from local sea level to the WGS84 ellipsoid for each depth measured', but there is a broader value (and sometimes there is even a precise value, as when moorings measure their GPS altitude).
</p>
<p>
Definitions based on ISO:
</p>
<blockquote>
<p>
coordinate reference system (CRS): coordinate system + datum; types include geodetic and vertical
coordinate system (CS): mathematical rules specifying how coordinates are assigned to points; composed of coordinate system axes; types of interest to use are ellipsoidal (earth shaped, 2D or 3D) and vertical, and the compound type
datum: parameters to specify the relationship of a coordinate system to an object (Earth, in all our geospatial cases); defines position of origin, scale, and orientation of the CS (note that [13] references two definitions for datum, we are using ISO [7] for our reference definition)
</p>
</blockquote>
<p>
References:
[7]         Coordinate systems standards | ISO 19111 | ISO 19111.2007(E); for sale by ISO
[13]         Datums | geodetic datums FAQ | <a class="ext-link" href="http://www.ngs.noaa.gov/faq"><span class="icon">​</span>http://www.ngs.noaa.gov/faq</a>
</p>
<p>
This materially taken from previous work to consolidate CRS issues for OOI: <a class="ext-link" href="https://confluence.oceanobservatories.org/display/CIDev/Coordinate+Systems+and+Coordinate+Transformations"><span class="icon">​</span>https://confluence.oceanobservatories.org/display/CIDev/Coordinate+Systems+and+Coordinate+Transformations</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-49-1393232431000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:49" class="cnum">
    <a href="#comment:49">comment:49</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-24T01%3A00%3A31-08%3A00&amp;precision=second" title="See timeline at 02/24/14 01:00:31">7 years ago</a> by jonblower
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Thanks John, that's a great reference. Jon
</p>

    </div>

              </div>
              <div class="change" id="trac-change-50-1393251544000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:50" class="cnum">
    <a href="#comment:50">comment:50</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-24T06%3A19%3A04-08%3A00&amp;precision=second" title="See timeline at 02/24/14 06:19:04">7 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Jon, John,
</p>
<p>
That's quite interesting!  I hadn't ever run across EPSG 5113 before.  (All my work in this area has been land-based.)  I stand corrected.  I've got questions still, but I'll take them offline and stop cluttering up this thread.
</p>
<p>
Grace and peace,
</p>
<p>
Jim
</p>

    </div>

              </div>
              <div class="change" id="trac-change-51-1393260676000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:51" class="cnum">
    <a href="#comment:51">comment:51</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-24T08%3A51%3A16-08%3A00&amp;precision=second" title="See timeline at 02/24/14 08:51:16">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
My reading of these comments suggests that it is a good idea to separate the concepts of
</p>
<p>
<tt>coordinate reference system</tt>
</p>
<p>
and 
</p>
<p>
<tt>derived coordinate</tt>
</p>
<p>
within the model.
</p>
<p>
Does this concur with other people's feelings on the matter?
</p>
<p>
If so, I think we can handle the fine detail of what it means to define a particular CRS instance outside of the scope of this ticket.
</p>
<p>
We can simply state that:
</p>
<blockquote>
<p>
A coordinate may reference one coordinate reference system, the coordinate is then defined with respect to this CRS. 
</p>
</blockquote>
<p>
Derived coordinates are just examples of coordinates, which can all be defined with respect to a CRS as required.
</p>
<p>
is this a useful interpretation?
</p>
<p>
mark
</p>

    </div>

              </div>
              <div class="change" id="trac-change-52-1393261219000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:52" class="cnum">
    <a href="#comment:52">comment:52</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:53" class="follow-up">↓ 53</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-24T09%3A00%3A19-08%3A00&amp;precision=second" title="See timeline at 02/24/14 09:00:19">7 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Mark,
</p>
<p>
Isn't it true that, as it currently stands in CF, coordinates do not reference any coordinate systems?  I think it would be superior to have the coordinates directly reference their coordinate systems, but I think that in the current arrangement, a data variable declares an association between coordinate variables and CRSs via the grid_mapping attribute (either implicitly or explicitly, depending on the syntax chosen).
</p>
<p>
Grace and peace,
</p>
<p>
Jim
</p>

    </div>

              </div>
              <div class="change" id="trac-change-53-1393406116000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:53" class="cnum">
    <a href="#comment:53">comment:53</a>
  </span>
        in reply to:
    <a href="#comment:52">↑ 52</a>
        ;
          <span>follow-up:</span>
    <a href="#comment:57" class="follow-up">↓ 57</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-02-26T01%3A15%3A16-08%3A00&amp;precision=second" title="See timeline at 02/26/14 01:15:16">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:52" title="Comment 52">biard</a>:
 
</p>
<blockquote class="citation">
<p>
Isn't it true that, as it currently stands in CF, coordinates do not reference any coordinate systems?  I think it would be superior to have the coordinates directly reference their coordinate systems, but I think that in the current arrangement, a data variable declares an association between coordinate variables and CRSs via the grid_mapping attribute (either implicitly or explicitly, depending on the syntax chosen).
</p>
</blockquote>
<p>
Hello Jim
</p>
<p>
In CF 1.6 this appears to be the case.  However, there are a number of implications that the coordinate variables which are the <tt>Axis=='X'</tt> and <tt>Axis=='Y'</tt> coordinates are defined with respect to this coordiante reference system.
</p>
<p>
In order to make this implication more explicit and support multiple coordinate reference systems within the scope of a data variable, the ticket <a class="closed ticket" href="./70.html" title="enhancement: Connecting coordinates to Grid Mapping variables (closed: fixed)">#70</a> was raised, discussed and is now approved.  This will appear in CF 1.7.
</p>
<p>
This ticket makes it explicit that the semantics of all grid_mapping relationships are of coordinates defined with respect to coordinate reference systems.  The association is controlled by the data variable and the syntax is defined to maintain backwards compatibility but the semantics are explicit: each coordinate is defined with respect to one coordinate reference system or None. 
</p>
<p>
The fact that the declaration is made by the data variable is an encoding detail, not key semantic information.
</p>
<p>
By keeping the backwards compatibility we firm up the interpretation of all grid_mapping attributes on data variables and maintain consistency for both syntax options.
</p>
<p>
Are you content that this interpretation provides your <em>superior approach</em>: that <em>coordinates directly reference their coordinate systems</em>?
</p>
<p>
mark
</p>

    </div>

              </div>
              <div class="change" id="trac-change-54-1396441719721212">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:54" class="cnum">
    <a href="#comment:54">comment:54</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:61" class="follow-up">↓ 61</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-02T05%3A28%3A39-07%3A00&amp;precision=second" title="See timeline at 04/02/14 05:28:39">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I have considered a <a class="wiki" href="/trac/wiki/Ticket107Text9Nov13CellMethods">proposed text for cell methods</a>.  I think the intent is correct in this text but I think it is a little too difficult to read.
</p>
<p>
With this in mind, I have prepared a <a class="wiki" href="/trac/wiki/markhDataModelDraft#CellMethod">draft for the cell methods text</a> which I think conveys the same intent with a little more clarity.
</p>
<p>
I am still not sure that the opening sentence:
</p>
<blockquote>
<p>
<em>The cell methods construct describes the methods by which the data values of the field construct represent variation within their cells.</em>
</p>
</blockquote>
<p>
gives a good enough statement of purpose, but I am not sure how else to put it.  Are there further suggestions for how to explain the purpose of cell methods?
</p>
<p>
The CF conventions for NetCDF state that cell methods are:
</p>
<blockquote>
<p>
<em>to describe the characteristic of a field that is represented by cell values</em>
</p>
</blockquote>
<p>
I wonder whether introducing terms such as <em>values aggregated over cells</em> or <em>statistically aggregated values</em> might help?
</p>
<p>
mark
</p>

    </div>

              </div>
              <div class="change" id="trac-change-55-1396527716137679">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:55" class="cnum">
    <a href="#comment:55">comment:55</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:79" class="follow-up">↓ 79</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-03T05%3A21%3A56-07%3A00&amp;precision=second" title="See timeline at 04/03/14 05:21:56">7 years ago</a> by davidhassell
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hello,
</p>
<p>
Jonathan, Jon and I have taken advantage of our geographic colocation and have been discussing the Transform construct offline. As a result, we'd like to propose the replacing it with a "Geolocation construct", described below. The geolocation construct is similar (but not identical) to the transform construct, and we hope that its definition is much clearer.
</p>
<p>
We'll be very interested in your comments.
</p>
<p>
All the best,
</p>
<p>
David
</p>
<hr />
<p>
<strong>Georeference construct</strong>
</p>
<hr />
<p>
A georeference construct provides information needed to locate spatial dimension and auxiliary coordinates within a frame of reference relative to the planet.
</p>
<p>
Whilst the spatial coordinate constructs themselves serve to locate the data within the domain of the field, some applications may require more information about the relationship of the domain to a planetary reference frame. Moreover, some of the information may be identical for multiple constructs and therefore needs to be defined only once.
</p>
<p>
A georeference construct contains
</p>
<ul><li>An unordered collection of the field's dimension and auxiliary coordinate constructs to which the georeference construct applies.
</li></ul><ul><li>Scalar parameters (which may include descriptive strings), other dimension or auxiliary coordinate constructs of the field, or other field constructs; all of which provide information about the frame of reference.
</li></ul><p>
The most common purposes of a georeference construct are
</p>
<ul><li>To specify the relationship between vertical coordinates which are not geolocated and coordinates of height (with respect to some geophysically located surface) or pressure (which is a proxy for
height).
</li></ul><ul><li>To specify the relationship between horizontal coordinates which are not geolocated and a logitude-latitude coordinate system with a particular reference ellipsoid for the shape of the planet.
</li></ul><p>
The functions of the CF-netCDF attributes formula_terms and grid_mapping, which describe the locations of spatial coordinate variables (CF Appendices D and F), correspond to georeference constructs.
</p>
<hr />

    </div>

              </div>
              <div class="change" id="trac-change-56-1396532742979351">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:56" class="cnum">
    <a href="#comment:56">comment:56</a>
  </span>
          <span>follow-ups:</span>
    <a href="#comment:58" class="follow-up">↓ 58</a>
    <a href="#comment:59" class="follow-up">↓ 59</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-03T06%3A45%3A42-07%3A00&amp;precision=second" title="See timeline at 04/03/14 06:45:42">7 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hi.
</p>
<p>
I find the phrases "vertical coordinates which are not geolocated" and "horizontal coordinates which are not geolocated" to be confusing.  It seems to me that the georeference construct is documenting the geolocation, not creating it.  In addition, latitude/longitude coordinate systems must also be georeferenced.  There are, in fact, differences between the latitude/longitude coordinates defined by different coordinate reference systems (CRSs).  The geographic community has pretty much unified on global latitude/longitude systems and ellipsoids in recent times, but you can't make that assumption with older CRSs.
</p>
<p>
It is possible to define a projected CRS without reference to latitude/longitude at all.  It could be done with a Cartesian CRS such as Earth Centered Fixed (ECF).  All the ones I know of are layered on a latitude/longitude CRS, but I don't think you should assume layering implies that a latitude/longitude CRS has special status.
</p>
<p>
I get the feeling that your effort to put formula_terms and grid_mapping together in one construct definition may be what's making things awkward.
</p>
<p>
I'd write more, but I can't get to the CF pages to check on something I needed to look at in order to proceed. More later.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-57-1396534652865506">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:57" class="cnum">
    <a href="#comment:57">comment:57</a>
  </span>
        in reply to:
    <a href="#comment:53">↑ 53</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-03T07%3A17%3A32-07%3A00&amp;precision=second" title="See timeline at 04/03/14 07:17:32">7 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:53" title="Comment 53">markh</a>:
</p>
<blockquote class="citation">
<p>
Replying to <a class="ticket" href="./107#comment:52" title="Comment 52">biard</a>:
</p>
<p>
...
 
Are you content that this interpretation provides your <em>superior approach</em>: that <em>coordinates directly reference their coordinate systems</em>?
</p>
<p>
mark
</p>
</blockquote>
<p>
Mark,
</p>
<p>
Sorry I didn't get back to this sooner.  I agree that the suggested new syntax for the contents of the grid_mapping attribute addresses the problem of how to have different CRSs for different coordinate variables, but I don't think it's true that the current highly indirect way of connecting coordinate variables to coordinate systems is semantically equivalent to having a coordinate variable directly reference its CRS.  It's easy to see that this is true when you ask the question, "Can I associate multiple CRSs with a single coordinate variable using this scheme?"
</p>
<p>
Let's say I have two data variables that both use the same coordinate variable, and thus two statements of the association between the coordinate variable and a CRS. With the current solution, the answer is "Yes". We must rely on the developer / CF checker to avoid this condition.  If a coordinate variable directly references its CRS, the answer is "No".  The two solutions are not equivalent.
</p>
<p>
If you are trying to be rigorous in your description of the data model, then I don't think you can say that a coordinate variable references a CRS.  You can say:
</p>
<blockquote>
<p>
A coordinate must be associated with not more than one CRS, and all data variables referencing a given coordinate must declare the same association.
</p>
</blockquote>
<p>
Or something along those lines.
Grace and peace,
</p>
<p>
Jim
</p>

    </div>

              </div>
              <div class="change" id="trac-change-58-1396537977829835">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:58" class="cnum">
    <a href="#comment:58">comment:58</a>
  </span>
        in reply to:
    <a href="#comment:56">↑ 56</a>
        ;
          <span>follow-up:</span>
    <a href="#comment:63" class="follow-up">↓ 63</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-03T08%3A12%3A57-07%3A00&amp;precision=second" title="See timeline at 04/03/14 08:12:57">7 years ago</a> by davidhassell
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:56" title="Comment 56">biard</a>:
</p>
<p>
Hi Jim,
</p>
<p>
Thanks for the points. I'll try to clarify.
</p>
<blockquote class="citation">
<p>
I find the phrases "vertical coordinates which are not geolocated" and "horizontal coordinates which are not geolocated" to be confusing.  It seems to me that the georeference construct is documenting the geolocation, not creating it. In addition, latitude/longitude coordinate systems must also be georeferenced.  There are, in fact, differences between the latitude/longitude coordinates defined by different coordinate reference systems (CRSs).  The geographic community has pretty much unified on global latitude/longitude systems and ellipsoids in recent times, but you can't make that assumption with older CRSs.
</p>
</blockquote>
<p>
I think that the construct is neither documenting nor creating the geolocation. The information needed to geolocate the domain is split - some of it is contained by the coordinate constructs themselves (typically by the standard name and units) and some of it is contained elsewhere (typically by grid_mapping or formula_terms). It is  this latter information which we are encapsulating in the georeference construct.
</p>
<blockquote class="citation">
<p>
It is possible to define a projected CRS without reference to latitude/longitude at all.  It could be done with a Cartesian CRS such as Earth Centered Fixed (ECF).  All the ones I know of are layered on a latitude/longitude CRS, but I don't think you should assume layering implies that a latitude/longitude CRS has special status.
</p>
</blockquote>
<p>
The geolocation construct does not prescribe what "geolocation" means., i.e. it doesn't necessarily mean latitude-longitude. It could mean "height" or ECF, or anthing. The example "To specify the relationship between horizontal coordinates which are not geolocated and a logitude-latitude ..." is merely highlighting the common case arising from many CF-netCDF grid_mappings.
</p>
<p>
All the best,
</p>
<p>
David
</p>

    </div>

              </div>
              <div class="change" id="trac-change-59-1396606461851777">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:59" class="cnum">
    <a href="#comment:59">comment:59</a>
  </span>
        in reply to:
    <a href="#comment:56">↑ 56</a>
        ;
          <span>follow-up:</span>
    <a href="#comment:60" class="follow-up">↓ 60</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-04T03%3A14%3A21-07%3A00&amp;precision=second" title="See timeline at 04/04/14 03:14:21">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:56" title="Comment 56">biard</a>:
</p>
<blockquote class="citation">
<p>
I get the feeling that your effort to put formula_terms and grid_mapping together in one construct definition may be what's making things awkward.
</p>
</blockquote>
<p>
I agree with you Jim, I think this is awkward.
</p>
<p>
The functionality of CF-NetCDF formula_terms and grid_mappings may be simpler and clearer in the model if they are defined separately; they are quite different.
</p>
<p>
Could we limit our scope in this case to the definition of frames of reference which coordinates may be defined with respect to?  I feel it would be clearer and easier for others to use this way.
</p>
<p>
I think <em>coordinate reference system</em> is a commonly used term for this in other communities which may aid communication, but if <em>georeference</em> is a preferred label, then I think it is usable. 
</p>
<p>
mark
</p>

    </div>

              </div>
              <div class="change" id="trac-change-60-1396614104683415">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:60" class="cnum">
    <a href="#comment:60">comment:60</a>
  </span>
        in reply to:
    <a href="#comment:59">↑ 59</a>
        ;
          <span>follow-up:</span>
    <a href="#comment:62" class="follow-up">↓ 62</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-04T05%3A21%3A44-07%3A00&amp;precision=second" title="See timeline at 04/04/14 05:21:44">7 years ago</a> by davidhassell
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:59" title="Comment 59">markh</a>:
</p>
<p>
Dear Mark, Jim,
</p>
<blockquote class="citation">
<p>
Replying to <a class="ticket" href="./107#comment:56" title="Comment 56">biard</a>:
</p>
<blockquote class="citation">
<p>
I get the feeling that your effort to put formula_terms and grid_mapping together in one construct definition may be what's making things awkward.
</p>
</blockquote>
<p>
I agree with you Jim, I think this is awkward.
</p>
</blockquote>
<p>
 
</p>
<blockquote class="citation">
<p>
The functionality of CF-NetCDF formula_terms and grid_mappings may be simpler and clearer in the model if they are defined separately; they are quite different.
</p>
</blockquote>
<p>
Ok. We should discuss this! I think that fundamentally they are the same, which why they should not be separated in the <em>logical</em> data model
</p>
<p>
CF-netCDF grid_mapping and formula_terms both provide information that indicate the location of the data, hence they can be described by the same construct. 
</p>
<blockquote class="citation">
<p>
Could we limit our scope in this case to the definition of frames of reference which coordinates may be defined with respect to?  I feel it would be clearer and easier for others to use this way.
</p>
</blockquote>
<p>
Apologies, I'm not sure what you mean, here.
</p>
<blockquote class="citation">
<p>
I think <em>coordinate reference system</em> is a commonly used term for this in other communities which may aid communication, but if <em>georeference</em> is a preferred label, then I think it is usable.
</p>
</blockquote>
<p>
One reason that we didn't use the phrase "coordinate reference system (CRS)" is because it means different things to different people - it is not a well defined term across all communities. I'm glad that you find "georeference" ok.
</p>
<p>
Another is that a georeference construct is not, according to some definitions (such as ISO 19123, Geographic information -Schema for coverage geometry and functions) a CRS. (An ISO 19123 CRS is actually defined by a subset of the information contained in a georeference construct taken with the coordinate constructs to which it relates.)
</p>
<p>
All the best,
</p>
<p>
David
</p>

    </div>

              </div>
              <div class="change" id="trac-change-61-1396618679970274">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:61" class="cnum">
    <a href="#comment:61">comment:61</a>
  </span>
        in reply to:
    <a href="#comment:54">↑ 54</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-04T06%3A37%3A59-07%3A00&amp;precision=second" title="See timeline at 04/04/14 06:37:59">7 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:54" title="Comment 54">markh</a>:
</p>
<blockquote class="citation">
<p>
I have considered a <a class="wiki" href="/trac/wiki/Ticket107Text9Nov13CellMethods">proposed text for cell methods</a>.  I think the intent is correct in this text but I think it is a little too difficult to read.
</p>
<p>
With this in mind, I have prepared a <a class="wiki" href="/trac/wiki/markhDataModelDraft#CellMethod">draft for the cell methods text</a> which I think conveys the same intent with a little more clarity.
</p>
<p>
I am still not sure that the opening sentence:
</p>
<blockquote>
<p>
<em>The cell methods construct describes the methods by which the data values of the field construct represent variation within their cells.</em>
</p>
</blockquote>
<p>
...
</p>
<p>
mark
</p>
</blockquote>
<p>
Mark,
</p>
<p>
First a question, then some comments.  Is the last line in your draft supposed to say "The cell methods construct" instead of "The cell measures construct"?
</p>
<p>
Now for the comments.  As I look at it, the cell methods construct isn't so much a description of how the field construct represents variation as it is a description of how the values of the field construct were obtained from a source data field that may or may not be present within the data space.  That is, the field construct under consideration may have been produced from another field construct found within the file, or file set, or cloud of field constructs (however you want to think of it) using the methods described within the cell methods construct, or it may have been produced from a field that was not preserved within whatever boundary exists for your problem space.  I haven't said that succinctly, but I think that recognition of the derived nature of the field construct values is important.  There's a further wrinkle in this that isn't being captured by the draft text, which is the ability to use the comment syntax to describe "fuzzy" domains for the action of the cell methods.  I just went through a learning exercise about this in relation to a data set that has data values which are mins, means, and maxs over the domain of a weather system.  There are no cells (in the regular grid way of thinking about them), and the '( ... comment: ...)' syntax is used to capture the specifics of the domain for the cell method.
</p>
<p>
So, what about a statement along the lines of:
</p>
<pre class="wiki">The cell methods construct describes the methods by which the data values of the
field construct are derived from a source measurement field (which may or may
not be represented by an existing field construct).
</pre><p>
This covers both the case where one field construct holds (for example) the standard deviations of the values in another field construct and the case where the field construct holds values derived from values outside the scope of the data set.
</p>
<p>
Grace and peace,
</p>
<p>
Jim
</p>

    </div>
  <div class="trac-lastedit ">
    Last edited <a class="timeline" href="/trac/timeline?from=2014-04-04T06%3A39%3A12-07%3A00&amp;precision=second" title="See timeline at 04/04/14 06:39:12">7 years ago</a>
        by biard
      (<a href="./107?cversion=0&amp;cnum_hist=61#comment:61">previous</a>)
      (<a href="./107?action=comment-diff&amp;cnum=61&amp;version=1">diff</a>)
  </div>

              </div>
              <div class="change" id="trac-change-62-1396620418243078">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:62" class="cnum">
    <a href="#comment:62">comment:62</a>
  </span>
        in reply to:
    <a href="#comment:60">↑ 60</a>
        ;
          <span>follow-up:</span>
    <a href="#comment:64" class="follow-up">↓ 64</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-04T07%3A06%3A58-07%3A00&amp;precision=second" title="See timeline at 04/04/14 07:06:58">7 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:60" title="Comment 60">davidhassell</a>:
</p>
<blockquote class="citation">
<p>
Replying to <a class="ticket" href="./107#comment:59" title="Comment 59">markh</a>:
</p>
<p>
Dear Mark, Jim,
</p>
<blockquote class="citation">
<p>
Replying to <a class="ticket" href="./107#comment:56" title="Comment 56">biard</a>:
</p>
<blockquote class="citation">
<p>
I get the feeling that your effort to put formula_terms and grid_mapping together in one construct definition may be what's making things awkward.
</p>
</blockquote>
<p>
I agree with you Jim, I think this is awkward.
</p>
</blockquote>
<p>
 
</p>
<blockquote class="citation">
<p>
The functionality of CF-NetCDF formula_terms and grid_mappings may be simpler and clearer in the model if they are defined separately; they are quite different.
</p>
</blockquote>
<p>
Ok. We should discuss this! I think that fundamentally they are the same, which why they should not be separated in the <em>logical</em> data model
...
All the best,
</p>
<p>
David
</p>
</blockquote>
<p>
As I read the definition and usage of formula_terms, I find that it is <strong>entirely and only</strong> a description of how to combine the values of a unitless coordinate variable with values from other variables to produce coordinate values that have units.  It is possible that this "resultant coordinate" could be georeferenced, but that is something else.  It is true that it is meaningless to associate a CRS with a unitless coordinate variable if you don't provide a description of how to get to values that can be georeferenced, but this doesn't mean that a mathematical transform equates on any level with a declaration of a CRS.
</p>
<p>
Grace and peace,
</p>
<p>
Jim
</p>

    </div>

              </div>
              <div class="change" id="trac-change-63-1396621454858862">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:63" class="cnum">
    <a href="#comment:63">comment:63</a>
  </span>
        in reply to:
    <a href="#comment:58">↑ 58</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-04T07%3A24%3A14-07%3A00&amp;precision=second" title="See timeline at 04/04/14 07:24:14">7 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:58" title="Comment 58">davidhassell</a>:
</p>
<blockquote class="citation">
<p>
Replying to <a class="ticket" href="./107#comment:56" title="Comment 56">biard</a>:
</p>
<p>
Hi Jim,
</p>
<p>
Thanks for the points. I'll try to clarify.
...
I think that the construct is neither documenting nor creating the geolocation. The information needed to geolocate the domain is split - some of it is contained by the coordinate constructs themselves (typically by the standard name and units) and some of it is contained elsewhere (typically by grid_mapping or formula_terms). It is  this latter information which we are encapsulating in the georeference construct.
...
</p>
<p>
All the best,
</p>
<p>
David
</p>
</blockquote>
<p>
David,
</p>
<p>
I'm trying to figure out if we have an actual disagreement about the purpose and meaning of the grid_mapping variable / construct, or if I am misunderstanding what you are saying.  Do you agree that a grid_mapping variable declares the Geographic / Geodetic Coordinate Reference System (CRS) that one or more coordinate variables are defined with respect to?
</p>
<p>
Grace and peace,
</p>
<p>
Jim
</p>

    </div>

              </div>
              <div class="change" id="trac-change-64-1396891104093321">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:64" class="cnum">
    <a href="#comment:64">comment:64</a>
  </span>
        in reply to:
    <a href="#comment:62">↑ 62</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-07T10%3A18%3A24-07%3A00&amp;precision=second" title="See timeline at 04/07/14 10:18:24">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:62" title="Comment 62">biard</a>:
</p>
<blockquote class="citation">
<p>
As I read the definition and usage of formula_terms, I find that it is <strong>entirely and only</strong> a description of how to combine the values of a unitless coordinate variable with values from other variables to produce coordinate values that have units.  It is possible that this "resultant coordinate" could be georeferenced, but that is something else.  It is true that it is meaningless to associate a CRS with a unitless coordinate variable if you don't provide a description of how to get to values that can be georeferenced, but this doesn't mean that a mathematical transform equates on any level with a declaration of a CRS.
</p>
</blockquote>
<p>
I agree with this perspective.  I think two simple, flexible types for the data model will be a better long term solution here than one, more complicated, combined type.
</p>
<p>
I have written more on my reasoning, but this turned out far too long to post as a comment on the ticket, and Jim has put it far more succinctly than I have been able to. I have dropped my additional thoughts on a wiki page instead:
</p>
<blockquote>
<p>
<a class="ext-link" href="http://kitt.llnl.gov/trac/wiki/markhDataModelNotesCRS"><span class="icon">​</span>http://kitt.llnl.gov/trac/wiki/markhDataModelNotesCRS</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-65-1396969227564038">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:65" class="cnum">
    <a href="#comment:65">comment:65</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-08T08%3A00%3A27-07%3A00&amp;precision=second" title="See timeline at 04/08/14 08:00:27">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:61" title="Comment 61">biard</a>:
</p>
<blockquote class="citation">
<p>
First a question, then some comments.  Is the last line in your draft supposed to say "The cell methods construct" instead of "The cell measures construct"?
</p>
</blockquote>
<p>
Yes, my, copy, paste replace operation failed; thank you; I've updated this.
</p>
<blockquote class="citation">
<p>
Now for the comments.  ...
</p>
<p>
So, what about a statement along the lines of:
</p>
<pre class="wiki">The cell methods construct describes the methods by which the data values of the
field construct are derived from a source measurement field (which may or may
not be represented by an existing field construct).
</pre><p>
This covers both the case where one field construct holds (for example) the standard deviations of the values in another field construct and the case where the field construct holds values derived from values outside the scope of the data set.
</p>
</blockquote>
<p>
I like this;  I think it expresses the use of cell methods very nicely.
</p>
<p>
I wonder whether
</p>
<blockquote>
<p>
<em>source measurement field (which may or may not be represented by an existing field construct).</em>
</p>
</blockquote>
<p>
could be replaced by:
</p>
<blockquote>
<p>
<em> the core concept defined by the standard_name, long_name and units of the Field.</em>
</p>
</blockquote>
<p>
making the description more self-contained, without losing the semantic intent?
</p>
<p>
many thanks
</p>
<p>
mark
</p>

    </div>

              </div>
              <div class="change" id="trac-change-66-1396973620836105">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:66" class="cnum">
    <a href="#comment:66">comment:66</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:68" class="follow-up">↓ 68</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-08T09%3A13%3A40-07%3A00&amp;precision=second" title="See timeline at 04/08/14 09:13:40">7 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Jim and Mark
</p>
<p>
<tt>grid_mapping</tt> and <tt>formula_terms</tt> look rather different in CF-netCDF, but they do have a similar purpose. <tt>formula_terms</tt> tells you how to translate the vertical coordinate variable into coordinate values which "indicate the location of the data" (as it says in 4.3) in the vertical dimension, in practice meaning height or depth with respect to a geophysically defined reference surface, or pressure, which is (in some cases) a reasonable proxy for height or depth. <tt>grid_mapping</tt> tells you how to translate the horizontal coordinate variables into longitude and latitude, which have a special status in CF for providing horizontal location; as you know, we insist that it must be possible to locate the data in lat-lon if it has horizontal dimensions.
</p>
<p>
After <tt>grid_mapping</tt> was introduced, it was expanded to allow the ellipsoid to be defined, and as a result of recent discussion I've proposed it should allow the geoid to be identified too. At the moment, the ellipsoid and geoid definition cannot be applied to vertical coordinates, but it seems very likely this will become desirable, also as a result of recent discussions. For example, we can specify a vertical coordinate as height above the geoid, but we cannot specify precisely what the geoid is for the vertical coordinate, unless we allow <tt>grid_mapping</tt> to do that. So, in this respect too, vertical and horizontal coordinates will require similar treatment.
</p>
<p>
Given these two sorts of similarity, it seems logical to us that we should describe the two CF-netCDF mechanisms as different applications of the same logical construct. It doesn't matter that they are formally different. The formal difference arises partly because <tt>formula_terms</tt> applies to only one dimension but <tt>grid_mapping</tt> to two dimensions, and partly because they were designed at different times without seeing the larger picture. In writing down the logical model, we can take a step back to see that larger picture, and make it simpler as a result.
</p>
<p>
Cheers
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-67-1396974354535679">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:67" class="cnum">
    <a href="#comment:67">comment:67</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:69" class="follow-up">↓ 69</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-08T09%3A25%3A54-07%3A00&amp;precision=second" title="See timeline at 04/08/14 09:25:54">7 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Jim and Mark
</p>
<p>
The text David and I proposed was
</p>
<blockquote>
<p>
The cell methods construct describes the methods by which the data values of the field construct represent variation within their cells.
</p>
</blockquote>
<p>
and Jim proposes
</p>
<blockquote>
<p>
The cell methods construct describes the methods by which the data values of the field construct are derived from a source measurement field (which may or may not be represented by an existing field construct).
</p>
</blockquote>
<p>
With respect to the differences between these, I would comment:
</p>
<ol><li>CF doesn't only deal with measurements (which sounds like obs), so I don't think the word "measurement" should appear.
</li></ol><ol start="2"><li>I think "derived" is too general. The reason for writing "variation" in our definition is because all of the cell methods do that, by calculating a statistic from the variation, or by indicating it has no relevant variation because it is a point (intensive) or a sum (extensive). I think this needs to be indicated by the wording. "Derived" could mean all sorts of mathematical operation which are not encompassed by <tt>cell_methods</tt>.
</li></ol><ol start="3"><li>I don't see the parenthesis as really necessary, and I'm not sure it's true. The source field may never have existed. If it's a point or sum, then probably there was no source field. This field is the data, and <tt>cell_methods</tt> tells us something about what it means.
</li></ol><p>
Best wishes
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-68-1396976364517598">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:68" class="cnum">
    <a href="#comment:68">comment:68</a>
  </span>
        in reply to:
    <a href="#comment:66">↑ 66</a>
        ;
          <span>follow-up:</span>
    <a href="#comment:70" class="follow-up">↓ 70</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-08T09%3A59%3A24-07%3A00&amp;precision=second" title="See timeline at 04/08/14 09:59:24">7 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:66" title="Comment 66">jonathan</a>:
</p>
<blockquote class="citation">
<p>
Dear Jim and Mark
</p>
<p>
<tt>grid_mapping</tt> and <tt>formula_terms</tt> look rather different in CF-netCDF, but they do have a similar purpose. <tt>formula_terms</tt> tells you how to translate the vertical coordinate variable into coordinate values which "indicate the location of the data" (as it says in 4.3) in the vertical dimension, in practice meaning height or depth with respect to a geophysically defined reference surface, or pressure, which is (in some cases) a reasonable proxy for height or depth. <tt>grid_mapping</tt> tells you how to translate the horizontal coordinate variables into longitude and latitude, which have a special status in CF for providing horizontal location; as you know, we insist that it must be possible to locate the data in lat-lon if it has horizontal dimensions.
</p>
<p>
After <tt>grid_mapping</tt> was introduced, it was expanded to allow the ellipsoid to be defined, and as a result of recent discussion I've proposed it should allow the geoid to be identified too. At the moment, the ellipsoid and geoid definition cannot be applied to vertical coordinates, but it seems very likely this will become desirable, also as a result of recent discussions. For example, we can specify a vertical coordinate as height above the geoid, but we cannot specify precisely what the geoid is for the vertical coordinate, unless we allow <tt>grid_mapping</tt> to do that. So, in this respect too, vertical and horizontal coordinates will require similar treatment.
</p>
<p>
Given these two sorts of similarity, it seems logical to us that we should describe the two CF-netCDF mechanisms as different applications of the same logical construct. It doesn't matter that they are formally different. The formal difference arises partly because <tt>formula_terms</tt> applies to only one dimension but <tt>grid_mapping</tt> to two dimensions, and partly because they were designed at different times without seeing the larger picture. In writing down the logical model, we can take a step back to see that larger picture, and make it simpler as a result.
</p>
<p>
Cheers
</p>
<p>
Jonathan
</p>
</blockquote>
<p>
Jonathan,
</p>
<p>
The two elements have almost nothing whatsoever to do with each other, except in that they both deal (on entirely different levels) with coordinate data.  I understand that you guys thought that there was back in the day, but I am convinced that this was an example of misunderstanding the problem space.
</p>
<p>
I see no damage being done by properly separating these two constructs in the data model, and great potential for better understanding and future growth.  If we force the two concepts into a single construct, we will be making an "ad hoc aggregation" within the data model that is confusing and will cause headaches moving forward.
</p>
<p>
Grace and peace,
</p>
<p>
Jim
</p>

    </div>

              </div>
              <div class="change" id="trac-change-69-1396979958582484">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:69" class="cnum">
    <a href="#comment:69">comment:69</a>
  </span>
        in reply to:
    <a href="#comment:67">↑ 67</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-08T10%3A59%3A18-07%3A00&amp;precision=second" title="See timeline at 04/08/14 10:59:18">7 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:67" title="Comment 67">jonathan</a>:
</p>
<blockquote class="citation">
<p>
Dear Jim and Mark
</p>
<p>
The text David and I proposed was
</p>
<blockquote>
<p>
The cell methods construct describes the methods by which the data values of the field construct represent variation within their cells.
</p>
</blockquote>
<p>
and Jim proposes
</p>
<blockquote>
<p>
The cell methods construct describes the methods by which the data values of the field construct are derived from a source measurement field (which may or may not be represented by an existing field construct).
</p>
</blockquote>
<p>
With respect to the differences between these, I would comment:
</p>
<ol><li>CF doesn't only deal with measurements (which sounds like obs), so I don't think the word "measurement" should appear.
</li></ol><ol start="2"><li>I think "derived" is too general. The reason for writing "variation" in our definition is because all of the cell methods do that, by calculating a statistic from the variation, or by indicating it has no relevant variation because it is a point (intensive) or a sum (extensive). I think this needs to be indicated by the wording. "Derived" could mean all sorts of mathematical operation which are not encompassed by <tt>cell_methods</tt>.
</li></ol><ol start="3"><li>I don't see the parenthesis as really necessary, and I'm not sure it's true. The source field may never have existed. If it's a point or sum, then probably there was no source field. This field is the data, and <tt>cell_methods</tt> tells us something about what it means.
</li></ol><p>
Best wishes
</p>
<p>
Jonathan
</p>
</blockquote>
<p>
Jonathan,
</p>
<p>
I'm not overly concerned with the specific wording used.  The thing I was trying to get at was the question that the cell_methods attribute is answering, which seems to me to be, "What algorithm did I apply to get from a set of input values to the set of output values stored within this variable?"  If the cell_method is "point", then the algorithm is a null transform.  If the answer is sum, then there was a sum; if mean, an average; etc.  In some cases the input values are found in another variable within the file.  In other cases the input values are not found within the file, and may not have been preserved anywhere.
</p>
<p>
Describing cell_methods in entirely self-referential terms comes across to me as quite awkward, as you are trying to talk about an input-output process without mentioning the input.
</p>
<p>
Grace and peace,
</p>
<p>
Jim
</p>

    </div>

              </div>
              <div class="change" id="trac-change-70-1397047513963000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:70" class="cnum">
    <a href="#comment:70">comment:70</a>
  </span>
        in reply to:
    <a href="#comment:68">↑ 68</a>
        ;
          <span>follow-up:</span>
    <a href="#comment:71" class="follow-up">↓ 71</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-09T05%3A45%3A13-07%3A00&amp;precision=second" title="See timeline at 04/09/14 05:45:13">7 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:68" title="Comment 68">biard</a>:
</p>
<blockquote class="citation">
<p>
The two elements have almost nothing whatsoever to do with each other, except in that they both deal (on entirely different levels) with coordinate data.  I understand that you guys thought that there was back in the day, but I am convinced that this was an example of misunderstanding the problem space.
</p>
<p>
I see no damage being done by properly separating these two constructs in the data model, and great potential for better understanding and future growth.  If we force the two concepts into a single construct, we will be making an "ad hoc aggregation" within the data model that is confusing and will cause headaches moving forward.
</p>
</blockquote>
<p>
Dear Jim
</p>
<p>
I don't think we misunderstand the problem. We have spent a long time thinking about it. The applications of <tt>grid_mapping</tt> and <tt>formula_terms</tt> are quite varied already, but (to restate my last posting), they have two things in common: (1) They relate one set of coordinates to another set of coordinates which CF/COARDS regards as geolocated (longitude, latitude and height or pressure - pressure has a special status in CF/COARDS), (2) They may need to refer to the reference ellipsoid or geoid (your contributions on the email list helped to clarify that this need applies to both vertical and horizontal coordinates).
</p>
<p>
We could have devised a convention to do the job of <tt>formula_terms</tt> with a netCDF construction involving a dummy variable, like <tt>grid_mapping</tt>, but we hadn't thought of that idea then (in the beginning of CF). If we had chosen to do so then, these two constructions would already look formally quite similar, I think, and then the idea of combining them might not appear so surprising. I agree of course that we do not <em>have</em> to represent these two parts of CF with a single logical construct, but I see it as a simplification which would avoid some redundancy e.g. from (2) above. Please could you explain what headache or confusion it will cause you?
</p>
<p>
Cheers
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-71-1397061431471822">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:71" class="cnum">
    <a href="#comment:71">comment:71</a>
  </span>
        in reply to:
    <a href="#comment:70">↑ 70</a>
        ;
          <span>follow-ups:</span>
    <a href="#comment:72" class="follow-up">↓ 72</a>
    <a href="#comment:74" class="follow-up">↓ 74</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-09T09%3A37%3A11-07%3A00&amp;precision=second" title="See timeline at 04/09/14 09:37:11">7 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:70" title="Comment 70">jonathan</a>:
</p>
<blockquote class="citation">
<p>
Replying to <a class="ticket" href="./107#comment:68" title="Comment 68">biard</a>:
</p>
<blockquote class="citation">
<p>
The two elements have almost nothing whatsoever to do with each other, except in that they both deal (on entirely different levels) with coordinate data.  I understand that you guys thought that there was back in the day, but I am convinced that this was an example of misunderstanding the problem space.
</p>
<p>
I see no damage being done by properly separating these two constructs in the data model, and great potential for better understanding and future growth.  If we force the two concepts into a single construct, we will be making an "ad hoc aggregation" within the data model that is confusing and will cause headaches moving forward.
</p>
</blockquote>
<p>
Dear Jim
</p>
<p>
I don't think we misunderstand the problem. We have spent a long time thinking about it. The applications of <tt>grid_mapping</tt> and <tt>formula_terms</tt> are quite varied already, but (to restate my last posting), they have two things in common: (1) They relate one set of coordinates to another set of coordinates which CF/COARDS regards as geolocated (longitude, latitude and height or pressure - pressure has a special status in CF/COARDS), (2) They may need to refer to the reference ellipsoid or geoid (your contributions on the email list helped to clarify that this need applies to both vertical and horizontal coordinates).
</p>
<p>
We could have devised a convention to do the job of <tt>formula_terms</tt> with a netCDF construction involving a dummy variable, like <tt>grid_mapping</tt>, but we hadn't thought of that idea then (in the beginning of CF). If we had chosen to do so then, these two constructions would already look formally quite similar, I think, and then the idea of combining them might not appear so surprising. I agree of course that we do not <em>have</em> to represent these two parts of CF with a single logical construct, but I see it as a simplification which would avoid some redundancy e.g. from (2) above. Please could you explain what headache or confusion it will cause you?
</p>
<p>
Cheers
</p>
<p>
Jonathan
</p>
</blockquote>
<p>
Jonathan,
</p>
<p>
I think you've put your finger directly on the disagreement I have with your approach.  As I look at it, grid_mapping does not do the thing you describe in point 1, and formula_terms is not involved with the thing you describe in point 2.
</p>
<p>
X/Y coordinates and lat/lon coordinates are just two types of coordinates.  Both need to be georeferenced.  The grid_mapping doesn't describe a transform.  It declares the CRS that your coordinates are defined with reference to - both X/Y and lat/lon.  Formula_terms declares a transform - one that takes unitless values as input (along with other inputs) and outputs <strong>georeferenceable</strong> coordinate values.  Continuing to insist that the grid_mapping is a transform obfuscates what it is really needed for (which isn't what you first thought), leading to confusion.
</p>
<p>
As for the headache, I have often found that when I model a system, if I lump elements together that should be separate it comes back to cause trouble later, forcing me to go back and refactor the model in order to move forward.  That's a headache.
</p>
<p>
Grace and peace,
</p>
<p>
Jim
</p>

    </div>

              </div>
              <div class="change" id="trac-change-72-1397063903288120">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:72" class="cnum">
    <a href="#comment:72">comment:72</a>
  </span>
        in reply to:
    <a href="#comment:71">↑ 71</a>
        ;
          <span>follow-up:</span>
    <a href="#comment:73" class="follow-up">↓ 73</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-09T10%3A18%3A23-07%3A00&amp;precision=second" title="See timeline at 04/09/14 10:18:23">7 years ago</a> by davidhassell
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:71" title="Comment 71">biard</a>:
</p>
<p>
Dear Jim, 
</p>
<blockquote class="citation">
<p>
X/Y coordinates and lat/lon coordinates are just two types of coordinates.  Both need to be georeferenced.  The grid_mapping doesn't describe a transform.  It declares the CRS that your coordinates are defined with reference to - both X/Y and lat/lon.  Formula_terms declares a transform - one that takes unitless values as input (along with other inputs) and outputs <strong>georeferenceable</strong> coordinate values.  Continuing to insist that the grid_mapping is a transform obfuscates what it is really needed for (which isn't what you first thought), leading to confusion.
</p>
</blockquote>
<p>
I'd just like to make sure that the language is not obfuscating things. Our new georeference construct is neither a transform nor a coordinate reference system. Neither phrase appears in its definition, by design. It is, as it states, merely something which can provide information needed to locate spatial dimension and auxiliary coordinates. It does not proscribe what that information has to be.
 
</p>
<blockquote class="citation">
<p>
As for the headache, I have often found that when I model a system, if I lump elements together that should be separate it comes back to cause trouble later, forcing me to go back and refactor the model in order to move forward.  That's a headache.
</p>
</blockquote>
<p>
That is indeed sound advice, but in this case I have found that the georeference construct is practicable in the cf-python library that I work on. 
</p>
<p>
All the best,
</p>
<p>
David
</p>

    </div>

              </div>
              <div class="change" id="trac-change-73-1397068911592993">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:73" class="cnum">
    <a href="#comment:73">comment:73</a>
  </span>
        in reply to:
    <a href="#comment:72">↑ 72</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-09T11%3A41%3A51-07%3A00&amp;precision=second" title="See timeline at 04/09/14 11:41:51">7 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:72" title="Comment 72">davidhassell</a>:
</p>
<blockquote class="citation">
<p>
Replying to <a class="ticket" href="./107#comment:71" title="Comment 71">biard</a>:
</p>
<p>
Dear Jim, 
</p>
<blockquote class="citation">
<p>
X/Y coordinates and lat/lon coordinates are just two types of coordinates.  Both need to be georeferenced.  The grid_mapping doesn't describe a transform.  It declares the CRS that your coordinates are defined with reference to - both X/Y and lat/lon.  Formula_terms declares a transform - one that takes unitless values as input (along with other inputs) and outputs <strong>georeferenceable</strong> coordinate values.  Continuing to insist that the grid_mapping is a transform obfuscates what it is really needed for (which isn't what you first thought), leading to confusion.
</p>
</blockquote>
<p>
I'd just like to make sure that the language is not obfuscating things. Our new georeference construct is neither a transform nor a coordinate reference system. Neither phrase appears in its definition, by design. It is, as it states, merely something which can provide information needed to locate spatial dimension and auxiliary coordinates. It does not proscribe what that information has to be.
 
</p>
<blockquote class="citation">
<p>
As for the headache, I have often found that when I model a system, if I lump elements together that should be separate it comes back to cause trouble later, forcing me to go back and refactor the model in order to move forward.  That's a headache.
</p>
</blockquote>
<p>
That is indeed sound advice, but in this case I have found that the georeference construct is practicable in the cf-python library that I work on. 
</p>
<p>
All the best,
</p>
<p>
David
</p>
</blockquote>
<p>
David,
</p>
<p>
The problem is, as far as I can see, the new georeference construct that you are proposing is creating an ad-hoc aggregation of two completely different constructs, one of which does have something to do with georeferencing, and one of which <strong>does not</strong>.
</p>
<p>
Grace and peace,
</p>
<p>
Jim
</p>

    </div>

              </div>
              <div class="change" id="trac-change-74-1397143965924908">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:74" class="cnum">
    <a href="#comment:74">comment:74</a>
  </span>
        in reply to:
    <a href="#comment:71">↑ 71</a>
        ;
          <span>follow-up:</span>
    <a href="#comment:77" class="follow-up">↓ 77</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-10T08%3A32%3A45-07%3A00&amp;precision=second" title="See timeline at 04/10/14 08:32:45">7 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Jim
</p>
<p>
Replying to <a class="ticket" href="./107#comment:71" title="Comment 71">biard</a>:
</p>
<blockquote class="citation">
<p>
I think you've put your finger directly on the disagreement I have with your approach.  As I look at it, grid_mapping does not do the thing you describe in point 1 [<em>i.e. georeferencing</em>], and formula_terms is not involved with the thing you describe in point 2 [<em>i.e. defining a geophysical surface</em>].
</p>
</blockquote>
<ol><li>Latitude and longitude are implicitly georeferenced - not precisely, without stating the ellipsoid, but with sufficient definition for many purposes, especially in the spherical GCM world. Projection coordinates on a Cartesian plane, however, are not at all georeferenced without the projection information. The <tt>grid_mapping</tt> provides that information.
</li></ol><ol start="2"><li>Vertical coordinates in CF, identified by <tt>standard_names</tt>, are referred to a geophysically defined surface e.g. <tt>height_above_reference_ellipsoid</tt>. For some purposes, it may be necessary to specify precisely what that surface is. We cannot currently do this in CF for vertical coordinates, but I think it is highly likely that we will want to do it, since the issue has already been raised. We could do it using a <tt>grid_mapping</tt>, and then a vertical coordinate would require both <tt>formula_terms</tt> and <tt>grid_mapping</tt> for precise georeferencing.
</li></ol><p>
In summary, both <tt>grid_mapping</tt> and <tt>formula_terms</tt> have function (1), for different kinds of coordinate. <tt>grid_mapping</tt> has function (2), which is currently allowed only for horizontal coordinates. This mismatch between purposes and CF-netCDF constructs arises from the history of the convention. If we were starting from scratch, I think we would have a netCDF construct like <tt>grid_mapping</tt>, but extended, for both horizontal and vertical coordinates, and that would simpler. Essentially, that is what we are proposing for the logical data model.
</p>
<p>
Cheers
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-75-1397144269582420">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:75" class="cnum">
    <a href="#comment:75">comment:75</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:76" class="follow-up">↓ 76</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-10T08%3A37%3A49-07%3A00&amp;precision=second" title="See timeline at 04/10/14 08:37:49">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
A posting on behalf of my colleague:
</p>
<p>
Jim,
 
I am not able to post directly to the mailing list and Trac system, but I actually liked the word 'measurement' even though this invokes the idea of observations.
</p>
<p>
You all are talking about an abstract conceptual model, and the distinction between an 'ob' and a NWP field value is not as great as Jonathon seems to imply. There are many NWP products for customers that are 'virtual forecast obs'. There are two distinct aspects: the generating process and the topological structure of the data. It seems to me that you are discussing the value and its relationship to the immediately surrounding grid points, which is surely part of the second aspect.
</p>
<p>
In the underlying conceptual model, METCE, created by WMO and OGC, led by Jeremy Tandy, all forecasts are considered estimates (measurements!) of an underlying theoretical value.
</p>
<p>
Also NetCDF is used to represent observations on a regular grid - these are usually called images, though this is sometime misleading too.
</p>
<p>
Can I suggest the wording:
</p>
<p>
The 'cell methods construct' describes the methods by which the data values of the 'field construct' are derived from a source estimation field  (which may or may not be represented by an existing 'field construct').
</p>
<p>
HTH, Chris
</p>

    </div>

              </div>
              <div class="change" id="trac-change-76-1397146595402758">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:76" class="cnum">
    <a href="#comment:76">comment:76</a>
  </span>
        in reply to:
    <a href="#comment:75">↑ 75</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-10T09%3A16%3A35-07%3A00&amp;precision=second" title="See timeline at 04/10/14 09:16:35">7 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
As Mark and Jim know, I sent the following reply to Chris by email:
</p>
<p>
Thanks for your email. I am pretty sure that "measurement" would be a confusing word to use for model data, because people never describe simulated values as measurements. That's we chose the more agnostic "data value". I understand your point but I imagine that many users would not really understand what was meant by "source estimation field".
</p>
<p>
In more words, the idea of cell_methods is this: Each cell has a data value. However, if the quantity itself is continuously varying as a function of the independent variables, that data value is somehow representing all the values within the cell. The cell methods says what statistic of the variation is being used. It could be a point value, meaning it's a just one value from all those within the cell. It could be a sum, meaning it's an integral over all the cell (like rainfall accumulation over time). It could be some other statistic, such as mean or maximum. Maybe we should just spend more sentences on it, instead of trying to get away with a single sentence.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-77-1397154990992056">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:77" class="cnum">
    <a href="#comment:77">comment:77</a>
  </span>
        in reply to:
    <a href="#comment:74">↑ 74</a>
        ;
          <span>follow-up:</span>
    <a href="#comment:78" class="follow-up">↓ 78</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-10T11%3A36%3A30-07%3A00&amp;precision=second" title="See timeline at 04/10/14 11:36:30">7 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:74" title="Comment 74">jonathan</a>:
</p>
<blockquote class="citation">
<p>
Dear Jim
</p>
<p>
Replying to <a class="ticket" href="./107#comment:71" title="Comment 71">biard</a>:
</p>
<blockquote class="citation">
<p>
I think you've put your finger directly on the disagreement I have with your approach.  As I look at it, grid_mapping does not do the thing you describe in point 1 [<em>i.e. georeferencing</em>], and formula_terms is not involved with the thing you describe in point 2 [<em>i.e. defining a geophysical surface</em>].
</p>
</blockquote>
<ol><li>Latitude and longitude are implicitly georeferenced - not precisely, without stating the ellipsoid, but with sufficient definition for many purposes, especially in the spherical GCM world. Projection coordinates on a Cartesian plane, however, are not at all georeferenced without the projection information. The <tt>grid_mapping</tt> provides that information.
</li></ol><ol start="2"><li>Vertical coordinates in CF, identified by <tt>standard_names</tt>, are referred to a geophysically defined surface e.g. <tt>height_above_reference_ellipsoid</tt>. For some purposes, it may be necessary to specify precisely what that surface is. We cannot currently do this in CF for vertical coordinates, but I think it is highly likely that we will want to do it, since the issue has already been raised. We could do it using a <tt>grid_mapping</tt>, and then a vertical coordinate would require both <tt>formula_terms</tt> and <tt>grid_mapping</tt> for precise georeferencing.
</li></ol><p>
In summary, both <tt>grid_mapping</tt> and <tt>formula_terms</tt> have function (1), for different kinds of coordinate. <tt>grid_mapping</tt> has function (2), which is currently allowed only for horizontal coordinates. This mismatch between purposes and CF-netCDF constructs arises from the history of the convention. If we were starting from scratch, I think we would have a netCDF construct like <tt>grid_mapping</tt>, but extended, for both horizontal and vertical coordinates, and that would simpler. Essentially, that is what we are proposing for the logical data model.
</p>
<p>
Cheers
</p>
<p>
Jonathan
</p>
</blockquote>
<p>
Jonathan,
</p>
<p>
I can see your point about latitude and longitude being coarsely georeferenced (assuming they aren't rotated), and it's quite clear that in the history of all this, it was assumed that lat, lon, and height were de facto georeferenced. This was, clearly, <em>good enough</em> for the GCM world.  Working from this background, it's easy to see why grid_mapping was thought of as a transform. I don't, however, think it's a good idea to continue to think of it this way.  I'm in full agreement that grid_mapping needs to be extended to allow definition of a fully 3D CRS.
</p>
<p>
Regarding your inclusions <a class="missing wiki">i.e. georeferencing?</a> and <a class="missing wiki">i.e. defining a geophysical surface?</a> in your reply to my reply (to your reply...):
</p>
<p>
Grid_mapping does accomplish georeferencing.  It georeferences all the the georeferenceable coordinate variables, both X/Y and lon/lat, assuming it declares a projected or Cartesian CRS.  (If it's a lon/lat CRS, then there won't be any X/Y coordinate variables.)
</p>
<p>
Formula_terms doesn't define a geophysical surface.  As stated in the CF standard formula_terms provides "a mapping between the dimensionless coordinate values and dimensional values that <strong>can be</strong> uniquely located with respect to a point on the earth's surface." (Emphasis mine.) The output of applying formula_terms is georeferenceable.  This input isn't.
</p>
<p>
This is what it boils down to in my view:
</p>
<p>
The contents of a variable that are dimensionless vertical coordinate values are not, themselves, georeferenceable (sigma coordinates, etc). They can be used as one of the inputs to the transform/function declared by the formula_terms attribute, and the outputs are georeferenceable. The outputs require a declaration of the CRS used in order to fix their locations relative to the body of the Earth. The historical view of the output values was that they were implicitly georeferenced, which was considered good enough for many purposes, and often was/is.
</p>
<p>
The contents of a variable that are horizontal projection coordinate values are, themselves, georeferenceable.  They require a declaration of the CRS used in order to fix their locations relative to the body of the Earth.   Longitudes and latitudes within the declared CRS may be obtained from the contents of a pair of X and Y coordinate variables using transforms that are associated with, but not provided by the grid_mapping associated with the X and Y coordinate variables.
</p>
<p>
The contents of a variable that are latitude or longitude values are, themselves, georeferenceable.  They require a declaration of the CRS used in order to fix their locations relative to the body of the Earth. The historical view of the values was that they were implicitly georeferenced, which was considered good enough for many purposes, and often was/is.
</p>
<p>
If you don't assume that georeferenceable equates to georeferenced, then I think it's clear that formula_terms does not equate to grid_mapping in functionality.  CRSs are a complicated topic, and there are subtleties and variations that the above descriptions gloss over (as we've seen from the CRS discussions), but I don't think any of those variations negate the point that formula_terms transforms non-georeferenceable values into georeferenceable values, while grid_mapping (if I, for the sake of argument, accept the premise) bidirectionally transforms one set of georeferenceable values into another set of georeferenceable values.
</p>
<p>
Even if you had used the dummy variable formalism for formula_terms (which would have been great!), it wouldn't make formula_terms any more equivalent logically to grid_mapping.
</p>
<p>
Grace and peace,
</p>
<p>
Jim
</p>

    </div>

              </div>
              <div class="change" id="trac-change-78-1397206607742276">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:78" class="cnum">
    <a href="#comment:78">comment:78</a>
  </span>
        in reply to:
    <a href="#comment:77">↑ 77</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-11T01%3A56%3A47-07%3A00&amp;precision=second" title="See timeline at 04/11/14 01:56:47">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:77" title="Comment 77">biard</a>:
</p>
<p>
Hello Jim
</p>
<p>
I think your use of the terms <em>georeferenceable</em> and <em>georeferenced</em> is very helpful in this discussion.  It helpfully illustrates the difference that I agree should exist in the data model.
</p>
<p>
Coordinates, collections of values, are georeferenceable, in principal.  To explicitly georeference a coordinate requires a coordinate reference system.  These are separate concepts.
</p>
<p>
all the best
mark
</p>

    </div>

              </div>
              <div class="change" id="trac-change-79-1397490661196338">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:79" class="cnum">
    <a href="#comment:79">comment:79</a>
  </span>
        in reply to:
    <a href="#comment:55">↑ 55</a>
        ;
          <span>follow-ups:</span>
    <a href="#comment:81" class="follow-up">↓ 81</a>
    <a href="#comment:82" class="follow-up">↓ 82</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-14T08%3A51%3A01-07%3A00&amp;precision=second" title="See timeline at 04/14/14 08:51:01">7 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Jim
</p>
<p>
Both <tt>grid_mapping</tt> and <tt>formula_terms</tt> can be described logically by the <a class="ext-link" href="http://kitt.llnl.gov./107?replyto=55#comment:55"><span class="icon">​</span>text which David posted</a>. For instance,
</p>
<ul><li>a vertical georeference construct might apply to an atmosphere hybrid height coordinate, in which case it would contain the <tt>a</tt> (dimensions of height) and <tt>b</tt> (dimensionless) auxiliary coordinate constructs, a field of surface height above the geoid, the auxiliary coordinate construct of height above the geoid (if it exists in the dataset), and optionally the name of the geoid (if we permit this extension). Its purpose is to relate the <tt>a</tt> and <tt>b</tt>, which by themselves do not geolocate the data, to the height above the geoid, which is a geophysically defined surface whose precise realisation might be specified as well.
</li></ul><ul><li>a horizontal georeference construct might apply to a rotated latitude-longitude coordinate system, in which case it would contain the rotated latitude and longitude coordinate constructs, the (unrotated, geographical) latitude and longitude of the rotated pole, the auxiliary coordinate constructs of latitude and longitude, and optionally the definition of the reference ellipsoid. Its purpose is to relate the rotated latitude and longitude, which by themselves do not geolocate the data, to geographical latitude and longitude, which do geolocate the data, optionally with the ellipsoid to make their definition more precise.
</li></ul><p>
What is to be gained in clarity or simplicity by regarding these two things as distinct concepts? We don't talk about transforms or coordinate reference systems because these terms have technical and sometimes restrictive meanings, and therefore may make the description less clear.
</p>
<p>
Best wishes
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-80-1397491359925269">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:80" class="cnum">
    <a href="#comment:80">comment:80</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-14T09%3A02%3A39-07%3A00&amp;precision=second" title="See timeline at 04/14/14 09:02:39">7 years ago</a> by edavis
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I'm not remembering or finding any mention in this discussion of the <a class="ext-link" href="http://www.opengeospatial.org/standards/netcdf"><span class="icon">​</span>OGC CF-netCDF</a> implementation specification (<a class="ext-link" href="https://portal.opengeospatial.org/files/?artifact_id=51908"><span class="icon">​</span>11-165r2</a>). Stefano Nativi and Ben Domenico have put a lot of work into developing this mapping of CF-netCDF into the various OGC/ISO abstract models. Seems like it might be useful especially in terms of the recent grid mapping / dimensionless vertical coordinates / CRS discussions given that OGC has a lot of experience with CRS and is more recently trying to include concepts to cover dimensionless vertical coordinates (sorry, not finding that specification).
</p>
<p>
Hope that's helpful,
</p>
<p>
Ethan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-81-1397508693640547">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:81" class="cnum">
    <a href="#comment:81">comment:81</a>
  </span>
        in reply to:
    <a href="#comment:79">↑ 79</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-14T13%3A51%3A33-07%3A00&amp;precision=second" title="See timeline at 04/14/14 13:51:33">7 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:79" title="Comment 79">jonathan</a>:
</p>
<blockquote class="citation">
<p>
Dear Jim
</p>
<p>
Both <tt>grid_mapping</tt> and <tt>formula_terms</tt> can be described logically by the <a class="ext-link" href="http://kitt.llnl.gov./107?replyto=55#comment:55"><span class="icon">​</span>text which David posted</a>. For instance,
</p>
<ul><li>a vertical georeference construct might apply to an atmosphere hybrid height coordinate, in which case it would contain the <tt>a</tt> (dimensions of height) and <tt>b</tt> (dimensionless) auxiliary coordinate constructs, a field of surface height above the geoid, the auxiliary coordinate construct of height above the geoid (if it exists in the dataset), and optionally the name of the geoid (if we permit this extension). Its purpose is to relate the <tt>a</tt> and <tt>b</tt>, which by themselves do not geolocate the data, to the height above the geoid, which is a geophysically defined surface whose precise realisation might be specified as well.
</li></ul><ul><li>a horizontal georeference construct might apply to a rotated latitude-longitude coordinate system, in which case it would contain the rotated latitude and longitude coordinate constructs, the (unrotated, geographical) latitude and longitude of the rotated pole, the auxiliary coordinate constructs of latitude and longitude, and optionally the definition of the reference ellipsoid. Its purpose is to relate the rotated latitude and longitude, which by themselves do not geolocate the data, to geographical latitude and longitude, which do geolocate the data, optionally with the ellipsoid to make their definition more precise.
</li></ul><p>
What is to be gained in clarity or simplicity by regarding these two things as distinct concepts? We don't talk about transforms or coordinate reference systems because these terms have technical and sometimes restrictive meanings, and therefore may make the description less clear.
</p>
<p>
Best wishes
</p>
<p>
Jonathan
</p>
</blockquote>
<p>
Jonathan,
</p>
<p>
It's clear that we are not going to come to an agreement on this, and I'm not the one bearing the burden of trying to write the model, so this will be the last posting I'll make about the georeferencing construct.  I think that clarity and simplicity is exactly what you gain by keeping formula_terms and grid_mapping as distinct concepts. Your avoidance of talking about coordinate reference systems just makes the whole thing even more unclear.
</p>
<p>
The formula_terms attribute, if not restricted to producing georeferenceable values, could be easily used for non-georeferencing purposes. It has no intrinsic affinity with georeferencing. Grid_mapping, on the other hand, is clearly a georeferencing construct, and doesn't lend itself to other uses. What greater clarity or simplicity is obtained by coming up with a construct that attempts to put these two simple yet different concepts into a single genericized one?
</p>
<p>
Grace and peace,
</p>
<p>
Jim
</p>

    </div>

              </div>
              <div class="change" id="trac-change-82-1397577081497653">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:82" class="cnum">
    <a href="#comment:82">comment:82</a>
  </span>
        in reply to:
    <a href="#comment:79">↑ 79</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-15T08%3A51%3A21-07%3A00&amp;precision=second" title="See timeline at 04/15/14 08:51:21">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./107#comment:79" title="Comment 79">jonathan</a>:
Hello Jonathan
</p>
<blockquote class="citation">
<p>
Both <tt>grid_mapping</tt> and <tt>formula_terms</tt> can be described logically by the <a class="ext-link" href="http://kitt.llnl.gov./107?replyto=55#comment:55"><span class="icon">​</span>text which David posted</a>. For instance,
</p>
</blockquote>
<p>
I can see that this can be done, the important question for me is should it be done?
</p>
<p>
Where are the benefits and where are the costs?
</p>
<p>
I do not perceive the benefits of this conflation to form a new <tt>geolocation</tt> type, based on the comments to date.  
</p>
<p>
This conflation is quite a jump from the current CF conventions terminology, which concerns me;  I think it is difficult to explain.
</p>
<blockquote class="citation">
<p>
What is to be gained in clarity or simplicity by regarding these two things as distinct concepts? We don't talk about transforms or coordinate reference systems because these terms have technical and sometimes restrictive meanings, and therefore may make the description less clear.
</p>
</blockquote>
<p>
A particular benefit I see in having two separate concepts in the CF data model is interoperability with other domains and concepts.
</p>
<p>
If a concept in the CF data model cleanly and clearly relates to a concept in another domain then this is a big supporting factor for interoperability.  
</p>
<p>
I think this is the case here: the georeferencing capability provided by a coordinate reference system type of thing in CF is very closely aligned to the ISO19111 definition of a coordinate reference system.  This brings huge benefits in providing interoperability with other ISO aware communities, such as the OGC, as highlighted by <a class="ticket" href="./107#comment:80" title="Comment 80">edavis</a>. I think this is the approach Stefano has taken with the OGC to date.  The documents he has written link grid_mapping variables to OGC CRS instances.
</p>
<p>
The derivation of coordinate values, perhaps for georeferencing purposes, based on bespoke defined algorithms and reference data sets is a much more specialised field, which is not widely used in the ISO and OGC communities (for example).
</p>
<p>
Conflating the well known georeferencing function of coordinate reference systems with these derived coordinate functionality in a single data model type is making it very hard for that type to be understood and used effectively by other communities.  
</p>
<p>
It also makes it much harder for CF to adopt useful building blocks for other communities, as the interfaces are all in different places.
</p>
<p>
So, the cost of the approach of conflating these concepts is it isolates the CF community from other communities, just when we and they stand to benefit so much from better interoperability.
</p>
<p>
The benefit has to significantly outweigh this cost, and I am afraid I cannot see this.
</p>
<p>
With this in mind I strongly favour the separation of these concepts within the data model.  Whilst they can be logically conflated, I think the cost is prohibitive and the benefit minimal.  
</p>
<p>
all the best
mark
</p>

    </div>

              </div>
              <div class="change" id="trac-change-83-1398249538291195">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:83" class="cnum">
    <a href="#comment:83">comment:83</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-23T03%3A38%3A58-07%3A00&amp;precision=second" title="See timeline at 04/23/14 03:38:58">7 years ago</a> by jonblower
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hi all,
</p>
<p>
Just to add a vote to this debate having talked off-line a while ago with Jonathan and David, and having read Mark and Jim's comments above. I'm persuaded that formula_terms and grid_mapping are doing different jobs. Formula_terms turns dimensionless coordinate values into dimensional ones; grid_mapping adds information about CRSs that is not already implicitly or explicitly present. You might need both, for example to turn dimensionless vertical coordinates into heights (using formula_terms) and then provide the ellipsoid (using grid_mapping).
</p>
<p>
Therefore I don't see much benefit in conflating these orthogonal concepts.
</p>
<p>
Cheers,
Jon
</p>

    </div>

              </div>
              <div class="change" id="trac-change-84-1398270514819859">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:84" class="cnum">
    <a href="#comment:84">comment:84</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-04-23T09%3A28%3A34-07%3A00&amp;precision=second" title="See timeline at 04/23/14 09:28:34">7 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Jon
</p>
<p>
Thanks for thinking about it.
</p>
<p>
Although <tt>formula_terms</tt> was introduced to turn vertical dimensionless coordinats into dimensional ones, there are cases (e.g. <tt>hybrid height</tt>) where some of the input has physical dimensions, and perhaps others will be added too. Hence its title is out of date and Appendix D should be renamed.
</p>
<p>
The purpose of <tt>formula_terms</tt> is stated in 4.3.2 as to "provide a mapping between the dimensionless coordinate values and dimensional values that can positively and uniquely indicate the location of the data". But dealing with "dimensionless" coordinates is not the main purpose of it, so this statement is not quite right and not clear enough, I would say; it could for instance be modified to read "provide a mapping between the values of the one-dimensional variables containing vertical coordinate values (which may be dimensionless) and dimensional values that can uniquely indicate the vertical location of the data" to describe the current situation.
</p>
<p>
The purpose of <tt>grid_mapping</tt> is described in 5.6 as "to describe the mapping between the given [horizontal] coordinate variables and the true latitude and longitude coordinates". Would you not agree there is a similarity of purpose? In both cases, the 1D coordinate values are not georeferenced, and the intention is to make a link to other values which are georeferenced (at least approximately). I think putting together two constructs which have a similar logical purpose, although they are achieved with different netCDF mechanisms, is a simplification in logical terms. What do you or others see as the logical distinction between these purposes, apart from one being vertical and the other horizontal?
</p>
<p>
The reference ellipsoid has two distinct kinds of purpose. (1) You need it to convert between projection coordinates and lat-lon coordinates. (2) You need it (as you have explained) to assign the height, latitude and longitude of any point which is not actually on the ellipsoid, since this is done by dropping a perpendicular to the surface. We could put purpose (1) together with <tt>formula_terms</tt> and the projection part of <tt>grid_mapping</tt>, and identify purpose (2) as a different logical construct, which will probably also be needed for vertical coordinate variables (that hasn't been proposed yet). But that separation would be inconvenient because it's the same information needed for both purposes, and the purposes are not distinguished in CRS descriptions.
</p>
<p>
I don't think that merging <tt>formula_terms</tt> and <tt>grid_mapping</tt> into one logical construct gives any problem for interoperability with other standards. Relevant elements of this construct, including ellipsoid and map projection definitions, map onto CRS descriptions quite straightforwardly, as Etienne Tourigny showed. I agree that interoperability is important. What specific problems can other people see with this approach?
</p>
<p>
Cheers
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-85-1425049894338168">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:85" class="cnum">
    <a href="#comment:85">comment:85</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2015-02-27T07%3A11%3A34-08%3A00&amp;precision=second" title="See timeline at 02/27/15 07:11:34">6 years ago</a> by davidhassell
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hello,
</p>
<p>
To those who were at the GO-ESSP meeting this week, many thanks for listening to my talk on the CF data model and for your constructive feedback.
</p>
<p>
The latest, full description of the data model that I presented can be found at <a class="ext-link" href="http://www.met.reading.ac.uk/~david/cfdm_0.8.html"><span class="icon">​</span>http://www.met.reading.ac.uk/~david/cfdm_0.8.html</a>
</p>
<p>
All the best,
</p>
<p>
David
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="/trac/wiki/TracTickets">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="./107?format=rss" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="./107?format=csv" class="csv">Comma-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="./107?format=tab" class="tab">Tab-delimited Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="https://trac.edgewall.org/"><img src="/trac/chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="/trac/about"><strong>Trac 1.0.20</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the CF Metadata home page at<br /><a href="http://cf-convention.github.io">http://cf-convention.github.io</a><br><font color="#0000ff" size="3"><b>The CF Metadata Trac issue tracker is read-only and will soon be shut down permanently</b></font></p>
    </div>
  </body>
</html>
