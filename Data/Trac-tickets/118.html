<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      #118 (Add an attribute in Appendix F to identify the geoid or other geopotential datum)
     â€“ CF Metadata
    </title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="/trac/search" />
        <link rel="prev" href="./117.html" title="ticket #117" />
        <link rel="last" href="./176.html" title="ticket #176" />
        <link rel="help" href="/trac/wiki/TracGuide" />
        <link rel="alternate" href="./118?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="./118?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="./118?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" />
        <link rel="next" href="./119.html" title="ticket #119" />
        <link rel="start" href="/trac/wiki" />
        <link rel="stylesheet" href="/trac/chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="/trac/chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="./1.html" title="ticket #1" />
        <link rel="shortcut icon" href="/trac/chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="/trac/chrome/common/trac.ico" type="image/x-icon" />
    <style id="trac-noscript" type="text/css">.trac-noscript { display: none !important }</style>
      <link type="application/opensearchdescription+xml" rel="search" href="/trac/search/opensearch" title="Search CF Metadata" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="b8aeac20bf7fd49b63339caa";
      var comments_prefs={"comments_only":"false","comments_order":"oldest"};
    </script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/jquery.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/babel.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/trac.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/search.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/folding.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/wikitoolbar.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/resizer.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/auto_preview.js"></script>
    <script type="text/javascript">
      jQuery("#trac-noscript").remove();
      jQuery(document).ready(function($) {
        $(".trac-autofocus").focus();
        $(".trac-target-new").attr("target", "_blank");
        setTimeout(function() { $(".trac-scroll").scrollToTop() }, 1);
        $(".trac-disable-on-submit").disableOnSubmit();
      });
    </script>
    <script type="text/javascript" src="/trac/chrome/common/js/threaded_comments.js"></script>
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
      /*<![CDATA[*/
        $("#attachments").toggleClass("collapsed");
        $("#trac-up-attachments").click(function () {
          $("#attachments").removeClass("collapsed");
          return true;
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
        function setRevertHandler() {
          $("button.trac-revert").click(function() {
            var div = $("div", this);
            var field_name = div[0].id.substr(7);
            var field_value = div.text();
            var input = $("#propertyform *[name=field_" + field_name + "]");
            if (input.length > 0) {
              if (input.filter("input[type=radio]").length > 0) {
                input.val([field_value]);
              } else if (input.filter("input[type=checkbox]").length > 0) {
                input.val(field_value == "1" ? [field_value] : []);
              } else {
                input.val(field_value);
              }
            } else { // Special case for CC checkbox
              input = $("#propertyform input[name=cc_update]").val([]);
            }
            input.change();
            $(this).closest("li").remove();
            return false;
          });
        }
        setRevertHandler();
        var comment_focused = false;
        $("#comment").focus(function() { comment_focused = true; })
                     .blur(function() { comment_focused = false; });
        $("#propertyform").autoSubmit({preview: '1'}, function(data, reply) {
          var items = $(reply);
          // Update ticket box
          $("#ticket").replaceWith(items.filter('#ticket'));
          // Update changelog with original order
          $("#changelog").replaceWith(items.filter("#changelog"));
          // Reorder comments
          applyCommentsOrder(
            $('#prefs input[name="trac-comments-order"]:checked').val());
          // Show warning
          var new_changes = $("#changelog .trac-new");
          $("#trac-edit-warning").toggle(new_changes.length != 0);
          if (new_changes.length != 0)
            $("#changelog").parent().show().removeClass("collapsed");
          // Update view time
          $("#propertyform input[name='view_time']").replaceWith(items.filter("input[name='view_time']"));
          // Update preview
          var preview = $("#ticketchange").html(items.filter('#preview').children());
          var show_preview = preview.children().length != 0;
          $("#ticketchange").toggle(show_preview);
          setRevertHandler();
          // Collapse property form if comment editor has focus
          if (show_preview && comment_focused)
            $("#modify").parent().addClass("collapsed");
          // Execute scripts to load stylesheets
          items.filter("script").appendTo("head");
        }, "#ticketchange .trac-loading");
        $("#trac-comment-editor").autoSubmit({preview_comment: '1'}, function(data, reply) {
          var comment = $("#trac-comment-editor").next("div.comment").html(reply);
          comment.toggle(comment.children().length != 0);
        }, "#changelog .trac-loading");
        /*]]>*/
      });
    </script>
  </head>
  <body>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
        <ul>
          <li class="first"><span>&larr; <a class="prev" href="./117.html" title="ticket #117">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="./119.html" title="ticket #119">Next Ticket</a> &rarr;</span></li>
        </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
        <div id="ticket" class="trac-content ">
  <div class="date">
    <p>Opened <a class="timeline" href="/trac/timeline?from=2014-09-26T09%3A54%3A21-07%3A00&amp;precision=second" title="See timeline at 09/26/14 09:54:21">7 years ago</a></p>
    <p>Closed <a class="timeline" href="/trac/timeline?from=2017-02-14T13%3A15%3A41-08%3A00&amp;precision=second" title="See timeline at 02/14/17 13:15:41">4 years ago</a></p>
  </div>
  <h2>
    <a href="./118.html" class="trac-id">#118</a>
    <span class="trac-status">
      <a href="/trac/query?status=closed">closed</a>
    </span>
    <span class="trac-type">
      <a href="/trac/query?status=!closed&amp;type=enhancement">enhancement</a>
    </span>
    <span class="trac-resolution">
      (<a href="/trac/query?status=closed&amp;resolution=fixed">fixed</a>)
    </span>
  </h2>
  <h1 id="trac-ticket-title" class="searchable">
    <span class="summary">Add an attribute in Appendix F to identify the geoid or other geopotential datum</span>
  </h1>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable"><a href="/trac/query?status=!closed&amp;reporter=jonathan">jonathan</a></td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner"><a href="/trac/query?status=!closed&amp;owner=davidhassell">davidhassell</a></td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="/trac/query?status=!closed&amp;priority=medium">medium</a>
        </td>
        <th id="h_milestone" class="missing">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="missing milestone"></a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="/trac/query?status=!closed&amp;component=cf-conventions">cf-conventions</a>
        </td>
        <th id="h_version" class="missing">
          Version:
        </th>
        <td headers="h_version">
              <a href="/trac/query?status=!closed&amp;version="></a>
        </td>
    </tr><tr>
        <th id="h_keywords" class="missing">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
        <th id="h_cc" class="missing">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
Some geophysical quantities, including some vertical coordinates, are defined with reference to the geoid. For example, the <tt>standard_name</tt> of <tt>altitude</tt> is the height above the geoid. CF does not have a default geoid, because the convention is used for both model-generated and real-world data, and climate models typically do not use a real-world geoid. When CF is used for real-world data, it may be necessary to desirable to specify which geoid is being used.
</p>
<p>
This proposal is to define a new attribute <tt>geoid_name</tt> to be included in the table of Appendix F for the legal attributes of the <tt>grid_mapping</tt> variable. This attribute will have type S (string) and its description will be "The name of the geoid. Corresponds to an OGC WKT VERT_DATUM name."
</p>
<p>
<a class="ext-link" href="http://kitt.llnl.gov./80"><span class="icon">â€‹</span>Ticket 80</a>, which was agreed a long time ago for inclusion in CF 1.7, also adds some attributes to Appendix F. This proposal is complementary to and consistent with that one.
</p>
<p>
Jonathan Gregory
</p>

    </div>
  </div>
</div>
          

        <div>
          <div class="trac-noscript" style="position: relative">
            <form id="prefs" method="get" action="/trac/prefs" style="position: absolute; right: 0">
              <div id="trac-comments-order">
                <input type="radio" id="trac-comments-oldest" name="trac-comments-order" value="oldest" checked="checked" />
                <label for="trac-comments-oldest">Oldest first</label>
                <input type="radio" id="trac-comments-newest" name="trac-comments-order" value="newest" />
                <label for="trac-comments-newest">Newest first</label>
                <span id="trac-threaded-toggle" style="display: none">
                  <input type="radio" id="trac-comments-threaded" name="trac-comments-order" value="threaded" />
                  <label for="trac-comments-threaded">Threaded</label>
                </span>
              </div>
              <div>
                <input id="trac-comments-only-toggle" type="checkbox" />
                <label for="trac-comments-only-toggle">Comments only</label>
              </div>
            </form>
          </div>
          <h3 class="foldable">Change History <span class="trac-count">(24)</span></h3>
          <div id="changelog">
              <div class="change" id="trac-change-1-1411750499868872">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:1" class="cnum">
    <a href="#comment:1">comment:1</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-09-26T09%3A54%3A59-07%3A00&amp;precision=second" title="See timeline at 09/26/14 09:54:59">7 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-summary">
      <strong class="trac-field-summary">Summary</strong>
        changed from <em>Add an attribute in Appendix F to identify in the geoid</em> to <em>Add an attribute in Appendix F to identify the geoid</em>
    </li>
  </ul>

              </div>
              <div class="change" id="trac-change-2-1411754087457785">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:2" class="cnum">
    <a href="#comment:2">comment:2</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-09-26T10%3A54%3A47-07%3A00&amp;precision=second" title="See timeline at 09/26/14 10:54:47">7 years ago</a> by rsignell
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I support this ticket, and would be willing to moderate. 
</p>
<p>
So since you specify OGC WKT, simple names of well-known datums (such as <strong>NAVD88</strong>) would <em>not</em> be compliant, right?  
</p>
<p>
And neither would EPSG names, such as <strong>EPSG:5703</strong> (NAVD88), right?
</p>
<p>
To be valid, we would require full OGC WKT like (for NAVD88): 
</p>
<pre class="wiki">VERT_CS["NAVD88 height",VERT_DATUM["North American Vertical Datum 1988",2005,AUTHORITY["EPSG","5103"],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AXIS["Up",UP],AUTHORITY["EPSG","5703"]]
</pre><p>
Is that the idea?
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3-1412090691459706">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:3" class="cnum">
    <a href="#comment:3">comment:3</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-09-30T08%3A24%3A51-07%3A00&amp;precision=second" title="See timeline at 09/30/14 08:24:51">7 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Rich
</p>
<p>
I'm proposing that we take the same approach as Etienne did with the other new attributes for Appendix F in ticket 80. That is, this attribute should contain a name, not a code, consistent with the general approach of CF that the metadata should be self-explanatory. For the horizontal datum names, ellipsoid names and prime meridian names, Etienne extracted a list of possibilities from the EPSG database. Please have a look at the attachments to <a class="ext-link" href="https://cf-pcmdi.llnl.gov/trac/wiki/Cf2CrsWkt"><span class="icon">â€‹</span>https://cf-pcmdi.llnl.gov/trac/wiki/Cf2CrsWkt</a>.
</p>
<p>
Could the same be done for geoid names? This is not something I know anything about, but perhaps someone else can extract a list of possible geoid names from EPSG? I think that providing such a list, as Etienne did for the other attributes, is a good means for CF to promote the use of another existing standard. Is "North American Vertical Datum 1988" the name of a geoid? If so I guess it would be one of the possible values for this attribute.
</p>
<p>
Cheers
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4-1412092438697436">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:4" class="cnum">
    <a href="#comment:4">comment:4</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-09-30T08%3A53%3A58-07%3A00&amp;precision=second" title="See timeline at 09/30/14 08:53:58">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I recognise the need for the capability to define vertical datum instances for vertical coordinates to reference.
</p>
<p>
Generally a Geoid is used to define a 3D coordinate reference system, not just the vertical aspect. I assume that in the majority of cases we would want to define <em>altitude</em> with respect to a geoid which other coordinates are already defined with respect to.
</p>
<ul><li>Are there use cases where we need to define altitude with respect to a datum which other coordinates are not defined with respect to?
</li><li>Is it valid OGC-WKT to define a WKT string which only defines a <em>VERT_CS</em>?
</li></ul><p>
Given that we are introducing well known text support for grid_mapping instances in @CF-1.7, can we just use this mechanism, rather than producing an additional set of CF geoid names which will require maintenance by the community?
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5-1412093559185636">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:5" class="cnum">
    <a href="#comment:5">comment:5</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:6" class="follow-up">â†“Â 6</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-09-30T09%3A12%3A39-07%3A00&amp;precision=second" title="See timeline at 09/30/14 09:12:39">7 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Mark
</p>
<p>
I don't think we should reopen the extremely lengthy and effortful discussions which we had before about how to approach the relationship with WKT. In the end, we agreed two tickets. Ticket 69 allows WKT to be included in the <tt>grid_mapping</tt> variable. It says, "The <tt>crs_wkt</tt> attribute is intended to act as a supplement to other single-property CF grid mapping attributes (as described in Appendix F); it is not intended to replace those attributes. If data producers omit the single-property grid mapping attributes in favour of the compound <tt>crs_wkt attribute</tt>, software which cannot interpret <tt>crs_wkt</tt> will be unable to use the <tt>grid_mapping</tt> information. Therefore the CRS should be described as thoroughly as possible with the single-property attributes as well as by <tt>crs_wkt</tt>." Ticket 80 adds some more attributes to <tt>grid_mapping</tt> so that more of the WKT can be put into CF attributes. Etienne (or perhaps it was Phil Bentley, I'm sorry I'm not sure which) extracted lists from the EPSG database for convenience of users. Those extracted lists themselves are not definitive; we're not maintaining a CF standard, but relying on an external standard.
</p>
<p>
The present ticket is a supplement to ticket 80, in effect. CF doesn't say anything about the legal syntax of WKT strings, because that's not our business. However, we do need a CF method to specify the geoid, for the sake of precision in defining coordinates which refer to the geoid.
</p>
<p>
If there is a <tt>grid_mapping</tt> attribute of the kind you can have in CF-1.6 and earlier versions, it applies to all the coordinates of the data variable. If you did want to use different geoids for different coordinates, that could be done with extended form of <tt>grid_mapping</tt> attribute that we agreed on a ticket of yours.
</p>
<p>
Cheers
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6-1412688027465999">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:6" class="cnum">
    <a href="#comment:6">comment:6</a>
  </span>
        in reply to:
    <a href="#comment:5">â†‘Â 5</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-10-07T06%3A20%3A27-07%3A00&amp;precision=second" title="See timeline at 10/07/14 06:20:27">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./118#comment:5" title="Comment 5">jonathan</a>:
Dear Jonathan
</p>
<p>
My comment was triggered by <a class="ticket" href="./118#comment:2" title="Comment 2">rsignell's</a> point about storing OGC-WKT in this attribute.  This seems to me to be unwise.  If people are storing WKT, I think they should use the crs_wkt attribute.
</p>
<p>
I think that you are proposing something different, but I don't understand the information or the syntax which would be stored in the proposed attribute, how this would be controlled and validated.  
</p>
<p>
Some examples of the kinds of strings that 
<em>crs_wkt</em>
would refer to would help the discussion, for me.
</p>
<p>
thank you
mark
</p>

    </div>
  <div class="trac-lastedit ">
    Last edited <a class="timeline" href="/trac/timeline?from=2014-10-07T06%3A29%3A12-07%3A00&amp;precision=second" title="See timeline at 10/07/14 06:29:12">7 years ago</a>
        by markh
      (<a href="./118?cversion=0&amp;cnum_hist=6#comment:6">previous</a>)
      (<a href="./118?action=comment-diff&amp;cnum=6&amp;version=1">diff</a>)
  </div>

              </div>
              <div class="change" id="trac-change-7-1412692023415974">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:7" class="cnum">
    <a href="#comment:7">comment:7</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:8" class="follow-up">â†“Â 8</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-10-07T07%3A27%3A03-07%3A00&amp;precision=second" title="See timeline at 10/07/14 07:27:03">7 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Mark
</p>
<p>
I am not proposing anything different from what has already been decided in ticket 69. It is permitted to put any valid WKT in the <tt>crs_wkt</tt> attribute. CF doesn't standardise WKT, of course, and CF generic applications can't be expected to analyse WKT. You are much more familiar with WKT strings than I am, so I expect you have got examples!
</p>
<p>
The new attribute for <tt>grid_mapping</tt> that I am proposing is of exactly the same kind of those which have been agreed in ticket 80, to supplement those which we already have in App F. It is an attribute in which you can store the geoid name, that's all. I believe that the geoid name may be the string at the start of a VERT_DATUM clause in WKT if the vertical datum is a geoid, but as I say, I am no expert on WKT. Hence my question, is "North American Vertical Datum 1988" the name of a geoid? Does anyone know?
</p>
<p>
However, I don't think that the answer to that affects the proposal. Where the geoid name is recorded in WKT is not the issue in this proposal. The proposal is about an attribute in <tt>grid_mapping</tt> which is specifically intended to record the geoid name. If <tt>crs_wkt</tt> is provided as well, presumably the geoid name might be in there as well, and we can only hope they will be consistent. That is the same situation as for all the other attributes, and is what we decided to do in ticket 69 and 80. I don't think we should reopen that discussion, which took a long time and a lot of thought by several people.
</p>
<p>
Best wishes
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8-1413206271011578">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:8" class="cnum">
    <a href="#comment:8">comment:8</a>
  </span>
        in reply to:
    <a href="#comment:7">â†‘Â 7</a>
        ;
          <span>follow-up:</span>
    <a href="#comment:9" class="follow-up">â†“Â 9</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-10-13T06%3A17%3A51-07%3A00&amp;precision=second" title="See timeline at 10/13/14 06:17:51">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./118#comment:7" title="Comment 7">jonathan</a>:
It is not my intent to reopen old tickets regarding the definition of grid_mapping attributes.
</p>
<p>
I would like to understand the proposed contents of the new attribute, geoid_name; it is not clear to me what information this attribute would contain or how that information would be encoded.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9-1413298466648226">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:9" class="cnum">
    <a href="#comment:9">comment:9</a>
  </span>
        in reply to:
    <a href="#comment:8">â†‘Â 8</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2014-10-14T07%3A54%3A26-07%3A00&amp;precision=second" title="See timeline at 10/14/14 07:54:26">7 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Mark
</p>
<blockquote class="citation">
<p>
Replying to <a class="ticket" href="./118#comment:7" title="Comment 7">jonathan</a>:
It is not my intent to reopen old tickets regarding the definition of grid_mapping attributes.
</p>
</blockquote>
<p>
OK - good. Thanks. :-)
</p>
<blockquote class="citation">
<p>
I would like to understand the proposed contents of the new attribute, geoid_name; it is not clear to me what information this attribute would contain or how that information would be encoded.
</p>
</blockquote>
<p>
It is a string containing the name of the geoid. It's not encoded. This is how we store other names, such as the <tt>reference_ellipsoid_name</tt> attribute introduced by ticket 80, which likewise is a string which can also appear in the WKT. Have I misunderstood the question?
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10-1429713730714061">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:10" class="cnum">
    <a href="#comment:10">comment:10</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2015-04-22T07%3A42%3A10-07%3A00&amp;precision=second" title="See timeline at 04/22/15 07:42:10">6 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Following discussion with Rich Signell, I would like to add a couple of examples of <tt>geoid_name</tt>, namely EGM96 and GEOID12B.
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11-1429810417334118">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:11" class="cnum">
    <a href="#comment:11">comment:11</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2015-04-23T10%3A33%3A37-07%3A00&amp;precision=second" title="See timeline at 04/23/15 10:33:37">6 years ago</a> by rsignell
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Jonathan, I'm dragging my feet here because now I'm a bit confused about the utility of this ticket.  I originally supported this because I thought this would be a way to specify heights relative to a gravity-based datum.  
</p>
<p>
I had not realized that ticket <a class="ext-link" href="http://cf-trac.llnl.gov./69"><span class="icon">â€‹</span>http://cf-trac.llnl.gov./69</a> allowed the specification of the vertical coordinate system via <tt></tt><tt>VERT_CS</tt><tt></tt>, which is why I thought I was supporting <em>this</em> ticket.  
</p>
<p>
Everyone who does river, lake or ocean modeling uses heights relative to a orthometric (gravity-based) datum (so that water flows down hill!), and folks in the US use NAVD88 (they used to use NGVD29).  Neither of these are geoides, but they are intended to be gravity-based datums.   So we need a way to say that our heights are in meters relative to NAVD88 or NGVD29, not relative to a GEOID. 
</p>
<p>
This ticket allows for the geoid model to be identified (e.g. GEOID12B), but not for way to specify the vertical datum.  
</p>
<p>
The CF Standard Name currently defines altitude as "Altitude is the (geometric) height above the geoid, which is the reference geopotential surface. The geoid is similar to mean sea level."    
</p>
<p>
But perhaps we should define altitude as "Alitude is height above an orthometric (gravity-based) datum" and redefine this ticket to define a "vertical_datum", where NAVD88 would be one of the possible values (along with other gravity-based datums).
</p>
<p>
The very term geoid is a bit fuzzy, apparently:  <a class="ext-link" href="http://www.ngs.noaa.gov/GEOID/geoid_def.html"><span class="icon">â€‹</span>http://www.ngs.noaa.gov/GEOID/geoid_def.html</a>
Perhaps we should just provide a way to specify vertical datums that are commonly understood and used. 
</p>
<p>
And in the meantime, I'll start using the <tt></tt><tt>crs_wkt</tt>`, since that will solve my problem immediately!
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12-1429882796216487">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:12" class="cnum">
    <a href="#comment:12">comment:12</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2015-04-24T06%3A39%3A56-07%3A00&amp;precision=second" title="See timeline at 04/24/15 06:39:56">6 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Rich and others
</p>
<p>
I understand the problem and I think we should be able to describe these coordinates in CF, but I'm still unclear what NAVD88 actually is. Orthometric height means relative to the geoid, doesn't it? What's the difference between a gravity-based datum and a geoid? Perhaps "gravity-based" means not geopotential (which includes Coriolis acceleration) but just gravitational potential, is that it? But that doesn't sound right because g in geophysics is usually a derivative of geopotential, not gravity, I believe. I hope that someone can help out with an explanation, since it seems unclear in EPSG and CRS WKT what these vertical datums mean in geophysical terms.
</p>
<p>
Best wishes and thanks
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-13-1429883391465503">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:13" class="cnum">
    <a href="#comment:13">comment:13</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2015-04-24T06%3A49%3A51-07%3A00&amp;precision=second" title="See timeline at 04/24/15 06:49:51">6 years ago</a> by rsignell
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Jonathan, 
I <em>think</em> NAVD88 is a vertical datum that is parallel to the GEOID12B representation of the geoid, but is offset so that it matches the International Great Lakes Datum of 1985 local mean sea level height value, at Rimouski, Quebec, Canada.  I'm not sure what this offset is though.
</p>
<p>
I've asked Ed Myers at NOAA (who is responsible for the VDATUM software), and he in turn is asking some folks from NGS to take a look.  Hopefully that will help us get to the bottom of this.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-14-1429891847407574">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:14" class="cnum">
    <a href="#comment:14">comment:14</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2015-04-24T09%3A10%3A47-07%3A00&amp;precision=second" title="See timeline at 04/24/15 09:10:47">6 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
That's great, thanks. If that is the case, then NAVD88 is a geopotential surface, but not a geoid. I think it would be fine to provide an attribute that names a geopotential surface; that is a well-defined geophysical concept. If it useful, we could provide an attribute to specify the vertical offset wrt a geoid. Following up what you suggested before, we could also have standard names for height and depth wrt a geopotential surface, but I think that any quantity which used such a name would be <em>required</em> to have a <tt>grid_mapping</tt> which identified the geopotential surface, otherwise it wouldn't be well-defined. Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-15-1441299378319422">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:15" class="cnum">
    <a href="#comment:15">comment:15</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2015-09-03T09%3A56%3A18-07%3A00&amp;precision=second" title="See timeline at 09/03/15 09:56:18">6 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Following a lot of research and a phone conversation that Rich and I have had, I now propose two new <tt>grid_mapping</tt> attributes in Appendix F, both of type S (string). The first is <tt>geoid_name</tt>, as originally proposed, described as "The name of the estimate or model of the geoid being used as a datum, e.g. GEOID12B. Corresponds to an OGC WKT VERT_DATUM name. The geoid is the surface of constant geopotential that the ocean would follow if it were at rest." The second attribute is <tt>geopotential_surface_name</tt>, described as "The name of an estimated surface of constant geopotential being used as a datum, e.g. NAVD88. Such a surface is called an equipotential surface in geodesy. Corresponds to an OGC WKT VERT_DATUM name."
</p>
<p>
I will open another ticket about how to identify the <tt>standard_name</tt> of the vertical coordinate which is computed from the formula used by a dimensionless vertical coordinate variable. This is a related issue. To do that, we will need some new <tt>standard_names</tt> referring to geopotential surfaces, e.g. <tt>depth_below_geopotential_surface</tt>. (We already have <tt>depth_below_geoid</tt> in the table.)
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-16-1441546117377368">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:16" class="cnum">
    <a href="#comment:16">comment:16</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2015-09-06T06%3A28%3A37-07%3A00&amp;precision=second" title="See timeline at 09/06/15 06:28:37">6 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
To make this ticket consistent with ticket 143, which I've just opened, I would like to modify it again. I now propose <tt>geopotential_datum_name</tt> instead of <tt>geopotential_surface_name</tt>, because I think the phrase <tt>geopotential_datum</tt> will make more sense in standard names. This phrase exists in online documents found by Google, including some by NOAA.
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-17-1441546672007511">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:17" class="cnum">
    <a href="#comment:17">comment:17</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2015-09-06T06%3A37%3A52-07%3A00&amp;precision=second" title="See timeline at 09/06/15 06:37:52">6 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-summary">
      <strong class="trac-field-summary">Summary</strong>
        changed from <em>Add an attribute in Appendix F to identify the geoid</em> to <em>Add an attribute in Appendix F to identify the geoid or other gepotential datum</em>
    </li>
  </ul>

              </div>
              <div class="change" id="trac-change-18-1441546692277449">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:18" class="cnum">
    <a href="#comment:18">comment:18</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2015-09-06T06%3A38%3A12-07%3A00&amp;precision=second" title="See timeline at 09/06/15 06:38:12">6 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-summary">
      <strong class="trac-field-summary">Summary</strong>
        changed from <em>Add an attribute in Appendix F to identify the geoid or other gepotential datum</em> to <em>Add an attribute in Appendix F to identify the geoid or other geopotential datum</em>
    </li>
  </ul>

              </div>
              <div class="change" id="trac-change-19-1441709775117455">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:19" class="cnum">
    <a href="#comment:19">comment:19</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2015-09-08T03%3A56%3A15-07%3A00&amp;precision=second" title="See timeline at 09/08/15 03:56:15">6 years ago</a> by rsignell
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I agree with this change: <tt>geopotential_datum_name</tt> is better.  
</p>

    </div>

              </div>
              <div class="change" id="trac-change-20-1441782903161857">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:20" class="cnum">
    <a href="#comment:20">comment:20</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2015-09-09T00%3A15%3A03-07%3A00&amp;precision=second" title="See timeline at 09/09/15 00:15:03">6 years ago</a> by davidhassell
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hello Jonathan, Rich, et al.,
</p>
<p>
I've just re-read this ticket from top to bottom, and I support the most recent proposal (<tt>geoid_name</tt> and <tt>geopotential_datum_name</tt>).
</p>
<p>
If I understand correctly, either, none or both of these new attributes could be used in a particular grid mapping variable, is that right? If both are given, does some comment need to be made on consistency, as these properties are in the CF domain (even if their values aren't controlled by CF)?
</p>
<p>
All the best,
</p>
<p>
David
</p>

    </div>

              </div>
              <div class="change" id="trac-change-21-1441889841642236">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:21" class="cnum">
    <a href="#comment:21">comment:21</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2015-09-10T05%3A57%3A21-07%3A00&amp;precision=second" title="See timeline at 09/10/15 05:57:21">6 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Rich and David
</p>
<p>
Thanks for your comments and support.
</p>
<p>
Re David's question. I don't think both should be given. They're alternatives for the vertical datum. Here's a modified proposal for Appendix F to prohibit this.
</p>
<blockquote>
<p>
<tt>geoid_name</tt>. The name of the estimate or model of the geoid being used as a datum, e.g. GEOID12B. Corresponds to an OGC WKT VERT_DATUM name. The geoid is the surface of constant geopotential that the ocean would follow if it were at rest. This attribute and <tt>geopotential_datum_name</tt> cannot both be specified.
</p>
</blockquote>
<blockquote>
<p>
<tt>geopotential_datum_name</tt>. "The name of an estimated surface of constant geopotential being used as a datum, e.g. NAVD88. Such a surface is often called an equipotential surface in geodesy. Corresponds to an OGC WKT VERT_DATUM name. This attribute and <tt>geoid_name</tt> cannot both be specified.
</p>
</blockquote>
<p>
It is fine to specify neither of them. The <tt>grid_mapping</tt> attributes are generally optional so I don't think we have to comment on that. However, the definitions of <tt>standard_name</tt>s which refer to the geoid or a geopotential datum could draw attention to the possibility of precisely specifying the reference surface by using a <tt>grid_mapping</tt> attribute. If ticket 143 is agreed, I will make a standard_name proposal on the email list in which this point could be included.
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-22-1445368751797757">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:22" class="cnum">
    <a href="#comment:22">comment:22</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2015-10-20T12%3A19%3A11-07%3A00&amp;precision=second" title="See timeline at 10/20/15 12:19:11">6 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Since no-one has commented on this proposal for more than three weeks, and sufficient support has been given according to the rules, the discussion is concluded and this change should be made in the next version of CF.
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-23-1483541020299156">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:23" class="cnum">
    <a href="#comment:23">comment:23</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2017-01-04T06%3A43%3A40-08%3A00&amp;precision=second" title="See timeline at 01/04/17 06:43:40">4 years ago</a> by davidhassell
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-owner">
      <strong class="trac-field-owner">Owner</strong>
        changed from <em>cf-conventions@â€¦</em> to <em>davidhassell</em>
    </li><li class="trac-field-status">
      <strong class="trac-field-status">Status</strong>
        changed from <em>new</em> to <em>accepted</em>
    </li>
  </ul>

              </div>
              <div class="change" id="trac-change-24-1487106941269839">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:24" class="cnum">
    <a href="#comment:24">comment:24</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2017-02-14T13%3A15%3A41-08%3A00&amp;precision=second" title="See timeline at 02/14/17 13:15:41">4 years ago</a> by painter1
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-resolution">
      <strong class="trac-field-resolution">Resolution</strong>
        set to <em>fixed</em>
    </li><li class="trac-field-status">
      <strong class="trac-field-status">Status</strong>
        changed from <em>accepted</em> to <em>closed</em>
    </li>
  </ul>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="/trac/wiki/TracTickets">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="./118?format=rss" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="./118?format=csv" class="csv">Comma-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="./118?format=tab" class="tab">Tab-delimited Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="https://trac.edgewall.org/"><img src="/trac/chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="/trac/about"><strong>Trac 1.0.20</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the CF Metadata home page at<br /><a href="http://cf-convention.github.io">http://cf-convention.github.io</a><br><font color="#0000ff" size="3"><b>The CF Metadata Trac issue tracker is read-only and will soon be shut down permanently</b></font></p>
    </div>
  </body>
</html>
