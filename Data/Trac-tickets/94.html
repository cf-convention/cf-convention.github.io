<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      #94 (Proposal for a CF String Syntax (CFSS))
     â€“ CF Metadata
    </title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="/trac/search" />
        <link rel="prev" href="./93.html" title="ticket #93" />
        <link rel="last" href="./176.html" title="ticket #176" />
        <link rel="help" href="/trac/wiki/TracGuide" />
        <link rel="alternate" href="./94?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="./94?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="./94?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" />
        <link rel="next" href="./95.html" title="ticket #95" />
        <link rel="start" href="/trac/wiki" />
        <link rel="stylesheet" href="/trac/chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="/trac/chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="./1.html" title="ticket #1" />
        <link rel="shortcut icon" href="/trac/chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="/trac/chrome/common/trac.ico" type="image/x-icon" />
    <style id="trac-noscript" type="text/css">.trac-noscript { display: none !important }</style>
      <link type="application/opensearchdescription+xml" rel="search" href="/trac/search/opensearch" title="Search CF Metadata" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="b8aeac20bf7fd49b63339caa";
      var comments_prefs={"comments_only":"false","comments_order":"oldest"};
    </script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/jquery.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/babel.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/trac.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/search.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/folding.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/wikitoolbar.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/resizer.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/auto_preview.js"></script>
    <script type="text/javascript">
      jQuery("#trac-noscript").remove();
      jQuery(document).ready(function($) {
        $(".trac-autofocus").focus();
        $(".trac-target-new").attr("target", "_blank");
        setTimeout(function() { $(".trac-scroll").scrollToTop() }, 1);
        $(".trac-disable-on-submit").disableOnSubmit();
      });
    </script>
    <script type="text/javascript" src="/trac/chrome/common/js/threaded_comments.js"></script>
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
      /*<![CDATA[*/
        $("#attachments").toggleClass("collapsed");
        $("#trac-up-attachments").click(function () {
          $("#attachments").removeClass("collapsed");
          return true;
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
        function setRevertHandler() {
          $("button.trac-revert").click(function() {
            var div = $("div", this);
            var field_name = div[0].id.substr(7);
            var field_value = div.text();
            var input = $("#propertyform *[name=field_" + field_name + "]");
            if (input.length > 0) {
              if (input.filter("input[type=radio]").length > 0) {
                input.val([field_value]);
              } else if (input.filter("input[type=checkbox]").length > 0) {
                input.val(field_value == "1" ? [field_value] : []);
              } else {
                input.val(field_value);
              }
            } else { // Special case for CC checkbox
              input = $("#propertyform input[name=cc_update]").val([]);
            }
            input.change();
            $(this).closest("li").remove();
            return false;
          });
        }
        setRevertHandler();
        var comment_focused = false;
        $("#comment").focus(function() { comment_focused = true; })
                     .blur(function() { comment_focused = false; });
        $("#propertyform").autoSubmit({preview: '1'}, function(data, reply) {
          var items = $(reply);
          // Update ticket box
          $("#ticket").replaceWith(items.filter('#ticket'));
          // Update changelog with original order
          $("#changelog").replaceWith(items.filter("#changelog"));
          // Reorder comments
          applyCommentsOrder(
            $('#prefs input[name="trac-comments-order"]:checked').val());
          // Show warning
          var new_changes = $("#changelog .trac-new");
          $("#trac-edit-warning").toggle(new_changes.length != 0);
          if (new_changes.length != 0)
            $("#changelog").parent().show().removeClass("collapsed");
          // Update view time
          $("#propertyform input[name='view_time']").replaceWith(items.filter("input[name='view_time']"));
          // Update preview
          var preview = $("#ticketchange").html(items.filter('#preview').children());
          var show_preview = preview.children().length != 0;
          $("#ticketchange").toggle(show_preview);
          setRevertHandler();
          // Collapse property form if comment editor has focus
          if (show_preview && comment_focused)
            $("#modify").parent().addClass("collapsed");
          // Execute scripts to load stylesheets
          items.filter("script").appendTo("head");
        }, "#ticketchange .trac-loading");
        $("#trac-comment-editor").autoSubmit({preview_comment: '1'}, function(data, reply) {
          var comment = $("#trac-comment-editor").next("div.comment").html(reply);
          comment.toggle(comment.children().length != 0);
        }, "#changelog .trac-loading");
        /*]]>*/
      });
    </script>
  </head>
  <body>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
        <ul>
          <li class="first"><span>&larr; <a class="prev" href="./93.html" title="ticket #93">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="./95.html" title="ticket #95">Next Ticket</a> &rarr;</span></li>
        </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
        <div id="ticket" class="trac-content ">
  <div class="date">
    <p>Opened <a class="timeline" href="/trac/timeline?from=2012-11-01T19%3A09%3A46-07%3A00&amp;precision=second" title="See timeline at 11/01/12 19:09:46">8 years ago</a></p>
    <p>Last modified <a class="timeline" href="/trac/timeline?from=2013-04-04T00%3A16%3A37-07%3A00&amp;precision=second" title="See timeline at 04/04/13 00:16:37">8 years ago</a></p>
  </div>
  <h2>
    <a href="./94.html" class="trac-id">#94</a>
    <span class="trac-status">
      <a href="/trac/query?status=accepted">accepted</a>
    </span>
    <span class="trac-type">
      <a href="/trac/query?status=!closed&amp;type=enhancement">enhancement</a>
    </span>
  </h2>
  <h1 id="trac-ticket-title" class="searchable">
    <span class="summary">Proposal for a CF String Syntax (CFSS)</span>
  </h1>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable"><a href="/trac/query?status=!closed&amp;reporter=ceceliadid">ceceliadid</a></td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner"><a href="/trac/query?status=!closed&amp;owner=lowry">lowry</a></td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="/trac/query?status=!closed&amp;priority=medium">medium</a>
        </td>
        <th id="h_milestone" class="missing">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="missing milestone"></a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="/trac/query?status=!closed&amp;component=cf-conventions">cf-conventions</a>
        </td>
        <th id="h_version" class="missing">
          Version:
        </th>
        <td headers="h_version">
              <a href="/trac/query?status=!closed&amp;version="></a>
        </td>
    </tr><tr>
        <th id="h_keywords" class="missing">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
              arlindo.dasilva@â€¦, theurich@â€¦
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
<strong>Proposal for a CF String Syntax (CFSS)</strong>
</p>
<p>
CF String Syntax (CFSS) is a format for expressing semantically meaningful assemblages of CF metadata in strings suitable for manipulation and comparison.
</p>
<p>
CFSS defines a syntax for associating standard names with qualifiers that may be coordinate variables or cell methods.  It is intended to be extensible to constructs such as non-cell-based operators.
</p>
<p>
A driver for creating CFSS strings is to enable the semantic mediation of fields passed between components during model run-time.  Standard names alone often cannot express the features of the data that are necessary for this sort of brokering.
</p>
<p>
Important features of CFSS are that it uses only CF-compliant content and is backward-compatible with existing standard names.
</p>
<p>
CFSS strings are structured as follows:
</p>
<pre class="wiki">&lt;standard name of data 1&gt;, &lt;standard name of data 2&gt;, ... ,&lt;standard name of data n&gt;
&lt;standard name of coordinate or cell method 1&gt;: &lt;value 1&gt; [&lt;unit 1&gt;]
&lt;standard name of coordinate or cell method 2&gt;: &lt;value 2&gt; [&lt;unit 2&gt;] ...
&lt;standard name of coordinate or cell method m&gt;: &lt;value m&gt; [&lt;unit m&gt;]
</pre><p>
where standard names of data are optional; qualifiers are optional; and units are included when they are required for a coordinate.  The ordering of standard names of data and the ordering of qualifiers does not affect equivalence of strings.
</p>
<p>
Examples of compliant strings using CFSS are:
</p>
<p>
x_wind
</p>
<p>
x_wind height: 10 m
</p>
<p>
x_wind height: 10 m time: mean region: atlantic_ocean
</p>
<p>
x_wind, y_wind height: 10 m time: mean region: atlantic_ocean
</p>
<p>
height: 10 m time: mean region: atlantic_ocean 
</p>
<p>
<em>This proposal originated from discussions amongst Cecelia Deluca, Tim Campbell, Gerhard Theurich, Jonathan Gregory, Roy Lowry, Bryan Lawrence, and Balaji.</em>
</p>

    </div>
  </div>
</div>
          

        <div>
          <div class="trac-noscript" style="position: relative">
            <form id="prefs" method="get" action="/trac/prefs" style="position: absolute; right: 0">
              <div id="trac-comments-order">
                <input type="radio" id="trac-comments-oldest" name="trac-comments-order" value="oldest" checked="checked" />
                <label for="trac-comments-oldest">Oldest first</label>
                <input type="radio" id="trac-comments-newest" name="trac-comments-order" value="newest" />
                <label for="trac-comments-newest">Newest first</label>
                <span id="trac-threaded-toggle" style="display: none">
                  <input type="radio" id="trac-comments-threaded" name="trac-comments-order" value="threaded" />
                  <label for="trac-comments-threaded">Threaded</label>
                </span>
              </div>
              <div>
                <input id="trac-comments-only-toggle" type="checkbox" />
                <label for="trac-comments-only-toggle">Comments only</label>
              </div>
            </form>
          </div>
          <h3 class="foldable">Change History <span class="trac-count">(14)</span></h3>
          <div id="changelog">
              <div class="change" id="trac-change-1-1352121583000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:1" class="cnum">
    <a href="#comment:1">comment:1</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:2" class="follow-up">â†“Â 2</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-11-05T05%3A19%3A43-08%3A00&amp;precision=second" title="See timeline at 11/05/12 05:19:43">8 years ago</a> by ngalbraith
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
This discussion has moved forward in the email list, can those comments be added here? The email concerns have to do with ambiguous delimiters; my question is more basic.
</p>
<p>
In what circumstances do measurement heights need to be described as 'x_wind height: 10 m'? 
</p>
<p>
We go to a fair amount of trouble coding all the heights for our met measurements as coordinates, usually one per instrument, with a numeric value and a 'units' attribute. Using strings for this seems to take CF in a questionable direction, so if there's a real need for this flexibility, it should probably be described in the ticket.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-2-1352123562000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:2" class="cnum">
    <a href="#comment:2">comment:2</a>
  </span>
        in reply to:
    <a href="#comment:1">â†‘Â 1</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-11-05T05%3A52%3A42-08%3A00&amp;precision=second" title="See timeline at 11/05/12 05:52:42">8 years ago</a> by bnl
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./94#comment:1" title="Comment 1">ngalbraith</a>:
</p>
<blockquote class="citation">
<p>
In what circumstances do measurement heights need to be described as 'x_wind height: 10 m'? 
</p>
<p>
We go to a fair amount of trouble coding all the heights for our met measurements as coordinates, usually one per instrument, with a numeric value and a 'units' attribute. Using strings for this seems to take CF in a questionable direction, so if there's a real need for this flexibility, it should probably be described in the ticket.
</p>
</blockquote>
<p>
The data itself should indeed be coded like that, what's needed here is a way of labelling the assemblage. Two example use cases:
</p>
<ol><li>I have a model intercomparison project, and one of the required outputs is something to compare with real observations ... which are 'air_temperature height:2m'; so I want to be able to describe that requirement, and then label the output ... similarly
</li><li>I want to couple to model comoponents together, and I need to describe what is coupled, and that description will include not just the standard_name, but coordinate properties, and values ... so I need a way of labelling the assemblage of CF properties.
</li></ol>
    </div>

              </div>
              <div class="change" id="trac-change-3-1352376426000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:3" class="cnum">
    <a href="#comment:3">comment:3</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-11-08T04%3A07%3A06-08%3A00&amp;precision=second" title="See timeline at 11/08/12 04:07:06">8 years ago</a> by lowry
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
This ticket has yet to acquire a moderator.  If there I no objections I would be happy to volunteer.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4-1352393185000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:4" class="cnum">
    <a href="#comment:4">comment:4</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-11-08T08%3A46%3A25-08%3A00&amp;precision=second" title="See timeline at 11/08/12 08:46:25">8 years ago</a> by ceceliadid
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Thank you, that would be great.  (I didn't realize each ticket needed a moderator.)
</p>
<ul><li>Cecelia
</li></ul>
    </div>

              </div>
              <div class="change" id="trac-change-5-1352820036000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:5" class="cnum">
    <a href="#comment:5">comment:5</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-11-13T07%3A20%3A36-08%3A00&amp;precision=second" title="See timeline at 11/13/12 07:20:36">8 years ago</a> by lowry
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-owner">
      <strong class="trac-field-owner">Owner</strong>
        changed from <em>cf-conventions@â€¦</em> to <em>lowry</em>
    </li><li class="trac-field-status">
      <strong class="trac-field-status">Status</strong>
        changed from <em>new</em> to <em>assigned</em>
    </li>
  </ul>
    <div class="comment searchable">
      <p>
Accepting this as there was clear support from Bryan and Jonathan in addition to myself in a series of off-list e-mails that preceded Cecilia's submission of the ticket.
</p>
<p>
First task is to capture the discussions on CFSS syntax that were sent to the CF list rather than the Trac ticket.
</p>
<p>
Chris Barker's post
</p>
<blockquote class="citation">
<p>
From: CF-metadata [cf-metadata-bounces@â€¦] On Behalf Of 
Chris Barker [chris.barker@â€¦]
Sent: 02 November 2012 16:08
To: cf-metadata@â€¦
Subject: Re: [CF-metadata] [CF Metadata] <a class="accepted ticket" href="./94.html" title="enhancement: Proposal for a CF String Syntax (CFSS) (accepted)">#94</a>: Proposal for a CF String  
Syntax (CFSS)
</p>
<p>
I know I should be commenting in TRAC, but I don't think I have a login...
</p>
<p>
First -- if this is already well established, and simply being 
codified here, then "never mind" but if there is still room for
discussion:
</p>
<blockquote class="citation">
<blockquote>
<p>
CFSS strings are structured as follows:
</p>
</blockquote>
<pre class="wiki"> &lt;standard name of data 1&gt;, &lt;standard name of data 2&gt;, ... ,&lt;standard 
name  of data n&gt;  &lt;standard name of coordinate or cell method 1&gt;: 
&lt;value 1&gt; [&lt;unit 1&gt;]  &lt;standard name of coordinate or cell method 2&gt;: 
&lt;value 2&gt; [&lt;unit 2&gt;] ...
 &lt;standard name of coordinate or cell method m&gt;: &lt;value m&gt; [&lt;unit m&gt;]  
</pre></blockquote>
<blockquote class="citation">
<blockquote>
<p>
Examples of compliant strings using CFSS are:
</p>
</blockquote>
<blockquote>
<p>
x_wind
</p>
</blockquote>
<blockquote>
<p>
x_wind height: 10 m
</p>
</blockquote>
<blockquote>
<p>
x_wind height: 10 m time: mean region: atlantic_ocean
</p>
</blockquote>
<blockquote>
<p>
x_wind, y_wind height: 10 m time: mean region: atlantic_ocean
</p>
</blockquote>
<blockquote>
<p>
height: 10 m time: mean region: atlantic_ocean
</p>
</blockquote>
</blockquote>
<p>
These strick me as being a pain to parse. For example:
</p>
<p>
"x_wind, y_wind height: 10 m time: mean region: atlantic_ocean"
</p>
<p>
there are three delimiters there, commas, colons and whitespace. But 
whitespace can also be used to separate the units from the value.
Also, can there be white space in any of the values (probably not 
names). To parse this, I guess I would:
</p>
<p>
look for colons
look for whitespace before the colon, what's between is the cell name?
look at what's at the beginning, before the whitespace, before the cell name.
split that on commas, giving me the variable names.
look for the next colon, then look before that for whitespace.
between the whitespace and the colon is the next cell name.
between the previous colon and the cell name is the value and units.
...
</p>
<p>
I'm sure there is a smarter way to write that code, but I even find it 
hard to parse with my eyes.
</p>
<p>
So I suggest another delimiter -- does netcdf allow line feeds?
</p>
<pre class="wiki">x_wind, y_wind
  height: 10 m
  time: mean
  region: atlantic_ocean
</pre><p>
or maybe semi-colons?
</p>
<pre class="wiki">"x_wind, y_wind; height: 10 m; time: mean; region: atlantic_ocean"
</pre><p>
If I've split that example up wrong, then it really proves my point!
</p>
<p>
Just my $0.2
</p>
</blockquote>
<p>
Seth <a class="missing wiki">McGinnis?</a>'s post
</p>
<p>
May I suggest using a semicolon to separate name-value pairs?  That reads naturally and is easy to parse:
</p>
<p>
x_wind
</p>
<p>
x_wind height: 10 m
</p>
<p>
x_wind height: 10 m; time: mean; region: atlantic_ocean
</p>
<p>
x_wind, y_wind height: 10 m; time: mean; region: atlantic_ocean;
</p>
<p>
height: 10 m; time: mean; region: atlantic_ocean
</p>
<p>
(I also favor allowing an optional trailing semicolon on the final name-value
pair.)
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6-1352821750000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:6" class="cnum">
    <a href="#comment:6">comment:6</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-11-13T07%3A49%3A10-08%3A00&amp;precision=second" title="See timeline at 11/13/12 07:49:10">8 years ago</a> by lowry
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Now for my view...
</p>
<p>
We have been trying in the NERC Vocabulary Server to find a way of structuring the information delivered in concept definitions.  In the previous version we used XML snippets - not a good idea as they break the XML schema of any XML document in which the definition element is included.
</p>
<p>
Consequently, we switched to JSON (<a class="ext-link" href="http://www.json.org/)which"><span class="icon">â€‹</span>http://www.json.org/)which</a> seems to work quite well.  In this encoding the entire CFSS is bounded by '{}' making its boundaries clear.  A very basic JSON syntax using a simple list of objects (which are delimited by commas) each comprising a name/value pair (separated by colons) would be:
</p>
<p>
{"standard_names": "x_wind y_wind", "height": "10 m" , "time": "mean", "region": "atlantic_ocean"} 
</p>
<p>
A common useful practice is to constrain the object names using a controlled vocabulary.
</p>
<p>
JSON is a widely used standard encoding with associated tooling (formatters, validators, parser APIs)and is very similar to the other syntax suggestions being discussed.  My view is why invent a standard when one already exists that seems to do the job?
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7-1352929434000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:7" class="cnum">
    <a href="#comment:7">comment:7</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-11-14T13%3A43%3A54-08%3A00&amp;precision=second" title="See timeline at 11/14/12 13:43:54">8 years ago</a> by ceceliadid
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I am trying to understand the implications of using a JSON representation for creating more descriptive names for fields passed between models.  Do you imagine each JSON string being encoded as a character string in the Fortran or C/C++ code, with escapes before special characters?  My sense is that the string format proposed would be easier to work with inside a model.  JSON would be especially unappealing if you just wanted to add a qualifier here or there to an existing set of standard name strings.
</p>
<p>
My gut feeling is that the representation should not matter.  We are talking about equivalent content, and the character string and JSON formats are so close that translating would be supereasy.  Can we think of this proposal as a CF syntactical schema and CV that can take multiple, well-defined and equally acceptable forms, with one being a string and another being JSON?  What is the best way to formalize that in CF?
</p>
<p>
Best,
-- Cecelia
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8-1353690093000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:8" class="cnum">
    <a href="#comment:8">comment:8</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-11-23T09%3A01%3A33-08%3A00&amp;precision=second" title="See timeline at 11/23/12 09:01:33">8 years ago</a> by lowry
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hello Cecilia,
</p>
<p>
I don't like the idea of offering multiple forms- that just makes things unecessarily complex for people writing code to use the CFSS strings - they would have to allow for both encodings.  
</p>
<p>
We've checked out the JSON character set and there's no issues with Fortran because all the characters have ASCII codes &lt;127.  So, no need for escapes.  Talking to the developers in BODC the <a class="missing wiki">Matlab/Fortran?</a> camp are what I would call 'JSON neutral', with support for JSON coming from the <a class="missing wiki">Java/Python?</a> camp because they have the APIs to handle it.
</p>
<p>
So, in summary we have a very good idea with four suggested encodings, each of which seems to have one supporter.  Does anybody else in the CF community have an opinion on the preferred encoding option?
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9-1353961913000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:9" class="cnum">
    <a href="#comment:9">comment:9</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-11-26T12%3A31%3A53-08%3A00&amp;precision=second" title="See timeline at 11/26/12 12:31:53">8 years ago</a> by ceceliadid
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hi Roy,
</p>
<p>
Thanks much to your team for looking into the implications of JSON in Fortran.
</p>
<p>
Something to consider is that the simple string representation proposed represents the interests of a class of users, not just our group.  It would be backward compatible with a variety of multi-component modeling systems that currently base inter-component field matching on standard name strings (COAMPS, NOGAPS/NavGEM, NEMS, CESM, GEOS-5, ...).  Adopting CFSS would be a trivial change:  replacing a few standard name strings with specific, order-dependent CFSS strings in a field dictionary.  Super-easy.
</p>
<p>
Making the approach super-easy to adopt is important.  Please be aware that others have already rejected CF for information exchange within models:
see "the CF Convention Standard Names were not well-suited to the needs of component-based modeling" in
<a class="ext-link" href="http://csdms.colorado.edu/wiki/CSDMS_Standard_Names"><span class="icon">â€‹</span>http://csdms.colorado.edu/wiki/CSDMS_Standard_Names</a>
</p>
<p>
Personally, I think discussion with CF would have made sense before arriving at that conclusion.  Ideally (to my mind) CF would eventually vet and accommodate necessary features for the surface modeling community, and spare the Earth system modeling community the need to interact with two similar standards in closely related domains.
</p>
<p>
Anyway, it sounds like we have multiple applications for a CFSS-like entity ... and that JSON is truly best for some purposes.  Maybe multiple encodings are inevitable, and not so bad?
</p>
<p>
Best,
Cecelia
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10-1357745828000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:10" class="cnum">
    <a href="#comment:10">comment:10</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-01-09T07%3A37%3A08-08%3A00&amp;precision=second" title="See timeline at 01/09/13 07:37:08">8 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Cecilia
</p>
<p>
Thank you for making the proposal. I support the idea. I am also most happy with agreeing one representation and making it a really simple one. Therefore I like your original proposal.
</p>
<p>
It could be made even simpler, by omitting the commas, so you would have "x_wind y_wind height: 10 m time: mean region: atlantic_ocean". This is like other CF attributes in using only blank space and colon as punctuation.
</p>
<p>
In order for the proposal to be accepted, it should supply the exact text to be added to the CF standard, because the process of actually updating the standard document should be purely editorial. The explicit text has to be agreed in the ticket. We would also need corresponding rules to be added to the conformance document.
</p>
<p>
Best wishes
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11-1362981059000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:11" class="cnum">
    <a href="#comment:11">comment:11</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-03-10T22%3A50%3A59-07%3A00&amp;precision=second" title="See timeline at 03/10/13 22:50:59">8 years ago</a> by ceceliadid
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-cc">
      <strong class="trac-field-cc">Cc</strong>
        <em>arlindo.dasilva@â€¦</em> <em>theurich@â€¦</em> added
    </li>
  </ul>
    <div class="comment searchable">
      <p>
Dear Jonathan and Roy,
</p>
<p>
I'm sorry it's taken so long to respond.
</p>
<p>
Before proposing the exact text to be added to the CF standard, I would like to review the comments received.
</p>
<p>
Here is a statement in the CFSS syntax originally proposed, for reference:
x_wind, y_wind height: 10 m time: mean region: atlantic_ocean
</p>
<p>
Jonathan, you proposed removal of the comma separator:
x_wind y_wind height: 10 m time: mean region: atlantic_ocean
</p>
<p>
Others recommended adding separators, rather than removing them.  Below is a summary of suggestions (Arlindo's came from one of our project lists):
</p>
<p>
Chris Barker - 'a pain to parse', suggests:
x_wind, y_wind; height: 10 m; time: mean; region: atlantic_ocean
</p>
<p>
Seth <a class="missing wiki">McGinnis?</a> - 'May I suggest using a semicolon':
x_wind, y_wind height: 10 m; time: mean; region: atlantic_ocean
"I also favor an optional trailing semicolon"
</p>
<p>
Arlindo da Silva - 'This conflicts with our current usage of ":" in resource files. How about something like this:'
x_wind, y_wind: height=10 m; time=mean; region=atlantic_ocean
</p>
<p>
My personal preference is for Arlindo's version. My rationale is that the design of CFSS should place a higher priority on suitability for intended purpose than similarity in style to other CF constructs, or even simplicity.  Arlindo's version is to me the most readable, and the additional separators will make it easier to parse.
</p>
<p>
Best,
Cecelia
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12-1363079327000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:12" class="cnum">
    <a href="#comment:12">comment:12</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-03-12T02%3A08%3A47-07%3A00&amp;precision=second" title="See timeline at 03/12/13 02:08:47">8 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Cecelia
</p>
<p>
The exact definition of syntax is not something I feel <em>very</em> strongly about myself, but nonetheless I would like to argue the case a little further. I do agree with the principle that suitability for purpose is more important than consistency with other CF attributes, if one has to choose between these priorities. Your original statement of requirements for CFSS strings doesn't mention human readability, but obviously human readability is a desirable characteristic.
</p>
<p>
These are the two extremes of syntax, I suppose:
</p>
<p>
Arlindo's "maximal" version: <tt>x_wind, y_wind: height=10 m; time=mean; region=atlantic_ocean</tt>
</p>
<p>
My minimal version: <tt>x_wind y_wind height: 10 m time: mean region: atlantic_ocean</tt>
</p>
<p>
which is motivated by existing CF syntaxes such as
</p>
<p>
example <tt>cell_methods</tt> string: <tt>longitude: latitude: mean where land time: maximum within years time: mean over years</tt>
</p>
<p>
example <tt>formula_terms</tt> string: <tt>sigma: lev ps: PS ptop: PTOP</tt>
</p>
<p>
I would say that consistency with other CF attributes is also desirable, since it makes CF easier to remember as a whole, and because the same operations can be used to parse different CF attributes if they have similar syntax.
</p>
<p>
Perhaps what makes my version and other CF strings more difficult to parse by eye is that the end of each "clause" is not explicitly marked. This is not necessary because it is implied by the fact that each clause begins with a word that ends with ":". So the algorithm to parse my version is this:
</p>
<ol><li>Split the string into blank-separated words (discarding all the blanks).
</li></ol><ol start="2"><li>Identify the words which end in ":", namely <tt>height:</tt>, <tt>time:</tt> and <tt>region:</tt>. Let us call these words <em>names</em>.
</li></ol><ol start="3"><li>Assign all words following a name to be its list of values, up to but not including the next name.
</li></ol><ol start="4"><li>Assume any words preceding the first name, if any, to be a list of <tt>standard_name</tt>s of data variables to which the string applies.
</li></ol><p>
This seems quite easy to me.
</p>
<p>
Here's a suggestion. We could take my minimal syntax as the standard version of CFSS strings, but permit the writer to insert ";" and "," wherever they think it will improve readability, on the assumption that these punctuation marks will be deleted before parsing i.e. they have no semantic content. The string could be processed thus before parsing: sed 's/[,;]*<em>g'. That transformation converts Chris's and Seth's versions into mine.
</em></p>
<p>
Arlindo's is different because it uses "=", which is not used in existing CF attributes, so I am more uncomfortable about it. I do not think this version would be easier to parse. I suppose you would use "=" instead of ":" to identify the names. This could be accommodated as well by making "A=B" equivalent to "A: B" by doing sed 's/ *= */: /g'. Applying this transformation and the one of the preceding paragraph converts Arlindo's version into mine.
</p>
<p>
Best wishes
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-13-1363690608000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:13" class="cnum">
    <a href="#comment:13">comment:13</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:14" class="follow-up">â†“Â 14</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-03-19T03%3A56%3A48-07%3A00&amp;precision=second" title="See timeline at 03/19/13 03:56:48">8 years ago</a> by lowry
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Cecilia,
</p>
<p>
From a moderator's point of view Jonathan's suggestion in the second to last paragraph of his last posting makes a lot of sense.  The idea of having a syntax underpinned by a parsing algorithm with specified additional delimiters to enhance human readability is one that hasn't ocurred to me. 
</p>
<p>
Whilst it presents an interoperability risk (e.g. Seth's parser might not be able to read an encoding by Jonathan) I think this will be addressed through the profiling process of community usage.  In other words, if the initial usage has commas and semi-colons inserted as per Seth's and Chris's suggestion then it will become a de facto standard profile that subsequent usage will follow. 
</p>
<p>
Would you be happy to prepare the text for insertion into the standard on this basis?
</p>
<p>
Cheers, Roy.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-14-1365059797000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:14" class="cnum">
    <a href="#comment:14">comment:14</a>
  </span>
        in reply to:
    <a href="#comment:13">â†‘Â 13</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-04-04T00%3A16%3A37-07%3A00&amp;precision=second" title="See timeline at 04/04/13 00:16:37">8 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
This is an interesting proposal. I wonder if I may enquire about the objectives and approach before engaging on detail points?
</p>
<p>
Considering purpose, the ticket states:
</p>
<blockquote>
<p>
CF String Syntax (CFSS) is a format for expressing semantically meaningful assemblages of CF metadata in strings suitable for manipulation and comparison. 
</p>
</blockquote>
<blockquote>
<p>
A driver for creating CFSS strings is to enable the semantic mediation of fields passed between components during model run-time.
</p>
</blockquote>
<p>
Does this constitute the scope of the objectives?  
</p>
<p>
How do the proposers expect strings defined in this way to be used?
</p>
<p>
The language <em>A driver</em> suggests that there are others, is this so?
</p>
<p>
Is the proposal aiming to deliver:
</p>
<ul><li>machine readable string?
</li><li>human readable string?
</li><li>an attribute on a CF variable in a NetCDF file?
</li><li>a syntax for presenting metadata of a CF NetCDF variable by inspection?
</li><li>a syntax for summarising the defining characteristics of a CF variable?
</li></ul><p>
 
I would find it helpful to have such context in order to provide my view on the details of the proposal.
</p>
<p>
thank you
mark
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="/trac/wiki/TracTickets">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="./94?format=rss" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="./94?format=csv" class="csv">Comma-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="./94?format=tab" class="tab">Tab-delimited Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="https://trac.edgewall.org/"><img src="/trac/chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="/trac/about"><strong>Trac 1.0.20</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the CF Metadata home page at<br /><a href="http://cf-convention.github.io">http://cf-convention.github.io</a><br><font color="#0000ff" size="3"><b>The CF Metadata Trac issue tracker is read-only and will soon be shut down permanently</b></font></p>
    </div>
  </body>
</html>
