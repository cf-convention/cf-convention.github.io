<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] curvilinear cartesian coordinates case (service-oriented approach) from Steve Hankin on 2006-12-06 (cf-metadata-mailman)</title>
<meta name="Author" content="Steve Hankin (Steven.C.Hankin)" />
<meta name="Subject" content="[CF-metadata] curvilinear cartesian coordinates case (service-oriented approach)" />
<meta name="Date" content="2006-12-06" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./0564.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./0566.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] curvilinear cartesian coordinates case (service-oriented approach)</h1>
<!-- received="Wed Dec  6 10:07:58 2006" -->
<!-- isoreceived="20061206100758" -->
<!-- sent="Wed, 06 Dec 2006 09:07:58 -0800" -->
<!-- isosent="20061206170758" -->
<!-- name="Steve Hankin" -->
<!-- email="Steven.C.Hankin" -->
<!-- subject="[CF-metadata] curvilinear cartesian coordinates case (service-oriented approach)" -->
<!-- id="4576F8EE.8050002_at_noaa.gov" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="068f01c71914$0069c300$22e40991_at_wl06377" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start565" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./0566.html" accesskey="d" title="Bert Jagers: &quot;[CF-metadata] curvilinear cartesian coordinates case (service-oriented approach)&quot;">Next message</a> ]
[ <a href="./0564.html" title="Godin, Michael: &quot;[CF-metadata] Proposed standard names for biological model outputs&quot;">Previous message</a> ]
[ <a href="./0563.html" title="Bert Jagers: &quot;[CF-metadata] curvilinear cartesian coordinates case (service-oriented approach)&quot;">In reply to</a> ]
<!-- unextthread="start" -->
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg565" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg565" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg565" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg565" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Steve Hankin &lt;<a href="mailto:Steven.C.Hankin?Subject=Re%3A%20%5BCF-metadata%5D%20curvilinear%20cartesian%20coordinates%20case%20(service-oriented%20approach)">Steven.C.Hankin</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Wed, 06 Dec 2006 09:07:58 -0800</span><br />
</address>
<br />
Hi Bert,
<br />
<br />This discussion is now turning towards an examination of alternative 
<br />
approaches to meeting the needs that you have identified.  The 
<br />
discussion may lead back to changes in CF or it may not.  But it an 
<br />
important discussion to be having.  A couple of days ago Rich Signell 
<br />
presented the Wki page that Jonathan created of the three alternative CF 
<br />
encodings as a question for some experts in the OGC community.  He got 
<br />
this response from Andrew Woolf:
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&quot;I think from an OGC perspective, there's not a lot to pick between them
<br />
&nbsp;&nbsp;&nbsp;&nbsp;- they all offer slightly different CF-mechanisms for specifying the
<br />
&nbsp;&nbsp;&nbsp;&nbsp;actual gridpoint positions under different CRS [&quot;coordinate reference systems&quot;].
<br />
&nbsp;&nbsp;&nbsp;&nbsp;Any OGC geometry is
<br />
&nbsp;&nbsp;&nbsp;&nbsp;associated with (and specified in terms of) just one CRS - through the
<br />
&nbsp;&nbsp;&nbsp;&nbsp;gml:srsName attribute of gml:AbstractGeometryType. Transformations
<br />
&nbsp;&nbsp;&nbsp;&nbsp;between CRS may in general be handled through algorithms (e.g. ref
<br />
&nbsp;&nbsp;&nbsp;&nbsp;proj4) using the geodetic parameters of the CRS.&quot;
<br />
<br />So the OGC community has (at least so far) decided that explicit 
<br />
translations between coordinate reference systems do not belong inside 
<br />
of their data representations.  CF has already gone one step beyond this 
<br />
(and adds value in doing so).  But I believe that keeping CF &quot;lean and 
<br />
mean&quot; will pay off over the long term, so we should carefully consider 
<br />
alternative solutions outside of CF before adding further complexity to 
<br />
the standard. (Sorry if I'm sledge hammering this point.)
<br />
<br />Bert Jagers wrote:
<br />
<em class="quotelev1">&gt; Hi Steve,
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;     I'd like to open another outlook for this entire discussion -- an
</em><br />
<em class="quotelev1">&gt;     approach that might meet your goals _with no changes to CF at all_.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;     In the detailed use cases that you presented yesterday you
</em><br />
<em class="quotelev1">&gt;     motivated the CF changes under discussion by pointing out that it
</em><br />
<em class="quotelev1">&gt;     would not be desirable to create multiple files to contain the
</em><br />
<em class="quotelev1">&gt;     same data, specifically  &quot;... one could of course generate
</em><br />
<em class="quotelev1">&gt;     multiple copies of the output file with one auxiliary coordinate
</em><br />
<em class="quotelev1">&gt;     system each, but I do not like this approach&quot;  What your use case
</em><br />
<em class="quotelev1">&gt;     has presented to us (I think) is a case of multiple &quot;views&quot; of the
</em><br />
<em class="quotelev1">&gt;     same data:  The data variables and their coordinates in absolute
</em><br />
<em class="quotelev1">&gt;     lat/lon are immutable.  But you also want to support two or three
</em><br />
<em class="quotelev1">&gt;     community-specific outlooks, each requiring specialized coordinate
</em><br />
<em class="quotelev1">&gt;     system information.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;     This statement of the problem practically shouts out &quot;service
</em><br />
<em class="quotelev1">&gt;     oriented&quot; -- providing different flavors of the same data through
</em><br />
<em class="quotelev1">&gt;     multiple interfaces.  I think we can achieve that today with
</em><br />
<em class="quotelev1">&gt;     existing tools -- OPeNDAP and TDS.  Standard netCDF clients can
</em><br />
<em class="quotelev1">&gt;     &quot;simply&quot; (in quotes) be relinked to utilize the OPeNDAP service.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Hm, a quite different approach indeed. I have no experience yet with 
</em><br />
<em class="quotelev1">&gt; OPeNDAP, my approach so far has been first to get netCDF CF support 
</em><br />
<em class="quotelev1">&gt; implemented correctly and take the next step to OPeNDAP. I associate 
</em><br />
<em class="quotelev1">&gt; OPeNDAP mostly with data access through the internet. An OPeNDAP 
</em><br />
<em class="quotelev1">&gt; compliant reader will allow you also to access local data files, but 
</em><br />
<em class="quotelev1">&gt; whether all features are available I am not sure. I know that it is 
</em><br />
<em class="quotelev1">&gt; possible in some way to serve multiple files as one big virtual file 
</em><br />
<em class="quotelev1">&gt; using OPeNDAP; however, I don't know whether that works also locally 
</em><br />
<em class="quotelev1">&gt; and what the requirements are for combining multiple files to one 
</em><br />
<em class="quotelev1">&gt; virtual file. I am looking for a local option because
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; 1) model runs may be carried out by different project partners.
</em><br />
<em class="quotelev1">&gt; 2) data files may be big and not easily transferred via internet.
</em><br />
<em class="quotelev1">&gt;  
</em><br />
This could get to be quite a long discussion -- the details of and 
<br />
values from using TDS.  Bullet form seems like it might get to the heart 
<br />
of matters faster
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;* There is a sysadmin task to setting up the TDS server.  For a
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;first-timer it is non-trivial, though I hesitate to make an
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;estimate.  Say (??) 1/2 day to get the basics working and another
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1/2 day to learn to configure this particular problem.  That's
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;guessing.  Say 1-2 hours from scratch for someone already familiar
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with the software.
<br />
&nbsp;&nbsp;&nbsp;&nbsp;* Once the server is running if you are on the same machine as the
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server the distinction between local and remote access is not
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;terribly important.  The filename path becomes longer -- starts
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with &quot;http://...&quot;.  NetCDF through OPeNDAP still looks just like
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;netCDF (there are a couple of glitches at the detail level -- more
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;issues for developers than users..)
<br />
&nbsp;&nbsp;&nbsp;&nbsp;* There will be a performance penalty, even on local access. 
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OPeNDAP performance is generally &quot;good&quot;, but there are too many
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unknowns to characterize it in greater detail.   Hard to say
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a-priori whether the penalty would be an irritating factor. 
<br />
<br /><em class="quotelev1">&gt; One thing that I am not sure about is what you exactly propose. After 
</em><br />
<em class="quotelev1">&gt; some text regarding the immutabel part and special attributes and 
</em><br />
<em class="quotelev1">&gt; variables for the two separate communities, you propose:
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;     You can arrange for these views to show up neatly organized in a
</em><br />
<em class="quotelev1">&gt;     directory tree
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;         <a href="http://my_institution_server/">http://my_institution_server/</a>
</em><br />
<em class="quotelev1">&gt;                     Germany/
</em><br />
<em class="quotelev1">&gt;                              ...files...nc
</em><br />
<em class="quotelev1">&gt;                     Netherlands/
</em><br />
<em class="quotelev1">&gt;                              ...files...nc
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Would all data be stored in both the Germany and the Netherlands 
</em><br />
<em class="quotelev1">&gt; directories (only different with respect to the local grids stored in 
</em><br />
<em class="quotelev1">&gt; the files)? If so, that approach would be quite redundant.
</em><br />
Using TDS there would be only single instances of the &quot;immutable&quot; 
<br />
(geo-referenced) data files.  There would be separate files that 
<br />
contained only the coordinate representations needed by German, Dutch, 
<br />
etc user groups.  These would not change unless you changed the model 
<br />
grid.  And there would be an XML file (NcML) to tie them together.  The 
<br />
TDS software would act very much like the &quot;small conversion programs&quot; 
<br />
you hypothesize in the next paragraph, except that it performs its work 
<br />
on-the-fly.  You might find that there were other useful tasks that you 
<br />
could do with the TDS, too -- most obvious example being to aggregate 
<br />
time series of files into a single (virtual) dataset.
<br />
<em class="quotelev1">&gt; I don't need OPeNDAP for that and I can just generate both files and 
</em><br />
<em class="quotelev1">&gt; distribute them individually, or I could probably write a small 
</em><br />
<em class="quotelev1">&gt; conversion program to convert one file into the other using some 
</em><br />
<em class="quotelev1">&gt; separate grid files, or use separate grid files in addition to the 
</em><br />
<em class="quotelev1">&gt; data file. If the main data is stored in a central directory while 
</em><br />
<em class="quotelev1">&gt; community specific extensions are stored in the two subdirectories 
</em><br />
<em class="quotelev1">&gt; then I'm not sure how its going to work (only through internet 
</em><br />
<em class="quotelev1">&gt; access?, what about the variable specific grid_mapping attributes?).
</em><br />
If it is local files that your community really needs, and the 
<br />
service-oriented aspects of TDS do not add any value, then (as you have 
<br />
said) you don't need OPeNDAP.  In fact, there is plenty of richness in 
<br />
the netCDF utilities that already exist (e.g. nco), so that you can 
<br />
create German and Dutch flavors of your files using nothing but simple 
<br />
scripts to do the same things that are described from TDS above.   No 
<br />
changes to CF are required.  And it would not be a particularly messy 
<br />
data management task.
<br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;     P.S. (footnote) On the initial point about redundant &quot;grid object&quot;
</em><br />
<em class="quotelev1">&gt;     contents:  I was referring to situations where variables like
</em><br />
<em class="quotelev1">&gt;     velocities (XYZ), share the same horizontal coordinates as
</em><br />
<em class="quotelev1">&gt;     variables like streamFunction (XY).  The grid_mapping info for the
</em><br />
<em class="quotelev1">&gt;     horizontal has to be repeated in both grids ... or alternatively,
</em><br />
<em class="quotelev1">&gt;     complexity has to be introduced to represent parent (XY) and child
</em><br />
<em class="quotelev1">&gt;     (XYZ) grid objects.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; As long as the grid_mapping data sets do not refer to variables, there 
</em><br />
<em class="quotelev1">&gt; is no need to duplicate the grid_mapping data. I only see the need to 
</em><br />
<em class="quotelev1">&gt; specify for every variable in the file the grid_mapping attribute 
</em><br />
<em class="quotelev1">&gt; (current situation) or coordinate_system (one of the alternatives). So 
</em><br />
<em class="quotelev1">&gt; far, grid_mapping is a purely horizontal transformation, so, if the 
</em><br />
<em class="quotelev1">&gt; velocities are stored at the same grid locations as the streamfunction 
</em><br />
<em class="quotelev1">&gt; and the Z dimension is a separate dimension, there is no need to 
</em><br />
<em class="quotelev1">&gt; duplicate the horizontal grid variables either. If the velocities are 
</em><br />
<em class="quotelev1">&gt; stored at different X,Y locations than the streamFunction then we need 
</em><br />
<em class="quotelev1">&gt; of course two grid specifications.
</em><br />
In the footnote I was assuming that the theoretical discussion was of 
<br />
grid objects that described both horizontal and vertical and files that 
<br />
mixed 2D and 3D spatial grids.  There are plenty of subtleties in the 
<br />
vertical, too, particularly for hybrid coordinate models.  Sorry for 
<br />
opening up this distracting point.
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;Thanks for your patience with this process - Steve
<br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; Best regards,
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; Bert
</em><br />
<em class="quotelev1">&gt; ------------------------------------------------------------------------
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; _______________________________________________
</em><br />
<em class="quotelev1">&gt; CF-metadata mailing list
</em><br />
<em class="quotelev1">&gt; CF-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt; <a href="http://www.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://www.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<em class="quotelev1">&gt;   
</em><br />
<br /><pre>
-- 
--
Steve Hankin, NOAA/PMEL -- Steven.C.Hankin at noaa.gov
7600 Sand Point Way NE, Seattle, WA 98115-0070
ph. (206) 526-6080, FAX (206) 526-6744
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<a href="http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20061206/65864216/attachment-0002.html">http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20061206/65864216/attachment-0002.html</a>&gt;
</pre>
<span id="received"><dfn>Received on</dfn> Wed Dec 06 2006 - 10:07:58 GMT</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start565">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./0566.html" title="Next message in the list">Bert Jagers: "[CF-metadata] curvilinear cartesian coordinates case (service-oriented approach)"</a></li>
<li><dfn>Previous message</dfn>: <a href="./0564.html" title="Previous message in the list">Godin, Michael: "[CF-metadata] Proposed standard names for biological model outputs"</a></li>
<li><dfn>In reply to</dfn>: <a href="./0563.html" title="Message to which this message replies">Bert Jagers: "[CF-metadata] curvilinear cartesian coordinates case (service-oriented approach)"</a></li>
<!-- lnextthread="start" -->
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg565" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg565" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg565" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg565" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:56:52 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./0564.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./0566.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
