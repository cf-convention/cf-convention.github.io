<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] some concerns about the &quot;ensemble axis&quot; proposal from Steve Hankin on 2007-03-08 (cf-metadata-mailman)</title>
<meta name="Author" content="Steve Hankin (Steven.C.Hankin)" />
<meta name="Subject" content="[CF-metadata] some concerns about the &quot;ensemble axis&quot; proposal" />
<meta name="Date" content="2007-03-08" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./0744.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./0746.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] some concerns about the &quot;ensemble axis&quot; proposal</h1>
<!-- received="Thu Mar  8 11:37:35 2007" -->
<!-- isoreceived="20070308113735" -->
<!-- sent="Thu, 08 Mar 2007 10:37:35 -0800" -->
<!-- isosent="20070308183735" -->
<!-- name="Steve Hankin" -->
<!-- email="Steven.C.Hankin" -->
<!-- subject="[CF-metadata] some concerns about the &quot;ensemble axis&quot; proposal" -->
<!-- id="45F057EF.6050702_at_noaa.gov" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="7D75C520-473E-48F1-B5FE-E8DBAE71F863_at_cola.iges.org" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start745" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./0746.html" accesskey="d" title="Christiane Textor: &quot;[CF-metadata] approval of standard_names for aerosols and chemistry for HTAP&quot;">Next message</a> ]
[ <a href="./0744.html" title="Jonathan Gregory: &quot;[CF-metadata]  some concerns about the &#0034;ensemble axis&#0034; proposal&quot;">Previous message</a> ]
[ <a href="./0743.html" title="Jennifer Adams: &quot;[CF-metadata] some concerns about the &#0034;ensemble axis&#0034; proposal&quot;">In reply to</a> ]
<!-- unextthread="start" -->
[ <a href="./0736.html" accesskey="t" title="V. Balaji: &quot;[CF-metadata] some concerns about the &#0034;ensemble axis&#0034; proposal&quot;">Next in thread</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg745" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg745" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg745" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg745" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Steve Hankin &lt;<a href="mailto:Steven.C.Hankin?Subject=Re%3A%20%5BCF-metadata%5D%20some%20concerns%20about%20the%20%22ensemble%20axis%22%20proposal">Steven.C.Hankin</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Thu, 08 Mar 2007 10:37:35 -0800</span><br />
</address>
<br />
Hi Jennifer et. al.,
<br />
<br />Thanks so much for introducing this fresh use case, Jennifer.  In your 
<br />
application -- ensemble outputs from a single model --  there is no need 
<br />
to be playing with the multi-model elephant. So your use case bypasses 
<br />
four of the six concerns that were raised in the message that started 
<br />
this thread.  And it simplifies one of the remaining.  So for all of 
<br />
those in these email thread who were nearing exhaustion (and that 
<br />
includes me) *_this may indicate a consensus_*   :-) -- an agreement on 
<br />
large parts of the ensemble axis proposal, though not necessarily some 
<br />
specific details that apply to multi-model ensembles.  Will wait to see 
<br />
what concerns Balaji may raise.
<br />
<br />As above, two concerns that remain to be addressed are
<br />
3.  The character of the ensemble axis
<br />
and
<br />
5.  The barriers to interoperability that arise from instability and 
<br />
snow-balling complexity in the CF spec
<br />
<br />Regarding 3, the character of the ensemble axis, Jennifer's use case is 
<br />
satisfied by using a single string variable (well actually a 2D char 
<br />
array, but we can assume that added complexity is implicit).  Although 
<br />
this does muddy the waters by introducing a gridded axis concept in 
<br />
which the notion of monotonic progression have been left behind, it is a 
<br />
relatively straightforward extension.  I'd argue that such an axis 
<br />
should carry a something like a mandatory &quot;axis&quot; attribute,  ('axis = 
<br />
&quot;ensemble&quot;' or 'axis_type=&quot;enumerated&quot;' or whatever), that would make it 
<br />
unambiguous for both humans and machines to understand the 
<br />
interpretation of the file.    Some of the most fragile aspects of CF 
<br />
are in the obscure (and growing) set of inferences that applications 
<br />
must make to determine how the parts hang together.
<br />
<br />It was in the discussion of how to extend Jennifer's straightforward 
<br />
concept (an ensemble axis) into a fusion of institution, source, 
<br />
experiment_id, etc. that the sense of cramming multi-model concepts into 
<br />
CF went into high gear.  There is a long thread of emails proposing and 
<br />
debating aspects of this.  How about if this specific topic were placed 
<br />
into the wiki framework -- &quot;How to handle the metadata of a multi-model 
<br />
ensemble in CF&quot; -- and we see if we can come up with a clean consensus 
<br />
solution? Maybe part the solution will prove not to belong in the files 
<br />
themselves, but in some external metadata associating the ensemble members.
<br />
<br />Regarding 5 -- the barriers to interoperability from instability:  we 
<br />
have discussions that go back several years on the subject of &quot;CF 
<br />
conformance levels&quot;.  These concepts may provide an answer for us here.  
<br />
We are just starting to achieve new levels of interoperability as 
<br />
applications like the ESRI ArcGIS products learn how to read (a simple 
<br />
subset of) CF 4-dimensional files. My concern is that we don't torpedo 
<br />
that progress by creating a moving target that clients cannot hope to 
<br />
keep up with.  One approach to this is that we regard the ensemble and 
<br />
forecast axes being proposed in CF through a conformance matrix in the 
<br />
style that &quot;GKS level 2b&quot; was interpreted.  For example, a global 
<br />
attribute, &quot;conventions_featurelist&quot;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;'conventions = cf-2.0'
<br />
&nbsp;&nbsp;&nbsp;&nbsp;'conventions_featurelist  = &quot;6d&quot;
<br />
could indicate whether support for the extended axis features was 
<br />
required by an application in order to interpret this file.
<br />
<br />How does this help us?  Well the on-the-ground reality of handling 
<br />
ensemble and forecast datasets is that in most cases they will be 
<br />
created by aggregation servers.  It is a relatively straightforward 
<br />
matter for an aggregation server to create both the 6d version of the 
<br />
dataset *and *the collection (e.g. via THREDDS) of corresponding 4d 
<br />
(probably native model output) datasets.  Each view would be identified 
<br />
by its conventions_featurelist attribute.  It is a way to have our cake 
<br />
and eat it, too -- provide high level functionality for high end 
<br />
applications and retain intelligibility for low end applications.
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;enuf said. (exhaustion factor ...)  - Steve
<br />
<br />==========================
<br />
<br />Jennifer Adams wrote:
<br />
<em class="quotelev1">&gt; This discussion is getting juicy! 
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; I am the GrADS and GDS developer working on an interface for 
</em><br />
<em class="quotelev1">&gt; 5-dimensional data sets. Ensembles are one example of how the 5th 
</em><br />
<em class="quotelev1">&gt; dimension might be used, but there are others (e.g. EOFs), so we are 
</em><br />
<em class="quotelev1">&gt; trying to make it as general as possible while still being practical 
</em><br />
<em class="quotelev1">&gt; and usable. GrADS is written in C and handles data in a variety of 
</em><br />
<em class="quotelev1">&gt; formats. Data file aggregation over time, and now over the &quot;e&quot; 
</em><br />
<em class="quotelev1">&gt; dimension, is possible but not required. 
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Currently, we are not building an interface for multi-model ensembles 
</em><br />
<em class="quotelev1">&gt; on different grids. The elephant in Steve's living room will not 
</em><br />
<em class="quotelev1">&gt; allowed to play in our yard. Fast and easy interpolation between data 
</em><br />
<em class="quotelev1">&gt; sets on different grids was omitted from GrADS by design and that is 
</em><br />
<em class="quotelev1">&gt; not likely to change with the addition of a new grid dimension. If 
</em><br />
<em class="quotelev1">&gt; users want to lump data sets on different grids together, they must 
</em><br />
<em class="quotelev1">&gt; handle the interpolation explicitly in a way that is best suited to 
</em><br />
<em class="quotelev1">&gt; their needs and in a way that they know will best preserve the 
</em><br />
<em class="quotelev1">&gt; information in the data they wish to extract. 
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Ensembles that are on the same grid will be handled by GrADS. For 
</em><br />
<em class="quotelev1">&gt; metadata, we are taking a minimalist approach -- the ensemble axis is 
</em><br />
<em class="quotelev1">&gt; linear, and members have a unique name (&lt;16 characters) and are 
</em><br />
<em class="quotelev1">&gt; numbered from 1 to n. We don't require that all members have the same 
</em><br />
<em class="quotelev1">&gt; start time or length, so those pieces of metadata are also required. 
</em><br />
<em class="quotelev1">&gt; This information is generally provided in a data descriptor file, an 
</em><br />
<em class="quotelev1">&gt; external metadata source written by the user after poring over the 
</em><br />
<em class="quotelev1">&gt; output from ncdump or wgrib or similar routine.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; If I am handed a single netcdf file with multi-model-different-grid 
</em><br />
<em class="quotelev1">&gt; ensembles in it from ECMWF or GFDL, I'm going to write a set of 
</em><br />
<em class="quotelev1">&gt; descriptor files, each one describing the subset of variables on a 
</em><br />
<em class="quotelev1">&gt; common 5D grid. I'll have one descriptor file per grid, all pointing 
</em><br />
<em class="quotelev1">&gt; at the same data file. Now I'm set to do my analysis in GrADS, 
</em><br />
<em class="quotelev1">&gt; beginning with careful interpolation between the different grids. 
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; When I put my 5D data sets behind a GDS and serve them to the world of 
</em><br />
<em class="quotelev1">&gt; OPeNDAP clients (including GrADS), it becomes a special case:  a 5D 
</em><br />
<em class="quotelev1">&gt; netcdf file that doesn't require a descriptor file, a file that has 
</em><br />
<em class="quotelev1">&gt; all the metadata GrADS needs packaged in just the right way. For the 
</em><br />
<em class="quotelev1">&gt; time being, my approach works because I'm writing the code for the 
</em><br />
<em class="quotelev1">&gt; client and the server, I'm not worrying about any other client trying 
</em><br />
<em class="quotelev1">&gt; to read my 5D GDS data set, and I'm not trying to be CF-compliant. 
</em><br />
<em class="quotelev1">&gt; Here's what it's going to look like:
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; dimensions:
</em><br />
<em class="quotelev1">&gt;         lon = 9 ;
</em><br />
<em class="quotelev1">&gt;         lat = 9 ;
</em><br />
<em class="quotelev1">&gt;         lev = 9 ;
</em><br />
<em class="quotelev1">&gt;         time = 9 ;
</em><br />
<em class="quotelev1">&gt;         ens = 9 ;
</em><br />
<em class="quotelev1">&gt;         string16 = 16 ;
</em><br />
<em class="quotelev1">&gt; variables:
</em><br />
<em class="quotelev1">&gt;         float lon(lon) ;
</em><br />
<em class="quotelev1">&gt;                 lon:units = &quot;degrees_east&quot; ;
</em><br />
<em class="quotelev1">&gt;         float lat(lat) ;
</em><br />
<em class="quotelev1">&gt;                 lat:units = &quot;degrees_north&quot; ;
</em><br />
<em class="quotelev1">&gt;         float lev(lev) ;
</em><br />
<em class="quotelev1">&gt;                 lev:units = &quot;level&quot; ;
</em><br />
<em class="quotelev1">&gt;         float time(time) ;
</em><br />
<em class="quotelev1">&gt;                 time:units = &quot;days since 0001-01-01 00:00:00&quot; ;
</em><br />
<em class="quotelev1">&gt;         float ens(ens) ;
</em><br />
<em class="quotelev1">&gt;                 ens:grads_dim = &quot;e&quot; ;
</em><br />
<em class="quotelev1">&gt;         char ens_name(ens, string16) ;
</em><br />
<em class="quotelev1">&gt;                 ens_name:long_name = &quot;ensemble name&quot; ;
</em><br />
<em class="quotelev1">&gt;         int ens_length(ens) ;
</em><br />
<em class="quotelev1">&gt;                 ens_length:long_name = &quot;ensemble length&quot; ;
</em><br />
<em class="quotelev1">&gt;         int ens_tinit(ens) ;
</em><br />
<em class="quotelev1">&gt;                 ens_tinit:long_name = &quot;ensemble initial time index&quot; ;
</em><br />
<em class="quotelev1">&gt;         float var(ens, time, lev, lat, lon) ;
</em><br />
<em class="quotelev1">&gt;                 var:long_name = &quot;test variable&quot; ;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; When more metadata is required to bring my GDS data set into CF 
</em><br />
<em class="quotelev1">&gt; compliance, or to make it readable by other open source clients, I'll 
</em><br />
<em class="quotelev1">&gt; add it. As long as GrADS users have the means to keep up with the data 
</em><br />
<em class="quotelev1">&gt; sets being generated by CFS, IPCC, TIGGE, or whatever, then I'm not 
</em><br />
<em class="quotelev1">&gt; concerned. 
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; It took me a long time to write out this email -- I lost most of an 
</em><br />
<em class="quotelev1">&gt; afternoon trying to phrase everything properly. I have been reading 
</em><br />
<em class="quotelev1">&gt; this thread with interest, but I just can't keep up this kind of 
</em><br />
<em class="quotelev1">&gt; lengthy correspondence on a regular basis. Please keep me in mind as 
</em><br />
<em class="quotelev1">&gt; one of the silent listeners who still cares about the outcome. 
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Jennifer
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; --
</em><br />
<em class="quotelev1">&gt; Jennifer M. Adams
</em><br />
<em class="quotelev1">&gt; IGES/COLA
</em><br />
<em class="quotelev1">&gt; 4041 Powder Mill Road, Suite 302
</em><br />
<em class="quotelev1">&gt; Calverton, MD 20705
</em><br />
<em class="quotelev1">&gt; jma at cola.iges.org &lt;mailto:jma at cola.iges.org&gt;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; ------------------------------------------------------------------------
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; _______________________________________________
</em><br />
<em class="quotelev1">&gt; CF-metadata mailing list
</em><br />
<em class="quotelev1">&gt; CF-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt; <a href="http://www.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://www.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<em class="quotelev1">&gt;   
</em><br />
<br /><pre>
-- 
--
Steve Hankin, NOAA/PMEL -- Steven.C.Hankin at noaa.gov
7600 Sand Point Way NE, Seattle, WA 98115-0070
ph. (206) 526-6080, FAX (206) 526-6744
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<a href="http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20070308/a3d5adc3/attachment-0002.html">http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20070308/a3d5adc3/attachment-0002.html</a>&gt;
</pre>
<span id="received"><dfn>Received on</dfn> Thu Mar 08 2007 - 11:37:35 GMT</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start745">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./0746.html" title="Next message in the list">Christiane Textor: "[CF-metadata] approval of standard_names for aerosols and chemistry for HTAP"</a></li>
<li><dfn>Previous message</dfn>: <a href="./0744.html" title="Previous message in the list">Jonathan Gregory: "[CF-metadata]  some concerns about the &#0034;ensemble axis&#0034; proposal"</a></li>
<li><dfn>In reply to</dfn>: <a href="./0743.html" title="Message to which this message replies">Jennifer Adams: "[CF-metadata] some concerns about the &#0034;ensemble axis&#0034; proposal"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="./0736.html" title="Next message in this discussion thread">V. Balaji: "[CF-metadata] some concerns about the &#0034;ensemble axis&#0034; proposal"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg745" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg745" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg745" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg745" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:56:55 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./0744.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./0746.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
