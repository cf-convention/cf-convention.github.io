<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] udunits handling of fuzzy time units from John Caron on 2011-03-18 (cf-metadata-mailman)</title>
<meta name="Author" content="John Caron (caron)" />
<meta name="Subject" content="[CF-metadata] udunits handling of fuzzy time units" />
<meta name="Date" content="2011-03-18" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./3341.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./3343.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] udunits handling of fuzzy time units</h1>
<!-- received="Fri Mar 18 13:30:55 2011" -->
<!-- isoreceived="20110318133055" -->
<!-- sent="Fri, 18 Mar 2011 13:30:55 -0600" -->
<!-- isosent="20110318193055" -->
<!-- name="John Caron" -->
<!-- email="caron" -->
<!-- subject="[CF-metadata] udunits handling of fuzzy time units" -->
<!-- id="4D83B2EF.3000705_at_unidata.ucar.edu" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="5B141CC6507E4944995EAFDF6298A2F8B6459DF40F_at_MBX-CLUSTER01.ad.fz-juelich.de" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start3342" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./3343.html" accesskey="d" title="John Caron: &quot;[CF-metadata] fuzzy time units&quot;">Next message</a> ]
[ <a href="./3341.html" title="John Caron: &quot;[CF-metadata] udunits handling of fuzzy time units&quot;">Previous message</a> ]
[ <a href="./3333.html" title="Schultz, Martin: &quot;[CF-metadata] udunits handling of fuzzy time units&quot;">In reply to</a> ]
<!-- unextthread="start" -->
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg3342" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg3342" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg3342" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg3342" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: John Caron &lt;<a href="mailto:caron?Subject=Re%3A%20%5BCF-metadata%5D%20udunits%20handling%20of%20fuzzy%20time%20units">caron</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Fri, 18 Mar 2011 13:30:55 -0600</span><br />
</address>
<br />
On 3/18/2011 4:11 AM, Schultz, Martin wrote:
<br />
<em class="quotelev1">&gt; Dear all,
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;      in our work, we have often been confronted with the current limitations where the only times allowed by CF are &quot;real&quot; times using the &quot;days since date&quot; syntax and assuming the Gregorian calendar. We often have &quot;climatological&quot; fields as model input data, where monthly variation is included, but we don't care whether the field is valid for the 14th or 15th of February. Also, much of our output is analyzed as monthly means and we happily accept that some Februaries contain an extra day. It's still a month, and variations in weather patterns don't change with leap year anyhow.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;      In my opinion, Steve hit the nail on the head when he writes:
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev2">&gt;&gt; There are two ways in which dimensions (positions and
</em><br />
<em class="quotelev2">&gt;&gt; intervals) can be handled.  Each of them is self-consistent:
</em><br />
<em class="quotelev2">&gt;&gt;
</em><br />
<em class="quotelev2">&gt;&gt;     1. *represent positions as strings*.
</em><br />
<em class="quotelev2">&gt;&gt;            * Then create special functions to compute the implied
</em><br />
<em class="quotelev2">&gt;&gt;              distance between those string representations.  In this
</em><br />
<em class="quotelev2">&gt;&gt;              outlook units must be specified when the interval is computed.
</em><br />
<em class="quotelev2">&gt;&gt;     2. *represent positions with a zero reference, and an offset value.
</em><br />
<em class="quotelev2">&gt;&gt;            * Then create special functions to generate formatted strings
</em><br />
<em class="quotelev2">&gt;&gt;              representing positions along the axis.  In this outlook
</em><br />
<em class="quotelev2">&gt;&gt;              units must be stored with the representation.
</em><br />
<em class="quotelev2">&gt;&gt;
</em><br />
<em class="quotelev1">&gt;      So, if new calendars are defined/introduced, they must come with a self-consistent (and complete) set of rules how to compute differences and how to map one unit (days, weeks, months, years) onto the other. Within these rules you can of course disallow certain units (see Python's timedelta), that's erfectly legal. Once these rules are clear, it would be no problem to deal with any kind of calendar (even including the poor person who models the atmosphere on Venus or Mars which have very different calendars). You can then even transform data from one calendar into the other and you know what you will get (this is helpful if you construct such climatologies from daily model output, for example). It doesn't necessarily mean that the transformation must work &quot;bidirectional&quot; (can't find the correct english word for what I want to say here), i.e. &quot;February 12 of year 203&quot; in a &quot;360 days&quot; calendar (as often used in paleo studies) can be translated into &quot;February 12, 1834&quot; (if you define that your base year w</em><br />
as 1631, which will be somewhat arbitrary), but &quot;February 12, 1834&quot; might not necessarily be converted back into &quot;February 12, 1834&quot;, but could be some other date. Indeed, this is the &quot;fuzziness&quot; of the subject - here is where it comes in. Within each calendar, there should not be any ambiguities.
<br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Hope, this is useful,
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Martin
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; PS: I do disagree with Christopher when he says ''&quot;30 days since 31 Jan 2008&quot; is perfectly well defined.'' - do you refer to 00 UTC or 12 UTC on 31 Jan 2008? Or even 00:00 UTC or 01:02:30.3625132 h UTC? OK: if you define an &quot;oceanographic calendar&quot; (where anything shorter than a day doesn't matter), you could have a rule that all hours, minutes, seconds, milliseconds, etc. are mapped onto one value (say 00:00:00 h UTC). But you will need to define this rule in order to give a meaning to your calendar.
</em><br />
<br />yes, i agree. we do have calendars in CF already ( see below). udunits 
<br />
does not implement them, however. a claenddar should be defined by a set 
<br />
of rules, but a reference library is needed to make sure you have the 
<br />
rules correctly specified and implemented.
<br />
<br />im less sure that there must always be a canonical way to &quot;transform 
<br />
data from one calendar into the other&quot;, but i understand that such 
<br />
mappings are often needed.
<br />
<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.4.1. Calendar
<br />
<br />In order to calculate a new date and time given a base date, base time 
<br />
and a time increment one must know what calendar to use. For this 
<br />
purpose we recommend that the calendar be specified by the 
<br />
attribute|calendar|which is assigned to the time coordinate variable. 
<br />
The values currently defined for|calendar|are:
<br />
<br />|gregorian|or|standard|
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;Mixed Gregorian/Julian calendar as defined by Udunits./This is the
<br />
&nbsp;&nbsp;&nbsp;&nbsp;default./
<br />
<br />|proleptic_gregorian|
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;A Gregorian calendar extended to dates before 1582-10-15. That is, a
<br />
&nbsp;&nbsp;&nbsp;&nbsp;year is a leap year if either (i) it is divisible by 4 but not by
<br />
&nbsp;&nbsp;&nbsp;&nbsp;100 or (ii) it is divisible by 400.
<br />
<br />|noleap|or|365_day|
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;Gregorian calendar without leap years, i.e., all years are 365 days
<br />
&nbsp;&nbsp;&nbsp;&nbsp;long.
<br />
<br />|all_leap|or|366_day|
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;Gregorian calendar with every year being a leap year, i.e., all
<br />
&nbsp;&nbsp;&nbsp;&nbsp;years are 366 days long.
<br />
<br />|360_day|
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;All years are 360 days divided into 30 day months.
<br />
<br />|julian|
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;Julian calendar.
<br />
<br /><br />-------------- next part --------------
<br />
An HTML attachment was scrubbed...
<br />
URL: &lt;<a href="http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20110318/15479ed1/attachment-0001.html">http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20110318/15479ed1/attachment-0001.html</a>&gt;
<br />
<span id="received"><dfn>Received on</dfn> Fri Mar 18 2011 - 13:30:55 GMT</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start3342">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./3343.html" title="Next message in the list">John Caron: "[CF-metadata] fuzzy time units"</a></li>
<li><dfn>Previous message</dfn>: <a href="./3341.html" title="Previous message in the list">John Caron: "[CF-metadata] udunits handling of fuzzy time units"</a></li>
<li><dfn>In reply to</dfn>: <a href="./3333.html" title="Message to which this message replies">Schultz, Martin: "[CF-metadata] udunits handling of fuzzy time units"</a></li>
<!-- lnextthread="start" -->
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg3342" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg3342" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg3342" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg3342" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:57:43 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./3341.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./3343.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
