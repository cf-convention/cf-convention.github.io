<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] CDM calendar date handling from Jon Blower on 2011-08-18 (cf-metadata-mailman)</title>
<meta name="Author" content="Jon Blower (j.d.blower)" />
<meta name="Subject" content="[CF-metadata] CDM calendar date handling" />
<meta name="Date" content="2011-08-18" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./3661.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./3663.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] CDM calendar date handling</h1>
<!-- received="Thu Aug 18 13:53:52 2011" -->
<!-- isoreceived="20110818125352" -->
<!-- sent="Thu, 18 Aug 2011 19:53:52 +0000" -->
<!-- isosent="20110818195352" -->
<!-- name="Jon Blower" -->
<!-- email="j.d.blower" -->
<!-- subject="[CF-metadata] CDM calendar date handling" -->
<!-- id="D38DCA8842FECD4585C8DE16D602ABF41DAC92_at_vime-mbx1.rdg.ac.uk" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="20110818154152.GA29785_at_met.reading.ac.uk" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start3662" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./3663.html" accesskey="d" title="John Caron: &quot;[CF-metadata] CDM calendar date handling&quot;">Next message</a> ]
[ <a href="./3661.html" title="Jonathan Gregory: &quot;[CF-metadata] CDM calendar date handling&quot;">Previous message</a> ]
[ <a href="./3661.html" title="Jonathan Gregory: &quot;[CF-metadata] CDM calendar date handling&quot;">In reply to</a> ]
<!-- unextthread="start" -->
[ <a href="./3664.html" accesskey="t" title="John Caron: &quot;[CF-metadata] CDM calendar date handling&quot;">Next in thread</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg3662" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg3662" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg3662" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg3662" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Jon Blower &lt;<a href="mailto:j.d.blower?Subject=Re%3A%20%5BCF-metadata%5D%20CDM%20calendar%20date%20handling">j.d.blower</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Thu, 18 Aug 2011 19:53:52 +0000</span><br />
</address>
<br />
Just a very quick comment:
<br />
<br /><em class="quotelev1">&gt; Could the software be ported to other languages in which the netCDF lib exists?
</em><br />
<br />The good news is that the &quot;non-standard&quot; calendars (360_day etc) are easier to program in libraries than the standard Gregorian since the years (and sometimes months) are often fixed-length.  Most languages will provide code that handles Gregorian dates and I don't think it's too hard to implement the others.
<br />
<br /><em class="quotelev1">&gt; In order to do calculations with times, which are often necessary, we need to be able to convert them into
</em><br />
<em class="quotelev1">&gt; a form which has a fixed-length unit since a reference time (like udunits), even though that isn't the most
</em><br />
<em class="quotelev1">&gt; convenient way to express them.
</em><br />
<br />Yes - I think the &quot;engine&quot; of this is a routine that subtracts two times in a given calendar system and expresses the result as a certain number of, say, seconds.  Again, not too hard in the &quot;non-standard&quot; calendars and usually implemented already for the Gregorian system in standard libs.
<br />
<br />Jon
<br />
<br />-----Original Message-----
<br />
From: cf-metadata-bounces at cgd.ucar.edu [mailto:cf-metadata-bounces at cgd.ucar.edu] On Behalf Of Jonathan Gregory
<br />
Sent: 18 August 2011 16:42
<br />
To: cf-metadata at cgd.ucar.edu
<br />
Subject: Re: [CF-metadata] CDM calendar date handling
<br />
<br />Dear John
<br />
<br /><em class="quotelev1">&gt;   <a href="http://www.unidata.ucar.edu/software/netcdf-java/CDM/DateTime.html">http://www.unidata.ucar.edu/software/netcdf-java/CDM/DateTime.html</a>
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; If there's interest, I can propose as a CF convention. Otherwise it 
</em><br />
<em class="quotelev1">&gt; can remain a CDM extension.
</em><br />
<br />Thank you for doing this. I think it's an attractive idea to have calendar handling in CF time coordinates. One issue to be dealt with would be the need to be able to process these strings using any programming language which might be used to process CF-netCDF data. Could the software be ported to other languages in which the netCDF lib exists? In order to do calculations with times, which are often necessary, we need to be able to convert them into a form which has a fixed-length unit since a reference time (like udunits), even though that isn't the most convenient way to express them.
<br />
<br />What you have proposed for the syntax looks very sensible to me. I have some minor points:
<br />
<br />* A bit related to Don's: it would be good to allow SI prefixes, like udunits does. For instance, ms is the usual SI symbol for millisecond.
<br />
<br />* What happens if n months or n years since a certain date is not a valid date in the calendar? You probably have a rule to resolve that. Most safely, it should be an error to encode such a time, I suppose (e.g. 1 year since
<br />
29 Feb 2008). Do you insist that the ref data is valid in the calendar?
<br />
<br />* The udunits ref time implies missing components e.g. 1 hour since 2011-1-1 means 1 hour since 00:00 on 2001-1-1. What do missing components of ISO strings imply in your implementation? I think it has got to imply something, because these datetimes are still complete time specifications, aren't they.
<br />
<br />* For further udunits compatibility, it would be convenient to be able to omit the time zone, which would imply Z. All global model data is in UTC, I should think, and I suppose it must be the obvious choice for all global datasets.
<br />
<br />I think that we should use standard_names of time for datetimes only, and other words, such as period, for intervals of time in standard_names. Then we can give them different sorts of units.
<br />
<br />Best wishes and thanks
<br />
<br />Jonathan
<br />
_______________________________________________
<br />
CF-metadata mailing list
<br />
CF-metadata at cgd.ucar.edu
<br />
<a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
<br />
<span id="received"><dfn>Received on</dfn> Thu Aug 18 2011 - 13:53:52 BST</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start3662">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./3663.html" title="Next message in the list">John Caron: "[CF-metadata] CDM calendar date handling"</a></li>
<li><dfn>Previous message</dfn>: <a href="./3661.html" title="Previous message in the list">Jonathan Gregory: "[CF-metadata] CDM calendar date handling"</a></li>
<li><dfn>In reply to</dfn>: <a href="./3661.html" title="Message to which this message replies">Jonathan Gregory: "[CF-metadata] CDM calendar date handling"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="./3664.html" title="Next message in this discussion thread">John Caron: "[CF-metadata] CDM calendar date handling"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg3662" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg3662" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg3662" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg3662" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:57:49 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./3661.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./3663.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
