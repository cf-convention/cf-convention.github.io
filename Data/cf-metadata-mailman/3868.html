<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] daily maximum of running 8-hour means from Cameron-smith, Philip on 2011-10-24 (cf-metadata-mailman)</title>
<meta name="Author" content="Cameron-smith, Philip (cameronsmith1)" />
<meta name="Subject" content="[CF-metadata] daily maximum of running 8-hour means" />
<meta name="Date" content="2011-10-24" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./3867.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./3869.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] daily maximum of running 8-hour means</h1>
<!-- received="Mon Oct 24 14:40:54 2011" -->
<!-- isoreceived="20111024134054" -->
<!-- sent="Mon, 24 Oct 2011 13:40:54 -0700" -->
<!-- isosent="20111024204054" -->
<!-- name="Cameron-smith, Philip" -->
<!-- email="cameronsmith1" -->
<!-- subject="[CF-metadata] daily maximum of running 8-hour means" -->
<!-- id="DDB20D8288D53E4D811673C30FAB857D01AFE9CC8EF4_at_NSPEXMBX-B.the-lab.llnl.gov" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="20111024002947.GA10579_at_met.reading.ac.uk" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start3868" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./3869.html" accesskey="d" title="Jonathan Gregory: &quot;[CF-metadata] daily maximum of running 8-hour means&quot;">Next message</a> ]
[ <a href="./3867.html" title="Jonathan Gregory: &quot;[CF-metadata] daily maximum of running 8-hour means&quot;">Previous message</a> ]
[ <a href="./3867.html" title="Jonathan Gregory: &quot;[CF-metadata] daily maximum of running 8-hour means&quot;">In reply to</a> ]
<!-- unextthread="start" -->
[ <a href="./3869.html" accesskey="t" title="Jonathan Gregory: &quot;[CF-metadata] daily maximum of running 8-hour means&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg3868" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg3868" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg3868" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg3868" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Cameron-smith, Philip &lt;<a href="mailto:cameronsmith1?Subject=Re%3A%20%5BCF-metadata%5D%20daily%20maximum%20of%20running%208-hour%20means">cameronsmith1</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Mon, 24 Oct 2011 13:40:54 -0700</span><br />
</address>
<br />
Dear Jonathan,
<br />
<br />Both methods seem reasonable to me.  The first method has the advantage of explicitly recording the ranges, which can be helpful for verifying that one understands what was done.  The second method has the advantage of encoding it all in a second line, which is a bit harder to read, but may generalize better.
<br />
<br />My only suggestion: if we go with your first method then I suggest we change the name of old_time to something else, since this suggests to me that it is old data that could or should be ignored.  Alternatives I can think of are kernel_time, average_time, and preprocess_time.
<br />
<br />Best wishes,
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Philip
<br />
<br /><br /><br />-----------------------------------------------------------------------
<br />
Dr Philip Cameron-Smith, pjc at llnl.gov, Lawrence Livermore National Lab.
<br />
-----------------------------------------------------------------------
<br />
<br /><br /><br /><em class="quotelev1">&gt; -----Original Message-----
</em><br />
<em class="quotelev1">&gt; From: cf-metadata-bounces at cgd.ucar.edu [mailto:cf-metadata-
</em><br />
<em class="quotelev1">&gt; bounces at cgd.ucar.edu] On Behalf Of Jonathan Gregory
</em><br />
<em class="quotelev1">&gt; Sent: Sunday, October 23, 2011 5:30 PM
</em><br />
<em class="quotelev1">&gt; To: cf-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt; Subject: Re: [CF-metadata] daily maximum of running 8-hour means
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Dear Martin and Philip
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Thank you for your use-cases showing the need for standardised metadata
</em><br />
<em class="quotelev1">&gt; for
</em><br />
<em class="quotelev1">&gt; daily maxima of 8-hour running means. I expect that similar cases will
</em><br />
<em class="quotelev1">&gt; arise
</em><br />
<em class="quotelev1">&gt; in other areas and actually it is quite surprising they haven't
</em><br />
<em class="quotelev1">&gt; already, I
</em><br />
<em class="quotelev1">&gt; think.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; What you want to describe involves two cell_methods processing
</em><br />
<em class="quotelev1">&gt; operations: (1)
</em><br />
<em class="quotelev1">&gt; Calculate an 8-hour running mean for consecutive hours, (2) Calculate a
</em><br />
<em class="quotelev1">&gt; maximum of these within days. We could record this explicitly and
</em><br />
<em class="quotelev1">&gt; completely
</em><br />
<em class="quotelev1">&gt; if we had different time coordinates for the two operations. For the
</em><br />
<em class="quotelev1">&gt; first
</em><br />
<em class="quotelev1">&gt; operation, the cell_method is a mean, and we have time coordinates at
</em><br />
<em class="quotelev1">&gt; hourly
</em><br />
<em class="quotelev1">&gt; intervals, each with bounds specifying an 8-hour period. The cell
</em><br />
<em class="quotelev1">&gt; bounds
</em><br />
<em class="quotelev1">&gt; overlap, but that's no problem. E.g. they could be [0:00, 8:00], [1:00,
</em><br />
<em class="quotelev1">&gt; 9:00],
</em><br />
<em class="quotelev1">&gt; [2:00, 10:00], ... (just the time, omitting the date). For the second
</em><br />
<em class="quotelev1">&gt; operation, the cell_method is a maximum, the bounds indicate periods of
</em><br />
<em class="quotelev1">&gt; days,
</em><br />
<em class="quotelev1">&gt; spaced at daily intervals i.e. not overlapping.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; One possibility would be to extend CF to allow you to preserve the
</em><br />
<em class="quotelev1">&gt; original
</em><br />
<em class="quotelev1">&gt; time axis to which the first operation applied, even though it is no
</em><br />
<em class="quotelev1">&gt; longer
</em><br />
<em class="quotelev1">&gt; provides the time coordinates once the second operation has been
</em><br />
<em class="quotelev1">&gt; carried
</em><br />
<em class="quotelev1">&gt; out. For instance, we could allow:
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt;   float air_quality(time);
</em><br />
<em class="quotelev1">&gt;     air_quality:cell_methods=&quot;old_time: mean time: maximum&quot;;
</em><br />
<em class="quotelev1">&gt;   double old_time;
</em><br />
<em class="quotelev1">&gt;     old_time:units=&quot;hours since 2011-10-23 0:00&quot;;
</em><br />
<em class="quotelev1">&gt;     old_time:bounds=&quot;old_time_bounds&quot;;
</em><br />
<em class="quotelev1">&gt;   double old_time_bounds(old_time,two);
</em><br />
<em class="quotelev1">&gt;   double time(time);
</em><br />
<em class="quotelev1">&gt;     time:units=&quot;hours since 2011-10-23 0:00&quot;;
</em><br />
<em class="quotelev1">&gt;     time:bounds=&quot;time_bounds&quot;;
</em><br />
<em class="quotelev1">&gt;   double time_bounds(time,two);
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt;   old_time=0.5, 1.5, 2.5, ...;
</em><br />
<em class="quotelev1">&gt;   old_time_bounds=-3.5,4.5, -2.5,5,5, -1.5,6.5, ...;
</em><br />
<em class="quotelev1">&gt;   time=12, 36, 60, ...
</em><br />
<em class="quotelev1">&gt;   time_bounds=0,24, 24,48, 48,72, ...;
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; This is not currently legal because old_time is not a dimension of
</em><br />
<em class="quotelev1">&gt; air_quality,
</em><br />
<em class="quotelev1">&gt; but it seems a reasonable extension to me.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; For climatological time, we have a similar issue of multiple time
</em><br />
<em class="quotelev1">&gt; processing,
</em><br />
<em class="quotelev1">&gt; and in that case we do not find it necessary to keep old time
</em><br />
<em class="quotelev1">&gt; coordinates.
</em><br />
<em class="quotelev1">&gt; Instead, we use a special interpretation for the time bounds (CF sect
</em><br />
<em class="quotelev1">&gt; 7.4).
</em><br />
<em class="quotelev1">&gt; However, this doesn't seem to be easy to adapt for the general case,
</em><br />
<em class="quotelev1">&gt; because
</em><br />
<em class="quotelev1">&gt; of the overlapping periods. Climatological time doesn't allow that.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Another possibility would be to define new kinds of standardised
</em><br />
<em class="quotelev1">&gt; metadata,
</em><br />
<em class="quotelev1">&gt; following Philip's categories, to describe the superseded time
</em><br />
<em class="quotelev1">&gt; coordinate e.g.
</em><br />
<em class="quotelev1">&gt; cell_methods=&quot;time: mean (period: 8 hours offset: -15.5 hours) time:
</em><br />
<em class="quotelev1">&gt; maximum
</em><br />
<em class="quotelev1">&gt; (interval: 1 hour)&quot;. The second entry is standard, and records that
</em><br />
<em class="quotelev1">&gt; hourly
</em><br />
<em class="quotelev1">&gt; values were input to the calculation of the daily maximum. The first
</em><br />
<em class="quotelev1">&gt; entry
</em><br />
<em class="quotelev1">&gt; records that those values were themselves means calculated over periods
</em><br />
<em class="quotelev1">&gt; of 8
</em><br />
<em class="quotelev1">&gt; hours, and the first such period began 15.5 hours before the first time
</em><br />
<em class="quotelev1">&gt; coordinate (12 - 15.5 = -3.5, the lower bound of the first old_time
</em><br />
<em class="quotelev1">&gt; cell).
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; I am sure there are plenty of other possibilities, but I wonder what
</em><br />
<em class="quotelev1">&gt; you think
</em><br />
<em class="quotelev1">&gt; of either of these as a start?
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Best wishes
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Jonathan
</em><br />
<em class="quotelev1">&gt; _______________________________________________
</em><br />
<em class="quotelev1">&gt; CF-metadata mailing list
</em><br />
<em class="quotelev1">&gt; CF-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<span id="received"><dfn>Received on</dfn> Mon Oct 24 2011 - 14:40:54 BST</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start3868">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./3869.html" title="Next message in the list">Jonathan Gregory: "[CF-metadata] daily maximum of running 8-hour means"</a></li>
<li><dfn>Previous message</dfn>: <a href="./3867.html" title="Previous message in the list">Jonathan Gregory: "[CF-metadata] daily maximum of running 8-hour means"</a></li>
<li><dfn>In reply to</dfn>: <a href="./3867.html" title="Message to which this message replies">Jonathan Gregory: "[CF-metadata] daily maximum of running 8-hour means"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="./3869.html" title="Next message in this discussion thread">Jonathan Gregory: "[CF-metadata] daily maximum of running 8-hour means"</a></li>
<li><a name="replies" id="replies"></a>
<dfn>Reply</dfn>: <a href="./3869.html" title="Message sent in reply to this message">Jonathan Gregory: "[CF-metadata] daily maximum of running 8-hour means"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg3868" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg3868" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg3868" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg3868" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:57:52 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./3867.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./3869.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
