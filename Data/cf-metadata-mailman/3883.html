<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] FW:  daily maximum of running 8-hour means from Hedley, Mark on 2011-10-28 (cf-metadata-mailman)</title>
<meta name="Author" content="Hedley, Mark (mark.hedley)" />
<meta name="Subject" content="[CF-metadata] FW:  daily maximum of running 8-hour means" />
<meta name="Date" content="2011-10-28" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./3882.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./3884.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] FW:  daily maximum of running 8-hour means</h1>
<!-- received="Fri Oct 28 08:10:21 2011" -->
<!-- isoreceived="20111028071021" -->
<!-- sent="Fri, 28 Oct 2011 15:10:21 +0100" -->
<!-- isosent="20111028141021" -->
<!-- name="Hedley, Mark" -->
<!-- email="mark.hedley" -->
<!-- subject="[CF-metadata] FW:  daily maximum of running 8-hour means" -->
<!-- id="8AC4893FB411FA4AA8CFECD9C8913B660B09519A_at_EXXMAIL01.desktop.frd.metoffice.com" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="20111024002947.GA10579_at_met.reading.ac.uk" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start3883" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./3884.html" accesskey="d" title="Jonathan Gregory: &quot;[CF-metadata] FW:  daily maximum of running 8-hour means&quot;">Next message</a> ]
[ <a href="./3882.html" title="Schultz, Martin: &quot;[CF-metadata] daily maximum of running 8-hour means&quot;">Previous message</a> ]
[ <a href="./3867.html" title="Jonathan Gregory: &quot;[CF-metadata] daily maximum of running 8-hour means&quot;">In reply to</a> ]
<!-- unextthread="start" -->
[ <a href="./3884.html" accesskey="t" title="Jonathan Gregory: &quot;[CF-metadata] FW:  daily maximum of running 8-hour means&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg3883" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg3883" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg3883" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg3883" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Hedley, Mark &lt;<a href="mailto:mark.hedley?Subject=Re%3A%20%5BCF-metadata%5D%20FW%3A%20%20daily%20maximum%20of%20running%208-hour%20means">mark.hedley</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Fri, 28 Oct 2011 15:10:21 +0100</span><br />
</address>
<br />
Hello
<br />
<br />I think the approach:
<br />
<br /><em class="quotelev1">&gt; to extend CF to allow you to preserve the original time axis to which the first operation applied, even though it is no longer provides the time coordinates once the second operation has been carried out.
</em><br />
<br />is of particular interest. I do not agree that I 'prefer the second alternative'.
<br />
<br />This construct, optionally storing the original coordinate values after an operation is easily machine interpretable, with all the reference information required.  It offers a way of consistently approaching the definition of a process which is widely applicable in a very interesting manner.  
<br />
<br />It offers options to the data creator, who may very well decide that such metadata is surplus to requirements and is easily summarised using the current cell_method syntax.  However where this syntax does not capture the essence of the process to the creator's requirements, a trade off of a larger metadata payload for enhanced clarity of phenomenon definition may well be deemed worthwhile.
<br />
<br />By containing the referencing within the cell_method there is one point of contact, so the data consumer can be confident they have interpreted the essence of the data creator's definition. 
<br />
<br />I would like to develop some use cases which would benefit from this approach and put them forward for discussion before the extended syntax is proposed as a trac ticket.
<br />
<br />As soon as I have these I will post them to the mailing list.
<br />
<br />all the best
<br />
mark
<br />
<br /><br />-----Original Message-----
<br />
From: cf-metadata-bounces at cgd.ucar.edu on behalf of Jonathan Gregory
<br />
Sent: Fri 28/10/2011 03:06
<br />
To: Schultz, Martin
<br />
Cc: cf-metadata at cgd.ucar.edu
<br />
Subject: Re: [CF-metadata] daily maximum of running 8-hour means
<br />
&nbsp;
<br />
Dear Martin
<br />
<br />I think we all prefer the second alternative then i.e. the summary of what
<br />
was done, rather than explicit coordinates.
<br />
<br /><em class="quotelev1">&gt; Upon calculating this &quot;index&quot;, one will generally assign the daily value to one single time &quot;coordinate&quot; value representing the respective day. Now, this would mean that the &quot;offset&quot; value will likely be undefined if I understood this correctly.
</em><br />
<br />I suppose so. I think the &quot;offset&quot; and &quot;period&quot; would both be optional anyway.
<br />
It sounds like you really only need to record the &quot;period&quot; i.e. 8 hours, and
<br />
I suggested the &quot;offset&quot; too for completeness, following Philip's email. It
<br />
would be sufficient to put
<br />
&quot;time: mean (period: 8 hours) time: maximum (interval: 1 hour)&quot;.
<br />
to indicate a (daily) maximum made from 8-hour running means if you aren't
<br />
concerned exactly how the 8-hourly periods correspond to the days. In that
<br />
case we can simplify the proposal by omitting &quot;offset&quot; until someone needs it.
<br />
<br />If no-one has a better idea, shall we propose this extended syntax in a trac
<br />
ticket?
<br />
<br />Cheers
<br />
<br />Jonathan
<br />
<br />_______________________________________________
<br />
-----Original Message-----
<br />
From: cf-metadata-bounces at cgd.ucar.edu on behalf of Schultz, Martin
<br />
Sent: Thu 27/10/2011 17:47
<br />
To: cf-metadata at cgd.ucar.edu
<br />
Subject: Re: [CF-metadata] daily maximum of running 8-hour means
<br />
&nbsp;
<br />
Dear Jonathan, Philip,
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I tend to lean towards the second alternative. Partly, because I believe it is easier to understand, and partly, because I think that in most cases the extra information which cell_bounds entered the &quot;daily max. 8-hour running mean&quot; is not preserved (at least I never saw it in any data set). Upon calculating this &quot;index&quot;, one will generally assign the daily value to one single time &quot;coordinate&quot; value representing the respective day. Now, this would mean that the &quot;offset&quot; value will likely be undefined if I understood this correctly.
<br />
<br />Best regards,
<br />
<br />Martin
<br />
<br />-----Original Message-----
<br />
From: cf-metadata-bounces at cgd.ucar.edu on behalf of Jonathan Gregory
<br />
Sent: Mon 24/10/2011 01:29
<br />
To: cf-metadata at cgd.ucar.edu
<br />
Subject: Re: [CF-metadata] daily maximum of running 8-hour means
<br />
&nbsp;
<br />
Dear Martin and Philip
<br />
<br />Thank you for your use-cases showing the need for standardised metadata for
<br />
daily maxima of 8-hour running means. I expect that similar cases will arise
<br />
in other areas and actually it is quite surprising they haven't already, I
<br />
think.
<br />
<br />What you want to describe involves two cell_methods processing operations: (1)
<br />
Calculate an 8-hour running mean for consecutive hours, (2) Calculate a
<br />
maximum of these within days. We could record this explicitly and completely
<br />
if we had different time coordinates for the two operations. For the first
<br />
operation, the cell_method is a mean, and we have time coordinates at hourly
<br />
intervals, each with bounds specifying an 8-hour period. The cell bounds
<br />
overlap, but that's no problem. E.g. they could be [0:00, 8:00], [1:00, 9:00],
<br />
[2:00, 10:00], ... (just the time, omitting the date). For the second
<br />
operation, the cell_method is a maximum, the bounds indicate periods of days,
<br />
spaced at daily intervals i.e. not overlapping.
<br />
<br />One possibility would be to extend CF to allow you to preserve the original
<br />
time axis to which the first operation applied, even though it is no longer
<br />
provides the time coordinates once the second operation has been carried
<br />
out. For instance, we could allow:
<br />
<br />&nbsp;&nbsp;float air_quality(time);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;air_quality:cell_methods=&quot;old_time: mean time: maximum&quot;;
<br />
&nbsp;&nbsp;double old_time;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;old_time:units=&quot;hours since 2011-10-23 0:00&quot;;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;old_time:bounds=&quot;old_time_bounds&quot;;
<br />
&nbsp;&nbsp;double old_time_bounds(old_time,two);
<br />
&nbsp;&nbsp;double time(time);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;time:units=&quot;hours since 2011-10-23 0:00&quot;;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;time:bounds=&quot;time_bounds&quot;;
<br />
&nbsp;&nbsp;double time_bounds(time,two);
<br />
<br />&nbsp;&nbsp;old_time=0.5, 1.5, 2.5, ...;
<br />
&nbsp;&nbsp;old_time_bounds=-3.5,4.5, -2.5,5,5, -1.5,6.5, ...;
<br />
&nbsp;&nbsp;time=12, 36, 60, ...
<br />
&nbsp;&nbsp;time_bounds=0,24, 24,48, 48,72, ...;
<br />
<br />This is not currently legal because old_time is not a dimension of air_quality,
<br />
but it seems a reasonable extension to me.
<br />
<br />For climatological time, we have a similar issue of multiple time processing,
<br />
and in that case we do not find it necessary to keep old time coordinates.
<br />
Instead, we use a special interpretation for the time bounds (CF sect 7.4).
<br />
However, this doesn't seem to be easy to adapt for the general case, because
<br />
of the overlapping periods. Climatological time doesn't allow that.
<br />
<br />Another possibility would be to define new kinds of standardised metadata,
<br />
following Philip's categories, to describe the superseded time coordinate e.g.
<br />
cell_methods=&quot;time: mean (period: 8 hours offset: -15.5 hours) time: maximum
<br />
(interval: 1 hour)&quot;. The second entry is standard, and records that hourly
<br />
values were input to the calculation of the daily maximum. The first entry
<br />
records that those values were themselves means calculated over periods of 8
<br />
hours, and the first such period began 15.5 hours before the first time
<br />
coordinate (12 - 15.5 = -3.5, the lower bound of the first old_time cell).
<br />
<br />I am sure there are plenty of other possibilities, but I wonder what you think
<br />
of either of these as a start?
<br />
<br />Best wishes
<br />
<br />Jonathan
<br />
_______________________________________________
<br />
CF-metadata mailing list
<br />
CF-metadata at cgd.ucar.edu
<br />
<a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
<br />
<span id="received"><dfn>Received on</dfn> Fri Oct 28 2011 - 08:10:21 BST</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start3883">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./3884.html" title="Next message in the list">Jonathan Gregory: "[CF-metadata] FW:  daily maximum of running 8-hour means"</a></li>
<li><dfn>Previous message</dfn>: <a href="./3882.html" title="Previous message in the list">Schultz, Martin: "[CF-metadata] daily maximum of running 8-hour means"</a></li>
<li><dfn>In reply to</dfn>: <a href="./3867.html" title="Message to which this message replies">Jonathan Gregory: "[CF-metadata] daily maximum of running 8-hour means"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="./3884.html" title="Next message in this discussion thread">Jonathan Gregory: "[CF-metadata] FW:  daily maximum of running 8-hour means"</a></li>
<li><a name="replies" id="replies"></a>
<dfn>Reply</dfn>: <a href="./3884.html" title="Message sent in reply to this message">Jonathan Gregory: "[CF-metadata] FW:  daily maximum of running 8-hour means"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg3883" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg3883" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg3883" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg3883" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:57:53 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./3882.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./3884.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
