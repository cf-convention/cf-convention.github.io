<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] Ocean CTD data following CF Conventions v1.6 from Lowry, Roy K. on 2012-04-03 (cf-metadata-mailman)</title>
<meta name="Author" content="Lowry, Roy K. (rkl)" />
<meta name="Subject" content="[CF-metadata] Ocean CTD data following CF Conventions v1.6" />
<meta name="Date" content="2012-04-03" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./4335.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./4337.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] Ocean CTD data following CF Conventions v1.6</h1>
<!-- received="Mon Apr  2 23:46:22 2012" -->
<!-- isoreceived="20120402224622" -->
<!-- sent="Tue, 3 Apr 2012 06:46:22 +0100" -->
<!-- isosent="20120403054622" -->
<!-- name="Lowry, Roy K." -->
<!-- email="rkl" -->
<!-- subject="[CF-metadata] Ocean CTD data following CF Conventions v1.6" -->
<!-- id="40829B0E077C1145A6DE44D39B3830A92119404FFA_at_nerckwmb1.ad.nerc.ac.uk" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="E0D57B53BF474899B615C9B7E75B3AAA_at_awalsh1" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start4336" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./4337.html" accesskey="d" title="Lowry, Roy K.: &quot;[CF-metadata] Ocean CTD data following CF Conventions v1.6&quot;">Next message</a> ]
[ <a href="./4335.html" title="andrew walsh: &quot;[CF-metadata] Ocean CTD data following CF Conventions v1.6&quot;">Previous message</a> ]
[ <a href="./4335.html" title="andrew walsh: &quot;[CF-metadata] Ocean CTD data following CF Conventions v1.6&quot;">In reply to</a> ]
<!-- unextthread="start" -->
[ <a href="./4337.html" accesskey="t" title="Lowry, Roy K.: &quot;[CF-metadata] Ocean CTD data following CF Conventions v1.6&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg4336" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg4336" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg4336" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg4336" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Lowry, Roy K. &lt;<a href="mailto:rkl?Subject=Re%3A%20%5BCF-metadata%5D%20Ocean%20CTD%20data%20following%20CF%20Conventions%20v1.6">rkl</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Tue, 3 Apr 2012 06:46:22 +0100</span><br />
</address>
<br />
Hi again,
<br />
<br />The reason that I prefer depth to pressure as the dimension for CTD is that the information required for pressure to depth conversion is virtually always present in the CTD data.  However, in other oceanographic profiles - say nutrient bottle data - it is quite possible to have depth present without temperature and salinity, making the conversion to pressure impossible.  Calculating depth from pressure at the time of standardised formatting of CTD data is as you say is trivial.  So, why not make the CTD data more compatible with bottle data for very little cost?
<br />
<br />SeaDataNet already mandate inclusion of depth in their other data formats for CTD data delivery and so I can't see them switching to pressure for the dimension in NetCDF.
<br />
<br />Cheers, Roy.
<br />
<br />________________________________________
<br />
From: andrew walsh [awalsh at metoc.gov.au]
<br />
Sent: 03 April 2012 06:15
<br />
To: Lowry, Roy K.
<br />
Cc: Jim Biard; Upendra Dadi; cf-metadata at cgd.ucar.edu; Luke Callcut; greg at metoc.gov.au; sdn2-tech at seadatanet.org
<br />
Subject: Re: [CF-metadata] Ocean CTD data following CF Conventions v1.6
<br />
<br />Hi Roy/All,
<br />
<br />Agree totally it would be good to get this CTD netCDF done in an interoperable
<br />
way.
<br />
<br />Regarding having pressure vs. depth. We liked to use pressure because:
<br />
<br />1) It is the thing that is measured, let us store just that and calculate depth
<br />
if needed.
<br />
<br />2) Depth can later be easily be calculated on the fly
<br />
using the 'Pressure to Depth' algorithm in  &quot;UNESCO (1983) Techinical
<br />
Papers in Marine Science 44, Algorithms for Computation of fundamental
<br />
properties
<br />
of Seawater. One can use the python seawater library (see
<br />
<a href="http://packages.python.org/seawater/">http://packages.python.org/seawater/</a> )
<br />
and seawater.csiro.depth(p, lat) to get depth from pressure and
<br />
seawater.csiro.pres(depth, lat)
<br />
to get pressure from depth.
<br />
<br />3) I noted that the ARGO project (10000's CTD like profiles) and others like
<br />
CSIRO Oceanography in Aust. make data available with just pressure.
<br />
<br />4) It makes our processing and QC a whole lot simpler. We don't
<br />
have to worry about calculating and managing the extra 'depth' variable.
<br />
<br />Is  there any problem with having the &quot;pressure&quot; as a co-ordinate which isn't
<br />
really a &quot;dimensional&quot;
<br />
quantity like depth (z) in the 4-D sense i.e x,y,z,t ?
<br />
<br />However I note that pressure (decibar) is allowed as a vertical axis e.g see
<br />
section
<br />
4.3. Vertical (Height or Depth) Coordinate of CF v1.6 conventions document which
<br />
says:
<br />
<br />&quot;A vertical coordinate will be identifiable by:
<br />
<br />. units of pressure; or
<br />
. the presence of the positive attribute with a value of up or down (case
<br />
insensitive).
<br />
&quot;
<br />
<br />AND
<br />
<br />section 4.3.1. &quot;Dimensional Vertical Coordinate&quot; which says:
<br />
<br />&quot;The units attribute for dimensional coordinates will be a string formatted as
<br />
per the udunits.dat3 file. The
<br />
acceptable units for vertical (depth or height) coordinate variables are:
<br />
<br />. units of pressure as listed in the file udunits.dat. For vertical axes the
<br />
most commonly used of these include
<br />
include bar, millibar, decibar, atmosphere (atm), pascal (Pa), and hPa.
<br />
...
<br />
...&quot;?
<br />
<br /><br />Regards,
<br />
<br />Andrew
<br />
<br />----- Original Message -----
<br />
From: Lowry, Roy K.
<br />
To: andrew walsh
<br />
Cc: Jim Biard ; Upendra Dadi ; cf-metadata at cgd.ucar.edu ; Luke Callcut ;
<br />
greg at metoc.gov.au ; sdn2-tech at seadatanet.org
<br />
Sent: Tuesday, April 03, 2012 2:16 PM
<br />
Subject: RE: [CF-metadata] Ocean CTD data following CF Conventions v1.6
<br />
<br /><br />Hi Andrew,
<br />
<br />SeaDataNet will very soon be considering how it is going to encode data,
<br />
including single CTD casts, in CF-compliant NetCDF and so I think the time is
<br />
ripe for agreeing how the significant numbers of us who indulge in this practice
<br />
for whatever reason do it.  That way we'll end up with interoperable data.
<br />
<br />I think there are a number of people on this list who have already encoded
<br />
single CTDs into NetCDF and so it would be useful to start by asking for
<br />
descriptions (like Andrew's examples) of how this has been done and what tools
<br />
are dependent upon that encoding.
<br />
<br />The z co-ordinate parameter (pressure/depth) is also an issue worth resolving.
<br />
Whilst interconversions are relatively straightforward, agreement would make
<br />
life much easier.  My preference leans dowards having depth as the dimension
<br />
with pressure as an optional variable. That way we interoperate with other kinds
<br />
of oceanographic profile data such as bottle data.
<br />
<br />If we can get that far, we can then look at how to aggregate multiple CTDs into
<br />
a file according to the CF point data conventions.
<br />
<br />Cheers, Roy.
<br />
<br /><br />From: andrew walsh [awalsh at metoc.gov.au]
<br />
Sent: 03 April 2012 04:39
<br />
To: Lowry, Roy K.
<br />
Cc: Jim Biard; Upendra Dadi; cf-metadata at cgd.ucar.edu; Luke Callcut;
<br />
greg at metoc.gov.au
<br />
Subject: Re: [CF-metadata] Ocean CTD data following CF Conventions v1.6
<br />
<br /><br />Hello Roy, Upendra, Jim and CF list,
<br />
<br />Thanks for all your feedbacks.
<br />
My proposal relates to single CTD profile data (a vertical profile of pressure,
<br />
Temp. Salinity)
<br />
not a trajectory in x,y,z,t and I have put :featureType = &quot;profile&quot; as
<br />
recommended in the global
<br />
attributes section. As Roy has mentioned to Jim CTD data is usually processed
<br />
and QC'ed
<br />
as a single profile per netCDF file so that's why I am doing it this way.
<br />
<br />Aggregations using multiple CTD profiles per netCDF file
<br />
may be constructed later at say national/international data centres and these
<br />
aggregrations
<br />
would follow the CF conventions v1.6, Chapter 9 - Discrete Sampling geometries
<br />
and also the new netCDF templates provided by NODC, thanks NODC -:)
<br />
<br />Roy,
<br />
<br />The recent NODC netCDF templates don't have an aggregation example for CTD
<br />
however the &quot;Profile/World Ocean Database Observed Level&quot; example comes close
<br />
(see <a href="http://www.nodc.noaa.gov/data/formats/netcdf/">http://www.nodc.noaa.gov/data/formats/netcdf/</a>) and click on
<br />
Profile/World Ocean Database Observed Level link. This example appears
<br />
to be for ocean station/bottle samples with vertical dimension of depth (z) (m)
<br />
rather
<br />
than case of CTD which would use pressure (dbar) as the vertical (z) dimension.
<br />
It would be useful I think to have a NODC netCDF template for an aggregation of
<br />
CTD casts.
<br />
<br />Upendra,
<br />
<br />Based on your responses and what I have seen at NODC and other places
<br />
&nbsp;it seems there are 2 methods to do this:
<br />
<br />1) You can have dimensions for lat, long time i.e an array
<br />
with a single value. That is:
<br />
<br />dimensions:
<br />
TIME=1
<br />
PRESSURE=729
<br />
LATITUDE=1
<br />
LONGITUDE=1
<br />
<br />variables:
<br />
<br />double TIME(TIME) ;
<br />
+ std. attrs.
<br />
double LATITUDE(LATITUDE) ;
<br />
+ std. attrs.
<br />
double LONGITUDE(LONGITUDE) ;
<br />
+ std. attrs.
<br />
double PRESSURE(PRESSURE) ;
<br />
+ std. attrs.
<br />
<br />double TEMPERATURE(PRESSURE) ;
<br />
+ std. attrs.
<br />
TEMPERATURE:coordinates=&quot;TIME LATITUDE LONGITUDE PRESSURE&quot;
<br />
<br />double SALINITY(PRESSURE) ;
<br />
+ std. attrs.
<br />
SALINITY:coordinates=&quot;TIME LATITUDE LONGITUDE PRESSURE&quot;
<br />
<br />(2) Other way is to have Lat, long and time are single valued scalars:
<br />
<br />dimensions:
<br />
<br />PRESSURE=729
<br />
<br />variables:
<br />
<br />double LATITUDE ;
<br />
+ std attrs
<br />
<br />double LONGITUDE ;
<br />
+ std attrs
<br />
<br />double TIME ;
<br />
+std attrs
<br />
<br />double PRESSURE(PRESSURE) ;
<br />
+ std. attrs.
<br />
<br />double TEMPERATURE(PRESSURE) ;
<br />
+ std. attrs.
<br />
TEMPERATURE:coordinates=&quot;TIME LATITUDE LONGITUDE PRESSURE&quot;
<br />
<br />double SALINITY(PRESSURE) ;
<br />
+ std. attrs.
<br />
SALINITY:coordinates=&quot;TIME LATITUDE LONGITUDE PRESSURE&quot;
<br />
<br />I can see Method 2 above is much simpler and I would prefer to use
<br />
this.
<br />
<br />However I have another small concern about all of this. Given there is more than
<br />
1 way to treat dimensions does the netCDF plotting and visualising sofware out
<br />
there understand both approaches. That is can we expect something like
<br />
ncBrowse, IDV or ODV? give me a plot of say salinity vs. pressure
<br />
and work OK with BOTH approaches to coding the netCDF?
<br />
<br />Thanks and Regards All,
<br />
<br />Andrew Walsh
<br />
----- Original Message -----
<br />
From: Lowry, Roy K.
<br />
To: Upendra Dadi ; andrew walsh
<br />
Cc: Luke Callcut ; cf-metadata at cgd.ucar.edu ; sdn2-tech at seadatanet.org
<br />
Sent: Tuesday, April 03, 2012 9:31 AM
<br />
Subject: RE: [CF-metadata] Ocean CTD data following CF Conventions v1.6
<br />
<br /><br />Hi Upendra,
<br />
<br />I like the idea of a station dimension.  It goes a long way to resolving the
<br />
issue raised in my response to Jim which was based on the tunnel vision of
<br />
having pressure/depth as a dimension.  I have yet to look at the recently
<br />
published NODC NetCDF templates.  Is this CTD encoding included in them?  If so,
<br />
I'll bump up looking at them on my 'todo' list. I'd also recommend that Andrew
<br />
and my colleagues in SeaDataNet take a look.
<br />
<br />Cheers, Roy.
<br />
<br />From: cf-metadata-bounces at cgd.ucar.edu [cf-metadata-bounces at cgd.ucar.edu] On
<br />
Behalf Of Upendra Dadi [upendra.dadi at noaa.gov]
<br />
Sent: 02 April 2012 17:21
<br />
To: andrew walsh
<br />
Cc: Luke Callcut; cf-metadata at cgd.ucar.edu
<br />
Subject: Re: [CF-metadata] Ocean CTD data following CF Conventions v1.6
<br />
<br /><br />Hi Andrew,
<br />
&nbsp;&nbsp;Either way it should be okay as far as CF compliance is concerned. But the
<br />
dimensions - latitude, longitude and time are not really required.  If it is
<br />
required to indicate that there is only one station(profile) in the file, there
<br />
could be a dimension for number of stations instead, with a value of 1. Also,
<br />
using a station dimension is the way to go if storing a collection of profiles
<br />
in a single file. Here at NODC, we took the approach that we would use the same
<br />
consistent representation whether there is a single instance or a collection in
<br />
a file.
<br />
<br />Upendra
<br />
<br />On Mon, Apr 2, 2012 at 2:51 AM, andrew walsh &lt;awalsh at metoc.gov.au&gt; wrote:
<br />
<br />Hi CF lis
<br />
We are working on coding up some 1000's netCDF files off CTD
<br />
instruments and want to make usre we are following the
<br />
latest netCDF conventions (v1.6) OK. As background the CTD records
<br />
a profile pressure, temperature and salinity.
<br />
<br />Here is a summarised CDL version (not all attributes+variables+qc flags there,
<br />
just majors for now)
<br />
of what we propose:
<br />
<br />dimensions:
<br />
TIME=1
<br />
PRESSURE=729
<br />
LATITUDE=1
<br />
LONGITUDE=1
<br />
<br />variables:
<br />
double TIME(TIME) ;
<br />
&nbsp;TIME:standard_name = &quot;time&quot; ;
<br />
&nbsp;TIME:units = &quot;days since 1950-01-01 00:00:00Z&quot; ;
<br />
&nbsp;TIME:axis = &quot;T&quot; ;
<br />
&nbsp;TIME:valid_min = 0. ;
<br />
&nbsp;TIME:valid_max = 999999. ;
<br />
<br />double LATITUDE(LATITUDE) ;
<br />
&nbsp;LATITUDE:standard_name = &quot;latitude&quot; ;
<br />
&nbsp;LATITUDE:units = &quot;degrees_north&quot; ;
<br />
&nbsp;LATITUDE:axis = &quot;Y&quot; ;
<br />
&nbsp;LATITUDE:valid_min = -90. ;
<br />
&nbsp;LATITUDE:valid_max = 90. ;
<br />
<br />&nbsp;double LONGITUDE(LONGITUDE) ;
<br />
&nbsp;LONGITUDE:standard_name = &quot;longitude&quot; ;
<br />
&nbsp;LONGITUDE:units = &quot;degrees_east&quot; ;
<br />
&nbsp;LONGITUDE:axis = &quot;X&quot; ;
<br />
&nbsp;LONGITUDE:valid_min = -180. ;
<br />
&nbsp;LONGITUDE:valid_max = 180. ;
<br />
<br />&nbsp;double PRESSURE(PRESSURE) ;
<br />
&nbsp;PRESSURE:standard_name = &quot;sea_water_pressure&quot; ;
<br />
&nbsp;PRESSURE:units = &quot;decibars&quot; ;
<br />
&nbsp;PRESSURE:axis = &quot;Z&quot; ;
<br />
&nbsp;PRESSURE:valid_min = 0. ;
<br />
PRESSURE:valid_max = 12000. ;
<br />
&nbsp;PRESSURE:positive = &quot;down&quot; ;
<br />
<br />double TEMPERATURE(PRESSURE) ;
<br />
&nbsp;TEMPERATURE:standard_name = &quot;sea_water_temperature&quot; ;
<br />
&nbsp;TEMPERATURE:units = &quot;degrees_C&quot; ;
<br />
&nbsp;TEMPERATURE:_FillValue = -99.99 ;
<br />
&nbsp;TEMPERATURE:valid_min = -2. ;
<br />
&nbsp;TEMPERATURE:valid_max = 40. ;
<br />
TEMPERATURE:coordinates=&quot;TIME LATITUDE LONGITUDE PRESSURE&quot;
<br />
<br />&nbsp;double SALINITY(PRESSURE) ;
<br />
&nbsp;SALINITY:standard_name = &quot;sea_water_salinity&quot; ;
<br />
&nbsp;SALINITY:units = &quot;psu&quot; ;
<br />
&nbsp;SALINITY:_FillValue = -99.99 ;
<br />
&nbsp;SALINITY:valid_min = 0. ;
<br />
&nbsp;SALINITY:valid_max = 40. ;
<br />
SALINITY:coordinates=&quot;TIME LATITUDE LONGITUDE PRESSURE&quot;
<br />
<br />// global attributes:
<br />
&nbsp;:conventions = &quot;CF-1.6&quot; ;
<br />
&nbsp;:featureType = &quot;profile&quot;
<br />
&nbsp;:cdm_data_type = &quot;profile&quot;
<br />
+ several other attributes later for ISO19115 metadata generation
<br />
<br />I am not sure  if I should have TEMPERATURE and SALINITY arrays with 4
<br />
dimensions
<br />
like TEMPERATURE(TIME,LATITUDE,LONGITUDE,PRESSURE) or just 1 dimension
<br />
like I have above i.e. TEMPERATURE(PRESSURE). ?
<br />
<br />Any feedback on the above is greatly appreciated.
<br />
<br />Andrew Walsh-- 
<br />
This message (and any attachments) is for the recipient only. NERC
<br />
is subject to the Freedom of Information Act 2000 and the contents
<br />
of this email and any reply you make may be disclosed by NERC unless
<br />
it is exempt from release under the Act. Any material supplied to
<br />
NERC may be stored in an electronic records management system.
<br />
<span id="received"><dfn>Received on</dfn> Mon Apr 02 2012 - 23:46:22 BST</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start4336">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./4337.html" title="Next message in the list">Lowry, Roy K.: "[CF-metadata] Ocean CTD data following CF Conventions v1.6"</a></li>
<li><dfn>Previous message</dfn>: <a href="./4335.html" title="Previous message in the list">andrew walsh: "[CF-metadata] Ocean CTD data following CF Conventions v1.6"</a></li>
<li><dfn>In reply to</dfn>: <a href="./4335.html" title="Message to which this message replies">andrew walsh: "[CF-metadata] Ocean CTD data following CF Conventions v1.6"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="./4337.html" title="Next message in this discussion thread">Lowry, Roy K.: "[CF-metadata] Ocean CTD data following CF Conventions v1.6"</a></li>
<li><a name="replies" id="replies"></a>
<dfn>Reply</dfn>: <a href="./4337.html" title="Message sent in reply to this message">Lowry, Roy K.: "[CF-metadata] Ocean CTD data following CF Conventions v1.6"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg4336" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg4336" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg4336" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg4336" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:58:01 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./4335.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./4337.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
