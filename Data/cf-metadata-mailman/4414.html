<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] code that does semantic checking of CF headers from Jon Blower on 2012-04-20 (cf-metadata-mailman)</title>
<meta name="Author" content="Jon Blower (j.d.blower)" />
<meta name="Subject" content="[CF-metadata] code that does semantic checking of CF headers" />
<meta name="Date" content="2012-04-20" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./4413.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./4415.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] code that does semantic checking of CF headers</h1>
<!-- received="Fri Apr 20 11:36:22 2012" -->
<!-- isoreceived="20120420103622" -->
<!-- sent="Fri, 20 Apr 2012 17:36:22 +0000" -->
<!-- isosent="20120420173622" -->
<!-- name="Jon Blower" -->
<!-- email="j.d.blower" -->
<!-- subject="[CF-metadata] code that does semantic checking of CF headers" -->
<!-- id="D38DCA8842FECD4585C8DE16D602ABF42DDD3E80_at_vime-mbx1.rdg.ac.uk" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="web-39890440_at_mail.ucar.edu" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start4414" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./4415.html" accesskey="d" title="Jon Blower: &quot;[CF-metadata] identification of vector components&quot;">Next message</a> ]
[ <a href="./4413.html" title="Hedley, Mark: &quot;[CF-metadata] identification of vector components&quot;">Previous message</a> ]
[ <a href="./4406.html" title="Seth McGinnis: &quot;[CF-metadata] code that does semantic checking of CF headers&quot;">In reply to</a> ]
<!-- unextthread="start" -->
[ <a href="./4403.html" accesskey="t" title="Dave Allured: &quot;[CF-metadata] code that does semantic checking of CF headers&quot;">Next in thread</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg4414" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg4414" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg4414" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg4414" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Jon Blower &lt;<a href="mailto:j.d.blower?Subject=Re%3A%20%5BCF-metadata%5D%20code%20that%20does%20semantic%20checking%20of%20CF%20headers">j.d.blower</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Fri, 20 Apr 2012 17:36:22 +0000</span><br />
</address>
<br />
<em class="quotelev1">&gt; Maybe that's an argument for recommending that valid_min/max be used sparingly and only when necessary, and not as generic prophylaxis?  
</em><br />
<br />I agree.  There seem to be only a few cases where they are actually needed (e.g. multiple missing values) so I think it's sensible to advise that they are only used when necessary.  In my experience they are very often wrong and rarely add useful information.
<br />
<br />Jon
<br />
<br />-----Original Message-----
<br />
From: Seth McGinnis [mailto:mcginnis at ucar.edu] 
<br />
Sent: 19 April 2012 22:32
<br />
To: Jon Blower; cf-metadata at cgd.ucar.edu
<br />
Subject: Re: [CF-metadata] code that does semantic checking of CF headers
<br />
<br />Ah, I see.  Interesting.  Maybe that's an argument for recommending that valid_min/max be used sparingly and only when necessary, and not as generic prophylaxis?  
<br />
<br />At least with regard to things like lat/lon coordinates, this example has me thinking that it's more likely that one would encounter problems due to a mis-specification of the valid range than that one would avoid problems because there were known bad values in the file that got properly ignored because they were outside the valid range...
<br />
<br />If anyone knows of a scenario where it's known a priori that certain values of coordinate-type variables are bad, but likely to end up in the file anyway, please share.  I think it would be illuminating for thinking about the real-world practicalities of standards compliance.
<br />
<br />Cheers,
<br />
<br />--Seth
<br />
<br /><br />On Thu, 19 Apr 2012 20:28:38 +0000
<br />
&nbsp;Jon Blower &lt;j.d.blower at reading.ac.uk&gt; wrote:
<br />
<em class="quotelev1">&gt;Hi Seth, all,
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;Sean did mean valid_min/max, not actual_min/max.  His situation was a 
</em><br />
<em class="quotelev1">&gt;curvilinear grid which requires latitude and longitude 2D data 
</em><br />
<em class="quotelev1">&gt;variables.  The valid_min/max should have been -90:90 for the latitude 
</em><br />
<em class="quotelev1">&gt;data variable, but were set incorrectly (not by Sean) to a narrower 
</em><br />
<em class="quotelev1">&gt;range, meaning that Java-NetCDF interpreted all latitude coordinate 
</em><br />
<em class="quotelev1">&gt;values outside this range to be &quot;missing values&quot;.  Hence the georeferencing screwed up completely.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;It would seem fairly easy for an automated checker to check that 
</em><br />
<em class="quotelev1">&gt;valid_min/max (if they exist) seemed reasonable according to the actual 
</em><br />
<em class="quotelev1">&gt;data contents, although a checker could never be sure that they are right.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;HTH,
</em><br />
<em class="quotelev1">&gt;Jon
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;-----Original Message-----
</em><br />
<em class="quotelev1">&gt;From: cf-metadata-bounces at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt;[mailto:cf-metadata-bounces at cgd.ucar.edu] On Behalf Of Seth McGinnis
</em><br />
<em class="quotelev1">&gt;Sent: 19 April 2012 21:05
</em><br />
<em class="quotelev1">&gt;To: cf-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt;Subject: Re: [CF-metadata] code that does semantic checking of CF 
</em><br />
<em class="quotelev1">&gt;headers
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;Hi Sean,
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev2">&gt;&gt;From your description, it sounds like you're confusing valid_min and 
</em><br />
<em class="quotelev2">&gt;&gt;valid_max
</em><br />
<em class="quotelev1">&gt;with actual_min and actual_max.  The former attributes define 
</em><br />
<em class="quotelev1">&gt;theoretical extrema, beyond which data is considered invalid (e.g., 
</em><br />
<em class="quotelev1">&gt;latitude &gt; 90 degrees or precipitation &lt; 0).  The latter are what 
</em><br />
<em class="quotelev1">&gt;modelers would include if they were providing information to assist with visualizations.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;Personally, I dislike actual_min and actual_max, because I don't think 
</em><br />
<em class="quotelev1">&gt;you can trust them to be correct.  But if you want to take advantage of 
</em><br />
<em class="quotelev1">&gt;visualization hints in metadata, those are the attributes to reference.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;Cheers,
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;--Seth
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;====
</em><br />
<em class="quotelev1">&gt;Seth McGinnis
</em><br />
<em class="quotelev1">&gt;NARCCAP Data Manager
</em><br />
<em class="quotelev1">&gt;Associate Scientist
</em><br />
<em class="quotelev1">&gt;IMAGe / NCAR
</em><br />
<em class="quotelev1">&gt;=====
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;On Thu, 19 Apr 2012 16:13:51 +0100
</em><br />
<em class="quotelev1">&gt; &quot;Gaffney, Sean P.&quot; &lt;sgaf at bodc.ac.uk&gt; wrote:
</em><br />
<em class="quotelev2">&gt;&gt;Hi all,
</em><br />
<em class="quotelev2">&gt;&gt;
</em><br />
<em class="quotelev2">&gt;&gt;My name is Sean Gaffney, from the British Oceanographic Data Centre, 
</em><br />
<em class="quotelev2">&gt;&gt;and I'm working on a project dealing with numerical model data that 
</em><br />
<em class="quotelev2">&gt;&gt;are in CF compliant NetCDF, so I thought I'd sign up to the community.
</em><br />
<em class="quotelev2">&gt;&gt; 
</em><br />
<em class="quotelev2">&gt;&gt;The project I am working on aims to develop a web-based delivery 
</em><br />
<em class="quotelev2">&gt;&gt;system for oceanographic numerical model data and has a module which 
</em><br />
<em class="quotelev2">&gt;&gt;allows visualisation of the data. We've been using test CF data to 
</em><br />
<em class="quotelev2">&gt;&gt;fine-tune some of the technical aspects of this visualisation.
</em><br />
<em class="quotelev2">&gt;&gt;
</em><br />
<em class="quotelev2">&gt;&gt;I have a particular issue at the moment which I hope someone out there 
</em><br />
<em class="quotelev2">&gt;&gt;might be able to assist me with.
</em><br />
<em class="quotelev2">&gt;&gt;
</em><br />
<em class="quotelev2">&gt;&gt;My problem started when I found that the test CF data were passing the 
</em><br />
<em class="quotelev2">&gt;&gt;BADC CF compliance checker, but not visualising properly. A check with 
</em><br />
<em class="quotelev2">&gt;&gt;the people who developed the visualisation module led to the discovery 
</em><br />
<em class="quotelev2">&gt;&gt;that, while the CF metadata were formatted correctly, the actual 
</em><br />
<em class="quotelev2">&gt;&gt;values within the metadata were incorrect e.g. the valid_min and 
</em><br />
<em class="quotelev2">&gt;&gt;valid_max attributes for both the latitude and longitude and 
</em><br />
<em class="quotelev2">&gt;&gt;dimensional variables had values which did not reflect the actual 
</em><br />
<em class="quotelev2">&gt;&gt;range of data in the file. The visualisation was setting itself up 
</em><br />
<em class="quotelev2">&gt;&gt;based on the values stored in the attributes and was therefore not displaying any data.
</em><br />
<em class="quotelev2">&gt;&gt;
</em><br />
<em class="quotelev2">&gt;&gt;Has anyone in the CF community come across this sort of issue before 
</em><br />
<em class="quotelev2">&gt;&gt;and if so, what solutions would you recommend? My initial thoughts 
</em><br />
<em class="quotelev2">&gt;&gt;were that I'd have to develop some sort of code which interrogates the 
</em><br />
<em class="quotelev2">&gt;&gt;data file and compares the entries in the CF metadata header against 
</em><br />
<em class="quotelev2">&gt;&gt;the actual data values in the file, but I'd be interested to see what 
</em><br />
<em class="quotelev2">&gt;&gt;people think. Please bear in mind that I won't actually be generating 
</em><br />
<em class="quotelev2">&gt;&gt;model runs myself, but will be receiving data from people that have 
</em><br />
<em class="quotelev2">&gt;&gt;done so and need to know that I'm being given valid data and metadata.
</em><br />
<em class="quotelev2">&gt;&gt;
</em><br />
<em class="quotelev2">&gt;&gt;Sorry for making my first message to the CF community so long.
</em><br />
<em class="quotelev2">&gt;&gt;
</em><br />
<em class="quotelev2">&gt;&gt;Looking forward to your responses
</em><br />
<em class="quotelev2">&gt;&gt;
</em><br />
<em class="quotelev2">&gt;&gt;Yours
</em><br />
<em class="quotelev2">&gt;&gt;
</em><br />
<em class="quotelev2">&gt;&gt;Sean Gaffney
</em><br />
<em class="quotelev2">&gt;&gt;BODC    
</em><br />
<em class="quotelev2">&gt;&gt;
</em><br />
<em class="quotelev2">&gt;&gt;
</em><br />
<em class="quotelev2">&gt;&gt;----------------------------------------------------------------------
</em><br />
<em class="quotelev2">&gt;&gt;-
</em><br />
<em class="quotelev2">&gt;&gt;---------
</em><br />
<em class="quotelev2">&gt;&gt;Sean Gaffney
</em><br />
<em class="quotelev2">&gt;&gt;Data Scientist
</em><br />
<em class="quotelev2">&gt;&gt;British Oceanographic Data Centre
</em><br />
<em class="quotelev2">&gt;&gt;Joseph Proudman Building
</em><br />
<em class="quotelev2">&gt;&gt;6 Brownlow Street
</em><br />
<em class="quotelev2">&gt;&gt;Liverpool
</em><br />
<em class="quotelev2">&gt;&gt;L3 5DA
</em><br />
<em class="quotelev2">&gt;&gt;UK
</em><br />
<em class="quotelev2">&gt;&gt;+44 (0)151 795 4950
</em><br />
<em class="quotelev2">&gt;&gt;
</em><br />
<em class="quotelev2">&gt;&gt;
</em><br />
<em class="quotelev2">&gt;&gt;--
</em><br />
<em class="quotelev2">&gt;&gt;This message (and any attachments) is for the recipient only. NERC is 
</em><br />
<em class="quotelev2">&gt;&gt;subject to the Freedom of Information Act 2000 and the contents of 
</em><br />
<em class="quotelev2">&gt;&gt;this email and any reply you make may be disclosed by NERC unless it 
</em><br />
<em class="quotelev2">&gt;&gt;is exempt from release under the Act. Any material supplied to NERC 
</em><br />
<em class="quotelev2">&gt;&gt;may be stored in an electronic records management system.
</em><br />
<em class="quotelev2">&gt;&gt;_______________________________________________
</em><br />
<em class="quotelev2">&gt;&gt;CF-metadata mailing list
</em><br />
<em class="quotelev2">&gt;&gt;CF-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev2">&gt;&gt;<a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;_______________________________________________
</em><br />
<em class="quotelev1">&gt;CF-metadata mailing list
</em><br />
<em class="quotelev1">&gt;CF-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt;<a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<span id="received"><dfn>Received on</dfn> Fri Apr 20 2012 - 11:36:22 BST</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start4414">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./4415.html" title="Next message in the list">Jon Blower: "[CF-metadata] identification of vector components"</a></li>
<li><dfn>Previous message</dfn>: <a href="./4413.html" title="Previous message in the list">Hedley, Mark: "[CF-metadata] identification of vector components"</a></li>
<li><dfn>In reply to</dfn>: <a href="./4406.html" title="Message to which this message replies">Seth McGinnis: "[CF-metadata] code that does semantic checking of CF headers"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="./4403.html" title="Next message in this discussion thread">Dave Allured: "[CF-metadata] code that does semantic checking of CF headers"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg4414" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg4414" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg4414" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg4414" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:58:02 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./4413.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./4415.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
