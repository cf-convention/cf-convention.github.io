<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] identification of vector components from Bert Jagers on 2012-04-25 (cf-metadata-mailman)</title>
<meta name="Author" content="Bert Jagers (bert.jagers)" />
<meta name="Subject" content="[CF-metadata] identification of vector components" />
<meta name="Date" content="2012-04-25" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./4429.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./4431.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] identification of vector components</h1>
<!-- received="Wed Apr 25 01:12:27 2012" -->
<!-- isoreceived="20120425001227" -->
<!-- sent="Wed, 25 Apr 2012 09:12:27 +0200" -->
<!-- isosent="20120425071227" -->
<!-- name="Bert Jagers" -->
<!-- email="bert.jagers" -->
<!-- subject="[CF-metadata] identification of vector components" -->
<!-- id="4F97A3DB.7000703_at_deltares.nl" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="20120424150145.GB5069_at_met.reading.ac.uk" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start4430" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./4431.html" accesskey="d" title="Burkhardt Rockel: &quot;[CF-metadata] rotated pole projection&quot;">Next message</a> ]
[ <a href="./4429.html" title="John Caron: &quot;[CF-metadata] identification of vector components&quot;">Previous message</a> ]
[ <a href="./4424.html" title="Jonathan Gregory: &quot;[CF-metadata] identification of vector components&quot;">In reply to</a> ]
<!-- unextthread="start" -->
[ <a href="./4438.html" accesskey="t" title="Jonathan Gregory: &quot;[CF-metadata] identification of vector components&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg4430" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg4430" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg4430" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg4430" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Bert Jagers &lt;<a href="mailto:bert.jagers?Subject=Re%3A%20%5BCF-metadata%5D%20identification%20of%20vector%20components">bert.jagers</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Wed, 25 Apr 2012 09:12:27 +0200</span><br />
</address>
<br />
Dear Jonathan,
<br />
<br />Let us consider the following use cases:
<br />
<br />a) A rectangular model in some UTM coordinates (or possibly a local 
<br />
derivative of that) in which x for all practical purposes measures 
<br />
distance east and y distance north. If we take the term &quot;true longitude&quot; 
<br />
in the definition of x_wind loosely, then we would have to write 
<br />
&quot;eastward_wind&quot; instead of &quot;x_wind&quot;. However, if true longitude 
<br />
literally means only a coordinate with standard name &quot;longitude&quot; then we 
<br />
are allowed to use x_wind. This is a part of the description of x_wind 
<br />
that is not clearly documented. (Will dig deeper in use case c)
<br />
<br />b) Our model users can create curvilinear grids in lon-lat coordinates. 
<br />
The numerical model doesn't know if the grid that the users created 
<br />
happens to be a rectangular grid in lon-lat coordinates. In 99% of the 
<br />
cases the grid will be curvilinear and hence it does not align with true 
<br />
longitude and thus we should use x_wind for the velocity component (see 
<br />
also case c). However, if the curvilinear grid that the user provides 
<br />
happens to be a rectangular grid then suddenly the program is not 
<br />
allowed to write x_wind anymore, and has to write eastward_wind. This is 
<br />
awkward for the model to check and therefore I would also support the 
<br />
request to allow x_wind to mean wind in the direction of the &quot;x&quot; axes of 
<br />
the model.
<br />
<br />c) After writing down b, I start to wonder how I actually should 
<br />
interpret all this. The most common use case for us is a curvilinear 
<br />
model in local x,y coordinates. Hence we have the direction of the 
<br />
curvilinear coordinates (i,j), the directions of the local coordinates 
<br />
(x,y), and the direction in lon-lat coordinates. Which may all happen to 
<br />
align, but won't do so in general. The eastward_wind and northward_wind 
<br />
clearly refer to the lon-lat coordinates. However, there is ambiguity in 
<br />
the definition of x_wind since it matches &quot;the grid x-axis&quot;. I know that 
<br />
for most classic CF applications it is assumed that a grid in non 
<br />
lon-lat coordinates is actually a cartesian grid in some other 
<br />
coordinate system, but this isn't the case for general models. Hence 
<br />
(skipping all the meta-data for the moment) we end up with variables: 
<br />
waterlevel(i,j) associated with local coordinates x(i,j) and y(i,j) 
<br />
which may be transformed into lon(i,j) and lat(i,j) containing true 
<br />
longitude and latitude. What I need to store is the velocity are the 
<br />
velocity components in the i and j directions. Based on the description 
<br />
&quot;the grid x-axis&quot; I assume that x_wind may indicate the velocity in i 
<br />
direction in which case we need to define an explicit coordinate 
<br />
variable i(i) with attribute axis=&quot;X&quot;. Is this correct, or is x_wind 
<br />
intended to be the wind velocity in the local x coordinate direction and 
<br />
not one of the grid directions?
<br />
<br />Best regards,
<br />
<br />Bert
<br />
--------
<br />
<br />Jonathan Gregory wrote:
<br />
<em class="quotelev1">&gt; Dear Mark
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; I see your point of view, and when we discussed this on the phone it did not
</em><br />
<em class="quotelev1">&gt; sound like a large issue to me. I agree with you that X/Y and lon/lat are
</em><br />
<em class="quotelev1">&gt; related ideas in CF. However, it appears there are some concerns.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; As you say, as a data-producer, where the vector component is aligned to the
</em><br />
<em class="quotelev1">&gt; data grid you have to use a different standard name according to whether the
</em><br />
<em class="quotelev1">&gt; grid is lon-lat or not. However, there are other reasons why you have to be
</em><br />
<em class="quotelev1">&gt; aware of this too. Specifically, to write a CF-compliant file, if the grid
</em><br />
<em class="quotelev1">&gt; is not lon-lat you have to provide 2D lon and lat aux coord vars. If the grid
</em><br />
<em class="quotelev1">&gt; is lon-lat you won't provide these. The program writing the data must be aware
</em><br />
<em class="quotelev1">&gt; of the distinction, and can use it to decide which standard names to use.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; If the file is correctly written then, as a data-consumer, you can decide
</em><br />
<em class="quotelev1">&gt; whether eastward/northward would be identical with x/y simply by inspecting the
</em><br />
<em class="quotelev1">&gt; standard_names of the coordinate variables.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Can similar tests be used with Grib conversion? I assume that Grib must provide
</em><br />
<em class="quotelev1">&gt; sufficient metadata to indicate whether the grid is lon-lat.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Best wishes
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Jonathan
</em><br />
<em class="quotelev1">&gt; _______________________________________________
</em><br />
<em class="quotelev1">&gt; CF-metadata mailing list
</em><br />
<em class="quotelev1">&gt; CF-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;   
</em><br />
<br /><br /><br />&nbsp;
<br />
<br />DISCLAIMER: This message is intended exclusively for the addressee(s) and may contain confidential and privileged information. If you are not the intended recipient please notify the sender immediately and destroy this message. Unauthorized use, disclosure or copying of this message is strictly prohibited.
<br />
The foundation 'Stichting Deltares', which has its seat at Delft, The Netherlands, Commercial Registration Number 41146461, is not liable in any way whatsoever for consequences and/or damages resulting from the improper, incomplete and untimely dispatch, receipt and/or content of this e-mail.
<br />
<span id="received"><dfn>Received on</dfn> Wed Apr 25 2012 - 01:12:27 BST</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start4430">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./4431.html" title="Next message in the list">Burkhardt Rockel: "[CF-metadata] rotated pole projection"</a></li>
<li><dfn>Previous message</dfn>: <a href="./4429.html" title="Previous message in the list">John Caron: "[CF-metadata] identification of vector components"</a></li>
<li><dfn>In reply to</dfn>: <a href="./4424.html" title="Message to which this message replies">Jonathan Gregory: "[CF-metadata] identification of vector components"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="./4438.html" title="Next message in this discussion thread">Jonathan Gregory: "[CF-metadata] identification of vector components"</a></li>
<li><a name="replies" id="replies"></a>
<dfn>Reply</dfn>: <a href="./4438.html" title="Message sent in reply to this message">Jonathan Gregory: "[CF-metadata] identification of vector components"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg4430" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg4430" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg4430" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg4430" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:58:02 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./4429.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./4431.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
