<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] Coordinate systems from Jim Biard on 2012-10-16 (cf-metadata-mailman)</title>
<meta name="Author" content="Jim Biard (jim.biard)" />
<meta name="Subject" content="[CF-metadata] Coordinate systems" />
<meta name="Date" content="2012-10-16" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./4785.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./4787.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] Coordinate systems</h1>
<!-- received="Tue Oct 16 08:06:17 2012" -->
<!-- isoreceived="20121016070617" -->
<!-- sent="Tue, 16 Oct 2012 10:06:17 -0400" -->
<!-- isosent="20121016140617" -->
<!-- name="Jim Biard" -->
<!-- email="jim.biard" -->
<!-- subject="[CF-metadata] Coordinate systems" -->
<!-- id="5AC42339-E891-474E-95BA-2178DC1BAD49_at_noaa.gov" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="8AC4893FB411FA4AA8CFECD9C8913B660CB480E0_at_EXXMAIL01.desktop.frd.metoffice.com" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start4786" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./4787.html" accesskey="d" title="Hedley, Mark: &quot;[CF-metadata] Coordinate systems&quot;">Next message</a> ]
[ <a href="./4785.html" title="Hedley, Mark: &quot;[CF-metadata] Coordinate systems&quot;">Previous message</a> ]
[ <a href="./4785.html" title="Hedley, Mark: &quot;[CF-metadata] Coordinate systems&quot;">In reply to</a> ]
<!-- unextthread="start" -->
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg4786" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg4786" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg4786" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg4786" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Jim Biard &lt;<a href="mailto:jim.biard?Subject=Re%3A%20%5BCF-metadata%5D%20Coordinate%20systems">jim.biard</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Tue, 16 Oct 2012 10:06:17 -0400</span><br />
</address>
<br />
Mark,
<br />
<br />Thanks for pointing out the TRAC ticket.  I was not aware of it.  The proposed change moves in a good direction, in that it makes the associations explicit and allows different coordinate systems to coexist, but still makes the association between coordinates and coordinate systems in/through the data variable, as opposed to in the coordinates (or auxiliary coordinates) themselves.  A given coordinate is always associated with a given coordinate system, regardless of whether or not a data variable makes use of it.  Why are we pulling the data variable into the association &quot;loop&quot;?
<br />
<br />Grace and peace,
<br />
<br />Jim
<br />
<br />Jim Biard
<br />
Research Scholar
<br />
Cooperative Institute for Climate and Satellites
<br />
Remote Sensing and Applications Division
<br />
National Climatic Data Center
<br />
151 Patton Ave, Asheville, NC 28801-5001
<br />
<br />jim.biard at noaa.gov
<br />
828-271-4900
<br />
<br />On Oct 15, 2012, at 10:24 AM, &quot;Hedley, Mark&quot; &lt;mark.hedley at metoffice.gov.uk&gt; wrote:
<br />
<br /><em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Hello Jim
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; If I have caught your sense correctly, I think this was the objective for the change proposed in
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; <a href="https://cf-pcmdi.llnl.gov/trac/ticket/70">https://cf-pcmdi.llnl.gov/trac/ticket/70</a>
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; This ticket has been accepted and is waiting for the next version of the CF conventions for NetCDF files to be put forward.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Do you think this ticket captures the need and a tractable solution to your satisfaction?
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; all the best 
</em><br />
<em class="quotelev1">&gt; mark 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; -----Original Message-----
</em><br />
<em class="quotelev1">&gt; From: CF-metadata on behalf of Jim Biard
</em><br />
<em class="quotelev1">&gt; Sent: Thu 11/10/2012 20:23
</em><br />
<em class="quotelev1">&gt; To: cf-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt; Subject: [CF-metadata] Coordinate systems
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Hi.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; I mentioned I thought/concern I had about coordinate systems in CF as an aside a while back, and I didn't much response, so I'm writing it now as a standalone post.
</em><br />
<em class="quotelev1">&gt; When I look at the way geographic coordinate systems are implemented in CF, I keep getting the feeling that the associations (in a UML sense) don't make good sense.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; What we have right now is that a variable has coordinates associated with it, and also has a grid_mapping (a definition of a geographic coordinate system) associated with it.  Here's a cheap ASCII picture of that.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; [coordinate]2------&gt;*[variable]*&lt;------1[grid_mapping]
</em><br />
<em class="quotelev1">&gt;                                           *
</em><br />
<em class="quotelev1">&gt;                                           ^
</em><br />
<em class="quotelev1">&gt;                                           |
</em><br />
<em class="quotelev1">&gt;                                           |
</em><br />
<em class="quotelev1">&gt;                                          2
</em><br />
<em class="quotelev1">&gt;                                    [lon/lat]
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; I'm on purpose limiting myself for the sake of this discussion to the case of 2 coordinates (X/Y, lon/lat, etc) for any given variable.  I know there can be more, but we are still fuzzy on Z, and other coordinates that might be present aren't geographic.  I have also shown the longitude and latitude auxiliary coordinates smashed together into a single element for compactness.  I hope it's not overly confusing.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Based on this model, the coordinates don't have a coordinate system except by relation through a variable.  As a result, the same coordinates could be associated with different geographic coordinate systems in different variables.  You could two different grid_mappings defined (UTM zone 8 and Polar Stereographic, for example) associate one with variable 1 and the other with variable 2, yet have the same coordinates associated with both variable 1 and variable 2.  Furthermore, the longitude and latitude are assumed to relate (via dimensionality) with the coordinates as defined by the grid_mapping, which could (again) be different for each variable.  This model seems more than a bit fragile and unnatural to me.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; The thing is, coordinates are meaningless without the definition of the coordinate system they belong to.  Starting from scratch, the natural approach to this would be to associate coordinate systems with coordinates, which can then be associated with variables.  The diagram would be:
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; [grid_mapping]1-----&gt;*[(aux) coordinate]*------&gt;*[variable]
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Each coordinate would have a geographic coordinate system associated with it.  A variable could have any number of (pairs of) coordinates associated with it.  Longitude/latitude or other auxiliary coordinates would fit into this model in just the same way.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Written as CDL, what you would see is:
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; netcdf {
</em><br />
<em class="quotelev1">&gt; dimensions:
</em><br />
<em class="quotelev1">&gt;   xt = 50;
</em><br />
<em class="quotelev1">&gt;   yt = 50;
</em><br />
<em class="quotelev1">&gt; variables:
</em><br />
<em class="quotelev1">&gt;   float xt(xt=50);
</em><br />
<em class="quotelev1">&gt;     :grid_mapping = &quot;TM&quot;;
</em><br />
<em class="quotelev1">&gt;     :units = &quot;m&quot;;
</em><br />
<em class="quotelev1">&gt;   float yt(yt=50);
</em><br />
<em class="quotelev1">&gt;     :grid_mapping = &quot;TM&quot;;
</em><br />
<em class="quotelev1">&gt;     :units = &quot;m&quot;;
</em><br />
<em class="quotelev1">&gt;   float temperature(xt=50, yt=50);
</em><br />
<em class="quotelev1">&gt;     :coordinates = &quot;lon lat xp yp&quot;;
</em><br />
<em class="quotelev1">&gt;     :units = &quot;K&quot;;
</em><br />
<em class="quotelev1">&gt;   float lon(xt=50, yt=50);
</em><br />
<em class="quotelev1">&gt;     :units = &quot;degrees_east&quot;;
</em><br />
<em class="quotelev1">&gt;     :grid_mapping = &quot;LonLat&quot;;
</em><br />
<em class="quotelev1">&gt;   float lat(xt=50, yt=50);
</em><br />
<em class="quotelev1">&gt;     :units = &quot;degrees_north&quot;;
</em><br />
<em class="quotelev1">&gt;     :grid_mapping = &quot;LonLat&quot;;
</em><br />
<em class="quotelev1">&gt;   float xp(xt=50, yt=50);
</em><br />
<em class="quotelev1">&gt;     :units = &quot;m&quot;;
</em><br />
<em class="quotelev1">&gt;     :grid_mapping = &quot;PolarStereo&quot;;
</em><br />
<em class="quotelev1">&gt;   float yp(xt=50, yt=50);
</em><br />
<em class="quotelev1">&gt;     :coordinates = &quot;xt yt&quot;;
</em><br />
<em class="quotelev1">&gt;     :units = &quot;m&quot;;
</em><br />
<em class="quotelev1">&gt;     :grid_mapping = &quot;PolarStereo&quot;;
</em><br />
<em class="quotelev1">&gt;   char LonLat;
</em><br />
<em class="quotelev1">&gt;     :grid_mapping_name = &quot;latitude_longitude&quot;;
</em><br />
<em class="quotelev1">&gt;   char PolarStereo;
</em><br />
<em class="quotelev1">&gt;     :grid_mapping_name = &quot;polar_stereographic&quot;;
</em><br />
<em class="quotelev1">&gt;   char TM;
</em><br />
<em class="quotelev1">&gt;     :grid_mapping_name = &quot;transverse_mercator&quot;;
</em><br />
<em class="quotelev1">&gt; }
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; I left out the details of the grid_mapping variables for brevity.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; So, having said all that, I'm curious to know if there is any particular reason why geographic coordinate systems are being done the way they are right now, and wondering if what I have described makes sense to anyone else.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Grace and peace,
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Jim
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Jim Biard
</em><br />
<em class="quotelev1">&gt; Research Scholar
</em><br />
<em class="quotelev1">&gt; Cooperative Institute for Climate and Satellites
</em><br />
<em class="quotelev1">&gt; Remote Sensing and Applications Division
</em><br />
<em class="quotelev1">&gt; National Climatic Data Center
</em><br />
<em class="quotelev1">&gt; 151 Patton Ave, Asheville, NC 28801-5001
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; jim.biard at noaa.gov
</em><br />
<em class="quotelev1">&gt; 828-271-4900
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; _______________________________________________
</em><br />
<em class="quotelev1">&gt; CF-metadata mailing list
</em><br />
<em class="quotelev1">&gt; CF-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<br />-------------- next part --------------
<br />
An HTML attachment was scrubbed...
<br />
URL: &lt;<a href="http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20121016/a7d845a8/attachment.html">http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20121016/a7d845a8/attachment.html</a>&gt;
<br />
<span id="received"><dfn>Received on</dfn> Tue Oct 16 2012 - 08:06:17 BST</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start4786">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./4787.html" title="Next message in the list">Hedley, Mark: "[CF-metadata] Coordinate systems"</a></li>
<li><dfn>Previous message</dfn>: <a href="./4785.html" title="Previous message in the list">Hedley, Mark: "[CF-metadata] Coordinate systems"</a></li>
<li><dfn>In reply to</dfn>: <a href="./4785.html" title="Message to which this message replies">Hedley, Mark: "[CF-metadata] Coordinate systems"</a></li>
<!-- lnextthread="start" -->
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg4786" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg4786" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg4786" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg4786" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:58:10 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./4785.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./4787.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
