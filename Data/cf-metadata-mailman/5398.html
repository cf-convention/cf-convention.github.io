<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] scalar coordinates from Hedley, Mark on 2013-05-23 (cf-metadata-mailman)</title>
<meta name="Author" content="Hedley, Mark (mark.hedley)" />
<meta name="Subject" content="[CF-metadata] scalar coordinates" />
<meta name="Date" content="2013-05-23" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./5397.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./5399.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] scalar coordinates</h1>
<!-- received="Thu May 23 03:04:44 2013" -->
<!-- isoreceived="20130523020444" -->
<!-- sent="Thu, 23 May 2013 09:04:44 +0000" -->
<!-- isosent="20130523090444" -->
<!-- name="Hedley, Mark" -->
<!-- email="mark.hedley" -->
<!-- subject="[CF-metadata] scalar coordinates" -->
<!-- id="7819C496F4E10E47BCEFBE74551AAC9604A1BD_at_EXXCMPD1DAG3.cmpd1.metoffice.gov.uk" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="20130521174248.GB17739_at_met.reading.ac.uk" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start5398" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./5399.html" accesskey="d" title="Signell, Richard: &quot;[CF-metadata] use of _FillValue vs valid_range, and minimum and maximum variable attributes&quot;">Next message</a> ]
[ <a href="./5397.html" title="Seth McGinnis: &quot;[CF-metadata] use of _FillValue vs valid_range, and minimum and maximum variable attributes&quot;">Previous message</a> ]
[ <a href="./5384.html" title="Jonathan Gregory: &quot;[CF-metadata] scalar coordinates&quot;">In reply to</a> ]
<!-- unextthread="start" -->
[ <a href="./5407.html" accesskey="t" title="Karl Taylor: &quot;[CF-metadata] scalar coordinates&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg5398" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg5398" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg5398" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg5398" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Hedley, Mark &lt;<a href="mailto:mark.hedley?Subject=Re%3A%20%5BCF-metadata%5D%20scalar%20coordinates">mark.hedley</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Thu, 23 May 2013 09:04:44 +0000</span><br />
</address>
<br />
I can appreciate Ken's point of view, particularly where the convenience is like the example Jonathan posted of having one scalar coordinate, there's not much added by encoding this as a scalar.
<br />
<br />However I support Jonathan's statement about omitting size one dimensions, particularly where there are a number.  It is often helpful not to encode information about the ordering of dimensions of size one.
<br />
<br />In addition to this, I am keen to make sure that data creators are able to encode metadata where the dependency relationship between multiple scalars is not encoded.  In numerous cases, the relationship is not uniquely defined and should not be encoded. 
<br />
<br />For example a data creator may have a set of descriptors and identifiers which define how a particular data set is defined with respect to a larger study, such as a multi-model analysis meta-experiment.  Each data set is produced by a model with a collection of scalar coordinates from that model run, e.g. 'ensemble member number', 'experiment id', 'perturbation scheme', 'forcing parameter a', forcing parameter b', ... etc.
<br />
<br />Given different collections of such data sets, different relationships may emerge from the collection, enabling different types of analysis. It is a really useful approach to encode all these quantities as scalars, and interpret these scalars as potential degrees of freedom with potential inter-relations; the degrees of freedom and inter-relationships are then emergent properties of the collection, not defined in any individual member data set.
<br />
<br />This seems to me to be the logical conclusion of the use of the term 'scalar coordinate' (as contrasted to 'vector coordinate', i assume) and it is really useful. 
<br />
<br />I think it would be a regressive step for CF to limit or complicate this facet of data comprehension by constraining the meaning of 'scalar coordinate' in the way that has been suggested.  I don't think such a constraint has been clear up to now in the conventions and people are making real use of the perceived flexibility.
<br />
<br />mark
<br />
&nbsp;
<br />
________________________________________
<br />
From: CF-metadata [cf-metadata-bounces at cgd.ucar.edu] on behalf of Jonathan Gregory [j.m.gregory at reading.ac.uk]
<br />
Sent: 21 May 2013 18:42
<br />
To: cf-metadata at cgd.ucar.edu
<br />
Subject: Re: [CF-metadata] scalar coordinates
<br />
<br />Dear Ken
<br />
<br />Your argument is one that we should not have scalar coordinates at all. You
<br />
could propose that they should be removed from the next version of CF (and
<br />
that would certainly simplify this discussion, if agreed :-). They have been
<br />
in there for several years now, and I guess they are quite widely used,
<br />
because it is convenient for data-writers. I agree, it does require a bit
<br />
more work for data-readers. However, CF-compliant software should expect to
<br />
inspect the coordinates attribute in any case, and if it does that it will
<br />
automatically come across the scalar coordinate variables.
<br />
<br />I think that an attractive feature of omitting the size-one dimensions is
<br />
not having to decide on the order of them in the data variable, which is
<br />
really arbitrary for storage in netCDF files, since it makes no difference
<br />
to the order of the data elements.
<br />
<br />Best wishes
<br />
<br />Jonathan
<br />
<br /><br />----- Forwarded message from &quot;Kenneth S. Casey - NOAA Federal&quot; &lt;kenneth.casey at noaa.gov&gt; -----
<br />
<br /><em class="quotelev1">&gt; From: &quot;Kenneth S. Casey - NOAA Federal&quot; &lt;kenneth.casey at noaa.gov&gt;
</em><br />
<em class="quotelev1">&gt; Date: Tue, 21 May 2013 07:22:34 -0400
</em><br />
<em class="quotelev1">&gt; To: &quot;Hedley, Mark&quot; &lt;mark.hedley at metoffice.gov.uk&gt;
</em><br />
<em class="quotelev1">&gt; X-Mailer: Apple Mail (2.1503)
</em><br />
<em class="quotelev1">&gt; CC: &quot;cf-metadata at cgd.ucar.edu&quot; &lt;cf-metadata at cgd.ucar.edu&gt;
</em><br />
<em class="quotelev1">&gt; Subject: Re: [CF-metadata] scalar coordinates
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Hi Everyone,
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; After spending 15 minutes reading this and Jonathan's previous post, and trying hard to be sure I really understand them, I am left wondering if a &quot;convenience feature&quot; is really a convenience at all.  I know programmers don't like clutter in their code and have certain aesthetic to uphold (I used to do much more serious programming in my younger days, but am now just a lazy Matlaber), but is the added complexity of having these two options, copied from Jonathan's post:
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;  float height; // scalar coordinate variable
</em><br />
<em class="quotelev1">&gt;    height: standard_name=&quot;height&quot;;
</em><br />
<em class="quotelev1">&gt;  float temp(lat,lon);
</em><br />
<em class="quotelev1">&gt;    temp: standard_name=&quot;air_temperature&quot;;
</em><br />
<em class="quotelev1">&gt;    temp: coordinates=&quot;height&quot;;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;  float height(height);  // size-one coordinate var, with dimension height=1
</em><br />
<em class="quotelev1">&gt;    height: standard_name=&quot;height&quot;;
</em><br />
<em class="quotelev1">&gt;  float temp(height,lat,lon);
</em><br />
<em class="quotelev1">&gt;    temp: standard_name=&quot;air_temperature&quot;;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; really worth it?  The manual must be longer to describe the &quot;convenience&quot;, and the application programmers and downstream users of the data now have to build complexity into THEIR code to handle both cases. This list has to take time explaining and debating the options, and I have to take time explaining it to both data producers and data consumers who have never used netCDF or CF before.   Maybe that is not such a big deal on a case by case basis, but in the broader picture when folks like me are trying to get everyone and their brothers and sisters and mothers and fathers using CF-netCDF, it is a real pain.  My vote is to simplify. Use the second example, since it handles the case where height=1 as easily as the case where height=1000.  I say be explicit.  Does the first example gain us any functionality?  If not, then don't use it and stay away from it.  Encourage others to do the same.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Ken
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; On May 21, 2013, at 5:48 AM, &quot;Hedley, Mark&quot; &lt;mark.hedley at metoffice.gov.uk&gt; wrote:
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev2">&gt; &gt; The term 'convenience feature' is mentioned in the conventions document:
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt;  'The new scalar coordinate variable is a convenience feature which avoids adding size one dimensions to variables.'
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; Data creators have seen the benefits in not encoding size one dimensions and made use of this feature, it has proved very convenient.  The conventions go on to say:
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt;  'Scalar coordinate variables have the same information content and can be used in the same contexts as a size one coordinate variable.'
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; But this statement is not quite true: the ordering of dimensions is not encoded, and the ability to link many coordinates to the same dimension is lost.  The assumption in this statement is an aspiration which I think cannot be delivered without particularly strict limitations on the use of scalars during encoding.
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; Nowhere in the conventions does it state that if more than one single-valued coordinate is related to the same degree of freedom, a dimension must be declared for these and this relationship explicitly encoded.
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; Later, the case of character strings is addressed:
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt;  'If a character variable has only one dimension (the maximum length of the string), it is regarded as a string-valued scalar coordinate variable, analogous to a numeric scalar coordinate variable (see Section 5.7, ?Scalar Coordinate Variables?) '
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; which is a required feature, but the NUG only allows numerical valued data arrays as Coordinate Variables, so a further section is added, in the  Terminology:
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt;  'scalar coordinate variable
</em><br />
<em class="quotelev2">&gt; &gt;    A scalar variable that contains coordinate data. Functionally equivalent to either a size one coordinate variable or a size one auxiliary coordinate variable. '
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; These statements together provide information on how to write files, but they are limited in their assistance to file reading and interpretation.
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; The conventions are not clear how to, or whether to make a distinction for a particular scalar coordinate: it does not say that a scalar coordinate is a Coordinate Variable or an Auxiliary Coordinate Variable, it says it is functionally equivalent to either one or the other.
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; I have read these sections to mean that by encoding a scalar coordinate the data creator is not providing information about how the coordinate is related to the dimensions in the file, other than to say it applies to all of the cells currently in the file.
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; As such, I disagree with the statement that that
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt;  'Scalar coordinate variables have the same information content and can be used in the same contexts as a size one coordinate variable.'
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; In many cases this will turn out to be a valid interpretation but it is not the only one, and this nuance is a really useful feature, which many data creators have benefited from.
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; From one point of view, a third type of Coordinate exists in CF, the Scalar Coordinate, which is neither a Coordinate Variable, nor an Auxiliary Coordinate.  From another point of view a Scalar Coordinate is an Auxiliary Coordinates which has the potential to be an emergent Coordinate Variable, if required and consistent for the data consumer.  (I am sure there are other useful perspectives we can consider)
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; We have come across many data sets from other data creators where a considered reading of the data suggests that they have taken an interpretation such as this as well.  No distinction has been made between scalars which represent a degree of freedom and scalars which do not.
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; The scalar coordinate is a convenient feature allowing metadata to be simply encoded in a clear manner and I feel that the conventions document should adapt to reflect the usage some sections of the community have adopted.  It is not ambiguous, it provides sufficient information to work with the file and the data and metadata are well specified.
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; Indeed when converting from other formats (such as GRIB and BUFR) to CF it is the logical way to encode the available metadata.
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; I am concerned about the implications for these data sets if the interpretation of scalar coordinates is tightened in a future version of the conventions document to explicitly disallow this useful and well used point of view.  I would like to stress again Jonathan's point, that all of this data is CF compliant, the question is how consumers interpret the semantics of the data set.
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; I think the utility of the scalar coordinate variable is significantly diminished if Option B or some derivative of it is pursued for the next version of the conventions.  Option A preserves all of the interpretations of Option B intact, but with caution needed on loading and interpretation not to read too much information into any scalar coordinates present.
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; _______________________________________________
</em><br />
<em class="quotelev2">&gt; &gt; CF-metadata mailing list
</em><br />
<em class="quotelev2">&gt; &gt; CF-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev2">&gt; &gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Kenneth S. Casey, Ph.D.
</em><br />
<em class="quotelev1">&gt; Technical Director
</em><br />
<em class="quotelev1">&gt; NOAA National Oceanographic Data Center
</em><br />
<em class="quotelev1">&gt; 1315 East-West Highway
</em><br />
<em class="quotelev1">&gt; Silver Spring MD 20910
</em><br />
<em class="quotelev1">&gt; 301-713-3272 x133
</em><br />
<em class="quotelev1">&gt; <a href="http://www.nodc.noaa.gov">http://www.nodc.noaa.gov</a>
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<br /><em class="quotelev1">&gt; _______________________________________________
</em><br />
<em class="quotelev1">&gt; CF-metadata mailing list
</em><br />
<em class="quotelev1">&gt; CF-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<br /><br />----- End forwarded message -----
<br />
_______________________________________________
<br />
CF-metadata mailing list
<br />
CF-metadata at cgd.ucar.edu
<br />
<a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
<br />
<span id="received"><dfn>Received on</dfn> Thu May 23 2013 - 03:04:44 BST</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start5398">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./5399.html" title="Next message in the list">Signell, Richard: "[CF-metadata] use of _FillValue vs valid_range, and minimum and maximum variable attributes"</a></li>
<li><dfn>Previous message</dfn>: <a href="./5397.html" title="Previous message in the list">Seth McGinnis: "[CF-metadata] use of _FillValue vs valid_range, and minimum and maximum variable attributes"</a></li>
<li><dfn>In reply to</dfn>: <a href="./5384.html" title="Message to which this message replies">Jonathan Gregory: "[CF-metadata] scalar coordinates"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="./5407.html" title="Next message in this discussion thread">Karl Taylor: "[CF-metadata] scalar coordinates"</a></li>
<li><a name="replies" id="replies"></a>
<dfn>Reply</dfn>: <a href="./5407.html" title="Message sent in reply to this message">Karl Taylor: "[CF-metadata] scalar coordinates"</a></li>
<li><dfn>Reply</dfn>: <a href="./5415.html" title="Message sent in reply to this message">Kettleborough, Jamie: "[CF-metadata] scalar coordinates"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg5398" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg5398" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg5398" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg5398" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:58:22 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./5397.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./5399.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
