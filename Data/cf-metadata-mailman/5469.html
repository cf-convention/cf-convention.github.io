<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] CF-1.6 DSG clarification: time series &amp; lat/lon coordinates | RE: scalar coordinates from Hedley, Mark on 2013-06-05 (cf-metadata-mailman)</title>
<meta name="Author" content="Hedley, Mark (mark.hedley)" />
<meta name="Subject" content="[CF-metadata] CF-1.6 DSG clarification: time series &amp; lat/lon coordinates | RE: scalar coordinates" />
<meta name="Date" content="2013-06-05" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./5468.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./5470.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] CF-1.6 DSG clarification: time series &amp; lat/lon coordinates | RE: scalar coordinates</h1>
<!-- received="Wed Jun  5 04:47:33 2013" -->
<!-- isoreceived="20130605034733" -->
<!-- sent="Wed, 5 Jun 2013 10:47:33 +0000" -->
<!-- isosent="20130605104733" -->
<!-- name="Hedley, Mark" -->
<!-- email="mark.hedley" -->
<!-- subject="[CF-metadata] CF-1.6 DSG clarification: time series &amp; lat/lon coordinates | RE: scalar coordinates" -->
<!-- id="7819C496F4E10E47BCEFBE74551AAC9604B59D_at_EXXCMPD1DAG3.cmpd1.metoffice.gov.uk" -->
<!-- charset="US-ASCII" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start5469" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./5470.html" accesskey="d" title="Jonathan Gregory: &quot;[CF-metadata] CF-1.6 DSG clarification: time series &#0038; lat/lon coordinates&quot;">Next message</a> ]
[ <a href="./5468.html" title="Cameron-smith, Philip: &quot;[CF-metadata] atmosphere stability indices&quot;">Previous message</a> ]
<!-- unextthread="start" -->
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg5469" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg5469" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg5469" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg5469" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Hedley, Mark &lt;<a href="mailto:mark.hedley?Subject=Re%3A%20%5BCF-metadata%5D%20CF-1.6%20DSG%20clarification%3A%20time%20series%20%26%20lat%2Flon%20coordinates%20%7C%20RE%3A%20scalar%20coordinates">mark.hedley</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Wed, 5 Jun 2013 10:47:33 +0000</span><br />
</address>
<br />
Hello
<br />
<br />The discussion on  CF-1.6 DSG clarification: time series &amp; lat/lon coordinates provides us with further example of the use of scalar coordinates and their potential interpretation. I would like to use this to investigate the question of scalar interpretation.
<br />
<br />The conversation on this issue has solidified my view that the scalar coordinate variable is a semantic container requiring slightly different handling from the vector coordinates (Coordinate Variables and Auxiliary Coordinates).
<br />
<br />I do not think it is safe to assume that a scalar coordinate variable is merely an encoding short cut with no semantic content.  Some care is required in interpreting scalar coordinate variables.  In the data modelling activities they are a case which needs handling and representing, they are not 'just DimensionCoordinates'.
<br />
<br />Examples H4 and H5 make explicit use of scalar coordinate variables which do not imply logical degrees of freedom in the data variables.
<br />
<br />As I have advocated recently, I feel we can maintain all of the historical functionality of scalar coordinate variables as encoding short cuts and clarify their uses, including as part of the definition of discrete sampling geometries, in a coherent and helpful fashion.  That is the aim of the discussion thread titled  [CF-metadata] scalar coordinates and the perspective I am trying to advocate there.
<br />
<br />mark
<br />
<br />|&gt; on CF-1.6 DSG clarification: time series &amp; lat/lon coordinates 
<br />
<br /><em class="quotelev1">&gt; John Caron
</em><br />
<em class="quotelev1">&gt; If we use the time series featureType as example
</em><br />
<em class="quotelev1">&gt; (from <a href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html#idp8307552">http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html#idp8307552</a>)
</em><br />
<em class="quotelev1">&gt; AFAIU, the orthogonal multidimensional representation would be:
</em><br />
<em class="quotelev1">&gt;  float humidity(station,time)
</em><br />
<em class="quotelev1">&gt; not
</em><br />
<em class="quotelev1">&gt;  float humidity(lat, lon, time)
</em><br />
<br />This seems to me to point at semantic differences between a scalar coordinate and a coordinate variable of size one, when used by discrete sampling geometries.
<br />
<br /><em class="quotelev3">&gt;&gt;&gt; Jonathan Gregory
</em><br />
<em class="quotelev3">&gt;&gt;&gt; with alt=lat=lon=1 is legal in CF. In fact the coordinates attribute is not
</em><br />
<em class="quotelev3">&gt;&gt;&gt; needed, because these are all (Unidata) coordinate variables (1D, with name
</em><br />
<em class="quotelev3">&gt;&gt;&gt; of the variable equal to the name of the dimension). Ignoring the coordinates
</em><br />
<em class="quotelev3">&gt;&gt;&gt; attribute, this example is fine in COARDS as well. In the data model, lon lat
</em><br />
<em class="quotelev3">&gt;&gt;&gt; alt time are all dimension coordinate constructs with separate domain axes.
</em><br />
<em class="quotelev3">&gt;&gt;&gt;
</em><br />
<em class="quotelev3">&gt;&gt;&gt; But when there are *two* timeseries, you would not have alt=lat=lon=2. That
</em><br />
<em class="quotelev3">&gt;&gt;&gt; would mean three independent size-2 dimensions. This would also be legal in
</em><br />
<em class="quotelev3">&gt;&gt;&gt; CF and COARDS, but it means timeseries at a grid of 8 points, not two points.
</em><br />
<em class="quotelev3">&gt;&gt;&gt; To deal with this situation, we introduce an index dimension of size 2, and
</em><br />
<em class="quotelev3">&gt;&gt;&gt; make alt lat lon auxiliary coordinate variables of this single dimension. In
</em><br />
<em class="quotelev3">&gt;&gt;&gt; the data model, there is then only one domain axis for alt lat lon.
</em><br />
<br />This also seems to me to be evidence of semantic interpretation of scalars within the appendix H examples.  
<br />
<br /><em class="quotelev3">&gt;&gt;&gt; Jonathan Gregory
</em><br />
<em class="quotelev3">&gt;&gt;&gt; Back to the case of one timeseries: Example H4 shows scalar coordinate
</em><br />
<em class="quotelev3">&gt;&gt;&gt; variables for alt lat lon. That is, these size-1 dimensions have been omitted.
</em><br />
<em class="quotelev3">&gt;&gt;&gt; In this case, the coordinates attribute is needed; that's how scalar coordinate
</em><br />
<em class="quotelev3">&gt;&gt;&gt; variables are attached to the data variable. In the data model (in my opinion)
</em><br />
<em class="quotelev3">&gt;&gt;&gt; this is logically equivalent including the size-1 dimensions.
</em><br />
<br />I do not think that this last statement is correct, there are subtleties of interpretation at work here which help to provide the semantics of discrete sampling geometries.
<br />
<br /><em class="quotelev2">&gt;&gt; John Caron
</em><br />
<em class="quotelev2">&gt;&gt; Lets see, its currently not legal as a DSG file, according to the
</em><br />
<em class="quotelev2">&gt;&gt; spec. The CDM will barf on it, though I could put in a workaround.
</em><br />
<em class="quotelev2">&gt;&gt;
</em><br />
<em class="quotelev2">&gt;&gt; Should it be legal? That is, should people be &quot;allowed&quot; to put in
</em><br />
<em class="quotelev2">&gt;&gt; extraneous dimensions that only make sense for some values of the
</em><br />
<em class="quotelev2">&gt;&gt; dimension length (eg 1 but not &gt;1) ? I think it would be a rather
</em><br />
<em class="quotelev2">&gt;&gt; ugly wart, and you would gain no new functionality.
</em><br />
<br />I agree with this analysis, I do not think this approach should be adopted.  I would much rather see the recognition of scalars as interpreted subtly differently from vector coordinates (coordinate variables, auxiliaries).
<br />
<br /><em class="quotelev2">&gt;&gt; I also think it would confuse dimensions with coordinates (which has
</em><br />
<em class="quotelev2">&gt;&gt; already happened because the distinction isnt obvious). I think we
</em><br />
<em class="quotelev2">&gt;&gt; should try to be clear about the use of dimensions because it makes
</em><br />
<em class="quotelev2">&gt;&gt; the data model more powerful. So I would prefer not.
</em><br />
<br />I also agree with this perspective
<br />
<br /><br /><br /><em class="quotelev3">&gt;&gt;&gt; Jonathan Gregory
</em><br />
<em class="quotelev3">&gt;&gt;&gt; Maybe this question raises an issue for chapter 9 and Example H4. The example
</em><br />
<em class="quotelev3">&gt;&gt;&gt; is following Section 9.2:
</em><br />
<em class="quotelev3">&gt;&gt;&gt;
</em><br />
<em class="quotelev3">&gt;&gt;&gt; &quot;If there is only a single feature to be stored in a data variable, there is no
</em><br />
<em class="quotelev3">&gt;&gt;&gt; need for an instance dimension and it is permitted to omit it. The data will
</em><br />
<em class="quotelev3">&gt;&gt;&gt; then be one-dimensional, which is a special (degenerate) case of the
</em><br />
<em class="quotelev3">&gt;&gt;&gt; multidimensional array representation.  The instance variables will be scalar
</em><br />
<em class="quotelev3">&gt;&gt;&gt; coordinate variables; the data variable and other auxiliary coordinate
</em><br />
<em class="quotelev3">&gt;&gt;&gt; variables will have only an element dimension and not have an instance
</em><br />
<em class="quotelev3">&gt;&gt;&gt; dimension, e.g. data(o) and t(o) for a single timeSeries.&quot;
</em><br />
<em class="quotelev3">&gt;&gt;&gt; In the multidimensional array representation, featureType doesn't have to be
</em><br />
<em class="quotelev3">&gt;&gt;&gt; coded, because this representation has always existed in CF. We could say that
</em><br />
<em class="quotelev3">&gt;&gt;&gt; *if* you encode featureType, there *must* be an instance dimension (of size 1
</em><br />
<em class="quotelev3">&gt;&gt;&gt; if appropriate) and that alt lat lon must be auxiliary coordinate variables
</em><br />
<em class="quotelev3">&gt;&gt;&gt; with this dimension. That would be a restriction we don't have in CF 1.6, so
</em><br />
<em class="quotelev3">&gt;&gt;&gt; it would be a change to CF. What do you think, John C?
</em><br />
<br />I don't like this change, it makes the conventions less easy to use, I feel, without adding functionality.
<br />
<br />Recognition of the status of scalars addresses this issue more neatly.
<br />
<br /><em class="quotelev2">&gt;&gt; John Caron
</em><br />
<em class="quotelev2">&gt;&gt;  From my POV, its just a practical question to make things clear
</em><br />
<em class="quotelev2">&gt;&gt; between data producer and consumer. I think we allowed the scalar
</em><br />
<em class="quotelev2">&gt;&gt; instance coordinates because it was a natural way for producers to
</em><br />
<em class="quotelev2">&gt;&gt; think when there was only one feature in the file, ie &quot;why do you
</em><br />
<em class="quotelev2">&gt;&gt; want me to add this extra dimension?&quot; As long as the &quot;featureType&quot;
</em><br />
<em class="quotelev2">&gt;&gt; attribute is present, as well as the &quot;coordinates&quot; attribute I think
</em><br />
<em class="quotelev2">&gt;&gt; the meaning is unambiguous. Requiring a dimension=1 is maybe a bit
</em><br />
<em class="quotelev2">&gt;&gt; simpler, but i would still have to deal with the scalar case for
</em><br />
<em class="quotelev2">&gt;&gt; versions before we change, so its not really better for me.
</em><br />
<br />I don't think requiring dimensions of size=1 is good here, I think the current implementation of discrete sampling geometries is neat and provides the required information. It is in the process of being adopted in its current form, changes like this are liable to add confusion, in my opinion.
<br />
<span id="received"><dfn>Received on</dfn> Wed Jun 05 2013 - 04:47:33 BST</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start5469">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./5470.html" title="Next message in the list">Jonathan Gregory: "[CF-metadata] CF-1.6 DSG clarification: time series &#0038; lat/lon coordinates"</a></li>
<li><dfn>Previous message</dfn>: <a href="./5468.html" title="Previous message in the list">Cameron-smith, Philip: "[CF-metadata] atmosphere stability indices"</a></li>
<!-- lnextthread="start" -->
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg5469" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg5469" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg5469" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg5469" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:58:23 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./5468.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./5470.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
