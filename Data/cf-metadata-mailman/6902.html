<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] How to define time coordinate in GPS Was: CF-metadata Digest, Vol 144, Issue 15 from Little, Chris on 2015-04-28 (cf-metadata-mailman)</title>
<meta name="Author" content="Little, Chris (chris.little)" />
<meta name="Subject" content="[CF-metadata] How to define time coordinate in GPS Was: CF-metadata Digest, Vol 144, Issue 15" />
<meta name="Date" content="2015-04-28" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./6901.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./6903.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] How to define time coordinate in GPS Was: CF-metadata Digest, Vol 144, Issue 15</h1>
<!-- received="Tue Apr 28 12:00:18 2015" -->
<!-- isoreceived="20150428110018" -->
<!-- sent="Tue, 28 Apr 2015 18:00:18 +0000" -->
<!-- isosent="20150428180018" -->
<!-- name="Little, Chris" -->
<!-- email="chris.little" -->
<!-- subject="[CF-metadata] How to define time coordinate in GPS Was: CF-metadata Digest, Vol 144, Issue 15" -->
<!-- id="3DAD8A5A545D7644A066C4F2E82072883E1533CE_at_EXXCMPD1DAG4.cmpd1.metoffice.gov.uk" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="mailman.946.1430239978.6842.cf-metadata_at_cgd.ucar.edu" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start6902" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./6903.html" accesskey="d" title="Jim Biard: &quot;[CF-metadata] How to define time coordinate in GPS?&quot;">Next message</a> ]
[ <a href="./6901.html" title="Maarten Sneep: &quot;[CF-metadata] How to define time coordinate in GPS?&quot;">Previous message</a> ]
<!-- unextthread="start" -->
[ <a href="./6904.html" accesskey="t" title="Jim Biard: &quot;[CF-metadata] How to define time coordinate in GPS&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg6902" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg6902" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg6902" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg6902" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Little, Chris &lt;<a href="mailto:chris.little?Subject=Re%3A%20%5BCF-metadata%5D%20How%20to%20define%20time%20coordinate%20in%20GPS%20Was%3A%20CF-metadata%20Digest%2C%20Vol%20144%2C%20Issue%2015">chris.little</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Tue, 28 Apr 2015 18:00:18 +0000</span><br />
</address>
<br />
Dear Jim, Jonathon, and old and new timers,
<br />
<br />Here are my 2 cents worth:
<br />
<br /><a href="http://www.bipm.org/en/bipm-services/timescales/">http://www.bipm.org/en/bipm-services/timescales/</a> &quot;The UTC scale is adjusted from International Atomic Time (TAI) by the insertion of leap seconds&quot;
<br />
<br /><a href="http://en.wikipedia.org/wiki/Coordinated_Universal_Time">http://en.wikipedia.org/wiki/Coordinated_Universal_Time</a> &quot;UTC is defined by International Telecommunications Union Recommendation (ITU-R TF.460-6), Standard-frequency and time-signal emissions and is based on International Atomic Time (TAI) with leap seconds added at irregular intervals to compensate for the slowing of Earth's rotation. .... Days are conventionally identified using the Gregorian calendar, but Julian day numbers can also be used.&quot;
<br />
<br />So, UTC is not a calendar, it is a timescale. 
<br />
<br />Consequently, I like and am trying to promulgate the terminology:
<br />
<br />A 'timescale' is a repeating physical event that is counted. A 'clock' is a device for doing so. 
<br />
<br />A 'temporal/time coordinate' is a mathematical generalisation of a timescale, assuming continuity, interpolation, extrapolation and conventional arithmetic;
<br />
<br />A 'calendar' is a set of algorithms, often not well defined, usually assuming an underpinning coordinate reference system or timescale and relating it to astronomical stuff (rotation of Earth, Mars, moon, sun, etc).
<br />
<br />It then seems most sensible to recognise that ISO8601 is really a mixture of the above, plus a standardised set of notations.
<br />
<br />If any community use the notation of the current ISO8601 standard, I think that the presumption must be that the Gregorian calendar, leap days and leap seconds are implied, and thus they should indicate any deviations from this explicitly. I am motivated by the increasingly wider use of our data in other domains, so that explicit labelling becomes important.
<br />
<br />HTH, Chris
<br />
<br />Date: Tue, 28 Apr 2015 17:52:53 +0100
<br />
From: Jonathan Gregory &lt;j.m.gregory at reading.ac.uk&gt;
<br />
To: cf-metadata at cgd.ucar.edu
<br />
Subject: Re: [CF-metadata] How to define time coordinate in GPS?
<br />
Message-ID: &lt;20150428165253.GA7872 at met.reading.ac.uk&gt;
<br />
Content-Type: text/plain; charset=us-ascii
<br />
<br />Dear Jim
<br />
<br />I agree that TAI and GPS aren't distinct CF calendars if they differ only because of the epoch. In CF and udunits, the reference time is part of the the units, as you know; it's not a property of the calendar. I referred to GPS calendar just to contrast it with UTC.
<br />
<br />Unlike you, I don't live only in the real world. :-) Many models use the default CF calendar (called standard or gregorian) as an approximation to the real world. In these models there are no leap seconds, and it would not be correct to call this UTC, or to include the leap seconds in the encoding and decoding of time cooordinates. In any case, as we understand, most software doesn't allow for leap seconds. For those two reasons, I propose that we more precisely define the default (standard, gregorian) calendar to say explicitly that it does not include leap seconds i.e. every day is 86400 s long exactly. This is probably correct for most of the data which has been written with this calendar.
<br />
<br />I call UTC a calendar because it affects the encoding, since it implies leap seconds.  You suggest, I think, that the treatment of leap seconds should be indicated in the reference time in the units string. This doesn't seem quite right to me because the units doesn't say anything about the encoding. We use the same format of units string for all calendars. udunits does mention UTC in respect of the format of this string because of wanting to talk about time zones, not because of leap seconds. Time zones could be used in models too (though I don't know of a case). Hence I still propose that we should regard UTC as a calendar, if it's correct that the leap seconds in use in the real world are part of the definition of UTC. This means we should define a a new calendar, which is not the default, in which time units have just the same format as usual i.e. udunits, but the encoding and decoding of values is done including leap seconds according to UTC. The same value, with the same units string, may translate int<br />
o a different date-time (by a number of
<br />
seconds) according to whether the calendar is default (standard, gregorian) or utc. It wouldn't make sense to use this calendar for dates before the introduction of UTC, so it should be illegal to do so. We could do this by prohibiting reference times earlier than the start of UTC and negative values of time in this calendar.
<br />
<br />Maybe I haven't grasped your point properly?
<br />
<br />Best wishes
<br />
<br />Jonathan
<br />
<br />----- Forwarded message from Jim Biard &lt;jbiard at cicsnc.org-----
<br />
<br />Date: Tue, 28 Apr 2015 11:35:16 -0400
<br />
From: Jim Biard &lt;jbiard at cicsnc.org&gt;
<br />
To: cf-metadata at cgd.ucar.edu
<br />
Subject: Re: [CF-metadata] How to define time coordinate in GPS?
<br />
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:31.0)
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gecko/20100101 Thunderbird/31.6.0
<br />
<br />Jonathan,
<br />
<br />I see where you are coming from, and there's validity in that line of thought. Leap seconds represent a finer-grained adjustment to the overall date/time system being used. I still think it makes good sense to add a new attribute to declare whether or not leap second handling was used or strengthen our standards for time variables so that problems are averted.
<br />
<br /><em class="quotelev1">&gt;From a human understandability perspective, a calendar attribute of
</em><br />
&quot;GPS&quot; or &quot;UTC&quot; will be somewhat confusing. In my experience, people don't speak of the UTC calendar, it's UTC time. Further, TAI and GPS time don't really concern themselves with anything but counts of seconds since an epoch date &amp; time. People convert the counts to time stamps for convenience, but they are actually more equivalent to the Julian Day Number (JDN) than they are to the Gregorian or Julian calendar. TAI and GPS time have different epochs, and TAI is more accurate, but they both are running counts of seconds that aren't tied to the motions of the Earth. As a result, I think that it's improper to talk about a GPS calendar or TAI calendar.
<br />
<br />What is being exposed by this discussion is the reality that any of us (myself included) have often ignored or been unaware of the fact that the time calculators (time handling software) we used when filling our time variables with elapsed times weren't giving us true counts of seconds since the epochs we wrote into our units attributes. If you are working at a resolution of days or hours, this will probably never cause a problem. If you are working at a resolution of minutes or less and working over a time span of greater than two years, it may well have caused at least occasional small problems. If you are working with full-resolution polar-orbiting satellite data, one second represents ~7 km of satellite motion, so such errors can produce significant geolocation errors.
<br />
<br />A set of elapsed seconds since a Gregorian/UTC epoch that were calculated from Gregorian/UTC time stamps without regard for leap seconds and which crossed a leap second boundary are not &quot;GPS&quot;
<br />
seconds. Nor are they &quot;UTC&quot; seconds. They are, strictly speaking, elapsed times into which one or more step errors have been introduced. As I mentioned in a previous email, as long as you use the same time calculator to extract time stamps as you did to get elapsed times from input time stamps, you won't notice anything. You may notice a problem if you are taking differences between elapsed times and a leap second boundary gets involved.
<br />
<br />As I've considered all of this more, I'm tending to favor the second option I suggested.
<br />
<br />&nbsp;&nbsp;&nbsp;We could also be more strict, and say the epoch time stamp in the units
<br />
&nbsp;&nbsp;&nbsp;attribute must always be in UTC. The question would then be reduced to
<br />
&nbsp;&nbsp;&nbsp;whether or not leap seconds were counted into the elapsed times stored
<br />
&nbsp;&nbsp;&nbsp;in the time variable. In this case, we could add a &quot;leap_seconds&quot;
<br />
&nbsp;&nbsp;&nbsp;attribute which would have a value of &quot;UTC&quot; if UTC leap seconds were
<br />
&nbsp;&nbsp;&nbsp;counted into the elapsed times, and &quot;none&quot; if not. This would also allow
<br />
&nbsp;&nbsp;&nbsp;for some other system of leap seconds to be used. (I don't know if there
<br />
&nbsp;&nbsp;&nbsp;are others.) For backward compatibility, considering history, the
<br />
&nbsp;&nbsp;&nbsp;default value for this attribute would probably be &quot;UTC&quot;.
<br />
<br />Clearly, having epoch time stamps with time zone offsets from UTC, as described in the CF conventions, would be OK as well. I'm also open to other namings for the new attribute and for its possible values. The leap seconds only become an issue in certain rather specific instances, so I think that such an attribute, along with a bit of discussion in the document, would likely be sufficient to warn those people that may find themselves negatively affected by improper leap second handling.
<br />
<br />Grace and peace,
<br />
<br />Jim
<br />
<br /><br />On 4/27/15 1:07 PM, Jonathan Gregory wrote:
<br />
<em class="quotelev1">&gt;Dear Jim
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev2">&gt;&gt;I don't think calendars are the right place to encode this. We could 
</em><br />
<em class="quotelev2">&gt;&gt;add a new &quot;time_system&quot; attribute where you would declare whether your 
</em><br />
<em class="quotelev2">&gt;&gt;time stamps and elapsed times were based on UTC, GPS, TAI, etc.
</em><br />
<em class="quotelev2">&gt;&gt;If we take this route, we should require the elapsed times to encode 
</em><br />
<em class="quotelev2">&gt;&gt;leap seconds if the time system is UTC, and state that the default 
</em><br />
<em class="quotelev2">&gt;&gt;time system is UTC.
</em><br />
<em class="quotelev1">&gt;I think this is a calendar issue because the calendar is the set of 
</em><br />
<em class="quotelev1">&gt;rules which translate between components of time (YMDhms) and elapsed 
</em><br />
<em class="quotelev1">&gt;time (in fixed time units) since the reference time. Your later email 
</em><br />
<em class="quotelev1">&gt;seems to me to be consistent with that. In the real world, the elapsed 
</em><br />
<em class="quotelev1">&gt;interval (expressed e.g. as the number of seconds) between the ref 
</em><br />
<em class="quotelev1">&gt;YMDhms and the actual YMDhs depends on whether your calendar includes leap seconds (UTC) or not (GPS).
</em><br />
<em class="quotelev1">&gt;It seems that GPS is the calendar likely to have been assumed in 
</em><br />
<em class="quotelev1">&gt;existing CF datasets, so it would be logical to say that the default is 
</em><br />
<em class="quotelev1">&gt;the real- world calendar without leap seconds. Have I misunderstood 
</em><br />
<em class="quotelev1">&gt;something? If we regard this as a property of the calendar, we don't need a new attribute.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;Best wishes
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;Jonathan
</em><br />
<em class="quotelev1">&gt;_______________________________________________
</em><br />
<em class="quotelev1">&gt;CF-metadata mailing list
</em><br />
<em class="quotelev1">&gt;CF-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt;<a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<br /><pre>
--
CICS-NC &lt;<a href="http://www.cicsnc.org/">http://www.cicsnc.org/</a>&gt; Visit us on
Facebook &lt;<a href="http://www.facebook.com/cicsnc">http://www.facebook.com/cicsnc</a>&gt; 	*Jim Biard*
*Research Scholar*
Cooperative Institute for Climate and Satellites NC &lt;<a href="http://cicsnc.org/">http://cicsnc.org/</a>&gt; North Carolina State University &lt;<a href="http://ncsu.edu/">http://ncsu.edu/</a>&gt; NOAA National Centers for Environmental Information &lt;<a href="http://ncdc.noaa.gov/">http://ncdc.noaa.gov/</a>&gt; /formerly NOAA?s National Climatic Data Center/
151 Patton Ave, Asheville, NC 28801
e: jbiard at cicsnc.org &lt;mailto:jbiard at cicsnc.org&gt;
o: +1 828 271 4900
/We will be updating our social media soon. Follow our current Facebook (NOAA National Climatic Data Center &lt;<a href="https://www.facebook.com/NOAANationalClimaticDataCenter">https://www.facebook.com/NOAANationalClimaticDataCenter</a>&gt; and NOAA National Oceanographic Data Center
&lt;<a href="https://www.facebook.com/noaa.nodc">https://www.facebook.com/noaa.nodc</a>&gt;) and Twitter (_at_NOAANCDC &lt;<a href="https://twitter.com/NOAANCDC">https://twitter.com/NOAANCDC</a>&gt; and @NOAAOceanData
&lt;<a href="https://twitter.com/NOAAOceanData">https://twitter.com/NOAAOceanData</a>&gt;) accounts for the latest information./
_______________________________________________
CF-metadata mailing list
CF-metadata at cgd.ucar.edu
<a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
----- End forwarded message -----
------------------------------
Subject: Digest Footer
_______________________________________________
CF-metadata mailing list
CF-metadata at cgd.ucar.edu
<a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
------------------------------
End of CF-metadata Digest, Vol 144, Issue 15
********************************************
</pre>
<span id="received"><dfn>Received on</dfn> Tue Apr 28 2015 - 12:00:18 BST</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start6902">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./6903.html" title="Next message in the list">Jim Biard: "[CF-metadata] How to define time coordinate in GPS?"</a></li>
<li><dfn>Previous message</dfn>: <a href="./6901.html" title="Previous message in the list">Maarten Sneep: "[CF-metadata] How to define time coordinate in GPS?"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="./6904.html" title="Next message in this discussion thread">Jim Biard: "[CF-metadata] How to define time coordinate in GPS"</a></li>
<li><a name="replies" id="replies"></a>
<dfn>Reply</dfn>: <a href="./6904.html" title="Message sent in reply to this message">Jim Biard: "[CF-metadata] How to define time coordinate in GPS"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg6902" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg6902" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg6902" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg6902" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:58:54 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./6901.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./6903.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
