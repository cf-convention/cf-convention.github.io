<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] How to define time coordinate in GPS? from Timothy Patterson on 2015-06-12 (cf-metadata-mailman)</title>
<meta name="Author" content="Timothy Patterson (Timothy.Patterson)" />
<meta name="Subject" content="[CF-metadata] How to define time coordinate in GPS?" />
<meta name="Date" content="2015-06-12" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./7113.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./7115.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] How to define time coordinate in GPS?</h1>
<!-- received="Fri Jun 12 04:12:29 2015" -->
<!-- isoreceived="20150612031229" -->
<!-- sent="Fri, 12 Jun 2015 12:12:29 +0200" -->
<!-- isosent="20150612101229" -->
<!-- name="Timothy Patterson" -->
<!-- email="Timothy.Patterson" -->
<!-- subject="[CF-metadata] How to define time coordinate in GPS?" -->
<!-- id="888F94E85551044BAE03E23F711A43F4D7D45F8F3B_at_EXW10.eum.root.eumetsat.int" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="5579BF3C.5040305_at_cicsnc.org" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start7114" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./7115.html" accesskey="d" title="Jim Biard: &quot;[CF-metadata] Page with searchable UDUNITS tables now available&quot;">Next message</a> ]
[ <a href="./7113.html" title="Heiko Klein: &quot;[CF-metadata] Roms: ocean_s_coordinate_g1 and g2?&quot;">Previous message</a> ]
[ <a href="./7111.html" title="Jim Biard: &quot;[CF-metadata] How to define time coordinate in GPS?&quot;">In reply to</a> ]
<!-- unextthread="start" -->
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg7114" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg7114" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg7114" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg7114" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Timothy Patterson &lt;<a href="mailto:Timothy.Patterson?Subject=Re%3A%20%5BCF-metadata%5D%20How%20to%20define%20time%20coordinate%20in%20GPS%3F">Timothy.Patterson</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Fri, 12 Jun 2015 12:12:29 +0200</span><br />
</address>
<br />
Thanks for the explanations, Jim.
<br />
<br />I may be totally wrong here, but (if there were no need for backwards compatibility) it seems to me that the convention for the standard &quot;time&quot; variable could make use of constructs that are used elsewhere in the convention.
<br />
<br />The time variable contains a count of seconds since a given base point in time. This base point could be defined as a scalar coordinate variable i.e. I'm measuring elapsed time and this coordinate is the point in time at which I'm measuring elapsed time.
<br />
<br />Also, the mapping of the elapsed time to calendar-dependent timestamps seems somewhat analogous to the use of the grid_mapping attribute used to convert coordinate variables to lat/lon. In this case, there could be a &quot;calendar_mapping&quot; variable which would have attributes that defined the calendar used by the producer and would allow the user to convert the elapsed time to timestamps in the calendar.
<br />
<br />Regards,
<br />
<br />Tim
<br />
<br /><br /><br /><br />----------------------------------
<br />
<br />Tim,
<br />
On 6/11/15 12:00 PM, Timothy Patterson wrote:
<br />
<br />................Jim's Suggested Update...............
<br />
<br />4.4.1 Calendar
<br />
In order to know what point in history has been measured by a given base date, base time, and time increment, one must know what calendar was used for the base date and time. The calendar attribute defines the particular date and time system that was used to express the reference time string found in the units attribute, and is assigned to the time coordinate variable. The values currently defined for calendar are:
<br />
...............................................
<br />
<br />Although they aren't explicitly defined above, am I right to assume that using the standard units convention for time;
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time:units = &quot;days since 1990-1-1 0:0:0&quot; ;
<br />
<br />the base date and base time correspond to the date/time string after the word &quot;since&quot; (1990-1-1 0:0:0) and the time increment corresponds to the units before the word &quot;since&quot; (days)?
<br />
Good question! I had assumed that the 'time increment' corresponded to an elapsed time value stored in the time variable, which is in the units declared in the 'before the word &quot;since&quot;' part of the units attribute. This should be reworded to make it clearer (whichever is meant).
<br />
<br /><br />Also that the calendar attribute would be applicable to the full units attribute - base date and base time and time increment.
<br />
To my way of thinking, the calendar attribute only applies to the base date and time. The measurement units (second, minute, hour, day, etc) are defined separately.
<br />
<br /><br />Doesn't this conflict with the current convention in Section 4.4 where it is strongly implied that the base date and time are always supplied as UTC times?
<br />
We have agreed that we need to rewrite section 4.4 to remove specification of UTC.
<br />
<br /><br />Also,  in Jonathan's last email he writes &quot; the encoded time coord is also an elapsed time, and is useful as such. The only situation in which it might have small dis- continuities is if the no-leap-second algorithm is used to encode and decode UTC and, as we have agreed, there should be a clear warning against not doing that if precision &lt;1 min is required.&quot;
<br />
<br />We are trying to use the CF conventions for instrument data and in this case, we're looking for much greater precision than 1 minute  so the difference between an encoded &quot;timestamp&quot; and an encoded &quot;elapsed time&quot; is important in our case. 
<br />
<br />Taking the suggested modified text at the start, would I be right in saying that the calendar modifier is also intended to modify the units.  So applying a UTC calendar to &quot;seconds since 1990-1-1 0:0:0&quot; is in effect modifying the units to be  &quot;utc_seconds since 1990-1-1 0:0:0&quot;, meaning that this is counted on a discontinuous UTC time scale and not a continuous elapsed seconds time scale.
<br />
<br />If my interpretation is correct, then this would remove the possibility  of being able to specify a point in time in UTC and then have a true elapsed count (i.e. continuous rather than with UTC leap second gaps) since that time. Some of our products are currently using this method to compact the time data. By counting up from a recent event (i.e. the start of a scan line) rather than the start of year 2000 we can encode the data as a ushort of milliseconds instead of a double of seconds. The timestamp of the start of the scan line is expressed as a UTC (according to my understanding of the current conventions) and the units as milliseconds.
<br />
<br />e.g.  time:units = &quot;milliseconds  since 2015-06-11 17:51:22&quot; ;
<br />
<br />We then work in relative times as we 're not interested in expressing these time values as a calendar &quot;timestamp&quot;.
<br />
<br />Does this still work under the proposed scheme?
<br />
My position is that there are no 'UTC seconds'. There are only SI seconds. The elapsed times in a time variable should never contain discontinuities. In the proposed scheme, or even in the current scheme, you should always be able to work correctly in relative times. In the current scheme the time system used for the base time is effectively defined as UTC. As long as you correctly represent your base date and time using the Gregorian calendar and UTC time system, and correctly count your elapsed times, your time variable is correctly formed. (If your base date and time were originally provided as TAI time or something else besides UTC time, you would need to correctly convert your original base date and time to UTC.)
<br />
<br />One of my goals in the discussion we have been having is to make sure that we don't define time and calendars such that it's considered OK to encode discontinuities into the elapsed times in time variables.
<br />
<br />Jonathan's mention of encoding discontinuities is part of the acknowledged reality that people may well have started with UTC timestamps and used POSIX time conversion functions to them into elapsed times because they weren't aware of the pitfalls. If your time resolution is large in comparison to the possible errors introduced by doing so, then this error is effectively ignorable. In your case, such an error can be significant.
<br />
<br />The new scheme involves refining our definitions and adding calendars that include definitions of the time system used (UTC, GPS, TAI, etc) in addition to the date system used (Gregorian, etc). I don't want any of them to state or imply that it's OK to introduce discontinuities into the elapsed times stored in the variables.
<br />
<br /><br />Regards,
<br />
<br />Tim
<br />
<br />Any email message from EUMETSAT is sent in good faith but shall neither be binding nor construed as constituting a commitment by EUMETSAT, except where provided for in a written agreement or contract or if explicitly stated in the email. Please note that any views or opinions presented in this email are solely those of the sender and do not necessarily represent those of EUMETSAT. This message and any attachments are intended for the sole use of the addressee(s) and may contain confidential and privileged information. Any unauthorised use, disclosure, dissemination or distribution (in whole or in part) of its contents is not permitted. If you received this message in error, please notify the sender and delete it from your system.
<br />
_______________________________________________
<br />
CF-metadata mailing list
<br />
CF-metadata at cgd.ucar.edu
<br />
<a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
<br />
Grace and peace,
<br />
<br />Jim
<br />
<pre>
--
Any email message from EUMETSAT is sent in good faith but shall neither be binding nor construed as constituting a commitment by EUMETSAT, except where provided for in a written agreement or contract or if explicitly stated in the email. Please note that any views or opinions presented in this email are solely those of the sender and do not necessarily represent those of EUMETSAT. This message and any attachments are intended for the sole use of the addressee(s) and may contain confidential and privileged information. Any unauthorised use, disclosure, dissemination or distribution (in whole or in part) of its contents is not permitted. If you received this message in error, please notify the sender and delete it from your system.
</pre>
<span id="received"><dfn>Received on</dfn> Fri Jun 12 2015 - 04:12:29 BST</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start7114">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./7115.html" title="Next message in the list">Jim Biard: "[CF-metadata] Page with searchable UDUNITS tables now available"</a></li>
<li><dfn>Previous message</dfn>: <a href="./7113.html" title="Previous message in the list">Heiko Klein: "[CF-metadata] Roms: ocean_s_coordinate_g1 and g2?"</a></li>
<li><dfn>In reply to</dfn>: <a href="./7111.html" title="Message to which this message replies">Jim Biard: "[CF-metadata] How to define time coordinate in GPS?"</a></li>
<!-- lnextthread="start" -->
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg7114" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg7114" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg7114" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg7114" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:58:57 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./7113.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./7115.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
