<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] standard names and vertical coordinate for bed stratigraphy / sediment layers from Bert Jagers on 2015-11-09 (cf-metadata-mailman)</title>
<meta name="Author" content="Bert Jagers (Bert.Jagers)" />
<meta name="Subject" content="[CF-metadata] standard names and vertical coordinate for bed stratigraphy / sediment layers" />
<meta name="Date" content="2015-11-09" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./7341.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./7343.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] standard names and vertical coordinate for bed stratigraphy / sediment layers</h1>
<!-- received="Mon Nov  9 14:02:20 2015" -->
<!-- isoreceived="20151109140220" -->
<!-- sent="Mon, 9 Nov 2015 21:02:20 +0000" -->
<!-- isosent="20151109210220" -->
<!-- name="Bert Jagers" -->
<!-- email="Bert.Jagers" -->
<!-- subject="[CF-metadata] standard names and vertical coordinate for bed stratigraphy / sediment layers" -->
<!-- id="8C2239F05BCC6A4D8A6EAC295B3B1A3D4D607E35_at_V-EXC-C02.DIRECTORY.INTRA" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="20151109181230.GA7119_at_met.reading.ac.uk" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start7342" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./7343.html" accesskey="d" title="Bert Jagers: &quot;[CF-metadata] standard names and vertical coordinate for bed stratigraphy / sediment layers&quot;">Next message</a> ]
[ <a href="./7341.html" title="Chris Barker: &quot;[CF-metadata] [netcdfgroup] Introducing netCDF Explorer&quot;">Previous message</a> ]
[ <a href="./7340.html" title="Jonathan Gregory: &quot;[CF-metadata] standard names and vertical coordinate for bed stratigraphy / sediment layers&quot;">In reply to</a> ]
<!-- unextthread="start" -->
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg7342" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg7342" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg7342" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg7342" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Bert Jagers &lt;<a href="mailto:Bert.Jagers?Subject=Re%3A%20%5BCF-metadata%5D%20standard%20names%20and%20vertical%20coordinate%20for%20bed%20stratigraphy%20%2F%20sediment%20layers">Bert.Jagers</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Mon, 9 Nov 2015 21:02:20 +0000</span><br />
</address>
<br />
Dear Jonathan,
<br />
<br />Thank you for your comments.
<br />
<br />* thickness_of_sediment_layers_below_sea_floor
<br />
<br /><em class="quotelev1">&gt; Is below_sea_floor necessary in this name? If the aim is to indicate what sediment you mean, would thickness_of_sea_floor_sediment_layer be OK?
</em><br />
<br />We came up with the &quot;below_sea_floor&quot; phrase since we considered to use this variable as a vertical coordinate as explained in the mail. Roy Lowry suggested (in a partially offline discussion) to replace the thickness variable with the proposed formula by an explicit neutral vertical coordinate &quot;depth_below_sea_floor&quot; and subsequently specify both maximum and minimum values per layer. This would be consistent with observation data but it would no longer be clear that the layers are consecutive (or you would have to check whether the minimum depth of one layer matches the maximum depth of the other layer). On the other hand I would love to get rid of the &quot;below_sea_floor&quot; addition since the layers could be in rivers, lakes, or below dry land as well.
<br />
<br />* mass_content_of_sediment_fraction_in_sediment_layer
<br />
* volume_fraction_of_sediment_fraction_in_sediment_layer
<br />
<br /><em class="quotelev1">&gt; sediment_fraction_of_sediment_layer sounds odd to me. Isn't it 100%?
</em><br />
<br />Yes, the name did feel odd to me as well, but it isn't 100%. In the model we can include any number of sediment fractions (think gravel, sand, silt, clay, but the sediment classes can be subdivided further or grouped differently dependent on the use case, so predefined enumeration is not an option). So, I would explain the term as the mass_content or volume_fraction of a particular sediment fraction (likely to be an array dimension to be associated with a string valued scalar coordinate containing sediment fraction names and auxiliary sediment fraction properties such as fraction specific minimum, median, and maximum grain size, specific density, etc.
<br />
<br /><em class="quotelev1">&gt; Perhaps it means solid_fraction_of_sediment_layer?
</em><br />
<br />The overall solid_fraction would be equivalent to 1-soil_porosity and hence we don't store it.
<br />
<br /><em class="quotelev1">&gt; In using mass_content you are following other standard names, I know, but it might not be clear what it means, and I wonder if mass_per_unit_area might be better, which is also in use.
</em><br />
<br />Mass_per_unit_area sounds better to me as well: &quot;sediment_fraction_mass_per_unit_area&quot; with either &quot;_in_sediment_layer&quot; added or cell measure sum over layer if layer thickness is coordinate.
<br />
<br /><em class="quotelev1">&gt; Could &quot;layer&quot; be omitted from the volume_fraction? - it's an intensive quantity, not dependent on layer thickness.
</em><br />
Yes, probably it can. Was trying to make names similar.
<br />
<br /><em class="quotelev1">&gt; Should these names also have sea_floor in them?
</em><br />
As indicated above, I would prefer to use sea_floor as little as possible. These names could be pretty generically.
<br />
<br /><em class="quotelev1">&gt; * soil_porosity
</em><br />
<br />It's OK to reuse this if it's exactly what you mean, but if sediment is not soil, you could propose a new name.
<br />
<br /><em class="quotelev1">&gt; Your suggestion for formula_terms isn't what this attribute is intended for, I would say. Its aim is to indicate how parametric vertical coordinates are converted into dimensional geolocated ones. I understand your need, to compute the bottom of the layer from the layer thicknesses and the vertical coordinate of the sea floor, but I wonder whether a CF convention is required. Are there other similar use-cases which would make this a more general need?
</em><br />
<br />Our model is not the only model to use multiple sediment layers, so I do think that it is not very specific to our own use case. However, there seems as Roy indicated some discussion how to store it most generically. There are a couple of options:
<br />
1) would be to specify a regular CF coordinate for the centres of the N layers and then upper and lower bounds of the N layers, but I consider this to be too verbose (and also there is currently no CF bounds formulation that would allow us to do precisely this): 3N values.
<br />
2) define per layer the maximum and minimum depth: 2N values. This still duplicates data, but seems to be consistent with observation data practices of SeaDataNet. Also separate minimum and maximum values suggest that layers may not be consecutive; there could be gaps; or layers may overlap. I'm interested in just a simple stack of layers.
<br />
3) define the N thicknesses of the layers and define how to determine the vertical coordinate using some formula (this is what I tried).
<br />
4) define the N+1 layer interfaces and use this as a coordinate for the quantities in the N layers. The CF conventions don't have any feature to support this. Following the UGRID development we worked a bit in this direction with SGRID: <a href="https://publicwiki.deltares.nl/display/NETCDF/Deltares+proposal+for+Staggered+Grid+data+model+%28SGRID%29">https://publicwiki.deltares.nl/display/NETCDF/Deltares+proposal+for+Staggered+Grid+data+model+%28SGRID%29</a>
<br />
<br />Best regards,
<br />
<br />Bert
<br />
<br />-----Original Message-----
<br />
From: CF-metadata [mailto:cf-metadata-bounces at cgd.ucar.edu] On Behalf Of Jonathan Gregory
<br />
Sent: 09 November 2015 19:13
<br />
To: cf-metadata at cgd.ucar.edu
<br />
Subject: [CF-metadata] standard names and vertical coordinate for bed stratigraphy / sediment layers
<br />
<br />Dear Bert
<br />
<br />The new quantities you want to name deserve standard names, I agree.
<br />
<br /><em class="quotelev1">&gt; * thickness_of_sediment_layers_below_sea_floor
</em><br />
<br />Is below_sea_floor necessary in this name? If the aim is to indicate what sediment you mean, would thickness_of_sea_floor_sediment_layer be OK?
<br />
<br /><em class="quotelev1">&gt; * mass_content_of_sediment_fraction_in_sediment_layer
</em><br />
<em class="quotelev1">&gt; * volume_fraction_of_sediment_fraction_in_sediment_layer
</em><br />
<br />sediment_fraction_of_sediment_layer sounds odd to me. Isn't it 100%? Perhaps it means solid_fraction_of_sediment_layer? In using mass_content you are following other standard names, I know, but it might not be clear what it means, and I wonder if mass_per_unit_area might be better, which is also in use. Could &quot;layer&quot; be omitted from the volume_fraction? - it's an intensive quantity, not dependent on layer thickness. Should these names also have sea_floor in them?
<br />
<br /><em class="quotelev1">&gt; * soil_porosity
</em><br />
<br />It's OK to reuse this if it's exactly what you mean, but if sediment is not soil, you could propose a new name.
<br />
<br />Your suggestion for formula_terms isn't what this attribute is intended for, I would say. Its aim is to indicate how parametric vertical coordinates are converted into dimensional geolocated ones. I understand your need, to compute the bottom of the layer from the layer thicknesses and the vertical coordinate of the sea floor, but I wonder whether a CF convention is required. Are there other similar use-cases which would make this a more general need?
<br />
<br />Best wishes
<br />
<br />Jonathan
<br />
<br />----- Forwarded message from Bert Jagers &lt;Bert.Jagers at deltares.nl&gt; -----
<br />
<br /><em class="quotelev1">&gt; Date: Sun, 1 Nov 2015 09:46:04 +0000
</em><br />
<em class="quotelev1">&gt; From: Bert Jagers &lt;Bert.Jagers at deltares.nl&gt;
</em><br />
<em class="quotelev1">&gt; To: CF Metadata Mail List &lt;cf-metadata at cgd.ucar.edu&gt;
</em><br />
<em class="quotelev1">&gt; Subject: [CF-metadata] standard names and vertical coordinate for bed
</em><br />
<em class="quotelev1">&gt;       stratigraphy / sediment layers
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Dear all,
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; We are trying to capture bed stratigraphy in a CF compliant NetCDF file. What do I mean by bed stratigraphy? Well, if you start digging in the ground you will come across sediment layers with different properties - that layering is referred to as bed stratigraphy. For biochemical models we may be interested in representing layers of just a few mm thick (to capture transitions been oxygen based chemistry to nitrate or sulfur based chemistry) while for coastal/estuarine/river morphodynamic studies the modeled layers would typically be 0-50 cm thick. On the other end of the spectrum we do studies to capture the long-term build-up of bed stratigraphy for future oil and gas reservoirs and then layers may be even thicker. See for instance the white-yellow-red-black colors representing the sand/clay ratio in this figure:
</em><br />
<em class="quotelev1">&gt; <a href="https://www.deltares.nl/app/uploads/2015/09/Morphology-and-stratigraph">https://www.deltares.nl/app/uploads/2015/09/Morphology-and-stratigraph</a>
</em><br />
<em class="quotelev1">&gt; y-in-a-numerical-analogue-735x389.png
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; For the time being we can assume the number of layers fixed, but the thickness and properties of layers and vertical position of the layers varies over time due to processes such as erosion and deposition, consolidation, and bioturbation. With a significant number of layers included in the model and a fair number of output times to capture the processes responsible for the development of the bed stratigraphy, storage efficiency is important. For this reason I'm trying to avoid the classic CF route of storing a vertical position for each layer center plus for each layer the upper and lower bound which duplicates a lot of vertical information. Our proposal is to introduce a quantity with the following standard name:
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; * thickness_of_sediment_layers_below_sea_floor
</em><br />
<em class="quotelev1">&gt; This would typically be a NTIME x NCELLS x NLAYERS array (where NCELLS could be 1-dimensional for an unstructured grid or 2-dimensional, i.e. IMAX x JMAX, for a structured grid model) representing the the thickness of the NLAYERS sediment layers. By the way please note that the administration of layers is in general carried independently per computational cell, so layer k of cell j1 does not need to be connected to layer k of neighboring cell j2. We would also like to use this array as auxiliary vertical coordinate in a way similar to the dimensionless vertical coordinates. The addition &quot;below_sea_floor&quot; hints at this second purpose. We would like to reuse the formula_terms attribute of the dimensionless vertical coordinates here:
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; float DZSED(NTIME, NCELLS, NLAYERS) ;
</em><br />
<em class="quotelev1">&gt;    DZSED:long_name = &quot;thickness of modelled sediment layers&quot; ;
</em><br />
<em class="quotelev1">&gt;    DZSED:standard_name = &quot;thickness_of_sediment_layers_below_sea_floor&quot; ;
</em><br />
<em class="quotelev1">&gt;    DZSED:formula_terms = &quot;zref: BL thick: DZSED lyrdim: NLAYERS&quot;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; where
</em><br />
<em class="quotelev1">&gt; - zref would point to a variable &quot;sea_floor_depth_below_geoid&quot; or an altitude equivalent thereof since we can't differentiate between the altitude of the sea floor, the river bed, or the flood plains and the latter ones are commonly stored positive upward.
</em><br />
<em class="quotelev1">&gt; - thick refers to the thickness variable itself.
</em><br />
<em class="quotelev1">&gt; - lyrdim refers to the dimension associated with the layers; we need this since contrary to the dimensionless vertical coordinates this auxiliary vertical coordinate will typically have multiple dimensions.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; The vertical position of the top of layer k would then be computed as
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;     z(n,ji,k) = zref(n,ji) - sum(thick(n,ji,lyrdim), lyrdim = 1:k-1)
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; and the bottom of the layer would be located at:
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;     z(n,ji,k) = zref(n,ji) - sum(thick(n,ji,lyrdim), lyrdim = 1:k)
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; where n represents the typical time dimension and ji reprent one or two horizontal dimensions. Note that this formula assumes that lyrdim = 1 corresponds to the top layer. We don't specify a specific formula for the representative center of the layer; it's a location that we don't use.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Associated with each layer we aim to store quantities such as:
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; * mass_content_of_sediment_fraction_in_sediment_layer
</em><br />
<em class="quotelev1">&gt; Typically a NTIME x NCELLS x NLAYERS x NFRAC array containing the mass per unit area per sediment fraction per layer per time step stored (unit kg/m2).
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; and optionally:
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; * volume_fraction_of_sediment_fraction_in_sediment_layer
</em><br />
<em class="quotelev1">&gt; &quot;Volume fraction&quot; is used in the construction volume_fraction_of_X_in_Y, where X is a material constituent of Y. Typically a NTIME x NCELLS x NLAYERS x NFRAC array containing the volume fraction per sediment fraction per layer per time step stored (unit 1). The dimension representing the number of sediment fractions NFRAC may include multiple model dependent gravel, sand, silt, clay fractions, so we need to generalize beyond the scope of the currently existing standard names of volume_fraction_of_clay/sand/silt_in_soil.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; * soil_porosity
</em><br />
<em class="quotelev1">&gt; The soil porosity is the proportion of its total volume not occupied by soil solids. This is an existing standard_name which most likely can be reused.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; The last two items link to already existing CF standard names based on the word &quot;soil&quot;. Since we typically focus only on the physical processes of sediment transport, we usually refer to the layers as sediment_layers, but it might be okay to generalize the above to soil_layers.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; We are starting with the in-house implementation now, but the code will start to be spread more widely early next year. So, I'm looking forward to your feedback and hope to make good progress on the storage convention.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Best regards,
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Bert
</em><br />
<em class="quotelev1">&gt; DISCLAIMER: This message is intended exclusively for the addressee(s) and may contain confidential and privileged information. If you are not the intended recipient please notify the sender immediately and destroy this message. Unauthorized use, disclosure or copying of this message is strictly prohibited. The foundation 'Stichting Deltares', which has its seat at Delft, The Netherlands, Commercial Registration Number 41146461, is not liable in any way whatsoever for consequences and/or damages resulting from the improper, incomplete and untimely dispatch, receipt and/or content of this e-mail.
</em><br />
<em class="quotelev1">&gt; _______________________________________________
</em><br />
<em class="quotelev1">&gt; CF-metadata mailing list
</em><br />
<em class="quotelev1">&gt; CF-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<br />----- End forwarded message -----
<br />
_______________________________________________
<br />
CF-metadata mailing list
<br />
CF-metadata at cgd.ucar.edu
<br />
<a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
<br />
DISCLAIMER: This message is intended exclusively for the addressee(s) and may contain confidential and privileged information. If you are not the intended recipient please notify the sender immediately and destroy this message. Unauthorized use, disclosure or copying of this message is strictly prohibited. The foundation 'Stichting Deltares', which has its seat at Delft, The Netherlands, Commercial Registration Number 41146461, is not liable in any way whatsoever for consequences and/or damages resulting from the improper, incomplete and untimely dispatch, receipt and/or content of this e-mail.
<br />
<span id="received"><dfn>Received on</dfn> Mon Nov 09 2015 - 14:02:20 GMT</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start7342">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./7343.html" title="Next message in the list">Bert Jagers: "[CF-metadata] standard names and vertical coordinate for bed stratigraphy / sediment layers"</a></li>
<li><dfn>Previous message</dfn>: <a href="./7341.html" title="Previous message in the list">Chris Barker: "[CF-metadata] [netcdfgroup] Introducing netCDF Explorer"</a></li>
<li><dfn>In reply to</dfn>: <a href="./7340.html" title="Message to which this message replies">Jonathan Gregory: "[CF-metadata] standard names and vertical coordinate for bed stratigraphy / sediment layers"</a></li>
<!-- lnextthread="start" -->
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg7342" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg7342" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg7342" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg7342" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:59:00 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./7341.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./7343.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
