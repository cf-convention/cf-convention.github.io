<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] Metadata/standard names for variables involving thresholds (e.g. climate indices) from martin.juckes at stfc.ac.uk on 2016-10-17 (cf-metadata-mailman)</title>
<meta name="Author" content="martin.juckes at stfc.ac.uk (martin.juckes)" />
<meta name="Subject" content="[CF-metadata] Metadata/standard names for variables involving thresholds (e.g. climate indices)" />
<meta name="Date" content="2016-10-17" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./7854.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./7856.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] Metadata/standard names for variables involving thresholds (e.g. climate indices)</h1>
<!-- received="Mon Oct 17 09:08:26 2016" -->
<!-- isoreceived="20161017080826" -->
<!-- sent="Mon, 17 Oct 2016 15:08:26 +0000" -->
<!-- isosent="20161017150826" -->
<!-- name="martin.juckes at stfc.ac.uk" -->
<!-- email="martin.juckes" -->
<!-- subject="[CF-metadata] Metadata/standard names for variables involving thresholds (e.g. climate indices)" -->
<!-- id="E21FBC3F00D7304687CB46529F9676D701028A085B_at_exchmbx01" -->
<!-- charset="US-ASCII" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start7855" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./7856.html" accesskey="d" title="Jonathan Gregory: &quot;[CF-metadata]  Broken links to NUG in conventions document&quot;">Next message</a> ]
[ <a href="./7854.html" title="Jonathan Gregory: &quot;[CF-metadata]  Usage of histogram_of_X_over_Z&quot;">Previous message</a> ]
<!-- unextthread="start" -->
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg7855" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg7855" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg7855" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg7855" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: martin.juckes at stfc.ac.uk &lt;<a href="mailto:martin.juckes?Subject=Re%3A%20%5BCF-metadata%5D%20Metadata%2Fstandard%20names%20for%20variables%20involving%20thresholds%20(e.g.%20climate%20indices)">martin.juckes</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Mon, 17 Oct 2016 15:08:26 +0000</span><br />
</address>
<br />
Dear Lars,
<br />
<br />see comments in line below:
<br />
<br />Martin
<br />
---------------------------
<br />
Dear all,
<br />
<br />Before the summer I asked in separate emails a few questions related to standard names. Based on the responses I have worked on this a bit more and made some good progress, but there still are some open issues that I am trying to wrap my head around. Most of the issues are related to making use of existing standard names involving thresholds to describe well established climate indices (aka indices of climate extremes). To get an overview of the issues I collect them here (with reference to the previous email threads), but if necessary we can again fork them:
<br />
<br />1. Canonical units (<a href="http://mailman.cgd.ucar.edu/pipermail/cf-metadata/2016/058800.html">http://mailman.cgd.ucar.edu/pipermail/cf-metadata/2016/058800.html</a>, 3rd point):
<br />
&quot;number_of_days_....&quot; variables have dimension &quot;1&quot; (dimensionless) and &quot;spell_length_of_days_...&quot; variables have dimension &quot;day&quot;. This seems somewhat inconsistent as both standard names specify &quot;_days_&quot;. As both standard names contain the unit it may from a formal point of view be more appropriate that both would be dimensionless, but from a practical point of view, e.g. when designing software, it would be (much) more useful to have the unit (&quot;day&quot;) in the metadata rather than having to parse it from the standard name for these particular variables, when this is mostly not necessary.
<br />
<br />It does appear problematic to have units which will be confusing for the majority of users who are likely to be interested in these variables. Perhaps we could sidestep the issue by adding new standard names of the form &quot;time_with_air_temperature_above_threshold&quot; etc. Changing the units of the existing standard names would be problematic for existing data files which are valid with the current definitions.
<br />
<br />2. Climatological time variable (<a href="http://mailman.cgd.ucar.edu/pipermail/cf-metadata/2016/058800.html">http://mailman.cgd.ucar.edu/pipermail/cf-metadata/2016/058800.html</a>, 2nd point):
<br />
It is not clear to me why &quot;number_of_days_...&quot; and &quot;spell_length_of_days_...&quot; variables must have a climatological time variable. I would suggest that it makes sense to have an ordinary time coordinate variable that allows bounds to be specified. For example, assume that we have a time-series of daily near-surface temperature fields from a CMIP5 model (&quot;tas&quot;) and want for each month to calculate the number_of_days_with_air_temperature_above_threshold. I.e. this is not much different from calculating the monthly mean temperature, for which an ordinary time coordinate variable with bounds is used. The same line of argument applies for &quot;spell_length_of _days_...&quot; variables and the two &quot;integral_of_air_temperature_...&quot; variables.
<br />
<br />The climatological time axis specifies what kind of &quot;air_temperature&quot; is being compared against the threshold (e.g. daily mean, daily max).
<br />
<br />3. Threshold must have a coordinate variable . (<a href="http://mailman.cgd.ucar.edu/pipermail/cf-metadata/2016/058824.html">http://mailman.cgd.ucar.edu/pipermail/cf-metadata/2016/058824.html</a>):
<br />
This means that the threshold must be either a constant or several alternative constants. As I understand it, it is neither possible to have a two-dimensional threshold that varies over the domain, e.g. based on a climatological (quantile) value for each gridpoint, nor to have a three-dimensional threshold, e.g. a seasonally varying climatological threshold for each gridpoint. I can envisage two ways to allow 2-/3-dim thresholds: either 1) allow ancillary variables as thresholds. The ancillary variable would have a coordinate variable providing the the underlying constant(s), e.g. quantile levels. Or 2) allow the threshold to have a different unit from the main variable which then enables the underlying quantiles to be used as threshold variable directly where the actual 2-/3-dim climatological thresholds are available as an ancillary variable.
<br />
<br />You could try the following, which, I believe, allows a separate threshold at each lat,lon point.
<br />
&nbsp;&nbsp;&nbsp;float myClimateIndex( index )
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;coordinates: lat lon threshold
<br />
&nbsp;&nbsp;&nbsp;float lat(index):
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;standard_name: latitude
<br />
&nbsp;&nbsp;&nbsp;float lon(index):
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;standard_name: longitude
<br />
&nbsp;&nbsp;&nbsp;&nbsp;float threshold(index):
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;standard_name: air_temperature
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;coordinates: lat lon
<br />
<br />4. Standard name of the threshold variable (<a href="http://mailman.cgd.ucar.edu/pipermail/cf-metadata/2016/058856.html">http://mailman.cgd.ucar.edu/pipermail/cf-metadata/2016/058856.html</a>):
<br />
The standard name air_temperature_threshold is only used in the definition of integral_of_air_temperature_deficit_wrt_time and integral_of_air_temperature_excess_wrt_time. For other threshold-based standard names involving air temperature, wind and lwe thickness of precipitation (listed below) the explanation reads &quot;. must have a . variable with the a standard name of X to supply the threshold(s)&quot;. I.e. the threshold variable must have the same standard name as 'main variable' to which the threshold is applied.
<br />
The latter seems more in line with the view Jonathan expressed in a previous email exchange (lower part of <a href="http://mailman.cgd.ucar.edu/pipermail/cf-metadata/2014/057420.html">http://mailman.cgd.ucar.edu/pipermail/cf-metadata/2014/057420.html</a>).
<br />
Based on this, my suggestion is to change the explanation of the two standard names integral_of_air_temperature_deficit|excess_wrt_time to read
<br />
&quot; ... The air_temperature variable, which is the data variable of the integral should have a
<br />
scalar coordinate variable or a size-one coordinate variable with the standard name of
<br />
either air_temperature (preferred) or air_temperature_threshold to indicate the threshold...&quot;
<br />
With this minor change consistency with other threshold-based variables is introduced (and encouraged) at the same time as backward compatibility is maintained.
<br />
<br />This would improve consistency, so I support this proposed modification of the guidance.
<br />
<br />Kind regards,
<br />
Lars B?rring
<br />
<span id="received"><dfn>Received on</dfn> Mon Oct 17 2016 - 09:08:26 BST</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start7855">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./7856.html" title="Next message in the list">Jonathan Gregory: "[CF-metadata]  Broken links to NUG in conventions document"</a></li>
<li><dfn>Previous message</dfn>: <a href="./7854.html" title="Previous message in the list">Jonathan Gregory: "[CF-metadata]  Usage of histogram_of_X_over_Z"</a></li>
<!-- lnextthread="start" -->
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg7855" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg7855" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg7855" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg7855" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:59:07 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./7854.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./7856.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
