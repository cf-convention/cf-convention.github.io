<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] Usage of histogram_of_X_over_Z from Jonathan Gregory on 2016-10-27 (cf-metadata-mailman)</title>
<meta name="Author" content="Jonathan Gregory (j.m.gregory)" />
<meta name="Subject" content="[CF-metadata] Usage of histogram_of_X_over_Z" />
<meta name="Date" content="2016-10-27" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./7877.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./7879.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] Usage of histogram_of_X_over_Z</h1>
<!-- received="Thu Oct 27 10:08:11 2016" -->
<!-- isoreceived="20161027090811" -->
<!-- sent="Thu, 27 Oct 2016 17:08:11 +0100" -->
<!-- isosent="20161027160811" -->
<!-- name="Jonathan Gregory" -->
<!-- email="j.m.gregory" -->
<!-- subject="[CF-metadata] Usage of histogram_of_X_over_Z" -->
<!-- id="20161027160811.GA7516_at_met.reading.ac.uk" -->
<!-- charset="US-ASCII" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start7878" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./7879.html" accesskey="d" title="Clune, Thomas L.: &quot;[CF-metadata] annotating vector quantities  (e.g., (u,v) winds)&quot;">Next message</a> ]
[ <a href="./7877.html" title="Nowicki, Sophie: &quot;[CF-metadata] additional standard name for ISMIP6&quot;">Previous message</a> ]
<!-- unextthread="start" -->
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg7878" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg7878" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg7878" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg7878" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Jonathan Gregory &lt;<a href="mailto:j.m.gregory?Subject=Re%3A%20%5BCF-metadata%5D%20Usage%20of%20histogram_of_X_over_Z">j.m.gregory</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Thu, 27 Oct 2016 17:08:11 +0100</span><br />
</address>
<br />
Dear Martin
<br />
<br /><em class="quotelev1">&gt; In broad usage, I have the impression that a &quot;histogram&quot; can be expressed as either a count or a percentage, so we should be explicit in the convention if we want a narrower definition here. A narrower definition is probably needed, as there would otherwise be no way of distinguishing between the two.
</em><br />
<br />I agree with that but the idea is that a standard name of histogram would be
<br />
for a count, while probability would be for a fraction. The latter could be
<br />
0-1 or 0-100% - they are dimensionally equivalent but different units. We
<br />
could clarify that in the guidelines.
<br />
<br /><em class="quotelev1">&gt; There are two further CMIP variables, both or which are bi-variate distributions, with bins of spectral bands and cloud top height ranges, which I'd like to bring into the discussion, but it might be useful to transfer the conclusions of the exchange so far into a ticket first. I think the two additional variables could be covered by a simple extension to &quot;probability_density_function_of_X_and_Y&quot; ... though you might want to insert &quot;joint_&quot; at the beginning of the term.
</em><br />
<br />OK, that's interesting. I agree that it would fit.
<br />
<br />Best wishes
<br />
<br />Jonathan
<br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Dear Martin and Alejandro  (following off-list discussions)
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev2">&gt; &gt; The CF definitions say ''&quot;histogram_of_X[_over_Z]&quot; means histogram (i.e. number of counts for each range of X) of variations (over Z) of X.'
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Yes, that's in the guidelines for construction of standard names, and there
</em><br />
<em class="quotelev1">&gt; are only two of them at present, as you say. The simplest case is when you
</em><br />
<em class="quotelev1">&gt; have some quantity Q depending on only one dimension, Q(Z). Then the histogram
</em><br />
<em class="quotelev1">&gt; H(Q) is the number of values of Q which fall into each interval of Q,
</em><br />
<em class="quotelev1">&gt; considering variation over Z.  In general there could be more than one
</em><br />
<em class="quotelev1">&gt; dimension retained, and more than one removed. If the original field was
</em><br />
<em class="quotelev1">&gt; Q(P,Y,Z,T), we might construct a histogram H(Q,Z,T), for instance, containing
</em><br />
<em class="quotelev1">&gt; the frequencies of values of Q falling into joint intervals of Q, Z and T, for
</em><br />
<em class="quotelev1">&gt; variation over P and Y. Following the guideline above, we would call this a
</em><br />
<em class="quotelev1">&gt; histogram of Q over P and Y, I think.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; It is not necessary to indicate in the standard name the dimensions which
</em><br />
<em class="quotelev1">&gt; the histogram depends on (Z and T in my example) because the coordinate
</em><br />
<em class="quotelev1">&gt; variables (of Z and T) make that clear. Martin suggests that by this argument
</em><br />
<em class="quotelev1">&gt; we could also omit Q from the standard name, and just call it a histogram
</em><br />
<em class="quotelev1">&gt; (or frequency distribution) rather than a histogram of Q, where Q is air
</em><br />
<em class="quotelev1">&gt; temperature, precipitation amount, backscattering ratio, etc. I think there
</em><br />
<em class="quotelev1">&gt; are two reasons why we include Q in the standard name,
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; * I think a histogram of air temperature is not the same geophysical quantity
</em><br />
<em class="quotelev1">&gt; as a histogram of precipitation amount, for instance, so they should be
</em><br />
<em class="quotelev1">&gt; distinguished by standard name.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; * Although histograms are pure numbers, and so are probabilities, probability
</em><br />
<em class="quotelev1">&gt; densities are not. Histograms, probability distributions and probability
</em><br />
<em class="quotelev1">&gt; density functions are all related ways of expressing the same information.
</em><br />
<em class="quotelev1">&gt; In the guidelines, we foresee that we might need names for all of them (though
</em><br />
<em class="quotelev1">&gt; so far we have only histograms) and it would make sense to give them consistent
</em><br />
<em class="quotelev1">&gt; names. The probability density function of air temperature has units of K-1,
</em><br />
<em class="quotelev1">&gt; and of precipitation amount kg-1 m2, for instance. Because they have different
</em><br />
<em class="quotelev1">&gt; canonical units, they must have different standard names, so Q needs to be
</em><br />
<em class="quotelev1">&gt; included in the standard name.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Cell methods describe how the values represent variation within the cells.
</em><br />
<em class="quotelev1">&gt; The transformation from the values of a quantity to a histogram of the
</em><br />
<em class="quotelev1">&gt; quantity makes the original quantity into a dimension. This seems more of
</em><br />
<em class="quotelev1">&gt; a radical transformation than computing a mean or a standard deviation, which
</em><br />
<em class="quotelev1">&gt; doesn't change the dimensions of the variable, but just reduces their size
</em><br />
<em class="quotelev1">&gt; (to unity if completely collapsed). A frequency distribution of Q is
</em><br />
<em class="quotelev1">&gt; regarded as a different geophysical quantity from Q itself, so we have not
</em><br />
<em class="quotelev1">&gt; used cell methods to describe the relationship. Of course, this is a bit
</em><br />
<em class="quotelev1">&gt; arbitrary (like everything else in the CF convention!).
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; I agree with Martin that we could omit the &quot;over&quot; part of the standard name for
</em><br />
<em class="quotelev1">&gt; histograms, probabilities and probability densities. It is useful to retain the
</em><br />
<em class="quotelev1">&gt; collapsed dimensions as size-1 dimensions, so that their original range can
</em><br />
<em class="quotelev1">&gt; be recorded. They could be assigned cell_method of &quot;sum&quot;, the default for
</em><br />
<em class="quotelev1">&gt; extensive quantities, because the histogram applies to their entire range.
</em><br />
<em class="quotelev1">&gt; The same applies to the variable with has been histogrammed and is now a
</em><br />
<em class="quotelev1">&gt; dimension; the histogram is a sum for each of its cells.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; For example, in the 1D case, suppose the original field is air_temperature
</em><br />
<em class="quotelev1">&gt; as a function of time only. Then the histogram variable is
</em><br />
<em class="quotelev1">&gt;   float hair(tair);
</em><br />
<em class="quotelev1">&gt;     hair:standard_name=&quot;histogram_of_air_temperature&quot;;
</em><br />
<em class="quotelev1">&gt;     hair:units=&quot;1&quot;;
</em><br />
<em class="quotelev1">&gt;     hair:cell_methods=&quot;time: sum tair: sum&quot;;
</em><br />
<em class="quotelev1">&gt;     hair:coordinates=&quot;time&quot;;
</em><br />
<em class="quotelev1">&gt;   float time; // scalar coordinate variable with bounds
</em><br />
<em class="quotelev1">&gt;   float tair(tair);
</em><br />
<em class="quotelev1">&gt;     tair:units=&quot;K&quot;;
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; As a multidimensional example, suppose the original field is
</em><br />
<em class="quotelev1">&gt;   float tair(time,altitude,latitude,longitude);
</em><br />
<em class="quotelev1">&gt;     tair:units=&quot;K&quot;;
</em><br />
<em class="quotelev1">&gt;     tair:standard_name=&quot;air_temperature&quot;;
</em><br />
<em class="quotelev1">&gt;     tair:cell_methods=&quot;altitude: mean area: mean time: mean&quot;;
</em><br />
<em class="quotelev1">&gt; from which we might construct
</em><br />
<em class="quotelev1">&gt;   float pair(tair,time,altitude);
</em><br />
<em class="quotelev1">&gt;     pair:standard_name=&quot;probability_density_function_of_air_temperature&quot;;
</em><br />
<em class="quotelev1">&gt;     pair:units=&quot;K-1&quot;;
</em><br />
<em class="quotelev1">&gt;     pair:cell_methods=&quot;altitude: mean time: mean area: sum tair: mean&quot;;
</em><br />
<em class="quotelev1">&gt;     pair:coordinates=&quot;latitude longitude&quot;; // to record the ranges
</em><br />
<em class="quotelev1">&gt; Here, I suggest that the cell_method for area is &quot;sum&quot;, because the PDF
</em><br />
<em class="quotelev1">&gt; applies to the whole area, which is an extensive quantity. For air temperature
</em><br />
<em class="quotelev1">&gt; it seems more sense to interpret a PDF as a mean within cells, since a PDF is
</em><br />
<em class="quotelev1">&gt; an intensive quantity - you can interpolate it, for example - but not a point
</em><br />
<em class="quotelev1">&gt; quantity if it's calculated from a histogram with finite bin-widths.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Best wishes
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Jonathan
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; _______________________________________________
</em><br />
<em class="quotelev1">&gt; CF-metadata mailing list
</em><br />
<em class="quotelev1">&gt; CF-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<br />----- End forwarded message -----
<br />
<span id="received"><dfn>Received on</dfn> Thu Oct 27 2016 - 10:08:11 BST</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start7878">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./7879.html" title="Next message in the list">Clune, Thomas L.: "[CF-metadata] annotating vector quantities  (e.g., (u,v) winds)"</a></li>
<li><dfn>Previous message</dfn>: <a href="./7877.html" title="Previous message in the list">Nowicki, Sophie: "[CF-metadata] additional standard name for ISMIP6"</a></li>
<!-- lnextthread="start" -->
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg7878" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg7878" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg7878" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg7878" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:59:07 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./7877.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./7879.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
