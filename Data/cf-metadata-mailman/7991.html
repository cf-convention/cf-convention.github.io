<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] Feedback requested on proposed CF Simple Geometries from David Blodgett on 2017-02-02 (cf-metadata-mailman)</title>
<meta name="Author" content="David Blodgett (dblodgett)" />
<meta name="Subject" content="[CF-metadata] Feedback requested on proposed CF Simple Geometries" />
<meta name="Date" content="2017-02-02" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./7990.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./7992.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] Feedback requested on proposed CF Simple Geometries</h1>
<!-- received="Thu Feb  2 06:53:54 2017" -->
<!-- isoreceived="20170202065354" -->
<!-- sent="Thu, 2 Feb 2017 07:53:54 -0600" -->
<!-- isosent="20170202135354" -->
<!-- name="David Blodgett" -->
<!-- email="dblodgett" -->
<!-- subject="[CF-metadata] Feedback requested on proposed CF Simple Geometries" -->
<!-- id="74D57E57-9BBF-42D1-9739-289B5C922523_at_usgs.gov" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="20170202093109.GA6584_at_met.reading.ac.uk" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start7991" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./7992.html" accesskey="d" title="David Blodgett: &quot;[CF-metadata] Extension of Discrete Sampling Geometries for Simple Features&quot;">Next message</a> ]
[ <a href="./7990.html" title="Elodie Fernandez: &quot;[CF-metadata] Standard name and area type tables updated&quot;">Previous message</a> ]
[ <a href="./7989.html" title="Jonathan Gregory: &quot;[CF-metadata] Feedback requested on proposed CF Simple Geometries&quot;">In reply to</a> ]
<!-- unextthread="start" -->
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg7991" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg7991" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg7991" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg7991" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: David Blodgett &lt;<a href="mailto:dblodgett?Subject=Re%3A%20%5BCF-metadata%5D%20Feedback%20requested%20on%20proposed%20CF%20Simple%20Geometries">dblodgett</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Thu, 2 Feb 2017 07:53:54 -0600</span><br />
</address>
<br />
Dear Jonathan,
<br />
<br />As I mentioned in my response yesterday, we have worked through these issues and think we have a compromise proposal for the community. 
<br />
<br />Since the conversation is active, I?ll go ahead and share our work with the list in a follow up email in a moment.
<br />
<br />A couple specific responses to your note below:
<br />
<br />There is a balance to be found between ?opaque? and ?transparent? encoding of geometries (or ragged arrays for that matter). ?Transparent? tends to require more dimensions and really breaks the geometries apart while ?opaque? starts to impinge on the human readability and self-describing ideals of CF. We feel that a middle way is available to us and I?ll outline the logic for that in my follow up.
<br />
<br />Regarding the indexed array. The approach (to use node sharing and the indexed array notation) we will propose seems to be good for a couple reasons. First, it allows data to be topologically intact without the need for node-comparison. This is very important for some applications and we feel should be possible in the encoding. Second, it is in-line with the approach taken by UGRID and will be familiar to some for that reason. The argument around storage volume can go either way. You are right that in cases where people don?t have shared nodes, it will be extra. But I?m not convinced this is a factor that would change the decision based on the first two considerations.
<br />
<br />Regards,
<br />
<br />- Dave
<br />
<br /><em class="quotelev1">&gt; On Feb 2, 2017, at 3:31 AM, Jonathan Gregory &lt;j.m.gregory at reading.ac.uk&gt; wrote:
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Dear Ben and Chris
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Following Chris's comment about preferring variables to multi-valued
</em><br />
<em class="quotelev1">&gt; attributes, here are the examples for linestring and multipolygon redone so
</em><br />
<em class="quotelev1">&gt; that both use variables to store the counts of parts and nodes. In this scheme
</em><br />
<em class="quotelev1">&gt; more variables and dimensions are needed, but it may be easier to read and it
</em><br />
<em class="quotelev1">&gt; is more CF-like, because the topology information is a &quot;container&quot; variable,
</em><br />
<em class="quotelev1">&gt; like the CF grid_mapping and the ugrid mesh topology, having no numerical
</em><br />
<em class="quotelev1">&gt; information in itself, just with attributes that point to variables.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt;  dimensions:
</em><br />
<em class="quotelev1">&gt;    station = 3; // stream segments
</em><br />
<em class="quotelev1">&gt;    time = UNLIMITED;
</em><br />
<em class="quotelev1">&gt;    node = 9; // = 2 + 4 + 3
</em><br />
<em class="quotelev1">&gt;  variables:
</em><br />
<em class="quotelev1">&gt;    float flow(station,time) ;
</em><br />
<em class="quotelev1">&gt;      flow:units=&quot;m3 s-1&quot;;
</em><br />
<em class="quotelev1">&gt;      flow:topology=&quot;SOMETHING&quot;;
</em><br />
<em class="quotelev1">&gt;    double time(time) ;
</em><br />
<em class="quotelev1">&gt;      time:standard_name = &quot;time&quot;;
</em><br />
<em class="quotelev1">&gt;      time:units = &quot;days since 1970-01-01 00:00:00&quot; ;
</em><br />
<em class="quotelev1">&gt;    char SOMETHING;
</em><br />
<em class="quotelev1">&gt;      SOMETHING:node_coordinates=&quot;lon lat&quot;;
</em><br />
<em class="quotelev1">&gt;      SOMETHING:node_count=&quot;node_count_var&quot;;
</em><br />
<em class="quotelev1">&gt;      SOMETHING:topology_type=&quot;linestring&quot;;
</em><br />
<em class="quotelev1">&gt;    int node_count_var(station);  // number of nodes for each linestring
</em><br />
<em class="quotelev1">&gt;    float lon(node) ;
</em><br />
<em class="quotelev1">&gt;      lon:standard_name = &quot;longitude&quot;;
</em><br />
<em class="quotelev1">&gt;      lon:units = &quot;degrees_east&quot;;
</em><br />
<em class="quotelev1">&gt;    float lat(node) ;
</em><br />
<em class="quotelev1">&gt;      lat:standard_name = &quot;latitude&quot;;
</em><br />
<em class="quotelev1">&gt;      lat:units = &quot;degrees_north&quot; ;
</em><br />
<em class="quotelev1">&gt;  data:
</em><br />
<em class="quotelev1">&gt;    node_count_var=2, 4, 3;
</em><br />
<em class="quotelev1">&gt;    lon=0, 1,  0, -1, -2, -3,  2, 3, 4;
</em><br />
<em class="quotelev1">&gt;    lat=51, 52,  51, 50, 50, 49,  55, 55, 56;
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt;  dimensions:
</em><br />
<em class="quotelev1">&gt;    station = 3; // collections of polygons
</em><br />
<em class="quotelev1">&gt;    time = UNLIMITED;
</em><br />
<em class="quotelev1">&gt;    node = 24; // = 4 + 3 + 3 + 3 + 5 + 3 + 3
</em><br />
<em class="quotelev1">&gt;    part = 7 ; // = 3 + 2 + 2
</em><br />
<em class="quotelev1">&gt;  variables:
</em><br />
<em class="quotelev1">&gt;    float flow(station,time) ;
</em><br />
<em class="quotelev1">&gt;      flow:units=&quot;m3 s-1&quot;;
</em><br />
<em class="quotelev1">&gt;      flow:topology=&quot;SOMETHING&quot;;
</em><br />
<em class="quotelev1">&gt;    double time(time) ;
</em><br />
<em class="quotelev1">&gt;      time:standard_name = &quot;time&quot;;
</em><br />
<em class="quotelev1">&gt;      time:units = &quot;days since 1970-01-01 00:00:00&quot; ;
</em><br />
<em class="quotelev1">&gt;    char SOMETHING;
</em><br />
<em class="quotelev1">&gt;      SOMETHING:node_coordinates=&quot;lon lat&quot;;
</em><br />
<em class="quotelev1">&gt;      SOMETHING:node_count=&quot;node_count_var&quot;;
</em><br />
<em class="quotelev1">&gt;      SOMETHING:part_count=&quot;part_count_var&quot;;
</em><br />
<em class="quotelev1">&gt;      SOMETHING:topology_type=&quot;multipolygon&quot;;
</em><br />
<em class="quotelev1">&gt;    int node_count_var(part); // number of nodes in each polygon
</em><br />
<em class="quotelev1">&gt;    int part_count_var(station); // number of polygons in each collection
</em><br />
<em class="quotelev1">&gt;    float lon(node) ;
</em><br />
<em class="quotelev1">&gt;      lon:standard_name = &quot;longitude&quot;;
</em><br />
<em class="quotelev1">&gt;      lon:units = &quot;degrees_east&quot;;
</em><br />
<em class="quotelev1">&gt;    float lat(node) ;
</em><br />
<em class="quotelev1">&gt;      lat:standard_name = &quot;latitude&quot;;
</em><br />
<em class="quotelev1">&gt;      lat:units = &quot;degrees_north&quot; ;
</em><br />
<em class="quotelev1">&gt;  data:
</em><br />
<em class="quotelev1">&gt;    node_count_var=4, 3, 3, 3, 5, 3, 3;
</em><br />
<em class="quotelev1">&gt;    part_count_var=3, 2, 2;
</em><br />
<em class="quotelev1">&gt;    lon=0, 20, 20, 0, ... // first polygon, etc. ...
</em><br />
<em class="quotelev1">&gt;    lat=0, 0, 20, 20, ...
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Also, two more thoughts regarding not using indirection, but instead
</em><br />
<em class="quotelev1">&gt; duplicating coincident coordinate values:
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; * Doing it this way (without indexing) is consistent with ordinary CF bounds.
</em><br />
<em class="quotelev1">&gt; Contiguous cells in 1D have bounds with equal values. Thus N cells have 2N
</em><br />
<em class="quotelev1">&gt; bounds, although usually only N+1 distinct values of bounds. There are several
</em><br />
<em class="quotelev1">&gt; reasons why we made this choice, one being that it's more flexible, in allowing
</em><br />
<em class="quotelev1">&gt; non-contiguous and overlapping cells.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; * The indexing itself takes space. If you have N (lon,lat) points which are all
</em><br />
<em class="quotelev1">&gt; boundaries between two regions, so they're all used twice, you will have 4N
</em><br />
<em class="quotelev1">&gt; coordinate values without indexing. With indexing you will have only 2N, but
</em><br />
<em class="quotelev1">&gt; the index takes N, making 3N in total. Thus you save 25% of the space, not 50%.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Best wishes
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Jonathan
</em><br />
<em class="quotelev1">&gt; _______________________________________________
</em><br />
<em class="quotelev1">&gt; CF-metadata mailing list
</em><br />
<em class="quotelev1">&gt; CF-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<br />-------------- next part --------------
<br />
A non-text attachment was scrubbed...
<br />
Name: smime.p7s
<br />
Type: application/pkcs7-signature
<br />
Size: 8141 bytes
<br />
Desc: not available
<br />
URL: &lt;<a href="http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20170202/d9a38c55/attachment.p7s">http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20170202/d9a38c55/attachment.p7s</a>&gt;
<br />
<span id="received"><dfn>Received on</dfn> Thu Feb 02 2017 - 06:53:54 GMT</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start7991">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./7992.html" title="Next message in the list">David Blodgett: "[CF-metadata] Extension of Discrete Sampling Geometries for Simple Features"</a></li>
<li><dfn>Previous message</dfn>: <a href="./7990.html" title="Previous message in the list">Elodie Fernandez: "[CF-metadata] Standard name and area type tables updated"</a></li>
<li><dfn>In reply to</dfn>: <a href="./7989.html" title="Message to which this message replies">Jonathan Gregory: "[CF-metadata] Feedback requested on proposed CF Simple Geometries"</a></li>
<!-- lnextthread="start" -->
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg7991" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg7991" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg7991" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg7991" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:59:09 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./7990.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./7992.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
