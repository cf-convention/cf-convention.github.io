<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] Extension of Discrete Sampling Geometries for Simple Features from Bob Simons - NOAA Federal on 2017-02-03 (cf-metadata-mailman)</title>
<meta name="Author" content="Bob Simons - NOAA Federal (bob.simons)" />
<meta name="Subject" content="[CF-metadata] Extension of Discrete Sampling Geometries for Simple Features" />
<meta name="Date" content="2017-02-03" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./7992.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./7994.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] Extension of Discrete Sampling Geometries for Simple Features</h1>
<!-- received="Fri Feb  3 09:47:07 2017" -->
<!-- isoreceived="20170203094707" -->
<!-- sent="Fri, 3 Feb 2017 08:47:07 -0800" -->
<!-- isosent="20170203164707" -->
<!-- name="Bob Simons - NOAA Federal" -->
<!-- email="bob.simons" -->
<!-- subject="[CF-metadata] Extension of Discrete Sampling Geometries for Simple Features" -->
<!-- id="CAG=jf3dtqrOKHt6Er_i2BNjtDLdmHsvtUdDXGLZVT_fgVoUb6A_at_mail.gmail.com" -->
<!-- charset="US-ASCII" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start7993" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./7994.html" accesskey="d" title="David Blodgett: &quot;[CF-metadata] Extension of Discrete Sampling Geometries for Simple Features&quot;">Next message</a> ]
[ <a href="./7992.html" title="David Blodgett: &quot;[CF-metadata] Extension of Discrete Sampling Geometries for Simple Features&quot;">Previous message</a> ]
<!-- unextthread="start" -->
[ <a href="./7994.html" accesskey="t" title="David Blodgett: &quot;[CF-metadata] Extension of Discrete Sampling Geometries for Simple Features&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg7993" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg7993" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg7993" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg7993" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Bob Simons - NOAA Federal &lt;<a href="mailto:bob.simons?Subject=Re%3A%20%5BCF-metadata%5D%20Extension%20of%20Discrete%20Sampling%20Geometries%20for%20Simple%20Features">bob.simons</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Fri, 3 Feb 2017 08:47:07 -0800</span><br />
</address>
<br />
1) There is a vague comment in the proposal about possibly changing the
<br />
point featureType. Please don't, unless the changes don't affect current
<br />
uses of Point. There are already 1000's of files that use it. If this new
<br />
system offers an alternative, then fine, it's an alternative. One of the
<br />
most important and useful features of a good standard is backwards
<br />
compatibility.
<br />
<br />2) You advocate &quot;Implement the WKT approach using a NetCDF binary array.&quot;
<br />
Is this system then an exact encoding of WKT, neither a subset nor a
<br />
superset?  &quot;Simple Features&quot; are often not simple.
<br />
If it is WKT (or something else), what is the standard you are following to
<br />
describe the Simple Features (e.g.,  ISO/IEC 13249-3:2016 and ISO
<br />
19162:2015)?
<br />
Does your proposal deviate in any way from the standard's capabilities?
<br />
Do you advocate following the entire WKT standard, e.g., supporting all the
<br />
feature types that WKT supports?
<br />
<br />3) Since you are not using the WKT encoding, but creating your own, where
<br />
is the definition of the encoding system you are using?
<br />
<br />4) This is a little out of CF scope, but:
<br />
Do you envision tools, notably, netcdf-c/java, having a writer function
<br />
that takes in WKT and encodes the information in a file, and having a
<br />
reader function that reads the file and returns WKT? Or is it your plan
<br />
that the encoding/ decoding is left to the user?
<br />
<br />5) This proposal is for &quot;Simple Features plus Time Series&quot; (my phrase not
<br />
yours). But aren't there lots of other uses of Simple Features? Will there
<br />
be other proposals in the future for &quot;Simple Features plus X&quot; and &quot;Simple
<br />
Features plus Y&quot;? If so, will CF eventually become a massive document where
<br />
Simple Features are defined over and over again, but in different contexts?
<br />
If so, wouldn't a better solution be to deal with Simple Features
<br />
separately (as Postgres does by making a geometric data type?), and then
<br />
add &quot;Simple Features plus Time Series&quot; as the first use of it?
<br />
<br />Thanks for answering these questions.
<br />
Please forgive me if I missed parts of your proposal that answer these
<br />
questions.
<br />
<br /><br />On Thu, Feb 2, 2017 at 5:57 AM, &lt;cf-metadata-request at cgd.ucar.edu&gt; wrote:
<br />
<br /><em class="quotelev1">&gt; Date: Thu, 2 Feb 2017 07:57:36 -0600
</em><br />
<em class="quotelev1">&gt; From: David Blodgett &lt;dblodgett at usgs.gov&gt;
</em><br />
<em class="quotelev1">&gt; To: &lt;cf-metadata at cgd.ucar.edu&gt;
</em><br />
<em class="quotelev1">&gt; Subject: [CF-metadata] Extension of Discrete Sampling Geometries for
</em><br />
<em class="quotelev1">&gt;         Simple  Features
</em><br />
<em class="quotelev1">&gt; Message-ID: &lt;224C2828-7212-449F-8C2C-97D903F6BE1E at usgs.gov&gt;
</em><br />
<em class="quotelev1">&gt; Content-Type: text/plain; charset=&quot;utf-8&quot;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Dear CF Community,
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; We are pleased to submit this proposal for your consideration and review.
</em><br />
<em class="quotelev1">&gt; The cover letter we've prepared below provides some background and
</em><br />
<em class="quotelev1">&gt; explanation for the proposed approach. The google doc here &lt;
</em><br />
<em class="quotelev1">&gt; <a href="http://goo.gl/Kq9ASq">http://goo.gl/Kq9ASq</a>&gt; is an excerpt of the CF specification with track
</em><br />
<em class="quotelev1">&gt; changes turned on. Permissions for the document allow any google user to
</em><br />
<em class="quotelev1">&gt; comment, so feel free to comment and ask questions in line.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Note that I?m sharing this with you with one issue unresolved. What to do
</em><br />
<em class="quotelev1">&gt; with the point featureType? Our draft suggests that it is part of a new
</em><br />
<em class="quotelev1">&gt; geometry featureType, but it could be that we leave it alone and introduce
</em><br />
<em class="quotelev1">&gt; a geometry featureType. This may be a minor point of discussion, but we
</em><br />
<em class="quotelev1">&gt; need to be clear that this is an issue that still needs to be resolved in
</em><br />
<em class="quotelev1">&gt; the proposal.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Thank you for your time and consideration.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Best Regards,
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; David Blodgett, Tim Whiteaker, and Ben Koziol
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Proposed Extension to NetCDF-CF for Simple Geometries
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Preface
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; The proposed addition to NetCDF-CF introduced below is inspired by a
</em><br />
<em class="quotelev1">&gt; pre-existing data model governed by OGC and ISO as ISO 19125-1. More
</em><br />
<em class="quotelev1">&gt; information on Simple Features may be found here. &lt;
</em><br />
<em class="quotelev1">&gt; <a href="https://en.wikipedia.org/wiki/Simple_Features">https://en.wikipedia.org/wiki/Simple_Features</a>&gt; To the knowledge of the
</em><br />
<em class="quotelev1">&gt; authors, it is consistent with ISO 19125-1 but has not been specified using
</em><br />
<em class="quotelev1">&gt; the formalisms of OGC or ISO. Language used attempts to hold true to
</em><br />
<em class="quotelev1">&gt; NetCDF-CF semantics while not conflicting with the existing standards
</em><br />
<em class="quotelev1">&gt; baseline. While this proposal does not support the entire scope of the the
</em><br />
<em class="quotelev1">&gt; simple features ecosystem, it does support the core data types in most
</em><br />
<em class="quotelev1">&gt; common use around the community.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; The other existing standard to mention is UGRID convention &lt;
</em><br />
<em class="quotelev1">&gt; <a href="http://ugrid-conventions.github.io/ugrid-conventions/">http://ugrid-conventions.github.io/ugrid-conventions/</a>&gt;. The authors have
</em><br />
<em class="quotelev1">&gt; experience reading and writing UGRID and have designed the proposed
</em><br />
<em class="quotelev1">&gt; structure in a way that is inspired by and consistent with it.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Terms and Definitions
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; (Taken from OGC 06-103r4 OpenGIS Implementation Specification for
</em><br />
<em class="quotelev1">&gt; Geographic information - Simple feature access - Part 1: Common
</em><br />
<em class="quotelev1">&gt; architecture &lt;<a href="http://www.opengeospatial.org/standards/sfa">http://www.opengeospatial.org/standards/sfa</a>&gt;.)
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Feature: Abstraction of real world phenomena - typically a geospatial
</em><br />
<em class="quotelev1">&gt; abstraction with associated descriptive attributes.
</em><br />
<em class="quotelev1">&gt; Simple Feature: A feature with all geometric attributes described
</em><br />
<em class="quotelev1">&gt; piecewise by straight line or planar interpolation between point sets.
</em><br />
<em class="quotelev1">&gt; Geometry (geometric complex): A set of disjoint geometric primitives - one
</em><br />
<em class="quotelev1">&gt; or more points, lines, or polygons that form the spatial representation of
</em><br />
<em class="quotelev1">&gt; a feature.
</em><br />
<em class="quotelev1">&gt; Introduction
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Discrete Sampling Geometries (DSGs) handle data from one (or a collection
</em><br />
<em class="quotelev1">&gt; of) timeSeries (point), Trajectory, Profile, TrajectoryProfile or
</em><br />
<em class="quotelev1">&gt; timeSeriesProfile geometries. Measurements are from a point (timeSeries and
</em><br />
<em class="quotelev1">&gt; Profile) or points along a trajectory. In this proposal, we reuse the core
</em><br />
<em class="quotelev1">&gt; DSG timeSeries type which provides support for basic time series use cases
</em><br />
<em class="quotelev1">&gt; e.g., a timeSerieswhich is measured (or modeled) at a given point.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Changes to Existing CF Specification
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; In NetCDF-CF 1.7, Discrete Sampling Geometries separate dimensions and
</em><br />
<em class="quotelev1">&gt; variables into two types ? instance and element &lt;
</em><br />
<em class="quotelev1">&gt; <a href="http://cfconventions.org/cf-conventions/cf-conventions">http://cfconventions.org/cf-conventions/cf-conventions</a>.
</em><br />
<em class="quotelev1">&gt; html#_collections_instances_and_elements&gt;. Instance refers to individual
</em><br />
<em class="quotelev1">&gt; points, trajectories, profiles, etc. These would sometimes be referred to
</em><br />
<em class="quotelev1">&gt; as features given that they are identified entities that can have
</em><br />
<em class="quotelev1">&gt; associated attributes and be related to other entities. Element dimensions
</em><br />
<em class="quotelev1">&gt; describe temporal or other dimensions to describe data on a per-instance
</em><br />
<em class="quotelev1">&gt; basis. This proposal extends the DSG timeSeries featuretype &lt;
</em><br />
<em class="quotelev1">&gt; <a href="http://cfconventions.org/cf-conventions/cf-conventions">http://cfconventions.org/cf-conventions/cf-conventions</a>.
</em><br />
<em class="quotelev1">&gt; html#_features_and_feature_types&gt; such that the geospatial coordinates of
</em><br />
<em class="quotelev1">&gt; the instances can be point, multi-point, line, multi-line, polygon, or
</em><br />
<em class="quotelev1">&gt; multi-polygon geometries. Rather than overload the DSG contiguous ragged
</em><br />
<em class="quotelev1">&gt; array encoding, designed with timeseries in mind, a geometry ragged array
</em><br />
<em class="quotelev1">&gt; encoding is introduced in a new section 9.3.5. See thi
</em><br />
<em class="quotelev1">&gt;  s google doc for specific proposed changes. &lt;<a href="http://goo.gl/Kq9ASq">http://goo.gl/Kq9ASq</a>&gt;
</em><br />
<em class="quotelev1">&gt; Motivation
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; DSGs have no system to define a geometry (polyline, polygon, etc., other
</em><br />
<em class="quotelev1">&gt; than point) and an association with a time series that applies over that
</em><br />
<em class="quotelev1">&gt; entire geometry e.g., The expected rainfall in this watershed polygon for
</em><br />
<em class="quotelev1">&gt; some period of time is 10 mm. As suggested in the last paragraph of section
</em><br />
<em class="quotelev1">&gt; 9.1, current practice is to assign a representative point or just use an ID
</em><br />
<em class="quotelev1">&gt; and forgo spatial information within a NetCDF-CF file. In order to satisfy
</em><br />
<em class="quotelev1">&gt; a number of environmental modeling use cases, we need a way to encode a
</em><br />
<em class="quotelev1">&gt; geometry (point, line, polygon, multi-point, multi-line, or multi-polygon)
</em><br />
<em class="quotelev1">&gt; that is the static spatial feature representation to which one or more
</em><br />
<em class="quotelev1">&gt; timeSeries can be associated. In this proposal, we provide an encoding to
</em><br />
<em class="quotelev1">&gt; define collections of simple feature geometries. It interfaces cleanly with
</em><br />
<em class="quotelev1">&gt; the existing DSG specification, enabling DSGs and Simple Geometries to be
</em><br />
<em class="quotelev1">&gt; used concurrently.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Looking Forward
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; This proposal is a compromise solution that attempts to stay consisten to
</em><br />
<em class="quotelev1">&gt; CF ideals and fit within the structure of the existing specification with
</em><br />
<em class="quotelev1">&gt; minimal disruption. Line and polygon data types often require variable
</em><br />
<em class="quotelev1">&gt; length arrays. Development of this proposal has brought to light the need
</em><br />
<em class="quotelev1">&gt; for a general abstraction for variable length arrays in NetCDF-CF. Such a
</em><br />
<em class="quotelev1">&gt; general abstraction would necessarily be reusable for character arrays,
</em><br />
<em class="quotelev1">&gt; ragged arrays of time series, and ragged arrays of geometry nodes, as well
</em><br />
<em class="quotelev1">&gt; as any other ragged data structures that may come up in the future. This
</em><br />
<em class="quotelev1">&gt; proposal does not introduce such a general ragged array abstraction but
</em><br />
<em class="quotelev1">&gt; does not preclude such a development in the future.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Three Alternative Approaches
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Respecting the human readability ideal of NetCDF-CF, the development of
</em><br />
<em class="quotelev1">&gt; this proposal started from a human readable format for geometries known as
</em><br />
<em class="quotelev1">&gt; Well Known Text &lt;<a href="https://en.wikipedia.org/wiki/Well-known_text">https://en.wikipedia.org/wiki/Well-known_text</a>&gt;. We
</em><br />
<em class="quotelev1">&gt; considered three high level design approaches while developing this
</em><br />
<em class="quotelev1">&gt; proposal.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Direct use of Well-Known Text (WKT). In this approach, well known text
</em><br />
<em class="quotelev1">&gt; strings would be encoded using character arrays following a contiguous
</em><br />
<em class="quotelev1">&gt; ragged array approach to index the character array by geometry (or instance
</em><br />
<em class="quotelev1">&gt; in DSG parlance).
</em><br />
<em class="quotelev1">&gt; Implement the WKT approach using a NetCDF binary array. In this approach,
</em><br />
<em class="quotelev1">&gt; well known text separators (brackets, commas and spaces) for multipoint,
</em><br />
<em class="quotelev1">&gt; multiline, multipolygon, and polygon holes, would be encoded as break type
</em><br />
<em class="quotelev1">&gt; separator values like -1 for multiparts and -2 for holes.
</em><br />
<em class="quotelev1">&gt; Implement the fundamental dimensions of geometry data in NetCDF. In this
</em><br />
<em class="quotelev1">&gt; approach, additional dimensions and variables along those dimensions would
</em><br />
<em class="quotelev1">&gt; be introduced to represent geometries, geometry parts, geometry nodes, and
</em><br />
<em class="quotelev1">&gt; unique (potentially shared) coordinate locations for nodes to reference.
</em><br />
<em class="quotelev1">&gt; Selected Approach
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; The first approach was seen as too opaque to stay true to the CF ideal of
</em><br />
<em class="quotelev1">&gt; complete self-description. The third approach seemed needlessly verbose and
</em><br />
<em class="quotelev1">&gt; difficult to implement. The second approach was selected for the following
</em><br />
<em class="quotelev1">&gt; reasons:
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; The second approach is just as or more human-readable than the third.
</em><br />
<em class="quotelev1">&gt; Use of break values keeps geometries relatively atomic.
</em><br />
<em class="quotelev1">&gt; Will be familiar to developers who are familiar with the WKT geometry
</em><br />
<em class="quotelev1">&gt; format.
</em><br />
<em class="quotelev1">&gt; Character arrays, which are needed for options one and three, are
</em><br />
<em class="quotelev1">&gt; cumbersome to use in some programming languages in common use with NetCDF.
</em><br />
<em class="quotelev1">&gt; Break values replace the need for extraneous variables related to
</em><br />
<em class="quotelev1">&gt; multi-part and polygon holes (interiors). Multi-part geometries are
</em><br />
<em class="quotelev1">&gt; generally an exception and excessive instrumentation to support them should
</em><br />
<em class="quotelev1">&gt; be discounted.
</em><br />
<em class="quotelev1">&gt; Example: Representation of WKT-Style Polygons in a NetCDF-3
</em><br />
<em class="quotelev1">&gt; timeSeriesfeatureType
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Below is sample CDL demonstrating how polygons are encoded in NetCDF-3
</em><br />
<em class="quotelev1">&gt; using a continuous ragged array-like encoding. There are three details to
</em><br />
<em class="quotelev1">&gt; note in the example below.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; The attribute contiguous_ragged_dimension with value of a dimension in the
</em><br />
<em class="quotelev1">&gt; file.
</em><br />
<em class="quotelev1">&gt; The geom_coordinates attribute with a value containing a space separated
</em><br />
<em class="quotelev1">&gt; string of variable names.
</em><br />
<em class="quotelev1">&gt; The cf_role geometry_x_node and geometry_y_node.
</em><br />
<em class="quotelev1">&gt; These three attributes form a system to fully describe collections of
</em><br />
<em class="quotelev1">&gt; multi-polygon feature geometries. Any variable that has the
</em><br />
<em class="quotelev1">&gt; continuous_ragged_dimension attribute contains integers that indicate the
</em><br />
<em class="quotelev1">&gt; 0-indexed starting position of each geometry along the instance dimension.
</em><br />
<em class="quotelev1">&gt; Any variable that uses the dimension referenced in the
</em><br />
<em class="quotelev1">&gt; continuous_ragged_dimension attribute can be interpreted using the values
</em><br />
<em class="quotelev1">&gt; in the variable containing the contiguous_ragged_dimension attribute. The
</em><br />
<em class="quotelev1">&gt; variables referenced in the geom_coordinates attribute describe spatial
</em><br />
<em class="quotelev1">&gt; coordinates of geometries. These variables can also be identified by the
</em><br />
<em class="quotelev1">&gt; cf_roles geometry_x_node and geometry_y_node. Note that the example below
</em><br />
<em class="quotelev1">&gt; also includes a mechanism to handle multi-polygon features that also
</em><br />
<em class="quotelev1">&gt; contain holes.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; netcdf multipolygon_example {
</em><br />
<em class="quotelev1">&gt; dimensions:
</em><br />
<em class="quotelev1">&gt;   node = 47 ;
</em><br />
<em class="quotelev1">&gt;   indices = 55 ;
</em><br />
<em class="quotelev1">&gt;   instance = 3 ;
</em><br />
<em class="quotelev1">&gt;   time = 5 ;
</em><br />
<em class="quotelev1">&gt;   strlen = 5 ;
</em><br />
<em class="quotelev1">&gt; variables:
</em><br />
<em class="quotelev1">&gt;   char instance_name(instance, strlen) ;
</em><br />
<em class="quotelev1">&gt;     instance_name:cf_role = &quot;timeseries_id&quot; ;
</em><br />
<em class="quotelev1">&gt;   int coordinate_index(indices) ;
</em><br />
<em class="quotelev1">&gt;     coordinate_index:geom_type = &quot;multipolygon&quot; ;
</em><br />
<em class="quotelev1">&gt;     coordinate_index:geom_coordinates = &quot;x y&quot; ;
</em><br />
<em class="quotelev1">&gt;     coordinate_index:multipart_break_value = -1 ;
</em><br />
<em class="quotelev1">&gt;     coordinate_index:hole_break_value = -2 ;
</em><br />
<em class="quotelev1">&gt;     coordinate_index:outer_ring_order = &quot;anticlockwise&quot; ;
</em><br />
<em class="quotelev1">&gt;     coordinate_index:closure_convention = &quot;last_node_equals_first&quot; ;
</em><br />
<em class="quotelev1">&gt;   int coordinate_index_start(instance) ;
</em><br />
<em class="quotelev1">&gt;     coordinate_index_start:long_name = &quot;index of first coordinate in each
</em><br />
<em class="quotelev1">&gt; instance geometry&quot; ;
</em><br />
<em class="quotelev1">&gt;     coordinate_index_start:contiguous_ragged_dimension = &quot;indices&quot; ;
</em><br />
<em class="quotelev1">&gt;   double x(node) ;
</em><br />
<em class="quotelev1">&gt;     x:units = &quot;degrees_east&quot; ;
</em><br />
<em class="quotelev1">&gt;     x:standard_name = &quot;longitude&quot; ; // or projection_x_coordinate
</em><br />
<em class="quotelev1">&gt;     X:cf_role = &quot;geometry_x_node&quot; ;
</em><br />
<em class="quotelev1">&gt;   double y(node) ;
</em><br />
<em class="quotelev1">&gt;     y:units = &quot;degrees_north&quot; ;
</em><br />
<em class="quotelev1">&gt;     y:standard_name = ?latitude? ; // or projection_y_coordinate
</em><br />
<em class="quotelev1">&gt;     y:cf_role = &quot;geometry_y_node&quot;
</em><br />
<em class="quotelev1">&gt;   double someVariable(instance) ;
</em><br />
<em class="quotelev1">&gt;     someVariable:long_name = &quot;a variable describing a single-valued
</em><br />
<em class="quotelev1">&gt; attribute of a polygon&quot; ;
</em><br />
<em class="quotelev1">&gt;   int time(time) ;
</em><br />
<em class="quotelev1">&gt;     time:units = &quot;days since 2000-01-01&quot; ;
</em><br />
<em class="quotelev1">&gt;   double someData(instance, time) ;
</em><br />
<em class="quotelev1">&gt;     someData:coordinates = &quot;time x y&quot; ;
</em><br />
<em class="quotelev1">&gt;     someData:featureType = &quot;timeSeries&quot; ;
</em><br />
<em class="quotelev1">&gt; // global attributes:
</em><br />
<em class="quotelev1">&gt;     :Conventions = &quot;CF-1.8&quot; ;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; data:
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;  instance_name =
</em><br />
<em class="quotelev1">&gt;   &quot;flash&quot;,
</em><br />
<em class="quotelev1">&gt;   &quot;bang&quot;,
</em><br />
<em class="quotelev1">&gt;   &quot;pow&quot; ;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;  coordinate_index = 0, 1, 2, 3, 4, -2, 5, 6, 7, 8, -2, 9, 10, 11, 12, -2,
</em><br />
<em class="quotelev1">&gt; 13, 14, 15, 16,
</em><br />
<em class="quotelev1">&gt;     -1, 17, 18, 19, 20, -1, 21, 22, 23, 24, 25, 26, 27, 28, -1, 29, 30,
</em><br />
<em class="quotelev1">&gt; 31, 32, 33,
</em><br />
<em class="quotelev1">&gt;     34, -2, 35, 36, 37, 38, 39, 40, 41, 42, -1, 43, 44, 45, 46 ;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;  coordinate_index_start = 0, 30, 46 ;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;  x = 0, 20, 20, 0, 0, 1, 10, 19, 1, 5, 7, 9, 5, 11, 13, 15, 11, 5, 9, 7,
</em><br />
<em class="quotelev1">&gt;     5, 11, 15, 13, 11, -40, -20, -45, -40, -20, -10, -10, -30, -45, -20,
</em><br />
<em class="quotelev1">&gt; -30, -20, -20, -30, 30,
</em><br />
<em class="quotelev1">&gt;     45, 10, 30, 25, 50, 30, 25 ;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;  y = 0, 0, 20, 20, 0, 1, 5, 1, 1, 15, 19, 15, 15, 15, 19, 15, 15, 25, 25,
</em><br />
<em class="quotelev1">&gt; 29,
</em><br />
<em class="quotelev1">&gt;     25, 25, 25, 29, 25, -40, -45, -30, -40, -35, -30, -10, -5, -20, -35,
</em><br />
<em class="quotelev1">&gt; -20, -15, -25, -20, 20,
</em><br />
<em class="quotelev1">&gt;     40, 40, 20, 5, 10, 15, 5 ;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;  someVariable = 1, 2, 3 ;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;  time = 1, 2, 3, 4, 5 ;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;  someData =
</em><br />
<em class="quotelev1">&gt;   1, 2, 3, 4, 5,
</em><br />
<em class="quotelev1">&gt;   1, 2, 3, 4, 5,
</em><br />
<em class="quotelev1">&gt;   1, 2, 3, 4, 5 ;
</em><br />
<em class="quotelev1">&gt; }
</em><br />
<em class="quotelev1">&gt; How To Interpret
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Starting from the timeSeries variables:
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; See CF-1.8 conventions.
</em><br />
<em class="quotelev1">&gt; See the timeSeries featureType.
</em><br />
<em class="quotelev1">&gt; Find the timeseries_id cf_role.
</em><br />
<em class="quotelev1">&gt; Find the coordinates attribute of data variables.
</em><br />
<em class="quotelev1">&gt; See that the variables indicated by the coordinates attribute have a
</em><br />
<em class="quotelev1">&gt; cf_role geometry_x_nodeand geometry_y_node to determine that these are
</em><br />
<em class="quotelev1">&gt; geometries according to this new specification.
</em><br />
<em class="quotelev1">&gt; Find the coordinate index variable with geom_coordinates that point to the
</em><br />
<em class="quotelev1">&gt; nodes.
</em><br />
<em class="quotelev1">&gt; Find the variable with contiguous_ragged_dimension pointing to the
</em><br />
<em class="quotelev1">&gt; dimension of the coordinate index variable to determine how to index into
</em><br />
<em class="quotelev1">&gt; the coordinate index.
</em><br />
<em class="quotelev1">&gt; Iterate over polygons, parsing out geometries using the contiguous ragged
</em><br />
<em class="quotelev1">&gt; start variable and coordinate index variable to interpret the coordinate
</em><br />
<em class="quotelev1">&gt; data variables.
</em><br />
<em class="quotelev1">&gt; Or, without reference to timeSeries:
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; See CF-1.8 conventions.
</em><br />
<em class="quotelev1">&gt; See the geom_type of multipolygon.
</em><br />
<em class="quotelev1">&gt; Find the variable with a contiguous_ragged_dimension matching the
</em><br />
<em class="quotelev1">&gt; coordinate index variable?s dimension.
</em><br />
<em class="quotelev1">&gt; See the geom_coordinates of x y.
</em><br />
<em class="quotelev1">&gt; Using the contiguous ragged start variable found in 3 and the coordinate
</em><br />
<em class="quotelev1">&gt; index variable found in 2, geometries can be parsed out of the coordinate
</em><br />
<em class="quotelev1">&gt; index variable and parsed using the hole and break values in it.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; -------------- next part --------------
</em><br />
<em class="quotelev1">&gt; An HTML attachment was scrubbed...
</em><br />
<em class="quotelev1">&gt; URL: &lt;<a href="http://mailman.cgd.ucar.edu/pipermail/cf-metadata/">http://mailman.cgd.ucar.edu/pipermail/cf-metadata/</a>
</em><br />
<em class="quotelev1">&gt; attachments/20170202/4ce5b42f/attachment.html&gt;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; ------------------------------
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Subject: Digest Footer
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; _______________________________________________
</em><br />
<em class="quotelev1">&gt; CF-metadata mailing list
</em><br />
<em class="quotelev1">&gt; CF-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; ------------------------------
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; End of CF-metadata Digest, Vol 166, Issue 3
</em><br />
<em class="quotelev1">&gt; *******************************************
</em><br />
<em class="quotelev1">&gt;
</em><br />
<br /><br /><br /><pre>
-- 
Sincerely,
Bob Simons
IT Specialist
Environmental Research Division
NOAA Southwest Fisheries Science Center
99 Pacific St., Suite 255A      (New!)
Monterey, CA 93940               (New!)
Phone: (831)333-9878            (New!)
Fax:   (831)648-8440
Email: bob.simons at noaa.gov
The contents of this message are mine personally and
do not necessarily reflect any position of the
Government or the National Oceanic and Atmospheric Administration.
&lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<a href="http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20170203/0ccce75b/attachment.html">http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20170203/0ccce75b/attachment.html</a>&gt;
</pre>
<span id="received"><dfn>Received on</dfn> Fri Feb 03 2017 - 09:47:07 GMT</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start7993">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./7994.html" title="Next message in the list">David Blodgett: "[CF-metadata] Extension of Discrete Sampling Geometries for Simple Features"</a></li>
<li><dfn>Previous message</dfn>: <a href="./7992.html" title="Previous message in the list">David Blodgett: "[CF-metadata] Extension of Discrete Sampling Geometries for Simple Features"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="./7994.html" title="Next message in this discussion thread">David Blodgett: "[CF-metadata] Extension of Discrete Sampling Geometries for Simple Features"</a></li>
<li><a name="replies" id="replies"></a>
<dfn>Reply</dfn>: <a href="./7994.html" title="Message sent in reply to this message">David Blodgett: "[CF-metadata] Extension of Discrete Sampling Geometries for Simple Features"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg7993" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg7993" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg7993" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg7993" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:59:09 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./7992.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./7994.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
