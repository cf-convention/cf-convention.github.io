<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] Extension of Discrete Sampling Geometries for Simple Features from David Blodgett on 2017-02-03 (cf-metadata-mailman)</title>
<meta name="Author" content="David Blodgett (dblodgett)" />
<meta name="Subject" content="[CF-metadata] Extension of Discrete Sampling Geometries for Simple Features" />
<meta name="Date" content="2017-02-03" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./7993.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./7995.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] Extension of Discrete Sampling Geometries for Simple Features</h1>
<!-- received="Fri Feb  3 10:07:00 2017" -->
<!-- isoreceived="20170203100700" -->
<!-- sent="Fri, 3 Feb 2017 11:07:00 -0600" -->
<!-- isosent="20170203170700" -->
<!-- name="David Blodgett" -->
<!-- email="dblodgett" -->
<!-- subject="[CF-metadata] Extension of Discrete Sampling Geometries for Simple Features" -->
<!-- id="8EE85E65-2815-4720-90FC-13C72D3C7952_at_usgs.gov" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="CAG=jf3dtqrOKHt6Er_i2BNjtDLdmHsvtUdDXGLZVT_fgVoUb6A_at_mail.gmail.com" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start7994" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./7995.html" accesskey="d" title="Bob Simons - NOAA Federal: &quot;[CF-metadata] CF-metadata Digest, Vol 166, Issue 5&quot;">Next message</a> ]
[ <a href="./7993.html" title="Bob Simons - NOAA Federal: &quot;[CF-metadata] Extension of Discrete Sampling Geometries for Simple Features&quot;">Previous message</a> ]
[ <a href="./7993.html" title="Bob Simons - NOAA Federal: &quot;[CF-metadata] Extension of Discrete Sampling Geometries for Simple Features&quot;">In reply to</a> ]
<!-- unextthread="start" -->
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg7994" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg7994" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg7994" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg7994" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: David Blodgett &lt;<a href="mailto:dblodgett?Subject=Re%3A%20%5BCF-metadata%5D%20Extension%20of%20Discrete%20Sampling%20Geometries%20for%20Simple%20Features">dblodgett</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Fri, 3 Feb 2017 11:07:00 -0600</span><br />
</address>
<br />
Dear Bob,
<br />
<br />I?ll just take these in line.
<br />
<br />1) noted. We have been trying to figure out what to do with the point featureType and I think leaving it more or less alone is a viable path forward. 
<br />
<br />2) This is not an exact replica of WKT, but rather a similar approach to WKT. As I stated, we have followed the ISO simple features data model and well known text feature types in concept, but have not used the same standardization formalisms. We aren?t advocating for supporting ?all of? any standard but are rather attempting to support the use cases that have a compelling need today while aligning this with as many other encoding standards in this space as is practical. Hopefully that answers your question, sorry if it?s vague.
<br />
<br />3) The google doc linked in my response contains the encoding we are proposing as a starting point for conversation: <a href="http://goo.gl/Kq9ASq">http://goo.gl/Kq9ASq</a> &lt;<a href="http://goo.gl/Kq9ASq">http://goo.gl/Kq9ASq</a>&gt; I want to stress, as a starting point for discussion. I expect that this proposal will change drastically before we?re done.
<br />
<br />4) Absolutely envision tools doing what you say, convert to/from standard spatial formats and NetCDF-CF geometries. We intend to introduce an R and a Python implementation that does exactly as you say along with whatever form this standard takes in the end. R and Python were chosen as the team that brought this together are familiar with those two languages, additional implementations would be more than welcome.
<br />
<br />5) We do include a ?geometry? featureType similar to the ?point? featureType. Thus our difficulty with what to do with the ?point? featureType. You are correct, there are lots of non timeSeries applications to be solved and this proposal does intend to support them (within the existing DSG constructs).
<br />
<br />Thanks for your questions, hopefully my answers close some gaps for you.
<br />
<br />- Dave
<br />
<br /><em class="quotelev1">&gt; On Feb 3, 2017, at 10:47 AM, Bob Simons - NOAA Federal &lt;bob.simons at noaa.gov&gt; wrote:
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 1) There is a vague comment in the proposal about possibly changing the point featureType. Please don't, unless the changes don't affect current uses of Point. There are already 1000's of files that use it. If this new system offers an alternative, then fine, it's an alternative. One of the most important and useful features of a good standard is backwards compatibility. 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 2) You advocate &quot;Implement the WKT approach using a NetCDF binary array.&quot; Is this system then an exact encoding of WKT, neither a subset nor a superset?  &quot;Simple Features&quot; are often not simple. 
</em><br />
<em class="quotelev1">&gt; If it is WKT (or something else), what is the standard you are following to describe the Simple Features (e.g.,  ISO/IEC 13249-3:2016 and ISO 19162:2015)?
</em><br />
<em class="quotelev1">&gt; Does your proposal deviate in any way from the standard's capabilities?
</em><br />
<em class="quotelev1">&gt; Do you advocate following the entire WKT standard, e.g., supporting all the feature types that WKT supports?
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 3) Since you are not using the WKT encoding, but creating your own, where is the definition of the encoding system you are using? 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 4) This is a little out of CF scope, but:
</em><br />
<em class="quotelev1">&gt; Do you envision tools, notably, netcdf-c/java, having a writer function that takes in WKT and encodes the information in a file, and having a reader function that reads the file and returns WKT? Or is it your plan that the encoding/ decoding is left to the user?  
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 5) This proposal is for &quot;Simple Features plus Time Series&quot; (my phrase not yours). But aren't there lots of other uses of Simple Features? Will there be other proposals in the future for &quot;Simple Features plus X&quot; and &quot;Simple Features plus Y&quot;? If so, will CF eventually become a massive document where Simple Features are defined over and over again, but in different contexts? If so, wouldn't a better solution be to deal with Simple Features separately (as Postgres does by making a geometric data type?), and then add &quot;Simple Features plus Time Series&quot; as the first use of it?
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Thanks for answering these questions.
</em><br />
<em class="quotelev1">&gt; Please forgive me if I missed parts of your proposal that answer these questions. 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; On Thu, Feb 2, 2017 at 5:57 AM, &lt;cf-metadata-request at cgd.ucar.edu &lt;mailto:cf-metadata-request at cgd.ucar.edu&gt;&gt; wrote:
</em><br />
<em class="quotelev1">&gt; Date: Thu, 2 Feb 2017 07:57:36 -0600
</em><br />
<em class="quotelev1">&gt; From: David Blodgett &lt;dblodgett at usgs.gov &lt;mailto:dblodgett at usgs.gov&gt;&gt;
</em><br />
<em class="quotelev1">&gt; To: &lt;cf-metadata at cgd.ucar.edu &lt;mailto:cf-metadata at cgd.ucar.edu&gt;&gt;
</em><br />
<em class="quotelev1">&gt; Subject: [CF-metadata] Extension of Discrete Sampling Geometries for
</em><br />
<em class="quotelev1">&gt;         Simple  Features
</em><br />
<em class="quotelev1">&gt; Message-ID: &lt;224C2828-7212-449F-8C2C-97D903F6BE1E at usgs.gov &lt;mailto:224C2828-7212-449F-8C2C-97D903F6BE1E at usgs.gov&gt;&gt;
</em><br />
<em class="quotelev1">&gt; Content-Type: text/plain; charset=&quot;utf-8&quot;
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Dear CF Community,
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; We are pleased to submit this proposal for your consideration and review. The cover letter we've prepared below provides some background and explanation for the proposed approach. The google doc here &lt;<a href="http://goo.gl/Kq9ASq">http://goo.gl/Kq9ASq</a> &lt;<a href="http://goo.gl/Kq9ASq">http://goo.gl/Kq9ASq</a>&gt;&gt; is an excerpt of the CF specification with track changes turned on. Permissions for the document allow any google user to comment, so feel free to comment and ask questions in line.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Note that I?m sharing this with you with one issue unresolved. What to do with the point featureType? Our draft suggests that it is part of a new geometry featureType, but it could be that we leave it alone and introduce a geometry featureType. This may be a minor point of discussion, but we need to be clear that this is an issue that still needs to be resolved in the proposal.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Thank you for your time and consideration.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Best Regards,
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; David Blodgett, Tim Whiteaker, and Ben Koziol
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Proposed Extension to NetCDF-CF for Simple Geometries
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Preface
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; The proposed addition to NetCDF-CF introduced below is inspired by a pre-existing data model governed by OGC and ISO as ISO 19125-1. More information on Simple Features may be found here. &lt;<a href="https://en.wikipedia.org/wiki/Simple_Features">https://en.wikipedia.org/wiki/Simple_Features</a> &lt;<a href="https://en.wikipedia.org/wiki/Simple_Features">https://en.wikipedia.org/wiki/Simple_Features</a>&gt;&gt; To the knowledge of the authors, it is consistent with ISO 19125-1 but has not been specified using the formalisms of OGC or ISO. Language used attempts to hold true to NetCDF-CF semantics while not conflicting with the existing standards baseline. While this proposal does not support the entire scope of the the simple features ecosystem, it does support the core data types in most common use around the community.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; The other existing standard to mention is UGRID convention &lt;<a href="http://ugrid-conventions.github.io/ugrid-conventions/">http://ugrid-conventions.github.io/ugrid-conventions/</a> &lt;<a href="http://ugrid-conventions.github.io/ugrid-conventions/">http://ugrid-conventions.github.io/ugrid-conventions/</a>&gt;&gt;. The authors have experience reading and writing UGRID and have designed the proposed structure in a way that is inspired by and consistent with it.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Terms and Definitions
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; (Taken from OGC 06-103r4 OpenGIS Implementation Specification for Geographic information - Simple feature access - Part 1: Common architecture &lt;<a href="http://www.opengeospatial.org/standards/sfa">http://www.opengeospatial.org/standards/sfa</a> &lt;<a href="http://www.opengeospatial.org/standards/sfa">http://www.opengeospatial.org/standards/sfa</a>&gt;&gt;.)
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Feature: Abstraction of real world phenomena - typically a geospatial abstraction with associated descriptive attributes.
</em><br />
<em class="quotelev1">&gt; Simple Feature: A feature with all geometric attributes described piecewise by straight line or planar interpolation between point sets.
</em><br />
<em class="quotelev1">&gt; Geometry (geometric complex): A set of disjoint geometric primitives - one or more points, lines, or polygons that form the spatial representation of a feature.
</em><br />
<em class="quotelev1">&gt; Introduction
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Discrete Sampling Geometries (DSGs) handle data from one (or a collection of) timeSeries (point), Trajectory, Profile, TrajectoryProfile or timeSeriesProfile geometries. Measurements are from a point (timeSeries and Profile) or points along a trajectory. In this proposal, we reuse the core DSG timeSeries type which provides support for basic time series use cases e.g., a timeSerieswhich is measured (or modeled) at a given point.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Changes to Existing CF Specification
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; In NetCDF-CF 1.7, Discrete Sampling Geometries separate dimensions and variables into two types ? instance and element &lt;<a href="http://cfconventions.org/cf-conventions/cf-conventions.html#_collections_instances_and_elements">http://cfconventions.org/cf-conventions/cf-conventions.html#_collections_instances_and_elements</a> &lt;<a href="http://cfconventions.org/cf-conventions/cf-conventions.html#_collections_instances_and_elements">http://cfconventions.org/cf-conventions/cf-conventions.html#_collections_instances_and_elements</a>&gt;&gt;. Instance refers to individual points, trajectories, profiles, etc. These would sometimes be referred to as features given that they are identified entities that can have associated attributes and be related to other entities. Element dimensions describe temporal or other dimensions to describe data on a per-instance basis. This proposal extends the DSG timeSeries featuretype &lt;<a href="http://cfconventions.org/cf-conventions/cf-conventions.html#_features_and_feature_types">http://cfconventions.org/cf-conventions/cf-conventions.html#_features_and_feature_types</a> &lt;<a href="http://cfconventions.org/cf-conventions/cf-conventions.html#_features_and_feature_types">http://cfconventions.org/cf-conventions/cf-conventions.html#_features_and_feature_types</a>&gt;&gt; such that the geospatial coordinates of the instances can be point, multi-point, line, multi-line, polygon, or multi-polygon geometries. Rather tha</em><br />
n overload the DSG contiguous ragged array encoding, designed with timeseries in mind, a geometry ragged array encoding is introduced in a new section 9.3.5. See thi
<br />
<em class="quotelev1">&gt;  s google doc for specific proposed changes. &lt;<a href="http://goo.gl/Kq9ASq">http://goo.gl/Kq9ASq</a> &lt;<a href="http://goo.gl/Kq9ASq">http://goo.gl/Kq9ASq</a>&gt;&gt;
</em><br />
<em class="quotelev1">&gt; Motivation
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; DSGs have no system to define a geometry (polyline, polygon, etc., other than point) and an association with a time series that applies over that entire geometry e.g., The expected rainfall in this watershed polygon for some period of time is 10 mm. As suggested in the last paragraph of section 9.1, current practice is to assign a representative point or just use an ID and forgo spatial information within a NetCDF-CF file. In order to satisfy a number of environmental modeling use cases, we need a way to encode a geometry (point, line, polygon, multi-point, multi-line, or multi-polygon) that is the static spatial feature representation to which one or more timeSeries can be associated. In this proposal, we provide an encoding to define collections of simple feature geometries. It interfaces cleanly with the existing DSG specification, enabling DSGs and Simple Geometries to be used concurrently.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Looking Forward
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; This proposal is a compromise solution that attempts to stay consisten to CF ideals and fit within the structure of the existing specification with minimal disruption. Line and polygon data types often require variable length arrays. Development of this proposal has brought to light the need for a general abstraction for variable length arrays in NetCDF-CF. Such a general abstraction would necessarily be reusable for character arrays, ragged arrays of time series, and ragged arrays of geometry nodes, as well as any other ragged data structures that may come up in the future. This proposal does not introduce such a general ragged array abstraction but does not preclude such a development in the future.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Three Alternative Approaches
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Respecting the human readability ideal of NetCDF-CF, the development of this proposal started from a human readable format for geometries known as Well Known Text &lt;<a href="https://en.wikipedia.org/wiki/Well-known_text">https://en.wikipedia.org/wiki/Well-known_text</a> &lt;<a href="https://en.wikipedia.org/wiki/Well-known_text">https://en.wikipedia.org/wiki/Well-known_text</a>&gt;&gt;. We considered three high level design approaches while developing this proposal.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Direct use of Well-Known Text (WKT). In this approach, well known text strings would be encoded using character arrays following a contiguous ragged array approach to index the character array by geometry (or instance in DSG parlance).
</em><br />
<em class="quotelev1">&gt; Implement the WKT approach using a NetCDF binary array. In this approach, well known text separators (brackets, commas and spaces) for multipoint, multiline, multipolygon, and polygon holes, would be encoded as break type separator values like -1 for multiparts and -2 for holes.
</em><br />
<em class="quotelev1">&gt; Implement the fundamental dimensions of geometry data in NetCDF. In this approach, additional dimensions and variables along those dimensions would be introduced to represent geometries, geometry parts, geometry nodes, and unique (potentially shared) coordinate locations for nodes to reference.
</em><br />
<em class="quotelev1">&gt; Selected Approach
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; The first approach was seen as too opaque to stay true to the CF ideal of complete self-description. The third approach seemed needlessly verbose and difficult to implement. The second approach was selected for the following reasons:
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; The second approach is just as or more human-readable than the third.
</em><br />
<em class="quotelev1">&gt; Use of break values keeps geometries relatively atomic.
</em><br />
<em class="quotelev1">&gt; Will be familiar to developers who are familiar with the WKT geometry format.
</em><br />
<em class="quotelev1">&gt; Character arrays, which are needed for options one and three, are cumbersome to use in some programming languages in common use with NetCDF.
</em><br />
<em class="quotelev1">&gt; Break values replace the need for extraneous variables related to multi-part and polygon holes (interiors). Multi-part geometries are generally an exception and excessive instrumentation to support them should be discounted.
</em><br />
<em class="quotelev1">&gt; Example: Representation of WKT-Style Polygons in a NetCDF-3 timeSeriesfeatureType
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Below is sample CDL demonstrating how polygons are encoded in NetCDF-3 using a continuous ragged array-like encoding. There are three details to note in the example below.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; The attribute contiguous_ragged_dimension with value of a dimension in the file.
</em><br />
<em class="quotelev1">&gt; The geom_coordinates attribute with a value containing a space separated string of variable names.
</em><br />
<em class="quotelev1">&gt; The cf_role geometry_x_node and geometry_y_node.
</em><br />
<em class="quotelev1">&gt; These three attributes form a system to fully describe collections of multi-polygon feature geometries. Any variable that has the continuous_ragged_dimension attribute contains integers that indicate the 0-indexed starting position of each geometry along the instance dimension. Any variable that uses the dimension referenced in the continuous_ragged_dimension attribute can be interpreted using the values in the variable containing the contiguous_ragged_dimension attribute. The variables referenced in the geom_coordinates attribute describe spatial coordinates of geometries. These variables can also be identified by the cf_roles geometry_x_node and geometry_y_node. Note that the example below also includes a mechanism to handle multi-polygon features that also contain holes.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; netcdf multipolygon_example {
</em><br />
<em class="quotelev1">&gt; dimensions:
</em><br />
<em class="quotelev1">&gt;   node = 47 ;
</em><br />
<em class="quotelev1">&gt;   indices = 55 ;
</em><br />
<em class="quotelev1">&gt;   instance = 3 ;
</em><br />
<em class="quotelev1">&gt;   time = 5 ;
</em><br />
<em class="quotelev1">&gt;   strlen = 5 ;
</em><br />
<em class="quotelev1">&gt; variables:
</em><br />
<em class="quotelev1">&gt;   char instance_name(instance, strlen) ;
</em><br />
<em class="quotelev1">&gt;     instance_name:cf_role = &quot;timeseries_id&quot; ;
</em><br />
<em class="quotelev1">&gt;   int coordinate_index(indices) ;
</em><br />
<em class="quotelev1">&gt;     coordinate_index:geom_type = &quot;multipolygon&quot; ;
</em><br />
<em class="quotelev1">&gt;     coordinate_index:geom_coordinates = &quot;x y&quot; ;
</em><br />
<em class="quotelev1">&gt;     coordinate_index:multipart_break_value = -1 ;
</em><br />
<em class="quotelev1">&gt;     coordinate_index:hole_break_value = -2 ;
</em><br />
<em class="quotelev1">&gt;     coordinate_index:outer_ring_order = &quot;anticlockwise&quot; ;
</em><br />
<em class="quotelev1">&gt;     coordinate_index:closure_convention = &quot;last_node_equals_first&quot; ;
</em><br />
<em class="quotelev1">&gt;   int coordinate_index_start(instance) ;
</em><br />
<em class="quotelev1">&gt;     coordinate_index_start:long_name = &quot;index of first coordinate in each instance geometry&quot; ;
</em><br />
<em class="quotelev1">&gt;     coordinate_index_start:contiguous_ragged_dimension = &quot;indices&quot; ;
</em><br />
<em class="quotelev1">&gt;   double x(node) ;
</em><br />
<em class="quotelev1">&gt;     x:units = &quot;degrees_east&quot; ;
</em><br />
<em class="quotelev1">&gt;     x:standard_name = &quot;longitude&quot; ; // or projection_x_coordinate
</em><br />
<em class="quotelev1">&gt;     X:cf_role = &quot;geometry_x_node&quot; ;
</em><br />
<em class="quotelev1">&gt;   double y(node) ;
</em><br />
<em class="quotelev1">&gt;     y:units = &quot;degrees_north&quot; ;
</em><br />
<em class="quotelev1">&gt;     y:standard_name = ?latitude? ; // or projection_y_coordinate
</em><br />
<em class="quotelev1">&gt;     y:cf_role = &quot;geometry_y_node&quot;
</em><br />
<em class="quotelev1">&gt;   double someVariable(instance) ;
</em><br />
<em class="quotelev1">&gt;     someVariable:long_name = &quot;a variable describing a single-valued attribute of a polygon&quot; ;
</em><br />
<em class="quotelev1">&gt;   int time(time) ;
</em><br />
<em class="quotelev1">&gt;     time:units = &quot;days since 2000-01-01&quot; ;
</em><br />
<em class="quotelev1">&gt;   double someData(instance, time) ;
</em><br />
<em class="quotelev1">&gt;     someData:coordinates = &quot;time x y&quot; ;
</em><br />
<em class="quotelev1">&gt;     someData:featureType = &quot;timeSeries&quot; ;
</em><br />
<em class="quotelev1">&gt; // global attributes:
</em><br />
<em class="quotelev1">&gt;     :Conventions = &quot;CF-1.8&quot; ;
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; data:
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt;  instance_name =
</em><br />
<em class="quotelev1">&gt;   &quot;flash&quot;,
</em><br />
<em class="quotelev1">&gt;   &quot;bang&quot;,
</em><br />
<em class="quotelev1">&gt;   &quot;pow&quot; ;
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt;  coordinate_index = 0, 1, 2, 3, 4, -2, 5, 6, 7, 8, -2, 9, 10, 11, 12, -2, 13, 14, 15, 16,
</em><br />
<em class="quotelev1">&gt;     -1, 17, 18, 19, 20, -1, 21, 22, 23, 24, 25, 26, 27, 28, -1, 29, 30, 31, 32, 33,
</em><br />
<em class="quotelev1">&gt;     34, -2, 35, 36, 37, 38, 39, 40, 41, 42, -1, 43, 44, 45, 46 ;
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt;  coordinate_index_start = 0, 30, 46 ;
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt;  x = 0, 20, 20, 0, 0, 1, 10, 19, 1, 5, 7, 9, 5, 11, 13, 15, 11, 5, 9, 7,
</em><br />
<em class="quotelev1">&gt;     5, 11, 15, 13, 11, -40, -20, -45, -40, -20, -10, -10, -30, -45, -20, -30, -20, -20, -30, 30,
</em><br />
<em class="quotelev1">&gt;     45, 10, 30, 25, 50, 30, 25 ;
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt;  y = 0, 0, 20, 20, 0, 1, 5, 1, 1, 15, 19, 15, 15, 15, 19, 15, 15, 25, 25, 29,
</em><br />
<em class="quotelev1">&gt;     25, 25, 25, 29, 25, -40, -45, -30, -40, -35, -30, -10, -5, -20, -35, -20, -15, -25, -20, 20,
</em><br />
<em class="quotelev1">&gt;     40, 40, 20, 5, 10, 15, 5 ;
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt;  someVariable = 1, 2, 3 ;
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt;  time = 1, 2, 3, 4, 5 ;
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt;  someData =
</em><br />
<em class="quotelev1">&gt;   1, 2, 3, 4, 5,
</em><br />
<em class="quotelev1">&gt;   1, 2, 3, 4, 5,
</em><br />
<em class="quotelev1">&gt;   1, 2, 3, 4, 5 ;
</em><br />
<em class="quotelev1">&gt; }
</em><br />
<em class="quotelev1">&gt; How To Interpret
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Starting from the timeSeries variables:
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; See CF-1.8 conventions.
</em><br />
<em class="quotelev1">&gt; See the timeSeries featureType.
</em><br />
<em class="quotelev1">&gt; Find the timeseries_id cf_role.
</em><br />
<em class="quotelev1">&gt; Find the coordinates attribute of data variables.
</em><br />
<em class="quotelev1">&gt; See that the variables indicated by the coordinates attribute have a cf_role geometry_x_nodeand geometry_y_node to determine that these are geometries according to this new specification.
</em><br />
<em class="quotelev1">&gt; Find the coordinate index variable with geom_coordinates that point to the nodes.
</em><br />
<em class="quotelev1">&gt; Find the variable with contiguous_ragged_dimension pointing to the dimension of the coordinate index variable to determine how to index into the coordinate index.
</em><br />
<em class="quotelev1">&gt; Iterate over polygons, parsing out geometries using the contiguous ragged start variable and coordinate index variable to interpret the coordinate data variables.
</em><br />
<em class="quotelev1">&gt; Or, without reference to timeSeries:
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; See CF-1.8 conventions.
</em><br />
<em class="quotelev1">&gt; See the geom_type of multipolygon.
</em><br />
<em class="quotelev1">&gt; Find the variable with a contiguous_ragged_dimension matching the coordinate index variable?s dimension.
</em><br />
<em class="quotelev1">&gt; See the geom_coordinates of x y.
</em><br />
<em class="quotelev1">&gt; Using the contiguous ragged start variable found in 3 and the coordinate index variable found in 2, geometries can be parsed out of the coordinate index variable and parsed using the hole and break values in it.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; -------------- next part --------------
</em><br />
<em class="quotelev1">&gt; An HTML attachment was scrubbed...
</em><br />
<em class="quotelev1">&gt; URL: &lt;<a href="http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20170202/4ce5b42f/attachment.html">http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20170202/4ce5b42f/attachment.html</a> &lt;<a href="http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20170202/4ce5b42f/attachment.html">http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20170202/4ce5b42f/attachment.html</a>&gt;&gt;
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; ------------------------------
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Subject: Digest Footer
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; _______________________________________________
</em><br />
<em class="quotelev1">&gt; CF-metadata mailing list
</em><br />
<em class="quotelev1">&gt; CF-metadata at cgd.ucar.edu &lt;mailto:CF-metadata at cgd.ucar.edu&gt;
</em><br />
<em class="quotelev1">&gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a> &lt;<a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>&gt;
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; ------------------------------
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; End of CF-metadata Digest, Vol 166, Issue 3
</em><br />
<em class="quotelev1">&gt; *******************************************
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; -- 
</em><br />
<em class="quotelev1">&gt; Sincerely,
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Bob Simons
</em><br />
<em class="quotelev1">&gt; IT Specialist
</em><br />
<em class="quotelev1">&gt; Environmental Research Division
</em><br />
<em class="quotelev1">&gt; NOAA Southwest Fisheries Science Center 
</em><br />
<em class="quotelev1">&gt; 99 Pacific St., Suite 255A      (New!)
</em><br />
<em class="quotelev1">&gt; Monterey, CA 93940               (New!) 
</em><br />
<em class="quotelev1">&gt; Phone: (831)333-9878            (New!)
</em><br />
<em class="quotelev1">&gt; Fax:   (831)648-8440
</em><br />
<em class="quotelev1">&gt; Email: bob.simons at noaa.gov &lt;mailto:bob.simons at noaa.gov&gt;
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; The contents of this message are mine personally and 
</em><br />
<em class="quotelev1">&gt; do not necessarily reflect any position of the 
</em><br />
<em class="quotelev1">&gt; Government or the National Oceanic and Atmospheric Administration.
</em><br />
<em class="quotelev1">&gt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; _______________________________________________
</em><br />
<em class="quotelev1">&gt; CF-metadata mailing list
</em><br />
<em class="quotelev1">&gt; CF-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<br />-------------- next part --------------
<br />
An HTML attachment was scrubbed...
<br />
URL: &lt;<a href="http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20170203/4ff55def/attachment.html">http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20170203/4ff55def/attachment.html</a>&gt;
<br />
<span id="received"><dfn>Received on</dfn> Fri Feb 03 2017 - 10:07:00 GMT</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start7994">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./7995.html" title="Next message in the list">Bob Simons - NOAA Federal: "[CF-metadata] CF-metadata Digest, Vol 166, Issue 5"</a></li>
<li><dfn>Previous message</dfn>: <a href="./7993.html" title="Previous message in the list">Bob Simons - NOAA Federal: "[CF-metadata] Extension of Discrete Sampling Geometries for Simple Features"</a></li>
<li><dfn>In reply to</dfn>: <a href="./7993.html" title="Message to which this message replies">Bob Simons - NOAA Federal: "[CF-metadata] Extension of Discrete Sampling Geometries for Simple Features"</a></li>
<!-- lnextthread="start" -->
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg7994" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg7994" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg7994" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg7994" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:59:09 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./7993.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./7995.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
