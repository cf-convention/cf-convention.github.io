<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] CF-metadata Digest, Vol 166, Issue 5 from Bob Simons - NOAA Federal on 2017-02-03 (cf-metadata-mailman)</title>
<meta name="Author" content="Bob Simons - NOAA Federal (bob.simons)" />
<meta name="Subject" content="[CF-metadata] CF-metadata Digest, Vol 166, Issue 5" />
<meta name="Date" content="2017-02-03" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./7994.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./7996.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] CF-metadata Digest, Vol 166, Issue 5</h1>
<!-- received="Fri Feb  3 12:41:09 2017" -->
<!-- isoreceived="20170203124109" -->
<!-- sent="Fri, 3 Feb 2017 11:41:09 -0800" -->
<!-- isosent="20170203194109" -->
<!-- name="Bob Simons - NOAA Federal" -->
<!-- email="bob.simons" -->
<!-- subject="[CF-metadata] CF-metadata Digest, Vol 166, Issue 5" -->
<!-- id="CAG=jf3f4oML-NuCV+SJU3qD9uifikrptkonbXGFAx8_WJTn5zQ_at_mail.gmail.com" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="mailman.376.1486141634.26776.cf-metadata_at_cgd.ucar.edu" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start7995" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./7996.html" accesskey="d" title="Chris Barker: &quot;[CF-metadata] CF-metadata Digest, Vol 166, Issue 5&quot;">Next message</a> ]
[ <a href="./7994.html" title="David Blodgett: &quot;[CF-metadata] Extension of Discrete Sampling Geometries for Simple Features&quot;">Previous message</a> ]
<!-- unextthread="start" -->
[ <a href="./7996.html" accesskey="t" title="Chris Barker: &quot;[CF-metadata] CF-metadata Digest, Vol 166, Issue 5&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg7995" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg7995" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg7995" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg7995" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Bob Simons - NOAA Federal &lt;<a href="mailto:bob.simons?Subject=Re%3A%20%5BCF-metadata%5D%20CF-metadata%20Digest%2C%20Vol%20166%2C%20Issue%205">bob.simons</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Fri, 3 Feb 2017 11:41:09 -0800</span><br />
</address>
<br />
Then, isn't this proposal just the first step in the creation of a new
<br />
model and a new encoding of Simple Features, one that is &quot;align[ed] ...
<br />
with as many other encoding standards in this space as is practical&quot;? In
<br />
other words, yet another standard for Simple Features?
<br />
<br />If so, it seems risky to me to take just the first (easy?) step &quot;to support
<br />
the use cases that have a compelling need today&quot; and not solve the entire
<br />
problem. I know the CF way is to just solve real, current needs, but in
<br />
this case it seems to risk a head slap moment in the future when we realize
<br />
that, in order to deal with some new simple feature variant, we should have
<br />
done things differently from the beginning?
<br />
<br />And it seems odd to reject existing standards that have been so
<br />
painstakingly hammered out, in favor of starting the process all over
<br />
again.  We follow existing standards for other things (e.g., IEEE-754 for
<br />
representing floating point numbers in binary files), why can't we follow
<br />
an existing Simple Features standard?
<br />
<br /><pre>
---
Rather than just be a naysayer, let me suggest a very different alternative:
There are several projects in the CF realm (e.g., this Simple Features
project, Discrete Sampling Geometry (DSG), true variable-length Strings,
ugrid(?)) which share a common underlying problem: how to deal with
variable-length multidimensional arrays: a[b][c], where the length of the c
dimension may be different for different b indices.
DSG solved this (5 different ways!), but only for DSG.
The Simple Features proposal seeks to solve the problem for Simple Features.
We still have no support for Unicode variable-length Strings.
Instead of continuing to solve the variable-length problem a different way
every time we confront it, shouldn't we solve it once, with one small
addition to the standard, and then use that solution repeatedly?
The solution could be a simple variant of one of the DSG solutions, but
generalized so that it could be used in different situations.
An encoding standard and built-in support for variable-length data arrays
in netcdf-java/c would solve a lot of problems, now and in the future.
Some work on this is already done: I think the netcdf-java API already
supports variable-length arrays when reading netcdf-4 files.
For Simple Features, the problem would reduce to: store the feature (using
some specified existing standard like WKT or WKB) in a variable-length
array.
On Fri, Feb 3, 2017 at 9:07 AM, &lt;cf-metadata-request at cgd.ucar.edu&gt; wrote:
&gt; Date: Fri, 3 Feb 2017 11:07:00 -0600
&gt; From: David Blodgett &lt;dblodgett at usgs.gov&gt;
&gt; To: Bob Simons - NOAA Federal &lt;bob.simons at noaa.gov&gt;
&gt; Cc: CF Metadata &lt;cf-metadata at cgd.ucar.edu&gt;
&gt; Subject: Re: [CF-metadata] Extension of Discrete Sampling Geometries
&gt;         for Simple Features
&gt; Message-ID: &lt;8EE85E65-2815-4720-90FC-13C72D3C7952 at usgs.gov&gt;
&gt; Content-Type: text/plain; charset=&quot;utf-8&quot;
&gt;
&gt; Dear Bob,
&gt;
&gt; I?ll just take these in line.
&gt;
&gt; 1) noted. We have been trying to figure out what to do with the point
&gt; featureType and I think leaving it more or less alone is a viable path
&gt; forward.
&gt;
&gt; 2) This is not an exact replica of WKT, but rather a similar approach to
&gt; WKT. As I stated, we have followed the ISO simple features data model and
&gt; well known text feature types in concept, but have not used the same
&gt; standardization formalisms. We aren?t advocating for supporting ?all of?
&gt; any standard but are rather attempting to support the use cases that have a
&gt; compelling need today while aligning this with as many other encoding
&gt; standards in this space as is practical. Hopefully that answers your
&gt; question, sorry if it?s vague.
&gt;
&gt; 3) The google doc linked in my response contains the encoding we are
&gt; proposing as a starting point for conversation: <a href="http://goo.gl/Kq9ASq">http://goo.gl/Kq9ASq</a> &lt;
&gt; <a href="http://goo.gl/Kq9ASq">http://goo.gl/Kq9ASq</a>&gt; I want to stress, as a starting point for
&gt; discussion. I expect that this proposal will change drastically before
&gt; we?re done.
&gt;
&gt; 4) Absolutely envision tools doing what you say, convert to/from standard
&gt; spatial formats and NetCDF-CF geometries. We intend to introduce an R and a
&gt; Python implementation that does exactly as you say along with whatever form
&gt; this standard takes in the end. R and Python were chosen as the team that
&gt; brought this together are familiar with those two languages, additional
&gt; implementations would be more than welcome.
&gt;
&gt; 5) We do include a ?geometry? featureType similar to the ?point?
&gt; featureType. Thus our difficulty with what to do with the ?point?
&gt; featureType. You are correct, there are lots of non timeSeries applications
&gt; to be solved and this proposal does intend to support them (within the
&gt; existing DSG constructs).
&gt;
&gt; Thanks for your questions, hopefully my answers close some gaps for you.
&gt;
&gt; - Dave
&gt;
&gt; &gt; On Feb 3, 2017, at 10:47 AM, Bob Simons - NOAA Federal &lt;
&gt; bob.simons at noaa.gov&gt; wrote:
&gt; &gt;
&gt; &gt; 1) There is a vague comment in the proposal about possibly changing the
&gt; point featureType. Please don't, unless the changes don't affect current
&gt; uses of Point. There are already 1000's of files that use it. If this new
&gt; system offers an alternative, then fine, it's an alternative. One of the
&gt; most important and useful features of a good standard is backwards
&gt; compatibility.
&gt; &gt;
&gt; &gt; 2) You advocate &quot;Implement the WKT approach using a NetCDF binary
&gt; array.&quot; Is this system then an exact encoding of WKT, neither a subset nor
&gt; a superset?  &quot;Simple Features&quot; are often not simple.
&gt; &gt; If it is WKT (or something else), what is the standard you are following
&gt; to describe the Simple Features (e.g.,  ISO/IEC 13249-3:2016 and ISO
&gt; 19162:2015)?
&gt; &gt; Does your proposal deviate in any way from the standard's capabilities?
&gt; &gt; Do you advocate following the entire WKT standard, e.g., supporting all
&gt; the feature types that WKT supports?
&gt; &gt;
&gt; &gt; 3) Since you are not using the WKT encoding, but creating your own,
&gt; where is the definition of the encoding system you are using?
&gt; &gt;
&gt; &gt; 4) This is a little out of CF scope, but:
&gt; &gt; Do you envision tools, notably, netcdf-c/java, having a writer function
&gt; that takes in WKT and encodes the information in a file, and having a
&gt; reader function that reads the file and returns WKT? Or is it your plan
&gt; that the encoding/ decoding is left to the user?
&gt; &gt;
&gt; &gt; 5) This proposal is for &quot;Simple Features plus Time Series&quot; (my phrase
&gt; not yours). But aren't there lots of other uses of Simple Features? Will
&gt; there be other proposals in the future for &quot;Simple Features plus X&quot; and
&gt; &quot;Simple Features plus Y&quot;? If so, will CF eventually become a massive
&gt; document where Simple Features are defined over and over again, but in
&gt; different contexts? If so, wouldn't a better solution be to deal with
&gt; Simple Features separately (as Postgres does by making a geometric data
&gt; type?), and then add &quot;Simple Features plus Time Series&quot; as the first use of
&gt; it?
&gt; &gt;
&gt; &gt; Thanks for answering these questions.
&gt; &gt; Please forgive me if I missed parts of your proposal that answer these
&gt; questions.
&gt; &gt;
&gt; &gt;
&gt; &gt; On Thu, Feb 2, 2017 at 5:57 AM, &lt;cf-metadata-request at cgd.ucar.edu
&gt; &lt;mailto:cf-metadata-request at cgd.ucar.edu&gt;&gt; wrote:
&gt; &gt; Date: Thu, 2 Feb 2017 07:57:36 -0600
&gt; &gt; From: David Blodgett &lt;dblodgett at usgs.gov &lt;mailto:dblodgett at usgs.gov&gt;&gt;
&gt; &gt; To: &lt;cf-metadata at cgd.ucar.edu &lt;mailto:cf-metadata at cgd.ucar.edu&gt;&gt;
&gt; &gt; Subject: [CF-metadata] Extension of Discrete Sampling Geometries for
&gt; &gt;         Simple  Features
&gt; &gt; Message-ID: &lt;224C2828-7212-449F-8C2C-97D903F6BE1E at usgs.gov &lt;mailto:
&gt; 224C2828-7212-449F-8C2C-97D903F6BE1E at usgs.gov&gt;&gt;
&gt; &gt; Content-Type: text/plain; charset=&quot;utf-8&quot;
&gt; &gt;
&gt; &gt; Dear CF Community,
&gt; &gt;
&gt; &gt; We are pleased to submit this proposal for your consideration and
&gt; review. The cover letter we've prepared below provides some background and
&gt; explanation for the proposed approach. The google doc here &lt;
&gt; <a href="http://goo.gl/Kq9ASq">http://goo.gl/Kq9ASq</a> &lt;<a href="http://goo.gl/Kq9ASq">http://goo.gl/Kq9ASq</a>&gt;&gt; is an excerpt of the CF
&gt; specification with track changes turned on. Permissions for the document
&gt; allow any google user to comment, so feel free to comment and ask questions
&gt; in line.
&gt; &gt;
&gt; &gt; Note that I?m sharing this with you with one issue unresolved. What to
&gt; do with the point featureType? Our draft suggests that it is part of a new
&gt; geometry featureType, but it could be that we leave it alone and introduce
&gt; a geometry featureType. This may be a minor point of discussion, but we
&gt; need to be clear that this is an issue that still needs to be resolved in
&gt; the proposal.
&gt; &gt;
&gt; &gt; Thank you for your time and consideration.
&gt; &gt;
&gt; &gt; Best Regards,
&gt; &gt;
&gt; &gt; David Blodgett, Tim Whiteaker, and Ben Koziol
&gt; &gt;
&gt; &gt; Proposed Extension to NetCDF-CF for Simple Geometries
&gt; &gt;
&gt; &gt; Preface
&gt; &gt;
&gt; &gt; The proposed addition to NetCDF-CF introduced below is inspired by a
&gt; pre-existing data model governed by OGC and ISO as ISO 19125-1. More
&gt; information on Simple Features may be found here. &lt;
&gt; <a href="https://en.wikipedia.org/wiki/Simple_Features">https://en.wikipedia.org/wiki/Simple_Features</a> &lt;<a href="https://en.wikipedia.org/">https://en.wikipedia.org/</a>
&gt; wiki/Simple_Features&gt;&gt; To the knowledge of the authors, it is consistent
&gt; with ISO 19125-1 but has not been specified using the formalisms of OGC or
&gt; ISO. Language used attempts to hold true to NetCDF-CF semantics while not
&gt; conflicting with the existing standards baseline. While this proposal does
&gt; not support the entire scope of the the simple features ecosystem, it does
&gt; support the core data types in most common use around the community.
&gt; &gt;
&gt; &gt; The other existing standard to mention is UGRID convention &lt;
&gt; <a href="http://ugrid-conventions.github.io/ugrid-conventions/">http://ugrid-conventions.github.io/ugrid-conventions/</a> &lt;
&gt; <a href="http://ugrid-conventions.github.io/ugrid-conventions/">http://ugrid-conventions.github.io/ugrid-conventions/</a>&gt;&gt;. The authors have
&gt; experience reading and writing UGRID and have designed the proposed
&gt; structure in a way that is inspired by and consistent with it.
&gt; &gt;
&gt; &gt; Terms and Definitions
&gt; &gt;
&gt; &gt; (Taken from OGC 06-103r4 OpenGIS Implementation Specification for
&gt; Geographic information - Simple feature access - Part 1: Common
&gt; architecture &lt;<a href="http://www.opengeospatial.org/standards/sfa">http://www.opengeospatial.org/standards/sfa</a> &lt;
&gt; <a href="http://www.opengeospatial.org/standards/sfa">http://www.opengeospatial.org/standards/sfa</a>&gt;&gt;.)
&gt; &gt;
&gt; &gt; Feature: Abstraction of real world phenomena - typically a geospatial
&gt; abstraction with associated descriptive attributes.
&gt; &gt; Simple Feature: A feature with all geometric attributes described
&gt; piecewise by straight line or planar interpolation between point sets.
&gt; &gt; Geometry (geometric complex): A set of disjoint geometric primitives -
&gt; one or more points, lines, or polygons that form the spatial representation
&gt; of a feature.
&gt; &gt; Introduction
&gt; &gt;
&gt; &gt; Discrete Sampling Geometries (DSGs) handle data from one (or a
&gt; collection of) timeSeries (point), Trajectory, Profile, TrajectoryProfile
&gt; or timeSeriesProfile geometries. Measurements are from a point (timeSeries
&gt; and Profile) or points along a trajectory. In this proposal, we reuse the
&gt; core DSG timeSeries type which provides support for basic time series use
&gt; cases e.g., a timeSerieswhich is measured (or modeled) at a given point.
&gt; &gt;
&gt; &gt; Changes to Existing CF Specification
&gt; &gt;
&gt; &gt; In NetCDF-CF 1.7, Discrete Sampling Geometries separate dimensions and
&gt; variables into two types ? instance and element &lt;
&gt; <a href="http://cfconventions.org/cf-conventions/cf-conventions">http://cfconventions.org/cf-conventions/cf-conventions</a>.
&gt; html#_collections_instances_and_elements &lt;<a href="http://cfconventions.org/cf">http://cfconventions.org/cf</a>-
&gt; conventions/cf-conventions.html#_collections_instances_and_elements&gt;&gt;.
&gt; Instance refers to individual points, trajectories, profiles, etc. These
&gt; would sometimes be referred to as features given that they are identified
&gt; entities that can have associated attributes and be related to other
&gt; entities. Element dimensions describe temporal or other dimensions to
&gt; describe data on a per-instance basis. This proposal extends the DSG
&gt; timeSeries featuretype &lt;<a href="http://cfconventions.org/cf">http://cfconventions.org/cf</a>-
&gt; conventions/cf-conventions.html#_features_and_feature_types &lt;
&gt; <a href="http://cfconventions.org/cf-conventions/cf-conventions">http://cfconventions.org/cf-conventions/cf-conventions</a>.
&gt; html#_features_and_feature_types&gt;&gt; such that the geospatial coordinates
&gt; of the instances can be point, multi-point, line, multi-line, polygon, or
&gt; multi-polyg
&gt;  on geometries. Rather than overload the DSG contiguous ragged array
&gt; encoding, designed with timeseries in mind, a geometry ragged array
&gt; encoding is introduced in a new section 9.3.5. See thi
&gt; &gt;  s google doc for specific proposed changes. &lt;<a href="http://goo.gl/Kq9ASq">http://goo.gl/Kq9ASq</a> &lt;
&gt; <a href="http://goo.gl/Kq9ASq">http://goo.gl/Kq9ASq</a>&gt;&gt;
&gt; &gt; Motivation
&gt; &gt;
&gt; &gt; DSGs have no system to define a geometry (polyline, polygon, etc., other
&gt; than point) and an association with a time series that applies over that
&gt; entire geometry e.g., The expected rainfall in this watershed polygon for
&gt; some period of time is 10 mm. As suggested in the last paragraph of section
&gt; 9.1, current practice is to assign a representative point or just use an ID
&gt; and forgo spatial information within a NetCDF-CF file. In order to satisfy
&gt; a number of environmental modeling use cases, we need a way to encode a
&gt; geometry (point, line, polygon, multi-point, multi-line, or multi-polygon)
&gt; that is the static spatial feature representation to which one or more
&gt; timeSeries can be associated. In this proposal, we provide an encoding to
&gt; define collections of simple feature geometries. It interfaces cleanly with
&gt; the existing DSG specification, enabling DSGs and Simple Geometries to be
&gt; used concurrently.
&gt; &gt;
&gt; &gt; Looking Forward
&gt; &gt;
&gt; &gt; This proposal is a compromise solution that attempts to stay consisten
&gt; to CF ideals and fit within the structure of the existing specification
&gt; with minimal disruption. Line and polygon data types often require variable
&gt; length arrays. Development of this proposal has brought to light the need
&gt; for a general abstraction for variable length arrays in NetCDF-CF. Such a
&gt; general abstraction would necessarily be reusable for character arrays,
&gt; ragged arrays of time series, and ragged arrays of geometry nodes, as well
&gt; as any other ragged data structures that may come up in the future. This
&gt; proposal does not introduce such a general ragged array abstraction but
&gt; does not preclude such a development in the future.
&gt; &gt;
&gt; &gt; Three Alternative Approaches
&gt; &gt;
&gt; &gt; Respecting the human readability ideal of NetCDF-CF, the development of
&gt; this proposal started from a human readable format for geometries known as
&gt; Well Known Text &lt;<a href="https://en.wikipedia.org/wiki/Well-known_text">https://en.wikipedia.org/wiki/Well-known_text</a> &lt;
&gt; <a href="https://en.wikipedia.org/wiki/Well-known_text">https://en.wikipedia.org/wiki/Well-known_text</a>&gt;&gt;. We considered three high
&gt; level design approaches while developing this proposal.
&gt; &gt;
&gt; &gt; Direct use of Well-Known Text (WKT). In this approach, well known text
&gt; strings would be encoded using character arrays following a contiguous
&gt; ragged array approach to index the character array by geometry (or instance
&gt; in DSG parlance).
&gt; &gt; Implement the WKT approach using a NetCDF binary array. In this
&gt; approach, well known text separators (brackets, commas and spaces) for
&gt; multipoint, multiline, multipolygon, and polygon holes, would be encoded as
&gt; break type separator values like -1 for multiparts and -2 for holes.
&gt; &gt; Implement the fundamental dimensions of geometry data in NetCDF. In this
&gt; approach, additional dimensions and variables along those dimensions would
&gt; be introduced to represent geometries, geometry parts, geometry nodes, and
&gt; unique (potentially shared) coordinate locations for nodes to reference.
&gt; &gt; Selected Approach
&gt; &gt;
&gt; &gt; The first approach was seen as too opaque to stay true to the CF ideal
&gt; of complete self-description. The third approach seemed needlessly verbose
&gt; and difficult to implement. The second approach was selected for the
&gt; following reasons:
&gt; &gt;
&gt; &gt; The second approach is just as or more human-readable than the third.
&gt; &gt; Use of break values keeps geometries relatively atomic.
&gt; &gt; Will be familiar to developers who are familiar with the WKT geometry
&gt; format.
&gt; &gt; Character arrays, which are needed for options one and three, are
&gt; cumbersome to use in some programming languages in common use with NetCDF.
&gt; &gt; Break values replace the need for extraneous variables related to
&gt; multi-part and polygon holes (interiors). Multi-part geometries are
&gt; generally an exception and excessive instrumentation to support them should
&gt; be discounted.
&gt; &gt; Example: Representation of WKT-Style Polygons in a NetCDF-3
&gt; timeSeriesfeatureType
&gt; &gt;
&gt; &gt; Below is sample CDL demonstrating how polygons are encoded in NetCDF-3
&gt; using a continuous ragged array-like encoding. There are three details to
&gt; note in the example below.
&gt; &gt;
&gt; &gt; The attribute contiguous_ragged_dimension with value of a dimension in
&gt; the file.
&gt; &gt; The geom_coordinates attribute with a value containing a space separated
&gt; string of variable names.
&gt; &gt; The cf_role geometry_x_node and geometry_y_node.
&gt; &gt; These three attributes form a system to fully describe collections of
&gt; multi-polygon feature geometries. Any variable that has the
&gt; continuous_ragged_dimension attribute contains integers that indicate the
&gt; 0-indexed starting position of each geometry along the instance dimension.
&gt; Any variable that uses the dimension referenced in the
&gt; continuous_ragged_dimension attribute can be interpreted using the values
&gt; in the variable containing the contiguous_ragged_dimension attribute. The
&gt; variables referenced in the geom_coordinates attribute describe spatial
&gt; coordinates of geometries. These variables can also be identified by the
&gt; cf_roles geometry_x_node and geometry_y_node. Note that the example below
&gt; also includes a mechanism to handle multi-polygon features that also
&gt; contain holes.
&gt; &gt;
&gt; &gt; netcdf multipolygon_example {
&gt; &gt; dimensions:
&gt; &gt;   node = 47 ;
&gt; &gt;   indices = 55 ;
&gt; &gt;   instance = 3 ;
&gt; &gt;   time = 5 ;
&gt; &gt;   strlen = 5 ;
&gt; &gt; variables:
&gt; &gt;   char instance_name(instance, strlen) ;
&gt; &gt;     instance_name:cf_role = &quot;timeseries_id&quot; ;
&gt; &gt;   int coordinate_index(indices) ;
&gt; &gt;     coordinate_index:geom_type = &quot;multipolygon&quot; ;
&gt; &gt;     coordinate_index:geom_coordinates = &quot;x y&quot; ;
&gt; &gt;     coordinate_index:multipart_break_value = -1 ;
&gt; &gt;     coordinate_index:hole_break_value = -2 ;
&gt; &gt;     coordinate_index:outer_ring_order = &quot;anticlockwise&quot; ;
&gt; &gt;     coordinate_index:closure_convention = &quot;last_node_equals_first&quot; ;
&gt; &gt;   int coordinate_index_start(instance) ;
&gt; &gt;     coordinate_index_start:long_name = &quot;index of first coordinate in
&gt; each instance geometry&quot; ;
&gt; &gt;     coordinate_index_start:contiguous_ragged_dimension = &quot;indices&quot; ;
&gt; &gt;   double x(node) ;
&gt; &gt;     x:units = &quot;degrees_east&quot; ;
&gt; &gt;     x:standard_name = &quot;longitude&quot; ; // or projection_x_coordinate
&gt; &gt;     X:cf_role = &quot;geometry_x_node&quot; ;
&gt; &gt;   double y(node) ;
&gt; &gt;     y:units = &quot;degrees_north&quot; ;
&gt; &gt;     y:standard_name = ?latitude? ; // or projection_y_coordinate
&gt; &gt;     y:cf_role = &quot;geometry_y_node&quot;
&gt; &gt;   double someVariable(instance) ;
&gt; &gt;     someVariable:long_name = &quot;a variable describing a single-valued
&gt; attribute of a polygon&quot; ;
&gt; &gt;   int time(time) ;
&gt; &gt;     time:units = &quot;days since 2000-01-01&quot; ;
&gt; &gt;   double someData(instance, time) ;
&gt; &gt;     someData:coordinates = &quot;time x y&quot; ;
&gt; &gt;     someData:featureType = &quot;timeSeries&quot; ;
&gt; &gt; // global attributes:
&gt; &gt;     :Conventions = &quot;CF-1.8&quot; ;
&gt; &gt;
&gt; &gt; data:
&gt; &gt;
&gt; &gt;  instance_name =
&gt; &gt;   &quot;flash&quot;,
&gt; &gt;   &quot;bang&quot;,
&gt; &gt;   &quot;pow&quot; ;
&gt; &gt;
&gt; &gt;  coordinate_index = 0, 1, 2, 3, 4, -2, 5, 6, 7, 8, -2, 9, 10, 11, 12,
&gt; -2, 13, 14, 15, 16,
&gt; &gt;     -1, 17, 18, 19, 20, -1, 21, 22, 23, 24, 25, 26, 27, 28, -1, 29, 30,
&gt; 31, 32, 33,
&gt; &gt;     34, -2, 35, 36, 37, 38, 39, 40, 41, 42, -1, 43, 44, 45, 46 ;
&gt; &gt;
&gt; &gt;  coordinate_index_start = 0, 30, 46 ;
&gt; &gt;
&gt; &gt;  x = 0, 20, 20, 0, 0, 1, 10, 19, 1, 5, 7, 9, 5, 11, 13, 15, 11, 5, 9, 7,
&gt; &gt;     5, 11, 15, 13, 11, -40, -20, -45, -40, -20, -10, -10, -30, -45, -20,
&gt; -30, -20, -20, -30, 30,
&gt; &gt;     45, 10, 30, 25, 50, 30, 25 ;
&gt; &gt;
&gt; &gt;  y = 0, 0, 20, 20, 0, 1, 5, 1, 1, 15, 19, 15, 15, 15, 19, 15, 15, 25,
&gt; 25, 29,
&gt; &gt;     25, 25, 25, 29, 25, -40, -45, -30, -40, -35, -30, -10, -5, -20, -35,
&gt; -20, -15, -25, -20, 20,
&gt; &gt;     40, 40, 20, 5, 10, 15, 5 ;
&gt; &gt;
&gt; &gt;  someVariable = 1, 2, 3 ;
&gt; &gt;
&gt; &gt;  time = 1, 2, 3, 4, 5 ;
&gt; &gt;
&gt; &gt;  someData =
&gt; &gt;   1, 2, 3, 4, 5,
&gt; &gt;   1, 2, 3, 4, 5,
&gt; &gt;   1, 2, 3, 4, 5 ;
&gt; &gt; }
&gt; &gt; How To Interpret
&gt; &gt;
&gt; &gt; Starting from the timeSeries variables:
&gt; &gt;
&gt; &gt; See CF-1.8 conventions.
&gt; &gt; See the timeSeries featureType.
&gt; &gt; Find the timeseries_id cf_role.
&gt; &gt; Find the coordinates attribute of data variables.
&gt; &gt; See that the variables indicated by the coordinates attribute have a
&gt; cf_role geometry_x_nodeand geometry_y_node to determine that these are
&gt; geometries according to this new specification.
&gt; &gt; Find the coordinate index variable with geom_coordinates that point to
&gt; the nodes.
&gt; &gt; Find the variable with contiguous_ragged_dimension pointing to the
&gt; dimension of the coordinate index variable to determine how to index into
&gt; the coordinate index.
&gt; &gt; Iterate over polygons, parsing out geometries using the contiguous
&gt; ragged start variable and coordinate index variable to interpret the
&gt; coordinate data variables.
&gt; &gt; Or, without reference to timeSeries:
&gt; &gt;
&gt; &gt; See CF-1.8 conventions.
&gt; &gt; See the geom_type of multipolygon.
&gt; &gt; Find the variable with a contiguous_ragged_dimension matching the
&gt; coordinate index variable?s dimension.
&gt; &gt; See the geom_coordinates of x y.
&gt; &gt; Using the contiguous ragged start variable found in 3 and the coordinate
&gt; index variable found in 2, geometries can be parsed out of the coordinate
&gt; index variable and parsed using the hole and break values in it.
&gt; &gt;
&gt; &gt; -------------- next part --------------
&gt; &gt; An HTML attachment was scrubbed...
&gt; &gt; URL: &lt;<a href="http://mailman.cgd.ucar.edu/pipermail/cf-metadata/">http://mailman.cgd.ucar.edu/pipermail/cf-metadata/</a>
&gt; attachments/20170202/4ce5b42f/attachment.html &lt;
&gt; <a href="http://mailman.cgd.ucar.edu/pipermail/cf-metadata/">http://mailman.cgd.ucar.edu/pipermail/cf-metadata/</a>
&gt; attachments/20170202/4ce5b42f/attachment.html&gt;&gt;
&gt; &gt;
&gt; &gt; ------------------------------
&gt; &gt;
&gt; &gt; Subject: Digest Footer
&gt; &gt;
&gt; &gt; _______________________________________________
&gt; &gt; CF-metadata mailing list
&gt; &gt; CF-metadata at cgd.ucar.edu &lt;mailto:CF-metadata at cgd.ucar.edu&gt;
&gt; &gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a> &lt;
&gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>&gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; ------------------------------
&gt; &gt;
&gt; &gt; End of CF-metadata Digest, Vol 166, Issue 3
&gt; &gt; *******************************************
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; --
&gt; &gt; Sincerely,
&gt; &gt;
&gt; &gt; Bob Simons
&gt; &gt; IT Specialist
&gt; &gt; Environmental Research Division
&gt; &gt; NOAA Southwest Fisheries Science Center
&gt; &gt; 99 Pacific St., Suite 255A      (New!)
&gt; &gt; Monterey, CA 93940               (New!)
&gt; &gt; Phone: (831)333-9878            (New!)
&gt; &gt; Fax:   (831)648-8440
&gt; &gt; Email: bob.simons at noaa.gov &lt;mailto:bob.simons at noaa.gov&gt;
&gt; &gt;
&gt; &gt; The contents of this message are mine personally and
&gt; &gt; do not necessarily reflect any position of the
&gt; &gt; Government or the National Oceanic and Atmospheric Administration.
&gt; &gt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt;
&gt; &gt;
&gt; &gt; _______________________________________________
&gt; &gt; CF-metadata mailing list
&gt; &gt; CF-metadata at cgd.ucar.edu
&gt; &gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
&gt;
&gt; -------------- next part --------------
&gt; An HTML attachment was scrubbed...
&gt; URL: &lt;<a href="http://mailman.cgd.ucar.edu/pipermail/cf-metadata/">http://mailman.cgd.ucar.edu/pipermail/cf-metadata/</a>
&gt; attachments/20170203/4ff55def/attachment.html&gt;
&gt;
&gt; ------------------------------
&gt;
&gt; Subject: Digest Footer
&gt;
&gt; _______________________________________________
&gt; CF-metadata mailing list
&gt; CF-metadata at cgd.ucar.edu
&gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
&gt;
&gt;
&gt; ------------------------------
&gt;
&gt; End of CF-metadata Digest, Vol 166, Issue 5
&gt; *******************************************
&gt;
-- 
Sincerely,
Bob Simons
IT Specialist
Environmental Research Division
NOAA Southwest Fisheries Science Center
99 Pacific St., Suite 255A      (New!)
Monterey, CA 93940               (New!)
Phone: (831)333-9878            (New!)
Fax:   (831)648-8440
Email: bob.simons at noaa.gov
The contents of this message are mine personally and
do not necessarily reflect any position of the
Government or the National Oceanic and Atmospheric Administration.
&lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt; &lt;&gt;&lt;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<a href="http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20170203/6d2b1adf/attachment.html">http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20170203/6d2b1adf/attachment.html</a>&gt;
</pre>
<span id="received"><dfn>Received on</dfn> Fri Feb 03 2017 - 12:41:09 GMT</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start7995">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./7996.html" title="Next message in the list">Chris Barker: "[CF-metadata] CF-metadata Digest, Vol 166, Issue 5"</a></li>
<li><dfn>Previous message</dfn>: <a href="./7994.html" title="Previous message in the list">David Blodgett: "[CF-metadata] Extension of Discrete Sampling Geometries for Simple Features"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="./7996.html" title="Next message in this discussion thread">Chris Barker: "[CF-metadata] CF-metadata Digest, Vol 166, Issue 5"</a></li>
<li><a name="replies" id="replies"></a>
<dfn>Reply</dfn>: <a href="./7996.html" title="Message sent in reply to this message">Chris Barker: "[CF-metadata] CF-metadata Digest, Vol 166, Issue 5"</a></li>
<li><dfn>Reply</dfn>: <a href="./7998.html" title="Message sent in reply to this message">Jim Biard: "[CF-metadata] CF-metadata Digest, Vol 166, Issue 5"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg7995" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg7995" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg7995" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg7995" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:59:09 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./7994.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./7996.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
