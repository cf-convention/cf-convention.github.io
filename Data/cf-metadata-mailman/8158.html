<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] Recording &quot;day of year on which something happens&quot; from Hollis, Dan on 2017-03-27 (cf-metadata-mailman)</title>
<meta name="Author" content="Hollis, Dan (dan.hollis)" />
<meta name="Subject" content="[CF-metadata] Recording &quot;day of year on which something happens&quot;" />
<meta name="Date" content="2017-03-27" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./8157.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./8159.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] Recording &quot;day of year on which something happens&quot;</h1>
<!-- received="Mon Mar 27 07:45:32 2017" -->
<!-- isoreceived="20170327064532" -->
<!-- sent="Mon, 27 Mar 2017 13:45:32 +0000" -->
<!-- isosent="20170327134532" -->
<!-- name="Hollis, Dan" -->
<!-- email="dan.hollis" -->
<!-- subject="[CF-metadata] Recording &quot;day of year on which something happens&quot;" -->
<!-- id="D7D1372D480AEE41B3C1276C9A15404B42D27512_at_EXXCMPD1DAG1.cmpd1.metoffice.gov.uk" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="02047865DE893F45802A039AA761834E014578F931_at_WINVMSERV463.ad.smhi.se" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start8158" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./8159.html" accesskey="d" title="James Orr: &quot;[CF-metadata] New standard names for OMIP biogeochemistry and chemistry&quot;">Next message</a> ]
[ <a href="./8157.html" title="James Orr: &quot;[CF-metadata] Silicate vs. dissolved inorganic silicon&quot;">Previous message</a> ]
[ <a href="./8136.html" title="B&#0228;rring Lars: &quot;[CF-metadata] Recording &#0034;day of year on which something happens&#0034;&quot;">In reply to</a> ]
<!-- unextthread="start" -->
[ <a href="./8160.html" accesskey="t" title="Jim Biard: &quot;[CF-metadata] Recording &#0034;day of year on which something happens&#0034;&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg8158" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg8158" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg8158" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg8158" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Hollis, Dan &lt;<a href="mailto:dan.hollis?Subject=Re%3A%20%5BCF-metadata%5D%20Recording%20%22day%20of%20year%20on%20which%20something%20happens%22">dan.hollis</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Mon, 27 Mar 2017 13:45:32 +0000</span><br />
</address>
<br />
Hi all,
<br />
<br />(Several of last week's postings only appeared in my inbox on Friday and were not in chronological order of when they were sent - apologies if I've missed something or am repeating something already posted by others.)
<br />
<br />A couple of thoughts:
<br />
<br />Regarding the quantity itself, my feeling is that &quot;day of year&quot; is better than &quot;days since YYYY-MM-DD&quot; (as noted by others, the former makes intercomparisons between different years that little bit easier). However I'm not sure how that works for a period that spans two calendar years e.g. dates of first frost and last frost for the period 1st July to 30th June. If we use &quot;day of year&quot; then the first frost might have values in the range 270-330 in the first calendar year, while the last frost might have values of 100-150 in the second calendar year. Would it be obvious to a user how to interpret these values?
<br />
<br />So, how about using &quot;day of period&quot; instead? By this I mean the number of days since the start of the bounds for the time coordinate. In my example: 1 = 1st July, 2 = 2nd July,.., 365 = 30th June. However if another user defined their period of interest to be 1st Aug to 1st May (I think Jim said he used this definition) then in this situation 1 = 1st Aug, 2 = 2nd Aug,.., 274 = 1st May. This approach would be completely flexible i.e. you could handle any period of interest and you could even store values for periods that span several calendar years without ambiguity. If you need the actual date of the event (e.g. to allow you to compare Jim's data with mine) then you could add the bounds start to the &quot;day of period&quot; value. The other benefit would be that higher values always meant chronologically later events (unlike &quot;day of year&quot; where the last frost has lower values than the first frost despite occurring later in the period).
<br />
<br /><br />Secondly, regarding cell methods, it occurs to me that there are several existing examples where the cell methods describe what happens before and after a threshold is applied but they do not describe the effect of the threshold itself. For example, I believe that valid cell methods for &quot;number_of_days_with_air_temperature_above_threshold&quot; could be:
<br />
<br />&quot;time: minimum within days   time: sum over days&quot;
<br />
<br />The fact that a time series of daily minimum temperatures (created by the first part of the cell methods) is magically transformed into a series of 0s and 1s (which can then be summed according to second part of the cell methods) is implicit in the standard_name (and its associated definition and scalar coordinate variable). The transformation itself is _not_ captured by the cell methods.
<br />
<br />Following this approach for 'first frost', we could imagine standard names like:
<br />
&quot;day_number_of_air_temperature_below_threshold&quot;
<br />
<br />and cell methods something like:
<br />
&quot;time: minimum within days   time: minimum over days&quot;
<br />
<br />The fact that the time series of daily minimum temperatures is 'magically' transformed into a series of day numbers (but only when the min temp is below the threshold) is implicit in the standard name (and is deliberately not captured by the cell methods).
<br />
<br />'last frost' could use the same standard name but slightly modified cell methods:
<br />
&quot;time: minimum within days   time: maximum over days&quot;
<br />
<br />I'm not certain, but maybe this could also be applied to things like degree days i.e. the cell methods would capture what happened before and after, but they would not capture the actual transformation from daily temperature to degree days.
<br />
<br />Hope these ideas are useful.
<br />
<br />Regards,
<br />
<br />Dan
<br />
<br /><br />Dan Hollis?? Climatologist
<br />
Met Office?? Hadley Centre   FitzRoy Road?? Exeter?? Devon?? EX1 3PB?? United Kingdom
<br />
Tel: +44 (0)1392 884535?? Mob: +44 (0)7342058682   Fax: +44 (0)1392 885681
<br />
E-mail: dan.hollis at metoffice.gov.uk?? Website: <a href="http://www.metoffice.gov.uk">http://www.metoffice.gov.uk</a>
<br />
For UK climate and past weather information, visit <a href="http://www.metoffice.gov.uk/climate">http://www.metoffice.gov.uk/climate</a>
<br />
<br /><br /><br />-----Original Message-----
<br />
From: CF-metadata [mailto:cf-metadata-bounces at cgd.ucar.edu] On Behalf Of B?rring Lars
<br />
Sent: 22 March 2017 12:47
<br />
To: Jon Blower; cf-metadata at cgd.ucar.edu
<br />
Subject: Re: [CF-metadata] Recording &quot;day of year on which something happens&quot;
<br />
<br />Dear all,
<br />
<br />Some further comments (top posting because my email reader does not easily handle inline comments)
<br />
<br />1. I think that it is essential to also capture the temperature threshold used to calculate the GDD. The Wikipedia article suggests that 10 degC is most common (or even standard), but in my experience 5 degC is common, and this is what ETCCDI and ET-SCI are using in their definitions. And it seems that 5 degC is used in the scientific paper cited in Wikipedia article. Hence, a CF standard name should somehow be able to capture which threshold temperature is used.
<br />
<br />2.The Wikipedia article mentions that &quot;maximum temperature is usually capped at 30 ?C&quot; but this is to my understanding in relation to the simplified calculation using  diurnal midrange, (Tmax+Tmin)/2. as a 'proxy' for daily mean temperature. And it is not clear what is meant by &quot;usually&quot; in this context. For example ETCCDI and ET-SCI  definitions do not impose this upper limit, and their definitions are very well established and have for example been used in several rounds of IPCC assessments. Now, there might be (are) alternative definitions out there, some tweaked for specific purposes that involves all sorts of complexities. But if we are going to work towards defining some standard names I think it would be good to begin with the well-established and widely disseminated definitions, cf. the AMS glossary <a href="http://glossary.ametsoc.org/wiki/Growing_degree-day">http://glossary.ametsoc.org/wiki/Growing_degree-day</a>. 
<br />
<br />Another aspect to keep in mind is that with modern (since a couple of decades...) measurement equipment it is possible to get higher temporal resolution than daily mean temperature (proper,  or estimated as diurnal mid-range). Hence there is also the very similar concept of growing degree hours, cf. <a href="http://glossary.ametsoc.org/wiki/Growing_degree-hour">http://glossary.ametsoc.org/wiki/Growing_degree-hour</a>
<br />
<br />Preferably, a standard name should be agnostic to the temporal resolution of the input data.
<br />
<br />4. I guess that the cell methods, and units, will become clearer once the standard name has been teased out.
<br />
<br /><br />Jon, I would be interested to learn what your project colleagues are using.
<br />
<br />Finally, to refocus back on the original topic of this thread (that is much broader than growing degree day thresholds dates) : We should not forget that there are many other use cases for a CF mechanism to record the first/last/etc. timing of an event in relation to a reference time. 
<br />
<br /><br />Kind regards,
<br />
Lars
<br />
<br /><br /><br />-----Original Message-----
<br />
From: CF-metadata [mailto:cf-metadata-bounces at cgd.ucar.edu] On Behalf Of Jon Blower
<br />
Sent: den 22 mars 2017 10:34
<br />
To: cf-metadata at cgd.ucar.edu
<br />
Subject: Re: [CF-metadata] Recording &quot;day of year on which something happens&quot;
<br />
<br />Dear all,
<br />
<br />Thanks again for the helpful replies to my last summary email. I?ll pick up on the points here:
<br />
<br />&nbsp;1. I realise that my use of the word ?threshold? may have been confusing in this context. I was following the precedent set by previous standard names. The variable would record the day of the year (or growing season) on which the ?threshold? number of degree days is attained. The possible values of this threshold are stored in a coordinate variable. This is very different from the ?threshold? temperature that is used in the calculation of the ?growing degree day? parameter itself.
<br />
<br />&nbsp;2. I?m not at all an expert here, but my understanding is that there are various possible ways to calculate GDDs. Lars has helpfully pointed out that ET-SCI and ETCCDI definitions exist, and I?ll pass these on to the project team ? maybe that?s what the team are using. But anyway, I?m not totally sure that ?integral_of_air_temperature_excess_wrt_time? is strictly accurate in all cases, since it?s not always simply a question of integrating some ?delta-T? over time. The Wikipedia article points out some ways in which GDD is not a strict integral (e.g. in some cases it is considered that there is a maximum number of GDDs that can be meaningfully attained in a day).
<br />
<br />&nbsp;3. David correctly pointed out the ?Northern Hemisphere chauvinism? in my proposal. Our project is focused on Europe, but it is quite correct to consider how the same approach might apply to the southern hemisphere growing season. 
<br />
<br />&nbsp;4. I?m still not convinced about using ?sum? in cell_methods. This might be appropriate if the variable in question were GDD, but the variable is actually a _time_ at which we reach a certain number of GDD. We are not summing time, so I?m not sure that using ?sum? is right. Happy to be corrected on this though, maybe I?ve misunderstood the intention.
<br />
<br />I think I need to discuss these issues within the project to work out exactly what we?re actually going to be recording ? I?ll do this and report back our thoughts. 
<br />
<br />Many thanks again,
<br />
Jon
<br />
<br />_______________________________________________
<br />
CF-metadata mailing list
<br />
CF-metadata at cgd.ucar.edu
<br />
<a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
<br />
_______________________________________________
<br />
CF-metadata mailing list
<br />
CF-metadata at cgd.ucar.edu
<br />
<a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
<br />
<span id="received"><dfn>Received on</dfn> Mon Mar 27 2017 - 07:45:32 BST</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start8158">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./8159.html" title="Next message in the list">James Orr: "[CF-metadata] New standard names for OMIP biogeochemistry and chemistry"</a></li>
<li><dfn>Previous message</dfn>: <a href="./8157.html" title="Previous message in the list">James Orr: "[CF-metadata] Silicate vs. dissolved inorganic silicon"</a></li>
<li><dfn>In reply to</dfn>: <a href="./8136.html" title="Message to which this message replies">B&#0228;rring Lars: "[CF-metadata] Recording &#0034;day of year on which something happens&#0034;"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="./8160.html" title="Next message in this discussion thread">Jim Biard: "[CF-metadata] Recording &#0034;day of year on which something happens&#0034;"</a></li>
<li><a name="replies" id="replies"></a>
<dfn>Reply</dfn>: <a href="./8160.html" title="Message sent in reply to this message">Jim Biard: "[CF-metadata] Recording &#0034;day of year on which something happens&#0034;"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg8158" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg8158" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg8158" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg8158" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:59:11 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./8157.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./8159.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
