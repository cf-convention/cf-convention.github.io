<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] grid cells with a varying number of cell bounds from Whiteaker, Timothy L on 2017-09-12 (cf-metadata-mailman)</title>
<meta name="Author" content="Whiteaker, Timothy L (whiteaker)" />
<meta name="Subject" content="[CF-metadata] grid cells with a varying number of cell bounds" />
<meta name="Date" content="2017-09-12" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./8502.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./8504.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] grid cells with a varying number of cell bounds</h1>
<!-- received="Tue Sep 12 09:08:03 2017" -->
<!-- isoreceived="20170912080803" -->
<!-- sent="Tue, 12 Sep 2017 15:08:03 +0000" -->
<!-- isosent="20170912150803" -->
<!-- name="Whiteaker, Timothy L" -->
<!-- email="whiteaker" -->
<!-- subject="[CF-metadata] grid cells with a varying number of cell bounds" -->
<!-- id="MWHPR06MB3214BAF9DBCBF9E6117CAEEFD4690_at_MWHPR06MB3214.namprd06.prod.outlook.com" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="CAEMt9PPmWmP=TGJp=Gk70YSswGdx+EJg8CoTEtOeP3PgbCsviw_at_mail.gmail.com" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start8503" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./8504.html" accesskey="d" title="Jim Biard: &quot;[CF-metadata] Add new integer types to CF?&quot;">Next message</a> ]
[ <a href="./8502.html" title="David Hassell: &quot;[CF-metadata] grid cells with a varying number of cell bounds&quot;">Previous message</a> ]
[ <a href="./8502.html" title="David Hassell: &quot;[CF-metadata] grid cells with a varying number of cell bounds&quot;">In reply to</a> ]
<!-- unextthread="start" -->
[ <a href="./8591.html" accesskey="t" title="Karl Taylor: &quot;[CF-metadata] grid cells with a varying number of cell bounds&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg8503" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg8503" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg8503" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg8503" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Whiteaker, Timothy L &lt;<a href="mailto:whiteaker?Subject=Re%3A%20%5BCF-metadata%5D%20grid%20cells%20with%20a%20varying%20number%20of%20cell%20bounds">whiteaker</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Tue, 12 Sep 2017 15:08:03 +0000</span><br />
</address>
<br />
Wearing my simple geometry hat: While simple geometries could handle this case, that proposal was intended to support discrete geospatial features such as river segments or watershed areas, including multi-part polygons such as Hawaii and polygons with holes such as a lake polygon with an island in the middle.  It may be overkill for the OP's use case.
<br />
<br />My humble opinion as a general netCDF user: Allowing missing values seems simple and efficient for the OP's use case.  My only worry would be that this solution introduces a competing method of encoding discrete polygons like what the simple geometries proposal targets; this would be alleviated with proper guidance on when to use these various solutions in the CF documentation.  I also admit my ignorance regarding prevalence of other grid cell configurations in datasets out in the wild which the missing value solution wouldn't cleanly support, or the impact of the missing value solution on netCDF software libraries.
<br />
<br />Regards,
<br />
<br />Tim Whiteaker
<br />
Research Scientist
<br />
The University of Texas at Austin
<br />
<br />From: CF-metadata [mailto:cf-metadata-bounces at cgd.ucar.edu] On Behalf Of David Hassell
<br />
Sent: Monday, September 11, 2017 4:22 AM
<br />
To: Jonathan Gregory &lt;j.m.gregory at reading.ac.uk&gt;
<br />
Cc: CF Metadata &lt;cf-metadata at cgd.ucar.edu&gt;
<br />
Subject: Re: [CF-metadata] grid cells with a varying number of cell bounds
<br />
<br />Hello,
<br />
<br />Coorecting an error in my last post:
<br />
<br />On 8 September 2017 at 17:51, David Hassell &lt;david.hassell at ncas.ac.uk&lt;mailto:david.hassell at ncas.ac.uk&gt;&gt; wrote:
<br />
Hello Karl, Jonathan, Jim,
<br />
<br />I also support Karl's suggested changes, with the possible exception of insisting that the valid bounds values always precede the any missing data. Whilst that is surely the easiest case for software to deal with, and is an attractive restriction to me, it that may not be how people want to do it, or have already done it in the past.
<br />
<br />??
<br />
I'm don't think that allowing this would not cause any more confusion than is already (will be!) there with the inclusion of simple geometries. As Jonathan points out, it would be &quot;not recommended&quot; to use simple geometries when standard bounds suffice. That advice easily includes standard bounds being allowed missing values, I think.
<br />
<br />?I had one too many negatives in last paragraph. It should have read:?
<br />
<br />??I'm *DO* think that allowing this would not cause any more confusion than is already (will be!) there with the inclusion of simple geometries. As Jonathan points out, it would be &quot;not recommended&quot; to use simple geometries when standard bounds suffice. That advice easily includes standard bounds being allowed missing values, I think.?
<br />
?
<br />
Sorry for the confusion,
<br />
<br />David?
<br />
<br /><br />All the best,
<br />
<br />David
<br />
<br />On 8 September 2017 at 16:24, Jonathan Gregory &lt;j.m.gregory at reading.ac.uk&lt;mailto:j.m.gregory at reading.ac.uk&gt;&gt; wrote:
<br />
Dear Karl
<br />
<br />I agree, other views are needed; it would be especially useful to hear from
<br />
Dave Blodgett and other proposers of the simple geometries. Although I agree
<br />
that what you describe is not necessarily inefficient (and in the case you
<br />
mention it would be more efficient than the simple geometries), and it's not
<br />
a large change to the existing convention, I do think it *is* a change, since
<br />
we don't normally permit missing data in boundary variables.
<br />
<br />I don't have a strong preference between the methods. What discomforts me is
<br />
introducing two methods for doing the same thing. If we did that, we should
<br />
give some clear guidance to data-writers about which to choose.
<br />
<br />Of course, there is no suggestion that the simple geometries approach should
<br />
replace the existing one for cells with polygons that all have the same number
<br />
of vertices. Consistent with the last paragraph, I suggest that we should
<br />
recommend the use of the existing convention for that case, rather than the
<br />
simple geometries convention.
<br />
<br />Best wishes
<br />
<br />Jonathan
<br />
<br />----- Forwarded message from Karl Taylor &lt;taylor13 at llnl.gov&lt;mailto:taylor13 at llnl.gov&gt;&gt; -----
<br />
<br /><em class="quotelev1">&gt; Date: Fri, 8 Sep 2017 07:12:06 -0700
</em><br />
<em class="quotelev1">&gt; From: Karl Taylor &lt;taylor13 at llnl.gov&lt;mailto:taylor13 at llnl.gov&gt;&gt;
</em><br />
<em class="quotelev1">&gt; To: cf-metadata at cgd.ucar.edu&lt;mailto:cf-metadata at cgd.ucar.edu&gt;
</em><br />
<em class="quotelev1">&gt; Subject: Re: [CF-metadata] grid cells with a varying number of cell bounds
</em><br />
<em class="quotelev1">&gt; User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:52.0)
</em><br />
<em class="quotelev1">&gt;       Gecko/20100101 Thunderbird/52.2.1
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Dear Jonathan and all,
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Regarding the options for representing polygon cells with varying
</em><br />
<em class="quotelev1">&gt; number of sides (see below), I agree that the &quot;simple geometries&quot;
</em><br />
<em class="quotelev1">&gt; proposal can indeed handle this case. ( It of course could also
</em><br />
<em class="quotelev1">&gt; handle the case when all grid cells have the same number of sides.)
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; I think, however, it might be a mistake to rule out the alternative
</em><br />
<em class="quotelev1">&gt; method of storing data on these grids using the old method with cell
</em><br />
<em class="quotelev1">&gt; bounds described by their vertices (without the need for
</em><br />
<em class="quotelev1">&gt; &quot;containers&quot;).  Certainly, I would want to retain the current
</em><br />
<em class="quotelev1">&gt; treatment  when dealing with cells having the  *same* number of
</em><br />
<em class="quotelev1">&gt; sides.  I also favor an option to use our current method (which is
</em><br />
<em class="quotelev1">&gt; however incompletely described, as I've pointed out) to handle grids
</em><br />
<em class="quotelev1">&gt; with cells of different shapes.  All we would need to make the
</em><br />
<em class="quotelev1">&gt; current method well-described is to specify that the bounds could
</em><br />
<em class="quotelev1">&gt; include &quot;missing_values&quot; when the number of grid cell vertices were
</em><br />
<em class="quotelev1">&gt; fewer than the maximum specified in the dimension statement (and the
</em><br />
<em class="quotelev1">&gt; missing_values would be the last ones in the bounds dimension).
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; I would point out that for at least one icosahedral grid (see
</em><br />
<em class="quotelev1">&gt; Heikes, R., and D. A. Randall, 1995a: Numerical integration of the
</em><br />
<em class="quotelev1">&gt; shallow-water equations on a twisted icosahedral grid. Part I: Basic
</em><br />
<em class="quotelev1">&gt; design and results of tests. /Mon. Wea. Rev.,/*123,* 1862?1880), all
</em><br />
<em class="quotelev1">&gt; the grid cells except 12 are hexagons.  The 12 exceptions come from
</em><br />
<em class="quotelev1">&gt; the &quot;corners&quot; of a cube and are pentagons. This means that the cell
</em><br />
<em class="quotelev1">&gt; bounds would contain only 12 missing_values, so not a significant
</em><br />
<em class="quotelev1">&gt; problem with wasting storage.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; If we decide to eliminate the &quot;old&quot; option for handling these grid
</em><br />
<em class="quotelev1">&gt; cells, we should:
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; 1) first poll the modeling groups to see if anyone knows of any
</em><br />
<em class="quotelev1">&gt; attempts to use the current CF conventions to store data on such
</em><br />
<em class="quotelev1">&gt; grids.  If not, then changing the standard won't have any real
</em><br />
<em class="quotelev1">&gt; consequences on legacy datasets.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; 2)  Provide an example in the proposed section 7.5 illustrating how
</em><br />
<em class="quotelev1">&gt; an icosahedral grid like the one referenced above would be stored. I
</em><br />
<em class="quotelev1">&gt; must say I think few would be able to quickly read section 7.5 and
</em><br />
<em class="quotelev1">&gt; be able to successfully store CF-compliant data on such grids;  the
</em><br />
<em class="quotelev1">&gt; current method, on the other hand, is easy to understand.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; I have no problem allowing the new method to be used, but wonder if
</em><br />
<em class="quotelev1">&gt; most users wouldn't find it easier in the case under consideration
</em><br />
<em class="quotelev1">&gt; here, to interpret datasets stored with the older method?  Hope to
</em><br />
<em class="quotelev1">&gt; hear other views on this.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; best regards,
</em><br />
<em class="quotelev1">&gt; Karl
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev3">&gt; &gt;&gt;I certainly always envisaged the possibility of cells of different
</em><br />
<em class="quotelev3">&gt; &gt;&gt;shapes, and we imply that this might be the case in the description
</em><br />
<em class="quotelev3">&gt; &gt;&gt;of cell bounds with the explicit mention of &quot;maximum&quot;:
</em><br />
<em class="quotelev3">&gt; &gt;&gt;
</em><br />
<em class="quotelev3">&gt; &gt;&gt;/&quot;A boundary variable will have one more dimension than its
</em><br />
<em class="quotelev3">&gt; &gt;&gt;associated coordinate or auxiliary coordinate variable./ The
</em><br />
<em class="quotelev3">&gt; &gt;&gt;additional dimension should be the most rapidly varying one, and its
</em><br />
<em class="quotelev3">&gt; &gt;&gt;size is the maximum number of cell vertices.&quot;
</em><br />
<em class="quotelev2">&gt; &gt;That's true. Nonetheless we didn't provide for it later on in the document!
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt;Well, now we have a choice. Dave Blodgett's proposal has been debated and
</em><br />
<em class="quotelev2">&gt; &gt;revised over many months, and I support it in its current form. That is a
</em><br />
<em class="quotelev2">&gt; &gt;more general solution, which allows not only mixtures of different sorts of
</em><br />
<em class="quotelev2">&gt; &gt;polygons, but also sets of discontiguous polygons (for each cell), polygons
</em><br />
<em class="quotelev2">&gt; &gt;with holes in them, and lines. It does not require missing data to be stored
</em><br />
<em class="quotelev2">&gt; &gt;in the bounds, because it has a count of how many vertices belong to each cell.
</em><br />
<em class="quotelev2">&gt; &gt;Permitting missing data in polygon bounds in sect 7.1 would be a different
</em><br />
<em class="quotelev2">&gt; &gt;way of describing a mixture of different sorts of polygons. Providing more
</em><br />
<em class="quotelev2">&gt; &gt;than one method to do this would introduce unnecessary complexity. How do you
</em><br />
<em class="quotelev2">&gt; &gt;and others think we should choose?
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<br /><em class="quotelev1">&gt; _______________________________________________
</em><br />
<em class="quotelev1">&gt; CF-metadata mailing list
</em><br />
<em class="quotelev1">&gt; CF-metadata at cgd.ucar.edu&lt;mailto:CF-metadata at cgd.ucar.edu&gt;
</em><br />
<em class="quotelev1">&gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<br /><br />----- End forwarded message -----
<br />
_______________________________________________
<br />
CF-metadata mailing list
<br />
CF-metadata at cgd.ucar.edu&lt;mailto:CF-metadata at cgd.ucar.edu&gt;
<br />
<a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
<br />
<br /><br /><br /><pre>
--
David Hassell
National Centre for Atmospheric Science
Department of Meteorology, University of Reading,
Earley Gate, PO Box 243, Reading RG6 6BB
Tel: +44 118 378 5613&lt;tel:+44%20118%20378%205613&gt;
<a href="http://www.met.reading.ac.uk/">http://www.met.reading.ac.uk/</a>
--
David Hassell
National Centre for Atmospheric Science
Department of Meteorology, University of Reading,
Earley Gate, PO Box 243, Reading RG6 6BB
Tel: +44 118 378 5613
<a href="http://www.met.reading.ac.uk/">http://www.met.reading.ac.uk/</a>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<a href="http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20170912/e5a69d2b/attachment.html">http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20170912/e5a69d2b/attachment.html</a>&gt;
</pre>
<span id="received"><dfn>Received on</dfn> Tue Sep 12 2017 - 09:08:03 BST</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start8503">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./8504.html" title="Next message in the list">Jim Biard: "[CF-metadata] Add new integer types to CF?"</a></li>
<li><dfn>Previous message</dfn>: <a href="./8502.html" title="Previous message in the list">David Hassell: "[CF-metadata] grid cells with a varying number of cell bounds"</a></li>
<li><dfn>In reply to</dfn>: <a href="./8502.html" title="Message to which this message replies">David Hassell: "[CF-metadata] grid cells with a varying number of cell bounds"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="./8591.html" title="Next message in this discussion thread">Karl Taylor: "[CF-metadata] grid cells with a varying number of cell bounds"</a></li>
<li><a name="replies" id="replies"></a>
<dfn>Reply</dfn>: <a href="./8591.html" title="Message sent in reply to this message">Karl Taylor: "[CF-metadata] grid cells with a varying number of cell bounds"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg8503" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg8503" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg8503" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg8503" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:59:16 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./8502.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./8504.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
