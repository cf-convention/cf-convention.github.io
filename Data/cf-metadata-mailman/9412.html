<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] 'months since' and 'years since' time units from Klaus Zimmermann on 2018-10-18 (cf-metadata-mailman)</title>
<meta name="Author" content="Klaus Zimmermann (klaus.zimmermann)" />
<meta name="Subject" content="[CF-metadata] 'months since' and 'years since' time units" />
<meta name="Date" content="2018-10-18" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./9411.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./9413.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] 'months since' and 'years since' time units</h1>
<!-- received="Thu Oct 18 05:38:24 2018" -->
<!-- isoreceived="20181018043824" -->
<!-- sent="Thu, 18 Oct 2018 13:38:24 +0200" -->
<!-- isosent="20181018113824" -->
<!-- name="Klaus Zimmermann" -->
<!-- email="klaus.zimmermann" -->
<!-- subject="[CF-metadata] 'months since' and 'years since' time units" -->
<!-- id="0a6f9090-235b-5801-c74d-5b378e635d55_at_smhi.se" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="c301171ef5934baab829ca0956e61d04_at_stfc.ac.uk" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start9412" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./9413.html" accesskey="d" title="David Blodgett: &quot;[CF-metadata] &#0039;months since&#0039; and &#0039;years since&#0039; time units&quot;">Next message</a> ]
[ <a href="./9411.html" title="Martin Juckes - UKRI STFC: &quot;[CF-metadata] &#0039;months since&#0039; and &#0039;years since&#0039; time units&quot;">Previous message</a> ]
[ <a href="./9411.html" title="Martin Juckes - UKRI STFC: &quot;[CF-metadata] &#0039;months since&#0039; and &#0039;years since&#0039; time units&quot;">In reply to</a> ]
<!-- unextthread="start" -->
[ <a href="./9415.html" accesskey="t" title="Martin Juckes - UKRI STFC: &quot;[CF-metadata] &#0039;months since&#0039; and &#0039;years since&#0039; time units&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg9412" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg9412" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg9412" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg9412" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Klaus Zimmermann &lt;<a href="mailto:klaus.zimmermann?Subject=Re%3A%20%5BCF-metadata%5D%20'months%20since'%20and%20'years%20since'%20time%20units">klaus.zimmermann</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Thu, 18 Oct 2018 13:38:24 +0200</span><br />
</address>
<br />
Hello All,
<br />
<br />On 18/10/18 13:08, Martin Juckes - UKRI STFC wrote:
<br />
<em class="quotelev1">&gt; Hello All,
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; I think the UNIDATA pull request referenced Jeff (<a href="https://github.com/Unidata/cftime/pull/69">https://github.com/Unidata/cftime/pull/69</a>) is mis-quoting the CF Convention. As far as I can see, Unidata says that a month is exactly one 12th of a year, and CF inherits this -- with the statement &quot;For similar reasons the unit month, which is defined in udunits.dat&lt;<a href="http://www.unidata.ucar.edu/software/udunits/">http://www.unidata.ucar.edu/software/udunits/</a>&gt; to be exactly year/12, should also be used with caution.&quot;
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; I can't see the difference between Lars's suggestion and the status quo. In UNIDATA a day is clearly defined as &quot;period of time equal to 24 hours&quot;, which gives 84600 seconds.
</em><br />
<br />The difference is merely that 'year' is defined as an alias for
<br />
'tropical_year' and is always 365.24219878125 days, regardless of
<br />
calendar. Lars suggestion could be implemented by introducing new units
<br />
along the lines of 'julian_month', 'gregorian_month', 'sidereal_month', etc.
<br />
<br />Indeed, for the 360 day calendar, this would lead exactly to Roy's
<br />
suggestion with '30_day_month' as a new unit allowing one to write
<br />
'30_day_month since ...'.
<br />
<br />Also Ryan is correct that basically any human reading the month units
<br />
will understand them in the same way; I even think this holds generally
<br />
for all calendars. The problems will come from software where packages
<br />
will use the generic udunits api to convert these times to seconds or
<br />
hours, for example to determine frequencies, or simply to the same
<br />
calendar to homogenize data from different sources.
<br />
<br />Hence, I don't think this approach is a good idea: The fact is, months
<br />
and years just don't fit very well in the whole units framework. They
<br />
are unique in that there is no simple relation given by scale factor and
<br />
offset with other time units. Just to stress this point: In all units
<br />
from albedo to yard you can perform the conversion to a different unit
<br />
for the same quantity independent from the value of the quantity. For
<br />
years and months it depends on intimate knowledge of the calendar and on
<br />
the date in question. Therefore, as the cf convention already states,
<br />
months and years really shouldn't be used as units for the time axis;
<br />
rather 'days since ...' together with a calendar in the attributes are
<br />
the best option at the moment. Together with a package like calcalcs[1],
<br />
this allows for relatively straightforward conversion to/from a (YYYY,
<br />
MM, dd) triple.
<br />
<br />Of course, on the other hand as Jeff noted, months are exceedingly
<br />
popular as a unit and with good reason. But perhaps we could borrow from
<br />
packages like iris[2] here and add an additional auxiliary coordinate
<br />
'month_number' to the specification to help with the practical needs?
<br />
<br />Cheers
<br />
Klaus
<br />
<br />[1] <a href="http://meteora.ucsd.edu/~pierce/calcalcs/index.html">http://meteora.ucsd.edu/~pierce/calcalcs/index.html</a>
<br />
[2]
<br />
<a href="https://scitools.org.uk/iris/docs/latest/iris/iris/coord_categorisation.html#iris.coord_categorisation.add_month_number">https://scitools.org.uk/iris/docs/latest/iris/iris/coord_categorisation.html#iris.coord_categorisation.add_month_number</a>
<br />
<br /><em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; regards,
</em><br />
<em class="quotelev1">&gt; Martin
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; ________________________________
</em><br />
<em class="quotelev1">&gt; From: CF-metadata &lt;cf-metadata-bounces at cgd.ucar.edu&gt; on behalf of B?rring Lars &lt;Lars.Barring at smhi.se&gt;
</em><br />
<em class="quotelev1">&gt; Sent: 18 October 2018 09:29:50
</em><br />
<em class="quotelev1">&gt; To: Ryan Abernathey; whitaker.jeffrey at gmail.com; cf-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt; Subject: Re: [CF-metadata] 'months since' and 'years since' time units
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Hi,
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; I have have come to think about this from a somewhat different perspective. For some analyses, as well as when calculating certain derived climatological statistics (aka climate indices), using datasets based on different calendars the problem becomes obvious.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; In the model world of a 365-day GCM one year _is_ 365 days, and in a 360_day GCM a year _is_ 360 days. In the case of a gregorian/standard calendar GCM I am not sure whether it is 365.25 or 365.242198781 but this is in practice less of a problem.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; For datasets based non-standard calendars imposing the current UDUNITS definition of a year leads to complications that require workarounds if one is interested in for example the time elapsed until something happens or the duration of some (long-lasting) events. One way to partly mitigate these issues would be to use the time unit of years_since_START or months_since_START, but this is warned against in the CF Conventions and may software tools do not support it .
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; The fundamental issue is the inconsistency between the GCM year and the UDUNITS year. So I would like to call on the wisdom of this list to see whether the CF Convention could include a modification to the definition of a year and month:
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; * standard calendar (no change)
</em><br />
<em class="quotelev1">&gt; 1 day = 84600 seconds
</em><br />
<em class="quotelev1">&gt; 1 year = 365.242198781 days
</em><br />
<em class="quotelev1">&gt; 1 month = 365.242198781 / 12 days
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; * 365_day calendar
</em><br />
<em class="quotelev1">&gt; 1 day = 84600 seconds
</em><br />
<em class="quotelev1">&gt; 1 year = 365 days
</em><br />
<em class="quotelev1">&gt; 1 month = 365 / 12 days
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; * 360_day calendar
</em><br />
<em class="quotelev1">&gt; 1 day = 84600 seconds
</em><br />
<em class="quotelev1">&gt; 1 year = 360 days
</em><br />
<em class="quotelev1">&gt; 1 month = 360 / 12 days
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; That is, the seconds per day ratio is not changed thus maintaining the consistency to other SI units. And, for the 360_day calendar month follows the suggestion by Ryan and Jeffrey.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Kind regards,
</em><br />
<em class="quotelev1">&gt; Lars
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; --
</em><br />
<em class="quotelev1">&gt; Lars B?rring
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; FDr, Forskare
</em><br />
<em class="quotelev1">&gt; PhD, Research Scientist
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; SMHI  /  Swedish Meteorological and Hydrological Institute
</em><br />
<em class="quotelev1">&gt; Rossby Centre
</em><br />
<em class="quotelev1">&gt; SE - 601 76 NORRK?PING
</em><br />
<em class="quotelev1">&gt; Tel / Phone: +46 (0)11 495 8604
</em><br />
<em class="quotelev1">&gt; Fax: +46 (0)11 495 8001
</em><br />
<em class="quotelev1">&gt; Bes?ksadress / Visiting address: Folkborgsv?gen 17
</em><br />
<em class="quotelev1">&gt; ________________________________
</em><br />
<em class="quotelev1">&gt; Fr?n: CF-metadata [cf-metadata-bounces at cgd.ucar.edu] f?r Ryan Abernathey [ryan.abernathey at gmail.com]
</em><br />
<em class="quotelev1">&gt; Skickat: den 17 oktober 2018 21:22
</em><br />
<em class="quotelev1">&gt; Till: whitaker.jeffrey at gmail.com
</em><br />
<em class="quotelev1">&gt; Kopia: cf-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt; ?mne: Re: [CF-metadata] 'months since' and 'years since' time units
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Hi everyone,
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; I am that user, and I'm new to this mailing list. Thank you all for your work on CF conventions. It's such a valuable effort!
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; I want to note that this was inspired by the proliferation of datasets in the wild that use &quot;month&quot; as their units. For example, nearly all of the IRI Data Library does this, in conjunction with a 3&quot;60_day&quot; calendar (example: <a href="https://iridl.ldeo.columbia.edu/SOURCES/.NOAA/.NCEP-NCAR/.CDAS-1/.MONTHLY/.Diagnostic/.surface/.temp/">https://iridl.ldeo.columbia.edu/SOURCES/.NOAA/.NCEP-NCAR/.CDAS-1/.MONTHLY/.Diagnostic/.surface/.temp/</a>).
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; My impression from talking to data providers is that no one is using &quot;360_day&quot; calendar and &quot;months&quot; as units, and then expecting &quot;months&quot; to be interpreted as 365.242198781/12 days. They all expect it to be interpreted as 30 days. While there are various workarounds that can be used at different levels of the software stack, the best solution, IMHO, is to explicitly allow in CF conventions what Jeff proposed: &quot;months and years be interpreted as calendar months and years for those calendars where they have a fixed length&quot;. I don't think this will break existing applications.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Thanks,
</em><br />
<em class="quotelev1">&gt; Ryan
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; On Wed, Oct 17, 2018 at 3:06 PM Jeffrey Whitaker &lt;whitaker.jeffrey at gmail.com&lt;mailto:whitaker.jeffrey at gmail.com&gt;&gt; wrote:
</em><br />
<em class="quotelev1">&gt; Hi:  I'm a developer of the 'cftime' python package (<a href="https://github.com/Unidata/cftime">https://github.com/Unidata/cftime</a>).  A user submitted a pull request (<a href="https://github.com/Unidata/cftime/pull/69">https://github.com/Unidata/cftime/pull/69</a>) that implements support for a 30-day calendar month time unit for the '360_day' CF calendar.  Although using a 'month' time unit is a tricky proposition in general, for this calendar it seems straightforward since every month has the same length.  However, in the discussion of the pull request it was pointed out that CF expects  that &quot;the value of the units attribute is a string that can be recognized by UNIDATA?s Udunits package&quot;, and that UDUNITS defines a month as 365.242198781/12 days.    My question is this - is it reasonable for our python package to make an exception to this rule for the 360_day calendar?  More generally, can months and years be interpreted as calendar months and years for those calendars where they have a fixed length, or will this deviate from the existing CF conventions and break existing applications?
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Regards, Jeff
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; --
</em><br />
<em class="quotelev1">&gt; Jeffrey S. Whitaker
</em><br />
<em class="quotelev1">&gt; NOAA/OAR/PSD  R/PSD1
</em><br />
<em class="quotelev1">&gt; 325 Broadway, Boulder, CO, 80305-3328
</em><br />
<em class="quotelev1">&gt; Phone: (303)497-6313
</em><br />
<em class="quotelev1">&gt; FAX: (303)497-6449
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; _______________________________________________
</em><br />
<em class="quotelev1">&gt; CF-metadata mailing list
</em><br />
<em class="quotelev1">&gt; CF-metadata at cgd.ucar.edu&lt;mailto:CF-metadata at cgd.ucar.edu&gt;
</em><br />
<em class="quotelev1">&gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<em class="quotelev1">&gt; _______________________________________________
</em><br />
<em class="quotelev1">&gt; CF-metadata mailing list
</em><br />
<em class="quotelev1">&gt; CF-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<span id="received"><dfn>Received on</dfn> Thu Oct 18 2018 - 05:38:24 BST</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start9412">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./9413.html" title="Next message in the list">David Blodgett: "[CF-metadata] &#0039;months since&#0039; and &#0039;years since&#0039; time units"</a></li>
<li><dfn>Previous message</dfn>: <a href="./9411.html" title="Previous message in the list">Martin Juckes - UKRI STFC: "[CF-metadata] &#0039;months since&#0039; and &#0039;years since&#0039; time units"</a></li>
<li><dfn>In reply to</dfn>: <a href="./9411.html" title="Message to which this message replies">Martin Juckes - UKRI STFC: "[CF-metadata] &#0039;months since&#0039; and &#0039;years since&#0039; time units"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="./9415.html" title="Next message in this discussion thread">Martin Juckes - UKRI STFC: "[CF-metadata] &#0039;months since&#0039; and &#0039;years since&#0039; time units"</a></li>
<li><a name="replies" id="replies"></a>
<dfn>Reply</dfn>: <a href="./9415.html" title="Message sent in reply to this message">Martin Juckes - UKRI STFC: "[CF-metadata] &#0039;months since&#0039; and &#0039;years since&#0039; time units"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg9412" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg9412" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg9412" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg9412" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:59:30 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./9411.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./9413.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
