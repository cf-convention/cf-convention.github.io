<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] CF and multi-forecast system ensemble data from Kettleborough, Jamie on 2006-11-02 (cf-metadata-mailman)</title>
<meta name="Author" content="Kettleborough, Jamie (jamie.kettleborough)" />
<meta name="Subject" content="[CF-metadata] CF and multi-forecast system ensemble data" />
<meta name="Date" content="2006-11-02" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./0396.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./0398.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] CF and multi-forecast system ensemble data</h1>
<!-- received="Thu Nov  2 09:19:57 2006" -->
<!-- isoreceived="20061102091957" -->
<!-- sent="Thu, 02 Nov 2006 16:19:57 +0000" -->
<!-- isosent="20061102161957" -->
<!-- name="Kettleborough, Jamie" -->
<!-- email="jamie.kettleborough" -->
<!-- subject="[CF-metadata] CF and multi-forecast system ensemble data" -->
<!-- id="1162484397.16228.123.camel_at_eld408.desktop.frd.metoffice.com" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="4548D8C7.2090705_at_noaa.gov" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start397" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./0398.html" accesskey="d" title="Francisco Doblas-Reyes: &quot;[CF-metadata] CF and multi-forecast system ensemble data&quot;">Next message</a> ]
[ <a href="./0396.html" title="Christiane Textor: &quot;[CF-metadata] Use of Standard Names and&quot;">Previous message</a> ]
[ <a href="./0393.html" title="Steve Hankin: &quot;[CF-metadata] CF and multi-forecast system ensemble data&quot;">In reply to</a> ]
<!-- unextthread="start" -->
[ <a href="./0399.html" accesskey="t" title="Steve Hankin: &quot;[CF-metadata] CF and multi-forecast system ensemble data&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg397" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg397" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg397" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg397" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Kettleborough, Jamie &lt;<a href="mailto:jamie.kettleborough?Subject=Re%3A%20%5BCF-metadata%5D%20CF%20and%20multi-forecast%20system%20ensemble%20data">jamie.kettleborough</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Thu, 02 Nov 2006 16:19:57 +0000</span><br />
</address>
<br />
Hello Steve,
<br />
<br />I appreciate your concerns on stability and the required complexity for
<br />
CF interpreting code - but I think there is a danger in this case that
<br />
if we don't accommodate ensembles in the right way then we are limiting
<br />
CF's applicability to forecasts (operational or climate).
<br />
<br />Yes I agree ensemble is not a coordinate in the same sense as time or
<br />
space - there is no obvious unique label or metric.  But I think it
<br />
makes a lot of sense to treat it as a coordinate/dimension - it
<br />
facilitates using the data to make probabilistic forecasts.
<br />
<br />Could we live with the grouping approach - literally we could - but I
<br />
don't think its the best way forward.  I think if you simply want to
<br />
compare output from different models then the grouping approach is
<br />
probably OK, but I think we are moving beyond that kind of analysis (and
<br />
operational forecasting is probably ahead of climate from this point of
<br />
view) to an analysis where the _the ensemble is the forecast entity_,
<br />
not the individual model.
<br />
<br />So I think if you want your analysis tool to be useful in the
<br />
forecasting context then there is development effort needed here however
<br />
we represent ensembles on disk (and from what Jennifer has said this
<br />
work is already underway in GRADS).  (Of course there are many
<br />
applications where forecast isn't the be all and end all and you can say
<br />
your analysis tool is made for this set of applications, not
<br />
forecasting).  As Bryan pointed out CF is not intrinsically 4D - it is
<br />
just it currently makes the space and time dims special.  Shouldn't CF-
<br />
aware applications be able to deal with arbitrary dimensionality?
<br />
<br />I also suspect for large ensembles (100+ members?) the grouping approach
<br />
could be inefficient I/O wise.  But I haven't had chance to play with
<br />
NetCDF4 yet so I could be wrong.
<br />
<br />I think the current situation with this is
<br />
<br />1) should we use grouping or dimensions for ensembles (I think dimension
<br />
is what we currently have)
<br />
<br />2) How do we label ensemble meta data?
<br />
&nbsp;&nbsp;a) standard_names, or
<br />
&nbsp;&nbsp;b) external_dictionary
<br />
<br />I think either could work - though external_dictionary seems to give
<br />
more scope for coping with different levels of meta data you might
<br />
choose to associate with ensembles.  And it preserves the general
<br />
applicability of the vague names like 'source' as global attributes etc.
<br />
(sorry this statement assumes context knowledge of the rest of this
<br />
thread).  (are there other implications of accepting
<br />
external_dictionary?)  Single model files would need to include the meta
<br />
data coordinates as singleton dimensions - but I think that is OK. I
<br />
_think_ this also makes aggregation along realization more like
<br />
aggregation along time or level. 
<br />
<br />3) Is there any common ground for ensembles meta data (across
<br />
forecastetc. timescales) that we can standardise?  i.e. return to Paco's
<br />
list.
<br />
<br />4) Would CF act as the standard body for these - or should we be
<br />
lobbying for someone else to do it?
<br />
<br />(Have I missed anything in my eagerness to try and keep this thread
<br />
moving?)
<br />
<br />Jamie
<br />
<br />On Wed, 2006-11-01 at 09:26 -0800, Steve Hankin wrote:
<br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Bryan Lawrence wrote: 
</em><br />
<em class="quotelev2">&gt; &gt; On Tue, 2006-10-31 at 09:32 -0800, Steve Hankin wrote:
</em><br />
<em class="quotelev2">&gt; &gt; 
</em><br />
<em class="quotelev2">&gt; &gt;   
</em><br />
<em class="quotelev3">&gt; &gt; &gt; Like others I've watched this email thread grow like Topsy, wondering
</em><br />
<em class="quotelev3">&gt; &gt; &gt; if I would find the time to read it ... But the discussion topic seems
</em><br />
<em class="quotelev3">&gt; &gt; &gt; big enough to warrant a fair amount of rough and tumble.
</em><br />
<em class="quotelev3">&gt; &gt; &gt;     
</em><br />
<em class="quotelev2">&gt; &gt; 
</em><br />
<em class="quotelev2">&gt; &gt; Absolutely. Bring it on :-) :-)
</em><br />
<em class="quotelev2">&gt; &gt; 
</em><br />
<em class="quotelev2">&gt; &gt; With regard to the stability of CF and long term evolution, that's
</em><br />
<em class="quotelev2">&gt; &gt; what's behind my wanting to separate maintaining descriptions of the
</em><br />
<em class="quotelev2">&gt; &gt; quantities measured/predicted from the descriptions of how/why it was
</em><br />
<em class="quotelev2">&gt; &gt; done. It's also why I want just one way of doing it, not one that is
</em><br />
<em class="quotelev2">&gt; &gt; specially optimized for numerical models per se, and not of wider
</em><br />
<em class="quotelev2">&gt; &gt; applicability.
</em><br />
<em class="quotelev2">&gt; &gt; 
</em><br />
<em class="quotelev2">&gt; &gt; 
</em><br />
<em class="quotelev2">&gt; &gt;   
</em><br />
<em class="quotelev3">&gt; &gt; &gt; OK.  Enuf preamble.  In a nutshell, the new proposed structures seem
</em><br />
<em class="quotelev3">&gt; &gt; &gt; to capture the semantics of the various collections of model outputs
</em><br />
<em class="quotelev3">&gt; &gt; &gt; -- ensembles and forecast collections -- through the addition of new
</em><br />
<em class="quotelev3">&gt; &gt; &gt; dimensions.  In the most extreme case this dimension list might become
</em><br />
<em class="quotelev3">&gt; &gt; &gt; (realization,forecast_reference_time,forecast_period,lev,lat,lon).
</em><br />
<em class="quotelev3">&gt; &gt; &gt; 
</em><br />
<em class="quotelev3">&gt; &gt; &gt; I'd pose two questions:
</em><br />
<em class="quotelev3">&gt; &gt; &gt;      1. Will this approach break existing CF applications?  If yes, is
</em><br />
<em class="quotelev3">&gt; &gt; &gt;         that a red flag to consider other options?
</em><br />
<em class="quotelev3">&gt; &gt; &gt;     
</em><br />
<em class="quotelev2">&gt; &gt; 
</em><br />
<em class="quotelev2">&gt; &gt; I don't believe there is any restriction on number of dimensions in CF,
</em><br />
<em class="quotelev2">&gt; &gt; so while it may not be pretty, it seems ok to me.
</em><br />
<em class="quotelev2">&gt; &gt;   
</em><br />
<em class="quotelev3">&gt; &gt; &gt;      1. Is this the same approach that we would take if we already had
</em><br />
<em class="quotelev3">&gt; &gt; &gt;         netCDF 4?  If no, is that a red flag that we should give more
</em><br />
<em class="quotelev3">&gt; &gt; &gt;         thought to the long-term stability of the standard?
</em><br />
<em class="quotelev3">&gt; &gt; &gt;     
</em><br />
<em class="quotelev2">&gt; &gt; 
</em><br />
<em class="quotelev2">&gt; &gt; Let's not think about netCDF4 immediately :-) One of the other things we
</em><br />
<em class="quotelev2">&gt; &gt; discussed was trying to divorce the content standard from the
</em><br />
<em class="quotelev2">&gt; &gt; implementation standard ...
</em><br />
<em class="quotelev2">&gt; &gt; 
</em><br />
<em class="quotelev2">&gt; &gt;   
</em><br />
<em class="quotelev1">&gt; Bryan,
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Let me start by saying with full sincerity that I am not arguing for
</em><br />
<em class="quotelev1">&gt; any particular conclusion.  I see major trade-offs to both options --
</em><br />
<em class="quotelev1">&gt; adding new dimensions and juggling external metadata.  But ...
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; With very little discussion (just above -- granting there are elements
</em><br />
<em class="quotelev1">&gt; added below) you have waved away the type of questions that I'd argue
</em><br />
<em class="quotelev1">&gt; we need to ask ourselves continuously.  Standards are always about
</em><br />
<em class="quotelev1">&gt; making compromises.  It is right to begin with the approach you are
</em><br />
<em class="quotelev1">&gt; insisting on -- divorce the abstract understanding of the problem from
</em><br />
<em class="quotelev1">&gt; the messy technology.  But the next step has to be to ask what the
</em><br />
<em class="quotelev1">&gt; undesirable impacts of your choices might be.  And then to make
</em><br />
<em class="quotelev1">&gt; changes to your thinking and accept compromises.  Without stability CF
</em><br />
<em class="quotelev1">&gt; is not a standard at all.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Regarding no. 1 -- the choice to utilize a 5 or 6 D encoding -- the
</em><br />
<em class="quotelev1">&gt; consequence will be the the great majority of existing applications
</em><br />
<em class="quotelev1">&gt; will be unable to read the new files at all without significant
</em><br />
<em class="quotelev1">&gt; modifications.  Inside of those new files will be 4D subsets that
</em><br />
<em class="quotelev1">&gt; represent the current &quot;CF nut&quot; -- objects that the applications can
</em><br />
<em class="quotelev1">&gt; currently read.  So we have a large net loss of interoperability until
</em><br />
<em class="quotelev1">&gt; additional investments are made in software across our community.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Regarding no. 2 -- the CF community is not more than 2 years from
</em><br />
<em class="quotelev1">&gt; where discussions of netCDF 4 will occupy a significant part of our
</em><br />
<em class="quotelev1">&gt; time and energy (off the cuff estimate).  So to propose concrete
</em><br />
<em class="quotelev1">&gt; changes today without fully considering how you would handle them in
</em><br />
<em class="quotelev1">&gt; netCDF 4, you are inviting two major sets of changes in as many years.
</em><br />
<em class="quotelev1">&gt; That's a very low standard of stability.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; So what are the compromises to be looked at?  How would your data
</em><br />
<em class="quotelev1">&gt; modeling of ensembles and forecasts look different if you think in
</em><br />
<em class="quotelev1">&gt; terms of dimensions (an array of identical objects) versus
</em><br />
<em class="quotelev1">&gt; &quot;groups&quot; (unordered lists which may have heterogeneous contents) ?
</em><br />
<em class="quotelev1">&gt; The former is a more perfect fit to the concepts -- the latter is a
</em><br />
<em class="quotelev1">&gt; more general structure that fully embraces the needed concepts.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; The question is how great are the negative impacts in stability and
</em><br />
<em class="quotelev1">&gt; interoperability that you are willing to accept in order to work with
</em><br />
<em class="quotelev1">&gt; the more perfect data model?   This is a balancing question where the
</em><br />
<em class="quotelev1">&gt; &quot;abstract data modeler&quot; view represents one of the polarized
</em><br />
<em class="quotelev1">&gt; positions.  The entire substance of your arguments so far seems to
</em><br />
<em class="quotelev1">&gt; come from this viewpoint.  We acknowledge that CF discussions have not
</em><br />
<em class="quotelev1">&gt; found a balance between provider and user viewpoints in the past.
</em><br />
<em class="quotelev1">&gt; How do we improve upon that?
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt;     - Steve
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev2">&gt; &gt; But your substantive point is fair enough, is there a cleaner way to
</em><br />
<em class="quotelev2">&gt; &gt; think about this ...?
</em><br />
<em class="quotelev2">&gt; &gt; 
</em><br />
<em class="quotelev2">&gt; &gt; Particularly from the point of view that a set of simulations comprising
</em><br />
<em class="quotelev2">&gt; &gt; a forecast IS THE forecast (singular), then I think at least
</em><br />
<em class="quotelev2">&gt; &gt; (realization,t,z,y,x) is inescapable. I don't like the other example
</em><br />
<em class="quotelev2">&gt; &gt; (realization,ref_time,period,z,y,x), but accept that it may well be
</em><br />
<em class="quotelev2">&gt; &gt; the natural output of a set of aggregations. Is it not what Thredds
</em><br />
<em class="quotelev2">&gt; &gt; would deliver anyway from an aggregation? Which brings me to my last
</em><br />
<em class="quotelev2">&gt; &gt; point:
</em><br />
<em class="quotelev2">&gt; &gt; 
</em><br />
<em class="quotelev2">&gt; &gt; As far as Thredds as a stop-gap solution goes. I think we need to
</em><br />
<em class="quotelev2">&gt; &gt; divorce how we interact with the data from how we manage it
</em><br />
<em class="quotelev2">&gt; &gt; (particularly for posterity). There is no way that I'm going to rely on
</em><br />
<em class="quotelev2">&gt; &gt; ANY *interface* to preserve information content, so what you're really
</em><br />
<em class="quotelev2">&gt; &gt; saying is that you want to rely on metadata held externally from the
</em><br />
<em class="quotelev2">&gt; &gt; files (whether Thredds or not). To some extent that's inescapable (which
</em><br />
<em class="quotelev2">&gt; &gt; was one of my points in an earlier email), but we want to stick to the
</em><br />
<em class="quotelev2">&gt; &gt; requirement that CF can differentiate data (if not fully describe all
</em><br />
<em class="quotelev2">&gt; &gt; the ancillary information) ... and for forecast ensembles (and station
</em><br />
<em class="quotelev2">&gt; &gt; data) there is a need for some extra information over and above the
</em><br />
<em class="quotelev2">&gt; &gt; index value in a &quot;special&quot; dimension. It's that information we need to
</em><br />
<em class="quotelev2">&gt; &gt; get into the CF content standard.
</em><br />
<em class="quotelev2">&gt; &gt; 
</em><br />
<em class="quotelev2">&gt; &gt; Also, from an operational perspective, ok, so maybe I can use Thredds or
</em><br />
<em class="quotelev2">&gt; &gt; any interface to get some data, but then I've got it. What then? The
</em><br />
<em class="quotelev2">&gt; &gt; content standard has to tell me what's in it, so we're back to CF and
</em><br />
<em class="quotelev2">&gt; &gt; possibly pointers to external metadata.
</em><br />
<em class="quotelev2">&gt; &gt; 
</em><br />
<em class="quotelev2">&gt; &gt; (Wrt netcdf4: I see groups as being more useful for aggregating things
</em><br />
<em class="quotelev2">&gt; &gt; that don't share common dimensionality)
</em><br />
<em class="quotelev2">&gt; &gt; 
</em><br />
<em class="quotelev2">&gt; &gt; Cheers
</em><br />
<em class="quotelev2">&gt; &gt; Bryan
</em><br />
<em class="quotelev2">&gt; &gt; 
</em><br />
<em class="quotelev2">&gt; &gt;   
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; -- 
</em><br />
<em class="quotelev1">&gt; --
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Steve Hankin, NOAA/PMEL -- Steven.C.Hankin at noaa.gov
</em><br />
<em class="quotelev1">&gt; 7600 Sand Point Way NE, Seattle, WA 98115-0070
</em><br />
<em class="quotelev1">&gt; ph. (206) 526-6080, FAX (206) 526-6744
</em><br />
<em class="quotelev1">&gt; _______________________________________________
</em><br />
<em class="quotelev1">&gt; CF-metadata mailing list
</em><br />
<em class="quotelev1">&gt; CF-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt; <a href="http://www.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://www.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<span id="received"><dfn>Received on</dfn> Thu Nov 02 2006 - 09:19:57 GMT</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start397">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./0398.html" title="Next message in the list">Francisco Doblas-Reyes: "[CF-metadata] CF and multi-forecast system ensemble data"</a></li>
<li><dfn>Previous message</dfn>: <a href="./0396.html" title="Previous message in the list">Christiane Textor: "[CF-metadata] Use of Standard Names and"</a></li>
<li><dfn>In reply to</dfn>: <a href="./0393.html" title="Message to which this message replies">Steve Hankin: "[CF-metadata] CF and multi-forecast system ensemble data"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="./0399.html" title="Next message in this discussion thread">Steve Hankin: "[CF-metadata] CF and multi-forecast system ensemble data"</a></li>
<li><a name="replies" id="replies"></a>
<dfn>Reply</dfn>: <a href="./0399.html" title="Message sent in reply to this message">Steve Hankin: "[CF-metadata] CF and multi-forecast system ensemble data"</a></li>
<li><dfn>Reply</dfn>: <a href="./0406.html" title="Message sent in reply to this message">Steve Hankin: "[CF-metadata] CF and multi-forecast system ensemble data"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg397" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg397" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg397" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg397" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:56:49 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./0396.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./0398.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
