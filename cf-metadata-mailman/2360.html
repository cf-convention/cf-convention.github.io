<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] Multiple file datasets (was: Swath observational data) from Stephen Emsley on 2009-11-20 (cf-metadata-mailman)</title>
<meta name="Author" content="Stephen Emsley (SEmsley)" />
<meta name="Subject" content="[CF-metadata] Multiple file datasets (was: Swath observational data)" />
<meta name="Date" content="2009-11-20" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./2359.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./2361.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] Multiple file datasets (was: Swath observational data)</h1>
<!-- received="Fri Nov 20 06:12:09 2009" -->
<!-- isoreceived="20091120061209" -->
<!-- sent="Fri, 20 Nov 2009 13:12:09 -0000" -->
<!-- isosent="20091120131209" -->
<!-- name="Stephen Emsley" -->
<!-- email="SEmsley" -->
<!-- subject="[CF-metadata] Multiple file datasets (was: Swath observational data)" -->
<!-- id="E7EF5BBF2666854B896473086F52964C201364_at_svr-arg-dc.Argans.local" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="4B068BB1.6070309&#64;unidata.ucar.edu" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start2360" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./2361.html" accesskey="d" title="John Caron: &quot;[CF-metadata] [CF Metadata] #37: Conventions for Point	Observation Data&quot;">Next message</a> ]
[ <a href="./2359.html" title="John Caron: &quot;[CF-metadata] Multiple file datasets (was: Swath observational data)&quot;">Previous message</a> ]
<!-- unextthread="start" -->
[ <a href="./2364.html" accesskey="t" title="John Caron: &quot;[CF-metadata] Multiple file datasets&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg2360" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg2360" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg2360" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg2360" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Stephen Emsley &lt;<a href="mailto:SEmsley?Subject=Re%3A%20%5BCF-metadata%5D%20Multiple%20file%20datasets%20(was%3A%20Swath%20observational%20data)">SEmsley</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Fri, 20 Nov 2009 13:12:09 -0000</span><br />
</address>
<br />
<em class="quotelev2">&gt;&gt; Can anyone summarize what SAFE does?
</em><br />
<br />I will give it a shot as I brought it up in the first place!
<br />
<br />The Standard Archive Format for Europe (SAFE) was developed as a common format for archiving to ensure long-term preservation of EO data holdings, both historical and operational. The SAFE website [www.esa.int/safe] is the official ESA maintained site for the maintenance and distribution of the standard format, specification, XML-schemas and tools.
<br />
<br />SAFE is a specialisation of the XML Formatted Data Unit (XFDU), a CCSDS (Consultative Committee for Space Data Systems) recommended standard for the packaging of data and metadata to facilitate information transfer and archiving. Every SAFE product is an XFDU package. SAFE is a specialisation of XFDU, which defines a restriction of the generic XFDU package. SAFE inherits its main structure from XFDU packaging format and defines high level constraints and new rules for Earth Observation ground segment data products.
<br />
<br />A SAFE product wraps, or references, data and associates that data with metadata, both global and local. SAFE product metadata contains basic information, such as the acquisition period, platform and sensor identification and a processing history to ensure traceability. For each included, or external referenced, dataset another layer of associated metadata may be attached providing orbit and geo-location information, quality information and representational information.
<br />
<br />Basically a SAFE product is a directory. At the top level is a manifest file, written in XML, that provides both a map of the contained data sets, defines the relationships between these datasets, and contains global metadata (such as platform name, acquisition period etc.). There is a set of required metadata defined by the SAFE specialisation (e.g. there is an ENVISAT specialisation, further restricted to apply to, say, MERIS, and still further specialised to, say, Level 1 processed products).
<br />
<br />The contained datasets are collections of records. They are of three types:
<br />
<br />Measurement Data Sets: These are typically binary format files and, in our case, will be netCDF-CF files. As an example we will have 46 measurement data products and each will be stored at a netCDF file (data record) along with a data record containing associated quality information and another containing status flags.
<br />
<br />Annotation Data Sets: These contain metadata and common data. Although to be decided in the case of Sentinel 3 Level 2 we are considering storing a common set of coordinate data that is applicable to subsets of the measurement data. The manifest file will provide the association between specific measurement datasets and the associated coordinate data.
<br />
<br />Representation Data Sets: These are XML Schema descriptions of the measurement and annotation datasets. Firstly it is a key concept for OAIS digital preservation and secondarily third party applications may use these for displaying / accessing the corresponding measurement data sets. I appreciate that it might seem a little 'belt-and-braces' to have an XML schema for a netCDF file (which is by nature self-describing) but that is how the SAFE people have decided to include netCDF into the convention.
<br />
<br />There is a third type of data which can be considered as resources. These may be, for instance, data required for the generation of the end-user data products. For instance, for Level 2 data products they would include the Level 1 input products and possibly, for instance, ECMWF data required for processing (although the latter might equally be an annotation dataset). These resources are not packaged inside a SAFE container but are referenced (in the manifest file) using a URI.
<br />
<br />All of these taken together are a SAFE package.
<br />
<br />I hope that this provides a reasonably informative overview. The SAFE website is the place to go for more detailed info.
<br />
<br />Steve
<br />
<br /><br /><pre>
---
Dr Stephen Emsley??????? ???????????????????????????????????????????????????????????Tel: +44 (0)1752 764 289
? ARGANS Limited????????????????????????????????????????????????????? ????????Mobile: +44 (0)7912 515 418
-----Original Message-----
From: cf-metadata-bounces at cgd.ucar.edu [mailto:cf-metadata-bounces at cgd.ucar.edu] On Behalf Of John Caron
Sent: 20 November 2009 12:30
To: cf-metadata at cgd.ucar.edu
Subject: [CF-metadata] Multiple file datasets (was: Swath observational data)
This topic deserves its own heading, so here it is.
Perhaps we should gather current practices and ideas. I think Balaji's gridspec has a proposal about this. Can anyone summarize what SAFE does?
Im imagining how this is actually used, eg:
float data(y,x);
  data:coordinates = &quot;lat at file1 lon at file2&quot;;
????
John Graybeal wrote:
&gt; I like Bryan's recommendation for a UUID or similar.
&gt; 
&gt; Now I'm going to be annoying and suggest the UUID *could* be a URI, or 
&gt; these days, an IRI (International ..).
&gt; 
&gt; And I think the way of 'locating' the file should be neither in 
&gt; packaging nor in local resolution; it should be in global namespace 
&gt; resolution.  This is the way of the future, and is already more 
&gt; 'permanent' than either packaging or local resolution, IMHO.
&gt; 
&gt; There is one form of URI in particular that is already resolvable: a 
&gt; URL.  OK, that's an old song, but I'm gonna stick to it for a while 
&gt; longer.  That form meets all the other requirements: it can be 
&gt; registered in a resolver, it can be guaranteed unique (to the same 
&gt; authority level as a UUID, anyway), and it is a unique string that can 
&gt; be used to validate the link).  And it has the obvious benefit of being 
&gt; resolvable right now, for as long as the domain is held and properly 
&gt; maintained (Good URLs don't die).
&gt; 
&gt; Since the last paragraph risks starting another unique identifier war, I 
&gt; promise not to re-engage unless someone asks me to. Meanwhile, I like
&gt; 
&gt; John
&gt; 
&gt; 
&gt; On Nov 19, 2009, at 22:23, Bryan Lawrence wrote:
&gt; 
&gt;&gt; On Thursday 19 November 2009 19:40:08 Jonathan Gregory wrote:
&gt;&gt;&gt;&gt;     ...  In  some cases, referencing attributes such as
&gt;&gt;&gt;&gt;      &quot;coordinates&quot; and &quot;ancillary_variables&quot; would, ideally, point to a
&gt;&gt;&gt;&gt;      variable in a different dataset.
&gt;&gt;&gt;
&gt;&gt;&gt; This is a general problem to which CF doesn't have a solution because 
&gt;&gt;&gt; it was
&gt;&gt;&gt; conceived as a convention for single netCDF files. However we need a 
&gt;&gt;&gt; solution
&gt;&gt;&gt; as often several files should be treated as a single dataset.
&gt;&gt;&gt;
&gt;&gt;&gt; If the files don't overlap i.e. their contents are complementary, I 
&gt;&gt;&gt; think it
&gt;&gt;&gt; should be satisfactory to allow variables in one file to be pointed 
&gt;&gt;&gt; to by name
&gt;&gt;&gt; from another file, with no other mechanism being required within the 
&gt;&gt;&gt; file. I
&gt;&gt;&gt; don't like the idea of naming one file within another file, as that 
&gt;&gt;&gt; would be
&gt;&gt;&gt; very fragile. Instead, I think the file aggregation should be implied by
&gt;&gt;&gt; simply defining the group of files which are to be treated as one 
&gt;&gt;&gt; file e.g.
&gt;&gt;&gt; by putting them in one directory.
&gt;&gt;
&gt;&gt; It's the old ones that are the best ones :-) :-)  this issue keeps on 
&gt;&gt; coming back ... :-) :-) and we keep trying to ignore it ...
&gt;&gt;
&gt;&gt; I think we agree that an actual physical filename including path is 
&gt;&gt; useless. We need both  a relative link which relies on the 
&gt;&gt; preservation of a group of files in a particular arrangement ...  AND 
&gt;&gt; an internal identifier so more robust linking mechanisms can be used 
&gt;&gt; when (if) the data ends up in a managed environment.
&gt;&gt;
&gt;&gt; I think it's crucial in this situation to ensure that each file has a 
&gt;&gt; unique identifier within it (created, for example, with uuid), because 
&gt;&gt; all solutions which rely on packaging are fragile (SAFE is probably 
&gt;&gt; better than most), but the bottom line is that users move files around 
&gt;&gt; ... and we need some way of ensuring that we/they can validate the 
&gt;&gt; links that are in place are the ones that were originally intended.
&gt;&gt;
&gt;&gt; So relative links would also include the identifier of the intended 
&gt;&gt; target as well as the relative path in operating system agnostic terms.
&gt;&gt;
&gt;&gt; That identifier can be used in two ways: to validate the link (my 
&gt;&gt; software can always check that the variable that I just opened 
&gt;&gt; following a link from another one is the one that was expected by 
&gt;&gt; checking the container identifier), and b) to produce an identifier 
&gt;&gt; resolver service for the situation where the packaging has had to be 
&gt;&gt; broken (which might occur for performance reasons or ...)
&gt;&gt;
&gt;&gt; CF could recommend something like this ...
&gt;&gt;
&gt;&gt; Bryan
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; Bryan Lawrence
&gt;&gt; Director of Environmental Archival and Associated Research
&gt;&gt; (NCAS/British Atmospheric Data Centre and NCEO/NERC NEODC)
&gt;&gt; STFC, Rutherford Appleton Laboratory
&gt;&gt; Phone +44 1235 445012; Fax ... 5848;
&gt;&gt; Web: home.badc.rl.ac.uk/lawrence
&gt;&gt; _______________________________________________
&gt;&gt; CF-metadata mailing list
&gt;&gt; CF-metadata at cgd.ucar.edu
&gt;&gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
&gt; 
&gt; 
&gt; --------------
&gt; I have my new work email address: jgraybeal at ucsd.edu
&gt; --------------
&gt; 
&gt; John Graybeal   &lt;mailto:jgraybeal at ucsd.edu&gt;
&gt; phone: 858-534-2162
&gt; Development Manager
&gt; Ocean Observatories Initiative Cyberinfrastructure Project: 
&gt; <a href="http://ci.oceanobservatories.org">http://ci.oceanobservatories.org</a>
&gt; Marine Metadata Interoperability Project: <a href="http://marinemetadata.org">http://marinemetadata.org</a>
&gt; 
&gt; _______________________________________________
&gt; CF-metadata mailing list
&gt; CF-metadata at cgd.ucar.edu
&gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
_______________________________________________
CF-metadata mailing list
CF-metadata at cgd.ucar.edu
<a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</pre>
<span id="received"><dfn>Received on</dfn> Fri Nov 20 2009 - 06:12:09 GMT</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start2360">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./2361.html" title="Next message in the list">John Caron: "[CF-metadata] [CF Metadata] #37: Conventions for Point	Observation Data"</a></li>
<li><dfn>Previous message</dfn>: <a href="./2359.html" title="Previous message in the list">John Caron: "[CF-metadata] Multiple file datasets (was: Swath observational data)"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="./2364.html" title="Next message in this discussion thread">John Caron: "[CF-metadata] Multiple file datasets"</a></li>
<li><a name="replies" id="replies"></a>
<dfn>Reply</dfn>: <a href="./2364.html" title="Message sent in reply to this message">John Caron: "[CF-metadata] Multiple file datasets"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg2360" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg2360" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg2360" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg2360" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:57:24 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./2359.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./2361.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
