<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] CF-1.6 Conformance Requirements/Recommendations from Jim Biard on 2012-03-23 (cf-metadata-mailman)</title>
<meta name="Author" content="Jim Biard (jim.biard)" />
<meta name="Subject" content="[CF-metadata] CF-1.6 Conformance Requirements/Recommendations" />
<meta name="Date" content="2012-03-23" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./4266.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./4268.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] CF-1.6 Conformance Requirements/Recommendations</h1>
<!-- received="Fri Mar 23 13:59:01 2012" -->
<!-- isoreceived="20120323135901" -->
<!-- sent="Fri, 23 Mar 2012 15:59:01 -0400" -->
<!-- isosent="20120323195901" -->
<!-- name="Jim Biard" -->
<!-- email="jim.biard" -->
<!-- subject="[CF-metadata] CF-1.6 Conformance Requirements/Recommendations" -->
<!-- id="CAK79Y4+3e45aM_fz2tkUgEe27Z+g_Mhix_w5wxKyOPrsvpaGSA_at_mail.gmail.com" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="20120323185534.GA24756_at_met.reading.ac.uk" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start4267" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./4268.html" accesskey="d" title="John Caron: &quot;[CF-metadata] CF-1.6 Conformance Requirements/Recommendations&quot;">Next message</a> ]
[ <a href="./4266.html" title="Jonathan Gregory: &quot;[CF-metadata]  CF-1.6 Conformance Requirements/Recommendations&quot;">Previous message</a> ]
[ <a href="./4266.html" title="Jonathan Gregory: &quot;[CF-metadata]  CF-1.6 Conformance Requirements/Recommendations&quot;">In reply to</a> ]
<!-- unextthread="start" -->
[ <a href="./4268.html" accesskey="t" title="John Caron: &quot;[CF-metadata] CF-1.6 Conformance Requirements/Recommendations&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg4267" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg4267" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg4267" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg4267" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Jim Biard &lt;<a href="mailto:jim.biard?Subject=Re%3A%20%5BCF-metadata%5D%20CF-1.6%20Conformance%20Requirements%2FRecommendations">jim.biard</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Fri, 23 Mar 2012 15:59:01 -0400</span><br />
</address>
<br />
Hi.
<br />
<br />Jonathan's reply contained the section:
<br />
<br />9.6 Where any auxiliary coordinate variable contains a missing value, all
<br />
other coordinate, auxiliary coordinate and data values corresponding to that
<br />
element should also contain missing values.
<br />
<br /><br />I thought I understood that missing values were forbidden for true
<br />
coordinate variables.  Has this changed?  This requirement seems wrong to
<br />
me anyway.  If the values in the data and auxiliary coordinate variables
<br />
come from an external data source, it is entirely possible that you could
<br />
have a measurement missing from one without it being missing from the
<br />
other.  Why force a missing value into the data when you might, in fact,
<br />
have a valid value?
<br />
<br />Grace and peace,
<br />
<br />Jim
<br />
<br />On Fri, Mar 23, 2012 at 2:55 PM, Jonathan Gregory &lt;j.m.gregory at reading.ac.uk
<br />
<em class="quotelev1">&gt; wrote:
</em><br />
<br /><em class="quotelev1">&gt; Dear Ros
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Thanks a lot for working on this. I think you have correctly identified
</em><br />
<em class="quotelev1">&gt; parts
</em><br />
<em class="quotelev1">&gt; which are stated as requirements and recommendations, but you have to put
</em><br />
<em class="quotelev1">&gt; yourself in the shoes of the CF-checker, and consider what you can actually
</em><br />
<em class="quotelev1">&gt; *do* to make the checks. The CF-checker, for instance, does not know what
</em><br />
<em class="quotelev1">&gt; we
</em><br />
<em class="quotelev1">&gt; mean by element and instance dimensions, in the first statement:
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; &quot;In the multidimensional array representations, data variables have both an
</em><br />
<em class="quotelev1">&gt; instance dimension and an element dimension.  The dimensions may be given
</em><br />
<em class="quotelev1">&gt; in
</em><br />
<em class="quotelev1">&gt; any order.  If there is a need for either the instance or an element
</em><br />
<em class="quotelev1">&gt; dimension
</em><br />
<em class="quotelev1">&gt; to be the netCDF unlimited dimension (so that more features or more
</em><br />
<em class="quotelev1">&gt; elements
</em><br />
<em class="quotelev1">&gt; can be appended), then that dimension must be the outer dimension of the
</em><br />
<em class="quotelev1">&gt; data
</em><br />
<em class="quotelev1">&gt; variable i.e. the leading dimension in CDL.&quot;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; To check this statement, I think we have first to refer to the table in
</em><br />
<em class="quotelev1">&gt; 9.1,
</em><br />
<em class="quotelev1">&gt; which implies a lot of checks on dimensions and coordinates. For instance,
</em><br />
<em class="quotelev1">&gt; if
</em><br />
<em class="quotelev1">&gt; the featureType att says it's a timeseries, the table says that the data is
</em><br />
<em class="quotelev1">&gt; logically 1D (i), and there are mandatory coord or aux coord vars with the
</em><br />
<em class="quotelev1">&gt; logical structure x(i) y(i) t(i,o). There are five possibilities for
</em><br />
<em class="quotelev1">&gt; storing a
</em><br />
<em class="quotelev1">&gt; collection of timeseries features. These are alternative sets of
</em><br />
<em class="quotelev1">&gt; requirements
</em><br />
<em class="quotelev1">&gt; for the CF-checker, and one of these sets must be satisfied:
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; * Single timeseries: The data variable is 1D (the element dimension). It
</em><br />
<em class="quotelev1">&gt; has a
</em><br />
<em class="quotelev1">&gt; coord var or a 1D aux coord var of time. It has two scalar coord vars of
</em><br />
<em class="quotelev1">&gt; horizontal position.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; * Orthogonal multidimensional representation: The data variable is 2D. One
</em><br />
<em class="quotelev1">&gt; of
</em><br />
<em class="quotelev1">&gt; its dimensions (the element dimension) has a coordinate variable or a 1D
</em><br />
<em class="quotelev1">&gt; auxiliary coordinate variable of time. The other one (the instance
</em><br />
<em class="quotelev1">&gt; dimension)
</em><br />
<em class="quotelev1">&gt; has two coordinate or 1D aux coord variables of horizontal position.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; * Incomplete multidimensional rep: The data variable is 2D. It has a 2D aux
</em><br />
<em class="quotelev1">&gt; coord var of time with the same dimensions as itself. One of the dimensions
</em><br />
<em class="quotelev1">&gt; has two coordinate or 1D aux coord variables of horizontal position.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; * Contiguous ragged array rep: The data variable is 1D. It has a 1D aux
</em><br />
<em class="quotelev1">&gt; coord
</em><br />
<em class="quotelev1">&gt; var of time with this dimension. There is a variable in the file (the count
</em><br />
<em class="quotelev1">&gt; variable) with a sample_dimension att that names the dimension of the data
</em><br />
<em class="quotelev1">&gt; variable. The data variable has two 1D aux coord vars of horizontal
</em><br />
<em class="quotelev1">&gt; position,
</em><br />
<em class="quotelev1">&gt; whose dimension is the dimension of the count variable.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; * Indexed ragged array rep: The data variable is 1D. It has a 1D aux coord
</em><br />
<em class="quotelev1">&gt; var
</em><br />
<em class="quotelev1">&gt; of time with this dimension. There is an variable in the file (the index
</em><br />
<em class="quotelev1">&gt; variable) with the same dimension as the data variable and which has an
</em><br />
<em class="quotelev1">&gt; index_dimension att.  The data variable has two 1D aux coord vars of
</em><br />
<em class="quotelev1">&gt; horizontal position with the dimension is named by the instance_dimension
</em><br />
<em class="quotelev1">&gt; att
</em><br />
<em class="quotelev1">&gt; of the index variable.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; This is a bottom-up approach, but that's what the checker has to do, isn't
</em><br />
<em class="quotelev1">&gt; it.
</em><br />
<em class="quotelev1">&gt; When you find that one of these cases matches what you have, it allows you
</em><br />
<em class="quotelev1">&gt; formally to identify the instance and element dimensions, and the count and
</em><br />
<em class="quotelev1">&gt; index variables if relevant. Do you see what I mean? It would be necessary
</em><br />
<em class="quotelev1">&gt; to
</em><br />
<em class="quotelev1">&gt; work through the other cases in a similar way, but it would take a lot of
</em><br />
<em class="quotelev1">&gt; space to write them all down in the conformance rules in the way I have
</em><br />
<em class="quotelev1">&gt; done
</em><br />
<em class="quotelev1">&gt; above. Perhaps there would be a way to summarise the principles on which
</em><br />
<em class="quotelev1">&gt; the
</em><br />
<em class="quotelev1">&gt; checker would work from the table.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; We did not say exactly what constitutes a horizontal coordinate. I propose
</em><br />
<em class="quotelev1">&gt; that if two horizontal coord or aux coord vars are required, they should be
</em><br />
<em class="quotelev1">&gt; longitude and latitude, or grid_longitude and grid_latitude, or
</em><br />
<em class="quotelev1">&gt; projection_x_coordinate and projection_y_coordinate, or *any* pair of
</em><br />
<em class="quotelev1">&gt; coordinates if one of them has axis='X' and the other axis='Y'. It is
</em><br />
<em class="quotelev1">&gt; allowed
</em><br />
<em class="quotelev1">&gt; to provide more than one of these pairs, but it is not allowed (for
</em><br />
<em class="quotelev1">&gt; instance)
</em><br />
<em class="quotelev1">&gt; to supply only longitude and grid_latitude, which don't form a pair.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; (It is always OK to supply coordinates in addition to those which are
</em><br />
<em class="quotelev1">&gt; mandatory. These can just be ignored by the checker.)
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Once these identifications have been made, other checks can be applied:
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; H.2 It is recommended that there is be a variable with cf_role of
</em><br />
<em class="quotelev1">&gt; timeseries_id. If there is such a variable, it must have the instance
</em><br />
<em class="quotelev1">&gt; dimension. All the values of this variable must be different.  (These are
</em><br />
<em class="quotelev1">&gt; for
</em><br />
<em class="quotelev1">&gt; timeseries. Corresponding but different rules would apply for profiles and
</em><br />
<em class="quotelev1">&gt; trajectories. Appendix H suggests others, such as it is recommended that
</em><br />
<em class="quotelev1">&gt; there
</em><br />
<em class="quotelev1">&gt; should be station variables with standard_name attributes &quot;platform_name&quot;,
</em><br />
<em class="quotelev1">&gt; &quot;surface_altitude&quot; and &quot;platform_id&quot; when applicable, from H.5.)
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; 9.3 A count variable or an index variable must be integer.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; 9.3 Negative values (except missing data) are not allowed in a count
</em><br />
<em class="quotelev1">&gt; variable. The sum of the non-missing values must not exceed the dimension
</em><br />
<em class="quotelev1">&gt; of
</em><br />
<em class="quotelev1">&gt; the data variable.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; 9.3 Negative values (except missing data) are not allowed in an index
</em><br />
<em class="quotelev1">&gt; variable. None of the values may be greater than or equal to the dimension
</em><br />
<em class="quotelev1">&gt; of
</em><br />
<em class="quotelev1">&gt; the data variable (because they must be valid indices). All of the
</em><br />
<em class="quotelev1">&gt; non-missing
</em><br />
<em class="quotelev1">&gt; values must be different.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; You say that the featureType att is required. This is a tricky one. We
</em><br />
<em class="quotelev1">&gt; don't
</em><br />
<em class="quotelev1">&gt; know it's required unless we know we have a discrete sampling geometry that
</em><br />
<em class="quotelev1">&gt; requires it, but we don't know it's a discrete sampling geometry for sure
</em><br />
<em class="quotelev1">&gt; unless there is a featureType. I suggest you look for the featureType
</em><br />
<em class="quotelev1">&gt; first,
</em><br />
<em class="quotelev1">&gt; and only apply the checks for sect 9 if it is present, except that you
</em><br />
<em class="quotelev1">&gt; could
</em><br />
<em class="quotelev1">&gt; give an error if there is no featureType and there is a count or index var
</em><br />
<em class="quotelev1">&gt; in
</em><br />
<em class="quotelev1">&gt; the file. That must indicate a ragged rep, and they require featureType.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; 9.6 Where any auxiliary coordinate variable contains a missing value, all
</em><br />
<em class="quotelev1">&gt; other coordinate, auxiliary coordinate and data values corresponding to
</em><br />
<em class="quotelev1">&gt; that
</em><br />
<em class="quotelev1">&gt; element should also contain missing values.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; 9.6 Where the instance variable identified by cf_role contains a missing
</em><br />
<em class="quotelev1">&gt; value
</em><br />
<em class="quotelev1">&gt; indicator, all other instance variable should also contain missing values
</em><br />
<em class="quotelev1">&gt; corresponding to that element.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Best wishes
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Jonathan
</em><br />
<em class="quotelev1">&gt; _______________________________________________
</em><br />
<em class="quotelev1">&gt; CF-metadata mailing list
</em><br />
<em class="quotelev1">&gt; CF-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<em class="quotelev1">&gt;
</em><br />
<br /><br /><br /><pre>
-- 
Jim Biard
Research Scholar
Cooperative Institute for Climate and Satellites
Remote Sensing and Applications Division
National Climatic Data Center
151 Patton Ave, Asheville, NC 28801-5001
jim.biard at noaa.gov
828-271-4900
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<a href="http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20120323/e464c65a/attachment.html">http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20120323/e464c65a/attachment.html</a>&gt;
</pre>
<span id="received"><dfn>Received on</dfn> Fri Mar 23 2012 - 13:59:01 GMT</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start4267">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./4268.html" title="Next message in the list">John Caron: "[CF-metadata] CF-1.6 Conformance Requirements/Recommendations"</a></li>
<li><dfn>Previous message</dfn>: <a href="./4266.html" title="Previous message in the list">Jonathan Gregory: "[CF-metadata]  CF-1.6 Conformance Requirements/Recommendations"</a></li>
<li><dfn>In reply to</dfn>: <a href="./4266.html" title="Message to which this message replies">Jonathan Gregory: "[CF-metadata]  CF-1.6 Conformance Requirements/Recommendations"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="./4268.html" title="Next message in this discussion thread">John Caron: "[CF-metadata] CF-1.6 Conformance Requirements/Recommendations"</a></li>
<li><a name="replies" id="replies"></a>
<dfn>Reply</dfn>: <a href="./4268.html" title="Message sent in reply to this message">John Caron: "[CF-metadata] CF-1.6 Conformance Requirements/Recommendations"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg4267" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg4267" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg4267" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg4267" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:57:59 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./4266.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./4268.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
