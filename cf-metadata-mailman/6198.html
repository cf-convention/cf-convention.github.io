<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] FW: [sdn2-netcdf] Extensions to cover ADCP data from Lowry, Roy K. on 2014-03-27 (cf-metadata-mailman)</title>
<meta name="Author" content="Lowry, Roy K. (rkl)" />
<meta name="Subject" content="[CF-metadata] FW: [sdn2-netcdf] Extensions to cover ADCP data" />
<meta name="Date" content="2014-03-27" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./6197.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./6199.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] FW: [sdn2-netcdf] Extensions to cover ADCP data</h1>
<!-- received="Thu Mar 27 02:09:27 2014" -->
<!-- isoreceived="20140327020927" -->
<!-- sent="Thu, 27 Mar 2014 08:09:27 +0000" -->
<!-- isosent="20140327080927" -->
<!-- name="Lowry, Roy K." -->
<!-- email="rkl" -->
<!-- subject="[CF-metadata] FW: [sdn2-netcdf] Extensions to cover ADCP data" -->
<!-- id="40829B0E077C1145A6DE44D39B3830A9236E190A72_at_nerckwmb1.ad.nerc.ac.uk" -->
<!-- charset="US-ASCII" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start6198" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./6199.html" accesskey="d" title="Jim Biard: &quot;[CF-metadata] Is LLNL having troubles?&quot;">Next message</a> ]
[ <a href="./6197.html" title="Hedley, Mark: &quot;[CF-metadata] Editing/publishing workflow (Hattersley, Richard)&quot;">Previous message</a> ]
<!-- unextthread="start" -->
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg6198" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg6198" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg6198" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg6198" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Lowry, Roy K. &lt;<a href="mailto:rkl?Subject=Re%3A%20%5BCF-metadata%5D%20FW%3A%20%5Bsdn2-netcdf%5D%20Extensions%20to%20cover%20ADCP%20data">rkl</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Thu, 27 Mar 2014 08:09:27 +0000</span><br />
</address>
<br />
Dear All,
<br />
<br />Forwarded from another list, but it answers a question I asked on the CF list, so I've forwarded it.
<br />
<br />Cheers, Roy.
<br />
<br />Please note that I now work part-time from Tuesday to Thursday.  E-mail response on other days is possible but not guaranteed!
<br />
<br /><br />-----Original Message-----
<br />
From: Christian Ward-Garrison [mailto:cwardgar at unidata.ucar.edu]
<br />
Sent: 26 March 2014 23:33
<br />
To: sdn2-netcdf at listes.seadatanet.org
<br />
Subject: Re: [sdn2-netcdf] Extensions to cover ADCP data
<br />
<br />Hi Roy,
<br />
<br />In CF, it's necessary to define a set of variables that define your coordinate system. That much we all know. But once those have been defined, you're free to add any ancillary variables that you want, even spatiotemporal ones. As a result, there's no reason that you can't mix 2D per-profile data (trajectory, profile) with 3D per-observation data (trajectory, profile, z). Here is an example that illustrates this concept:
<br />
<br />netcdf file:C:/Users/cwardgar/Desktop/adcp.ncml {
<br />
&nbsp;&nbsp;&nbsp;dimensions:
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trajectory = 2;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;profile = 3;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z = 4;
<br />
&nbsp;&nbsp;&nbsp;variables:
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int trajectory(trajectory=2);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cf_role = &quot;trajectory_id&quot;;
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float lon(trajectory=2, profile=3);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:standard_name = &quot;longitude&quot;;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:units = &quot;degrees_east&quot;;
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float lat(trajectory=2, profile=3);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:standard_name = &quot;latitude&quot;;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:units = &quot;degrees_north&quot;;
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float seabed_current_velocity(trajectory=2, profile=3);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:units = &quot;m/s&quot;;
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float seabed_alt(trajectory=2, profile=3);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:standard_name = &quot;altitude&quot;;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:units = &quot;meters&quot;;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:positive = &quot;up&quot;;
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float platform_alt(trajectory=2, profile=3);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:standard_name = &quot;altitude&quot;;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:units = &quot;meters&quot;;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:positive = &quot;up&quot;;
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double time(trajectory=2, profile=3);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:standard_name = &quot;time&quot;;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:long_name = &quot;time&quot;;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:units = &quot;days since 1970-01-01 00:00:00&quot;;
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float observation_alt(trajectory=2, profile=3, z=4);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:standard_name = &quot;altitude&quot;;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:units = &quot;meters&quot;;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:positive = &quot;up&quot;;
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float geophysical_variable(trajectory=2, profile=3, z=4);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:coordinates = &quot;time lon lat observation_alt&quot;;
<br />
<br />&nbsp;&nbsp;&nbsp;// global attributes:
<br />
&nbsp;&nbsp;&nbsp;:featureType = &quot;trajectoryProfile&quot;;
<br />
&nbsp;&nbsp;&nbsp;:Conventions = &quot;CF-1.6&quot;;
<br />
}
<br />
<br />The coordinates attribute of geophysical_variable tells us that the Z coordinate variable for this example is the 3D observation_alt. However, that doesn't stop us from defining the 2D seabed_alt and platform_alt.
<br />
Similarly, we can define the 2D seabed_current_velocity as well.
<br />
<br />Note that observation_alt is very close to the PROFZ that you described.
<br />
Indeed, although I have defined it as altitude relative to sea level, there's nothing stopping you from defining it relative to platform_depth. However, I suggest that you leave it as a spatial unit (height or pressure); the spirit of CF is to make those coordinates explicit. But once again, there's nothing stopping you from defining an ancillary variable that is non-spatial.
<br />
<br />Attached is the NcML file I used to generate the example.
<br />
<br />Cheers,
<br />
Christian
<br />
<br /><br /><em class="quotelev1">&gt; -------- Original Message --------
</em><br />
<em class="quotelev1">&gt; Subject: [sdn2-netcdf] Extensions to cover ADCP data
</em><br />
<em class="quotelev1">&gt; Date: Mon, 24 Mar 2014 08:33:45 +0000
</em><br />
<em class="quotelev1">&gt; From: Lowry, Roy K. &lt;rkl at bodc.ac.uk&gt;
</em><br />
<em class="quotelev1">&gt; Reply-To: sdn2-netcdf at listes.seadatanet.org
</em><br />
<em class="quotelev1">&gt; To: sdn2-netcdf at listes.seadatanet.org
</em><br />
<em class="quotelev1">&gt; &lt;sdn2-netcdf at listes.seadatanet.org&gt;
</em><br />
<em class="quotelev1">&gt; CC: gilbert.maudire at ifremer.fr &lt;gilbert.maudire at ifremer.fr&gt;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Dear All,
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Gilbert Maudire and Michele Fichaut at IFREMER have been doing some
</em><br />
<em class="quotelev1">&gt; work to extend the SeaDataNet NetCDF format to cover vessel-mounted
</em><br />
<em class="quotelev1">&gt; ADCP data from both surface ships and submarines (AUVs). This has
</em><br />
<em class="quotelev1">&gt; raised a number of issues, some of which I tried raising on the CF
</em><br />
<em class="quotelev1">&gt; list, but the silence has been deafening!
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; First, there is the issue of 'single-depth' geophysical variables. The
</em><br />
<em class="quotelev1">&gt; example for VMADCP are the seabed current velocity parameters from
</em><br />
<em class="quotelev1">&gt; bottom tracking in shallow water, that have a single value with a z
</em><br />
<em class="quotelev1">&gt; co-ordinate of the bathymetric depth for each ADCP profile. One
</em><br />
<em class="quotelev1">&gt; possibility would be to mix the 3-D profiles (instance, time, bin
</em><br />
<em class="quotelev1">&gt; depth) and the bottom-tracking 2-D vectors (instance, time) in the
</em><br />
<em class="quotelev1">&gt; same file. Having given this some thought and discussed it with
</em><br />
<em class="quotelev1">&gt; Gilbert the conclusion is that this is not a good idea and that the
</em><br />
<em class="quotelev1">&gt; data should be split between two files, one with trajectory feature
</em><br />
<em class="quotelev1">&gt; type and the other with trajectoryProfile feature type. Any other views?
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Secondly, there's the issue of AUV ADCP. The initial solution was to
</em><br />
<em class="quotelev1">&gt; give the geophysical variable z co-ordinate a time dimension. However,
</em><br />
<em class="quotelev1">&gt; to me this blows the definition of the trajectoryProfile feature type
</em><br />
<em class="quotelev1">&gt; out of the water. Another idea would be to keep the trajectoryProfile
</em><br />
<em class="quotelev1">&gt; co-ordinates identical to those for trajectory, with latitude,
</em><br />
<em class="quotelev1">&gt; longitude and optionally depth along the time dimension and then add
</em><br />
<em class="quotelev1">&gt; another co-ordinate variable - say PROFZ - to be the z co-ordinate of
</em><br />
<em class="quotelev1">&gt; the geophysical variable arrays. This could hold AUV data if the DEPTH
</em><br />
<em class="quotelev1">&gt; dimension were set to the platform depth and PROFZ set to the vertical
</em><br />
<em class="quotelev1">&gt; distance of the measurement from the platform.  This is how all the
</em><br />
<em class="quotelev1">&gt; AUV ADCP data I have experienced (Autosub I) was delivered - nobody
</em><br />
<em class="quotelev1">&gt; ever worked up the data to tag each measurement with its absolute
</em><br />
<em class="quotelev1">&gt; depth. Does anybody know of data like these and if so should we be
</em><br />
<em class="quotelev1">&gt; pushing for an appropriate CF 1.6 feature type?
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Another advantage of the PROFZ idea is that the z co-ordinate could be
</em><br />
<em class="quotelev1">&gt; non-spatial. This would allow the profileTrajectory feature to be
</em><br />
<em class="quotelev1">&gt; modelled to data such as optical plankton counter fitted to towed net
</em><br />
<em class="quotelev1">&gt; platforms such as ARIES. In this case the platform depth would be the
</em><br />
<em class="quotelev1">&gt; DEPTH variable along the time dimension and PROFZ would be the size
</em><br />
<em class="quotelev1">&gt; class mean.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; I did wonder whether the PROFZ concept could be extended to the
</em><br />
<em class="quotelev1">&gt; seriesProfile feature type, but I think it's still a good idea. For
</em><br />
<em class="quotelev1">&gt; example IMOS like to include a depth parameter along the time
</em><br />
<em class="quotelev1">&gt; dimension for some moored instruments and this could get very messy if
</em><br />
<em class="quotelev1">&gt; DEPTH were used as the profile z co-ordinate as well.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Any other views on PROFZ?
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Cheers, Roy.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; This message (and any attachments) is for the recipient only. NERC is
</em><br />
<em class="quotelev1">&gt; subject to the Freedom of Information Act 2000 and the contents of
</em><br />
<em class="quotelev1">&gt; this email and any reply you make may be disclosed by NERC unless it
</em><br />
<em class="quotelev1">&gt; is exempt from release under the Act. Any material supplied to NERC
</em><br />
<em class="quotelev1">&gt; may be stored in an electronic records management system.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<br /><br />This message (and any attachments) is for the recipient only. NERC is subject to the Freedom of Information Act 2000 and the contents of this email and any reply you make may be disclosed by NERC unless it is exempt from release under the Act. Any material supplied to NERC may be stored in an electronic records management system.
<br />
-------------- next part --------------
<br />
A non-text attachment was scrubbed...
<br />
Name: adcp.ncml
<br />
Type: text/xml
<br />
Size: 2539 bytes
<br />
Desc: adcp.ncml
<br />
URL: &lt;<a href="http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20140327/37ef9c23/attachment.xml">http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20140327/37ef9c23/attachment.xml</a>&gt;
<br />
<span id="received"><dfn>Received on</dfn> Thu Mar 27 2014 - 02:09:27 GMT</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start6198">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./6199.html" title="Next message in the list">Jim Biard: "[CF-metadata] Is LLNL having troubles?"</a></li>
<li><dfn>Previous message</dfn>: <a href="./6197.html" title="Previous message in the list">Hedley, Mark: "[CF-metadata] Editing/publishing workflow (Hattersley, Richard)"</a></li>
<!-- lnextthread="start" -->
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg6198" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg6198" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg6198" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg6198" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:58:40 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./6197.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./6199.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
