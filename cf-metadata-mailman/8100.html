<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] Geometries in NetCDF Update from David Blodgett on 2017-03-15 (cf-metadata-mailman)</title>
<meta name="Author" content="David Blodgett (dblodgett)" />
<meta name="Subject" content="[CF-metadata] Geometries in NetCDF Update" />
<meta name="Date" content="2017-03-15" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./8099.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./8101.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] Geometries in NetCDF Update</h1>
<!-- received="Wed Mar 15 06:57:06 2017" -->
<!-- isoreceived="20170315065706" -->
<!-- sent="Wed, 15 Mar 2017 07:57:06 -0500" -->
<!-- isosent="20170315125706" -->
<!-- name="David Blodgett" -->
<!-- email="dblodgett" -->
<!-- subject="[CF-metadata] Geometries in NetCDF Update" -->
<!-- id="921D8942-1775-4ABA-81A0-E3827CEBB18C_at_usgs.gov" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="D7D1372D480AEE41B3C1276C9A15404B42D24C59_at_EXXCMPD1DAG1.cmpd1.metoffice.gov.uk" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start8100" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./8101.html" accesskey="d" title="Jon Blower: &quot;[CF-metadata] Recording &#0034;day of year on which something happens&#0034;&quot;">Next message</a> ]
[ <a href="./8099.html" title="Hollis, Dan: &quot;[CF-metadata] Geometries in NetCDF Update&quot;">Previous message</a> ]
[ <a href="./8099.html" title="Hollis, Dan: &quot;[CF-metadata] Geometries in NetCDF Update&quot;">In reply to</a> ]
<!-- unextthread="start" -->
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg8100" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg8100" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg8100" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg8100" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: David Blodgett &lt;<a href="mailto:dblodgett?Subject=Re%3A%20%5BCF-metadata%5D%20Geometries%20in%20NetCDF%20Update">dblodgett</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Wed, 15 Mar 2017 07:57:06 -0500</span><br />
</address>
<br />
Good morning Dan, 
<br />
<br />We are trying to align with 9.3.3 as much as we can. When you say ?where a count variable is used to indicate the number of elements in the main array? which is the ?main?? In my mind that is the node coordinates, which we are counting along ? which seems in alignment with 9.3.
<br />
<br />You are right, it can only be dropped if _all_ the geometries in the file are single part, and yeah, it?s not that much overhead and probably doesn?t matter much in the grand scheme. I do want to make sure we don?t say ?meh, good enough? though! 
<br />
<br />- Dave
<br />
<br /><em class="quotelev1">&gt; On Mar 15, 2017, at 7:12 AM, Hollis, Dan &lt;dan.hollis at metoffice.gov.uk&gt; wrote:
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Hi Dave,
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; I see your point about using node counts for both quantities. I guess I was expecting something similar to the contiguous ragged array representation described in 9.3.3 of the convention, where a count variable is used to indicate the number of elements in the main array. Would there be any merit in trying to align your proposal with this approach?
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; I agree that one part per geometry will be the common case. However part_node_count can only be dropped if _all_ the geometries in the file have only one part. In a real situation the geometries are likely to be comprised of many nodes, so the overhead of always storing both a part count and a node count doesn?t seem that great to me.
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; At the end of the day it probably doesn?t matter too much which approach is used as either one stores the same information. I?m not an R programmer (so haven?t studied your code) but it seems like you?ve already demonstrated that counting nodes is easy enough. I imagine users of such files will want tools that quickly allow them to visualise the geometries (e.g. using GIS, or an enhanced ncview), so as long as it?s straightforward to pull out the information then that?s all that matters.
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; Regards,
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; Dan
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; From: David Blodgett [mailto:dblodgett at usgs.gov] 
</em><br />
<em class="quotelev1">&gt; Sent: 14 March 2017 12:49
</em><br />
<em class="quotelev1">&gt; To: Hollis, Dan
</em><br />
<em class="quotelev1">&gt; Cc: CF metadata
</em><br />
<em class="quotelev1">&gt; Subject: Re: [CF-metadata] Geometries in NetCDF Update
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; Dear Dan,
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; Glad you found this version more clear. We?ve learned a lot about how to communicate the need for this and the hope is that the latest proposal is going to be much more familiar to those who already know CF. Sounds like we achieved that.
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; We _could_ use ?part_count_per_geom&quot; and ?node_count_per_part? where we are using node_count for each right now.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; My feeling on this is two fold.
</em><br />
<em class="quotelev1">&gt; 1) using node counts for both feels less confusing because it is only one kind of count.
</em><br />
<em class="quotelev1">&gt; 2) In the common case of 1 part per geometry, the ?node_count_per_part? can be dropped all together.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; I had written a basic implementation of our old indirect index approach and refactored it over the last few days to use this new count approach. I found that counting nodes was very straight forward. You can see my writer here &lt;<a href="https://github.com/dblodgett-usgs/NCDFSG/blob/master/R/addGeomData.R">https://github.com/dblodgett-usgs/NCDFSG/blob/master/R/addGeomData.R</a>&gt; and my reader here &lt;<a href="https://github.com/dblodgett-usgs/NCDFSG/blob/master/R/FromNCDFSG.R">https://github.com/dblodgett-usgs/NCDFSG/blob/master/R/FromNCDFSG.R</a>&gt; if anyone?s curious and can tolerate R code.
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; Best,
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; - Dave
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; On Mar 14, 2017, at 5:12 AM, Hollis, Dan &lt;dan.hollis at metoffice.gov.uk &lt;mailto:dan.hollis at metoffice.gov.uk&gt;&gt; wrote:
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; Hi Dave et al,
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; Thanks for all your work on drafting this proposal. I?ve found some of the previous technical discussions re geometries a bit tricky to follow in detail but your latest text and example are nice and clear.
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; One thought ? If I understand correctly, the number of parts per geometry has to be inferred from node_count and part_node_count. For example, the first geometry has two parts because the first element of node_count (10) equals the sum of the first two elements of part_node_count (5 + 5). Why not simply store the part count itself? i.e. instead of:
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; node_count = 10, 5;
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; you?d have:
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; part_count = 2, 1;
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; The sum of the elements in part_count (i.e. 3, in this example) would need to equal the number of elements in part_node_count and part_type.
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; Regards,
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; Dan
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; Dan Hollis   Climatologist
</em><br />
<em class="quotelev1">&gt; Met Office   Hadley Centre   FitzRoy Road   Exeter   Devon   EX1 3PB   United Kingdom
</em><br />
<em class="quotelev1">&gt; Tel: +44 (0)1392 884535   Mob: +44 (0)7342058682   Fax: +44 (0)1392 885681
</em><br />
<em class="quotelev1">&gt; E-mail: dan.hollis at metoffice.gov.uk &lt;mailto:dan.hollis at metoffice.gov.uk&gt;   Website: <a href="http://www.metoffice.gov.uk">http://www.metoffice.gov.uk</a> &lt;<a href="http://www.metoffice.gov.uk/">http://www.metoffice.gov.uk/</a>&gt;
</em><br />
<em class="quotelev1">&gt; For UK climate and past weather information, visit <a href="http://www.metoffice.gov.uk/climate">http://www.metoffice.gov.uk/climate</a> &lt;<a href="http://www.metoffice.gov.uk/climate">http://www.metoffice.gov.uk/climate</a>&gt;
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; From: CF-metadata [mailto:cf-metadata-bounces at cgd.ucar.edu &lt;mailto:cf-metadata-bounces at cgd.ucar.edu&gt;] On Behalf Of David Blodgett
</em><br />
<em class="quotelev1">&gt; Sent: 14 March 2017 01:54
</em><br />
<em class="quotelev1">&gt; To: CF metadata
</em><br />
<em class="quotelev1">&gt; Subject: [CF-metadata] Geometries in NetCDF Update
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; Dear CF,
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; Based on feedback we?ve received and the phone call we held last week, Time Whiteaker and I have worked up a mostly complete new draft of how to store geometries in NetCDF. We?d greatly appreciate more eyes on it if you have time or interest.
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; It?s been written up in some detail here: <a href="https://github.com/twhiteaker/netCDF-CF-simple-geometry/blob/master/README.md">https://github.com/twhiteaker/netCDF-CF-simple-geometry/blob/master/README.md</a> &lt;<a href="https://github.com/twhiteaker/netCDF-CF-simple-geometry/blob/master/README.md">https://github.com/twhiteaker/netCDF-CF-simple-geometry/blob/master/README.md</a>&gt;
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; Feel free to open issues in that GitHub repository to track further conversation or follow up on list.
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; Best,
</em><br />
<em class="quotelev1">&gt;  
</em><br />
<em class="quotelev1">&gt; - Dave
</em><br />
<br />-------------- next part --------------
<br />
An HTML attachment was scrubbed...
<br />
URL: &lt;<a href="http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20170315/0655f9b2/attachment.html">http://mailman.cgd.ucar.edu/pipermail/cf-metadata/attachments/20170315/0655f9b2/attachment.html</a>&gt;
<br />
<span id="received"><dfn>Received on</dfn> Wed Mar 15 2017 - 06:57:06 GMT</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start8100">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./8101.html" title="Next message in the list">Jon Blower: "[CF-metadata] Recording &#0034;day of year on which something happens&#0034;"</a></li>
<li><dfn>Previous message</dfn>: <a href="./8099.html" title="Previous message in the list">Hollis, Dan: "[CF-metadata] Geometries in NetCDF Update"</a></li>
<li><dfn>In reply to</dfn>: <a href="./8099.html" title="Message to which this message replies">Hollis, Dan: "[CF-metadata] Geometries in NetCDF Update"</a></li>
<!-- lnextthread="start" -->
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg8100" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg8100" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg8100" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg8100" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:59:10 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./8099.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./8101.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
