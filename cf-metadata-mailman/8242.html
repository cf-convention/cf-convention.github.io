<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] axis attribute from Sebastien Villaume on 2017-04-07 (cf-metadata-mailman)</title>
<meta name="Author" content="Sebastien Villaume (sebastien.villaume)" />
<meta name="Subject" content="[CF-metadata] axis attribute" />
<meta name="Date" content="2017-04-07" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./8241.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./8243.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] axis attribute</h1>
<!-- received="Fri Apr  7 03:10:09 2017" -->
<!-- isoreceived="20170407021009" -->
<!-- sent="Fri, 7 Apr 2017 09:10:09 +0000 (GMT-00:00)" -->
<!-- isosent="20170407091009" -->
<!-- name="Sebastien Villaume" -->
<!-- email="sebastien.villaume" -->
<!-- subject="[CF-metadata] axis attribute" -->
<!-- id="2052879917.33823487.1491556209516.JavaMail.zimbra_at_ecmwf.int" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="CAEMt9PNinEH5-4vTdqqM2nJdPqkBzz2TyuMz=vJCq9n1yH5kdQ_at_mail.gmail.com" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start8242" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./8243.html" accesskey="d" title="Maccarthy, Jonathan K: &quot;[CF-metadata] high sample rate (seismic) data conventions&quot;">Next message</a> ]
[ <a href="./8241.html" title="V Balaji - NOAA Affiliate: &quot;[CF-metadata] Overstated restriction on references to external variables in version 1.7&quot;">Previous message</a> ]
<!-- unextthread="start" -->
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg8242" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg8242" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg8242" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg8242" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Sebastien Villaume &lt;<a href="mailto:sebastien.villaume?Subject=Re%3A%20%5BCF-metadata%5D%20axis%20attribute">sebastien.villaume</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Fri, 7 Apr 2017 09:10:09 +0000 (GMT-00:00)</span><br />
</address>
<br />
Dear David,
<br />
<br />I see your point and you are probably right that a plotting routine will probably sort this out.
<br />
<br />However this is not what I am after, I am more interested in metadata discovery and indexing. 
<br />
I need to discover what I have in a file without plotting it, without having a human looking at it to confirm what it is and that it has been plotted correctly. 
<br />
I also would like to use these metadata informations to perform actions like merging netCDF files, slicing, cropping, aggregating, interpolating, comparing data in different grids and representations, etc.
<br />
<br />I understand that implicit is fine and that explicit is not required for some applications. I have no issue with this. 
<br />
My personal point of view is that explicit is better than implicit: I tend to prefer &quot;mandatory&quot; over &quot;optional&quot;.
<br />
<br />Being implicit means that the assumptions made need to be valid 100% of the time to avoid accidents or corner cases.
<br />
I would like to be explicit so I need all the proper mechanisms (variables, semantics, etc.) in place so I can use them.
<br />
Right now it feels that I am missing some functionality.
<br />
<br />Let me copy below few bits of the terminology section in the CF 1.7 draft document (very similar to 1.6). Please read it keeping in mind what is really an axis, a coordinate, a spatio-temporal dimension and an an array dimension. Each time you read &quot;coordinate2, &quot;dimension&quot; or &quot;dimensional&quot;, ask yourself what is implied and if it is not ambiguous:
<br />
<br />------------------------
<br />
variables
<br />
------------------------
<br />
auxiliary coordinate variable
<br />
&nbsp;&nbsp;&nbsp;&nbsp;Any netCDF variable that contains coordinate data, but is not a coordinate variable (in the sense of that term defined by the NUG and used by this standard - see below). Unlike coordinate variables, there is no relationship between the name of an auxiliary coordinate variable and the name(s) of its dimension(s).
<br />
<br />coordinate variable
<br />
&nbsp;&nbsp;&nbsp;&nbsp;We use this term precisely as it is defined in section 2.3.1 of the NUG . It is a one-dimensional variable with the same name as its dimension [e.g., time(time) ], and it is defined as a numeric data type with values that are ordered monotonically. Missing values are not allowed in coordinate variables.
<br />
<br />grid mapping variable
<br />
&nbsp;&nbsp;&nbsp;&nbsp;A variable used as a container for attributes that define a specific grid mapping. The type of the variable is arbitrary since it contains no data.
<br />
<br />multidimensional coordinate variable
<br />
&nbsp;&nbsp;&nbsp;&nbsp;An auxiliary coordinate variable that is multidimensional.
<br />
<br />scalar coordinate variable
<br />
&nbsp;&nbsp;&nbsp;&nbsp;A scalar variable (i.e. one with no dimensions) that contains coordinate data. Depending on context, it may be functionally equivalent either to a size-one coordinate variable (Section 5.7, &quot;Scalar Coordinate Variables&quot;) or to a size-one auxiliary coordinate variable (Section 6.1, &quot;Labels&quot; and Section 9.2, &quot;Collections, instances, and elements&quot;).
<br />
<br />------------------------
<br />
dimensions
<br />
------------------------
<br />
latitude dimension
<br />
&nbsp;&nbsp;&nbsp;&nbsp;A dimension of a netCDF variable that has an associated latitude coordinate variable.
<br />
<br />longitude dimension
<br />
&nbsp;&nbsp;&nbsp;&nbsp;A dimension of a netCDF variable that has an associated longitude coordinate variable.
<br />
<br />spatiotemporal dimension
<br />
&nbsp;&nbsp;&nbsp;&nbsp;A dimension of a netCDF variable that is used to identify a location in time and/or space.
<br />
<br />time dimension
<br />
&nbsp;&nbsp;&nbsp;&nbsp;A dimension of a netCDF variable that has an associated time coordinate variable.
<br />
<br />vertical dimension
<br />
&nbsp;&nbsp;&nbsp;&nbsp;A dimension of a netCDF variable that has an associated vertical coordinate variable.
<br />
------------------------
<br />
<br />So according to this terminology, I have in my file, 2 auxiliary coordinates variables, but no &quot;real&quot; coordinates variables (according to the NUG) so my auxiliary coordinates are auxiliary to what?
<br />
What is a &quot;multidimensional coordinate&quot;? if dimension means spatio-temporal dimension it is a non sense because a coordinate can only reference 1 spatio-temporal dimension, if it is meant to be array-dimensions it is not clear...
<br />
What are my 2D array latitude and longitude then? are they latitude and longitude dimension defined in the terminology? not really.... because there are no such things as latitude and longitude dimension: you can define latitude and longitude coordinates, associated with 2 axis that themselves define 2 spatial dimensions... but the coordinates can be defined in whatever n-D array.
<br />
I like the definition of &quot;grid mapping variable&quot;, I could use a similar variable to be a container for attributes for my &quot;axis variable&quot; with no data!
<br />
<br />I know that in the day-to-day life and discussions we don't make the effort to be precise (I don't) and that it is easy to overload the meaning of things but I think that the CF document needs to be very precise, non ambiguous and can not mix axes, coordinates, spatio-temporal and array dimensions.
<br />
<br />/S?bastien
<br />
<br />----- Original Message -----
<br />
From: &quot;David Hassell&quot; &lt;david.hassell at ncas.ac.uk&gt;
<br />
To: &quot;Sebastien Villaume&quot; &lt;sebastien.villaume at ecmwf.int&gt;
<br />
Cc: &quot;CF Metadata&quot; &lt;cf-metadata at cgd.ucar.edu&gt;, &quot;Jonathan Gregory&quot; &lt;j.m.gregory at reading.ac.uk&gt;
<br />
Sent: Friday, 7 April, 2017 08:37:20
<br />
Subject: Re: [CF-metadata] axis attribute
<br />
<br />Dear S?bastien,
<br />
<br />Please bear with me when I ask to right back to the beginning! I am not
<br />
sure what the benefit is in labelling the dimensions as X or Y. In the
<br />
original tripolar case we have:
<br />
<br />dimensions:
<br />
&nbsp;&nbsp;&nbsp;&nbsp;i = 96 ;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;j = 73 ;
<br />
variables:
<br />
&nbsp;&nbsp;&nbsp;&nbsp;float latitude(j, i) ;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;latitude:units = &quot;degrees_north&quot; ;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;float longitude(j, i) ;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;longitude:units = &quot;degrees_east&quot; ;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;float sit(j, i) ;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sit:units = &quot;m&quot; ;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sit:standard_name = &quot;sea_ice_thickness&quot; ;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sit:coordinates = &quot;latitude longitude&quot; ;
<br />
<br />There is nothing stopping anything from seeing that this is 2-d array of
<br />
size i*j, and there is nothing stopping software subpacing the data by i
<br />
and j indices.
<br />
<br />I don't think a plotting routine would benefit from knowing that the i
<br />
dimension was &quot;X&quot;, because there are no 1-d coordinates it can use along
<br />
that dimension.
<br />
<br />Many thanks and all the best,
<br />
<br />David
<br />
<br />On 6 April 2017 at 22:45, Sebastien Villaume &lt;sebastien.villaume at ecmwf.int&gt;
<br />
wrote:
<br />
<br /><em class="quotelev1">&gt; Dear Mark and Jonathan,
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; thank you for your comments.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; _at_Mark:
</em><br />
<em class="quotelev1">&gt; the short answer: you can put in principle whatever you want in that
</em><br />
<em class="quotelev1">&gt; variable because in this case it is a dummy variable only there to hold the
</em><br />
<em class="quotelev1">&gt; axis attribute. But please read the long explanation!
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; the long, boring explanation:
</em><br />
<em class="quotelev1">&gt; As I understand it, the CF convention does not recognize axis as a valid
</em><br />
<em class="quotelev1">&gt; object on its own like for &quot;dimensions&quot; and the various type of &quot;variables&quot;
</em><br />
<em class="quotelev1">&gt; and the convention seems to make it mandatory to attach to it a variable
</em><br />
<em class="quotelev1">&gt; that becomes a &quot;coordinate&quot; variable. Note that I say that it is the
</em><br />
<em class="quotelev1">&gt; coordinate variable that is attached to the axis and not the opposite.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; From a mathematical point of view, it is perfectly possible to define an
</em><br />
<em class="quotelev1">&gt; axis without a coordinate on it (arguably it is not that useful). The
</em><br />
<em class="quotelev1">&gt; common case is that a 1-D array defines positions on that axis (the
</em><br />
<em class="quotelev1">&gt; coordinate). Then your 1-D data points are positioned with the help of the
</em><br />
<em class="quotelev1">&gt; coordinate, itself attached to the axis.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; If you have one more axis, you can define a new coordinate on it. This
</em><br />
<em class="quotelev1">&gt; creates a 2-D space. Now you have the choice on how you represent your 2-D
</em><br />
<em class="quotelev1">&gt; data points:
</em><br />
<em class="quotelev1">&gt; if the dataset is totally irregular you will have a 1-D array of &quot;n&quot; data
</em><br />
<em class="quotelev1">&gt; points associated with a 1-D array of &quot;n&quot; positions for the first dimension
</em><br />
<em class="quotelev1">&gt; and a 1-D array of &quot;n&quot; positions for the second dimension. It works, it is
</em><br />
<em class="quotelev1">&gt; still a 2-D dataset stored in a long one dimensional vector.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Imagine that you realize that your dataset is not as irregular as you
</em><br />
<em class="quotelev1">&gt; thought, it is in fact a regular grid! you identify that you only have i
</em><br />
<em class="quotelev1">&gt; possible values of the first coordinate and j possible values for the
</em><br />
<em class="quotelev1">&gt; second coordinate, you also notice that i*j=n. Great you can now represent
</em><br />
<em class="quotelev1">&gt; your dataset with 2 coordinates of length i and j respectively, each of
</em><br />
<em class="quotelev1">&gt; them associated with 2 axes x and y and your data is now a 2-D array of
</em><br />
<em class="quotelev1">&gt; size (i,j). you can position your data using the coordinates, it is mapped
</em><br />
<em class="quotelev1">&gt; using the indices within each coordinate array. Now you have a 2-D spatial
</em><br />
<em class="quotelev1">&gt; dataset sored in a 2-D array with 2 supporting 1-D spatial coordinates
</em><br />
<em class="quotelev1">&gt; stored in one dimensional vectors.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Lets say now that you take this regular grid and you distort it... your
</em><br />
<em class="quotelev1">&gt; regular grid is gone you can no longer use i and j for partitioning!
</em><br />
<em class="quotelev1">&gt; really? well no, nobody says that you can not slice your &quot;n&quot; long vectors
</em><br />
<em class="quotelev1">&gt; into i*j arrays! you could choose whatever you want for i and j as long as
</em><br />
<em class="quotelev1">&gt; i*j=n. Of course if you choose (2)*(n/2) or (n/2)*(2), it is a bit useless,
</em><br />
<em class="quotelev1">&gt; but you can also choose meaningful i and j because even if your grid became
</em><br />
<em class="quotelev1">&gt; irregular, it is not random points, it is still a grid of size i*j . This
</em><br />
<em class="quotelev1">&gt; is exactly my use case! And in that situation your coordinates can be
</em><br />
<em class="quotelev1">&gt; arranged in arrays of size i*j. What I need is 2 axes and 2 coordinates of
</em><br />
<em class="quotelev1">&gt; dimension 2 with lengths i and j. The catch here is that I have 2-D arrays
</em><br />
<em class="quotelev1">&gt; to store one &quot;spatial&quot; dimension! It is another case of overlapped
</em><br />
<em class="quotelev1">&gt; concepts, dimension is used transparently for the dimension of arrays,
</em><br />
<em class="quotelev1">&gt; dimension of the geometrical space, and sometimes for the size of one of
</em><br />
<em class="quotelev1">&gt; the dimensions of an array!!
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Anyway, I should be able to define my axes like this:
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; int x;
</em><br />
<em class="quotelev1">&gt;     x:axis = &quot;X&quot;;
</em><br />
<em class="quotelev1">&gt;     x:standard_name = &quot;x_axis&quot; ; // no standard name exists...
</em><br />
<em class="quotelev1">&gt;     x:units = &quot;1&quot; ; // no units, it will come with the coordinate
</em><br />
<em class="quotelev1">&gt; int y;
</em><br />
<em class="quotelev1">&gt;     y:axis = &quot;Y&quot;;
</em><br />
<em class="quotelev1">&gt;     y:standard_name = &quot;y_axis&quot; ; // no standard name exists...
</em><br />
<em class="quotelev1">&gt;     y:units = &quot;1&quot; ; // no units, it will come with the coordinate
</em><br />
<em class="quotelev1">&gt; float longitude(j,i);
</em><br />
<em class="quotelev1">&gt;     longitude:standard_name = &quot;longitude&quot; ;
</em><br />
<em class="quotelev1">&gt;     longitude:units = &quot;degrees&quot; ;
</em><br />
<em class="quotelev1">&gt;     longitude:positive = &quot;east&quot; ;
</em><br />
<em class="quotelev1">&gt;     longitude:long_name = &quot;longitude&quot; ;
</em><br />
<em class="quotelev1">&gt;     longitude:axis_mapping = &quot;X&quot; ;
</em><br />
<em class="quotelev1">&gt; float latitude(j,i);
</em><br />
<em class="quotelev1">&gt;     latitude:standard_name = &quot;latitude&quot; ;
</em><br />
<em class="quotelev1">&gt;     latitude:units = &quot;degrees&quot; ;
</em><br />
<em class="quotelev1">&gt;     latitude:positive = &quot;north&quot; ;
</em><br />
<em class="quotelev1">&gt;     latitude:long_name = &quot;latitude&quot; ;
</em><br />
<em class="quotelev1">&gt;     latitude:axis_mapping = &quot;Y&quot; ;
</em><br />
<em class="quotelev1">&gt; float sit(j, i) ;
</em><br />
<em class="quotelev1">&gt;     sit:units = &quot;m&quot; ;
</em><br />
<em class="quotelev1">&gt;     sit:standard_name = &quot;sea_ice_thickness&quot; ;
</em><br />
<em class="quotelev1">&gt;     sit:long_name = &quot;Ice thickness&quot; ;
</em><br />
<em class="quotelev1">&gt;     sit:coordinates = &quot;latitude longitude&quot; ;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; several comments:
</em><br />
<em class="quotelev1">&gt; notice how one could tell on which axis the coordinate should go using for
</em><br />
<em class="quotelev1">&gt; instance a &quot;axis_mapping&quot; attribute. Not a &quot;coordinate&quot; attribute, this one
</em><br />
<em class="quotelev1">&gt; should be used to tell the coordinates of my data variable!
</em><br />
<em class="quotelev1">&gt; I find this approach clearer and more flexible as it can probably cater
</em><br />
<em class="quotelev1">&gt; for any situation of axes, coordinates, etc.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; But because in CF one cannot create bare axis, I follow the rules and
</em><br />
<em class="quotelev1">&gt; creates:
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; double x(i);
</em><br />
<em class="quotelev1">&gt;     x:axis = &quot;X&quot;;
</em><br />
<em class="quotelev1">&gt;     x:standard_name = &quot;...&quot; ; // not an axis anymore, give me a standard
</em><br />
<em class="quotelev1">&gt; name
</em><br />
<em class="quotelev1">&gt;     x:units = &quot;1&quot; ;
</em><br />
<em class="quotelev1">&gt;     y:long_name = &quot;i-index of mesh grid&quot; ;
</em><br />
<em class="quotelev1">&gt; double y(j);
</em><br />
<em class="quotelev1">&gt;     y:axis = &quot;Y&quot;;
</em><br />
<em class="quotelev1">&gt;     y:standard_name = &quot;...&quot; ; // not an axis anymore, give me a standard
</em><br />
<em class="quotelev1">&gt; name
</em><br />
<em class="quotelev1">&gt;     y:units = &quot;1&quot; ;
</em><br />
<em class="quotelev1">&gt;     y:long_name = &quot;j-index of mesh grid&quot; ;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; and I have the choice of what I put in those arrays since it is somehow
</em><br />
<em class="quotelev1">&gt; artificial.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; I could populate the &quot;primary&quot; coordinates with 1 to i and 1 to j which
</em><br />
<em class="quotelev1">&gt; would represent the indices and if I subset the grid, I then retain the
</em><br />
<em class="quotelev1">&gt; information that the domain has been cropped because the indices left will
</em><br />
<em class="quotelev1">&gt; not be 1 to i/j but n to m.
</em><br />
<em class="quotelev1">&gt; I don' t really like this but what can I do?
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; If we follow this idea, it means introducing a clear concept from &quot;axis&quot;
</em><br />
<em class="quotelev1">&gt; besides the other types of variables, defining new attribute to &quot;attach&quot;
</em><br />
<em class="quotelev1">&gt; coordinates to axes, etc.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Another solution, much less disturbing, would be to heavily modify the
</em><br />
<em class="quotelev1">&gt; proper chapters in the CF document to:
</em><br />
<em class="quotelev1">&gt; - completely decouple the concepts of &quot;axis&quot; and &quot;coordinate&quot;: a
</em><br />
<em class="quotelev1">&gt; coordinate is not an axis and vice versa.
</em><br />
<em class="quotelev1">&gt; - completely decouple the concepts of spatio temporal dimension from array
</em><br />
<em class="quotelev1">&gt; dimension from the size the array dimension
</em><br />
<em class="quotelev1">&gt; - continue to use the &quot;axis&quot; attribute  but on n-D array coordinates: the
</em><br />
<em class="quotelev1">&gt; array has n-D dimensions but the coordinate map to 1 axis/spatial dimension
</em><br />
<em class="quotelev1">&gt; only!
</em><br />
<em class="quotelev1">&gt; - Whatever the dimensions of the array for the coordinate, all the values
</em><br />
<em class="quotelev1">&gt; contained in the array must be mapped on one given axis, the one defined in
</em><br />
<em class="quotelev1">&gt; axis attribute. For instance, a 2-D latitude only contains values that are
</em><br />
<em class="quotelev1">&gt; latitudes and will only map on one axis.
</em><br />
<em class="quotelev1">&gt; - In principle one could have in the same file several coordinates of
</em><br />
<em class="quotelev1">&gt; possibly different &quot;array&quot; dimensions, different sizes and different units
</em><br />
<em class="quotelev1">&gt; defined for one axis. This means that the attribute &quot;axis=z&quot; for instance
</em><br />
<em class="quotelev1">&gt; can appears more than once in the file. The only restriction I see is that
</em><br />
<em class="quotelev1">&gt; 2 data variables can be only plotted simultaneously if all their
</em><br />
<em class="quotelev1">&gt; coordinates share the same units (the coordinate mapped on one axis of the
</em><br />
<em class="quotelev1">&gt; first data variable must have the same units than the coordinate mapped on
</em><br />
<em class="quotelev1">&gt; the same axis for the other data variable). This allow 2 data variables
</em><br />
<em class="quotelev1">&gt; defined on two different grid sharing the same units to be in the same file
</em><br />
<em class="quotelev1">&gt; and plotted together.
</em><br />
<em class="quotelev1">&gt; - X and Y should be clearly decoupled from longitude and latitude. X and Y
</em><br />
<em class="quotelev1">&gt; are the axes, longitude and latitude are the coordinates!
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; _at_Jonathan:
</em><br />
<em class="quotelev1">&gt; I think the whole confusion here comes from the overlapping of concepts:
</em><br />
<em class="quotelev1">&gt; axes and coordinates on one hand and dimension of arrays and spatial
</em><br />
<em class="quotelev1">&gt; dimensions on the other hand. If the relevant chapters are rewritten
</em><br />
<em class="quotelev1">&gt; carefully to separate axes from coordinates and array dimensions from
</em><br />
<em class="quotelev1">&gt; spatio-temporal dimensions we are good.  think
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; _at_all: Reading more through the Trac tickets system, I noticed the nice
</em><br />
<em class="quotelev1">&gt; Trac ticket 117 about &quot;multiple&quot; time axis. This is a nice example of
</em><br />
<em class="quotelev1">&gt; mixing axes, coordinates, dimensions of arrays, the time dimension, etc!
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; /S?bastien
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; ----- Original Message -----
</em><br />
<em class="quotelev1">&gt; From: &quot;Jonathan Gregory&quot; &lt;j.m.gregory at reading.ac.uk&gt;
</em><br />
<em class="quotelev1">&gt; To: cf-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt; Sent: Thursday, 6 April, 2017 16:49:56
</em><br />
<em class="quotelev1">&gt; Subject: Re: [CF-metadata] axis attribute
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Dear Jim and Sebastien
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; The original intention of axis was to label the independent variables as 1D
</em><br />
<em class="quotelev1">&gt; xyzt axes of the data variables.  This can be deduced from other
</em><br />
<em class="quotelev1">&gt; attributes,
</em><br />
<em class="quotelev1">&gt; but it's more effort. It's partly a plotting hint, but also it's because
</em><br />
<em class="quotelev1">&gt; you
</em><br />
<em class="quotelev1">&gt; might reasonable want to tell software, &quot;give me the z-axis coordinates&quot;,
</em><br />
<em class="quotelev1">&gt; or
</em><br />
<em class="quotelev1">&gt; &quot;calculate a mean over the x-direction&quot;. The latter is often a zonal mean,
</em><br />
<em class="quotelev1">&gt; but
</em><br />
<em class="quotelev1">&gt; it isn't with a rotated-pole or tripolar grid, yet the operation is still
</em><br />
<em class="quotelev1">&gt; performed sometimes.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; It's useful that you've pointed out the confusion of purpose. If it were
</em><br />
<em class="quotelev1">&gt; regarded as an acceptable backwards-incompatibility, which I'm nervous
</em><br />
<em class="quotelev1">&gt; about,
</em><br />
<em class="quotelev1">&gt; I'd be happy if we returned &quot;axis&quot; to its original purpose of identifying
</em><br />
<em class="quotelev1">&gt; 1D
</em><br />
<em class="quotelev1">&gt; axes, and also for scalar coordinate variables (which are equivalent to
</em><br />
<em class="quotelev1">&gt; axes
</em><br />
<em class="quotelev1">&gt; of size one), and provided another attribute to label aux coords as
</em><br />
<em class="quotelev1">&gt; horizontal.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; I agree that if we have 1D x and y, with 2D lat and lon, the 1D variables
</em><br />
<em class="quotelev1">&gt; are
</em><br />
<em class="quotelev1">&gt; the axes. That's consistent with the original purpose of the axis
</em><br />
<em class="quotelev1">&gt; attribute.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev2">&gt; &gt; I also find the units of latitude and longitude confusing: it looks like
</em><br />
<em class="quotelev1">&gt; it was a way to squeeze the direction of the coordinate inside the units. I
</em><br />
<em class="quotelev1">&gt; have the same observation for the time coordinate that has its origin in
</em><br />
<em class="quotelev1">&gt; the units!
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; This convention was kept in CF for backwards-compatibility with COARDS. CF
</em><br />
<em class="quotelev1">&gt; does
</em><br />
<em class="quotelev1">&gt; not use units in any other case to identify the quantity or sense.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev2">&gt; &gt; It was done correctly for z coordinate using &quot;units&quot; and &quot;positive&quot;,
</em><br />
<em class="quotelev1">&gt; probably because there are many types of z coordinates with various origin
</em><br />
<em class="quotelev1">&gt; and directions, and no real consensus. I note however that often the origin
</em><br />
<em class="quotelev1">&gt; is not always clearly defined.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; The positive attribute was also kept for backwards-compatibility with
</em><br />
<em class="quotelev1">&gt; COARDS.
</em><br />
<em class="quotelev1">&gt; It has the advantage of being useful to identify the vertical axis, but
</em><br />
<em class="quotelev1">&gt; this
</em><br />
<em class="quotelev1">&gt; can also be done with axis=&quot;Z&quot;. CF standard names provide information which
</em><br />
<em class="quotelev1">&gt; indicates the sign convention.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; If coordinate_index is confusing, I think standard_names containing x_index
</em><br />
<em class="quotelev1">&gt; or y_index would be OK, provided we change the existing standard names
</em><br />
<em class="quotelev1">&gt;   magnitude_of_derivative_of_position_wrt_x_coordinate_index
</em><br />
<em class="quotelev1">&gt;   magnitude_of_derivative_of_position_wrt_y_coordinate_index
</em><br />
<em class="quotelev1">&gt; to remove &quot;_coordinate&quot;.
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Best wishes
</em><br />
<em class="quotelev1">&gt;
</em><br />
<em class="quotelev1">&gt; Jonathan
</em><br />
<em class="quotelev1">&gt; _______________________________________________
</em><br />
<em class="quotelev1">&gt; CF-metadata mailing list
</em><br />
<em class="quotelev1">&gt; CF-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<em class="quotelev1">&gt; _______________________________________________
</em><br />
<em class="quotelev1">&gt; CF-metadata mailing list
</em><br />
<em class="quotelev1">&gt; CF-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<em class="quotelev1">&gt;
</em><br />
<br /><br /><br /><pre>
-- 
David Hassell
National Centre for Atmospheric Science
Department of Meteorology, University of Reading,
Earley Gate, PO Box 243, Reading RG6 6BB
Tel: +44 118 378 5613
<a href="http://www.met.reading.ac.uk/">http://www.met.reading.ac.uk/</a>
</pre>
<span id="received"><dfn>Received on</dfn> Fri Apr 07 2017 - 03:10:09 BST</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start8242">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./8243.html" title="Next message in the list">Maccarthy, Jonathan K: "[CF-metadata] high sample rate (seismic) data conventions"</a></li>
<li><dfn>Previous message</dfn>: <a href="./8241.html" title="Previous message in the list">V Balaji - NOAA Affiliate: "[CF-metadata] Overstated restriction on references to external variables in version 1.7"</a></li>
<!-- lnextthread="start" -->
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg8242" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg8242" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg8242" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg8242" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:59:13 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./8241.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./8243.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
