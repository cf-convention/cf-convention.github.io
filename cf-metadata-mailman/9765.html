<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] Indices or Labels as Coordinate Variables from Jonathan Gregory on 2019-07-10 (cf-metadata-mailman)</title>
<meta name="Author" content="Jonathan Gregory (j.m.gregory)" />
<meta name="Subject" content="[CF-metadata] Indices or Labels as Coordinate Variables" />
<meta name="Date" content="2019-07-10" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./9764.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./9766.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] Indices or Labels as Coordinate Variables</h1>
<!-- received="Wed Jul 10 10:55:13 2019" -->
<!-- isoreceived="20190710095513" -->
<!-- sent="Wed, 10 Jul 2019 16:55:13 +0000" -->
<!-- isosent="20190710165513" -->
<!-- name="Jonathan Gregory" -->
<!-- email="j.m.gregory" -->
<!-- subject="[CF-metadata] Indices or Labels as Coordinate Variables" -->
<!-- id="20190710165511.GA7398_at_met.reading.ac.uk" -->
<!-- charset="US-ASCII" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start9765" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./9766.html" accesskey="d" title="Martin Juckes - UKRI STFC: &quot;[CF-metadata] Indices or Labels as Coordinate Variables&quot;">Next message</a> ]
[ <a href="./9764.html" title="Klaus Zimmermann: &quot;[CF-metadata] Renaming of GitHub repositories&quot;">Previous message</a> ]
<!-- unextthread="start" -->
[ <a href="./9766.html" accesskey="t" title="Martin Juckes - UKRI STFC: &quot;[CF-metadata] Indices or Labels as Coordinate Variables&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg9765" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg9765" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg9765" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg9765" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Jonathan Gregory &lt;<a href="mailto:j.m.gregory?Subject=Re%3A%20%5BCF-metadata%5D%20Indices%20or%20Labels%20as%20Coordinate%20Variables">j.m.gregory</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Wed, 10 Jul 2019 16:55:13 +0000</span><br />
</address>
<br />
Dear Tom
<br />
<br />That's interesting. I did not know or had forgotten about that Unidata
<br />
recommendation. CF doesn't allow string-valued coordinate variables (with
<br />
the same name as any of their dimensions), only string-valued auxiliary
<br />
coordinate variables.
<br />
<br />Best wishes
<br />
<br />Jonathan
<br />
<br />----- Forwarded message from Tom Evans &lt;Tom.Evans at niwa.co.nz&gt; -----
<br />
<br /><em class="quotelev1">&gt; Date: Tue, 9 Jul 2019 23:08:46 +0000
</em><br />
<em class="quotelev1">&gt; From: Tom Evans &lt;Tom.Evans at niwa.co.nz&gt;
</em><br />
<em class="quotelev1">&gt; To: Jonathan Gregory &lt;j.m.gregory at reading.ac.uk&gt;
</em><br />
<em class="quotelev1">&gt; Subject: RE: [CF-metadata] Indices or Labels as Coordinate Variables
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Dear Jonathan
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Thanks very much for your response. It really did help me understand the use of coordinate values. In particular, your suggestion that an auxiliary coordinate variable (with a different name from the dimension) could be listed in the coordinate attribute of a variable is very helpful. It produces exactly the behaviour I'd look for in Panoply, for example.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; I have a follow-up question, if you don't mind:
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; The Best Practices page at the Unidata site also mentions a &quot;string-valued coordinate variable,&quot; which has the same name as its first dimension, e.g.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt;    char location(location, loc_len)
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; where loc_len is the length of a text label for the location. The CF specification mentions a &quot;string-valued auxiliary coordinate variable&quot; -- something like
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt;    char location_name(location, loc_len)
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; if I'm following this correctly -- which could also be used as a coordinate in the attribute -- but it doesn't say anything about a string-valued variable with the same name as a dimension. I also haven't found any examples that use string-valued coordinate variables named the same as a dimension. Would such a variable risk conflict or confusion with the assumptions of applicactions designed to work with CF-compliant data?
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Cheers
</em><br />
<em class="quotelev1">&gt; Tom Evans
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; [cid:image702fcb.PNG at 5e3232e3.49822ae5]&lt;<a href="http://www.niwa.co.nz">http://www.niwa.co.nz</a>&gt;
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Dr Tom Evans
</em><br />
<em class="quotelev1">&gt; Software Developer
</em><br />
<em class="quotelev1">&gt; T +64-7-859-1832
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; National Institute of Water &amp; Atmospheric Research Ltd (NIWA)
</em><br />
<em class="quotelev1">&gt; Gate 10 Silverdale Road, Hillcrest, Hamilton
</em><br />
<em class="quotelev1">&gt; Connect with NIWA: niwa.co.nz&lt;<a href="https://www.niwa.co.nz">https://www.niwa.co.nz</a>&gt; Facebook&lt;<a href="https://www.facebook.com/nzniwa">https://www.facebook.com/nzniwa</a>&gt; Twitter&lt;<a href="https://twitter.com/niwa_nz">https://twitter.com/niwa_nz</a>&gt; LinkedIn&lt;<a href="https://www.linkedin.com/company/niwa">https://www.linkedin.com/company/niwa</a>&gt; Instagram&lt;<a href="https://www.instagram.com/niwa_science">https://www.instagram.com/niwa_science</a>&gt;
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; To ensure compliance with legal requirements and to maintain cyber security standards, NIWA's IT systems are subject to ongoing monitoring, activity logging and auditing. This monitoring and auditing service may be provided by third parties. Such third parties can access information transmitted to, processed by and stored on NIWA's IT systems.
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; -----Original Message-----
</em><br />
<em class="quotelev1">&gt; From: CF-metadata &lt;cf-metadata-bounces at cgd.ucar.edu&gt; On Behalf Of Jonathan Gregory
</em><br />
<em class="quotelev1">&gt; Sent: Tuesday, 9 July 2019 12:42 AM
</em><br />
<em class="quotelev1">&gt; To: cf-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt; Subject: [CF-metadata] Indices or Labels as Coordinate Variables
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Dear Tom
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; It would be a coordinate variable if it's location(location) and in that case
</em><br />
<em class="quotelev1">&gt; its values have to be unique and monotonic because generic applications
</em><br />
<em class="quotelev1">&gt; may make that assumption when plotting or doing computations with them. If
</em><br />
<em class="quotelev1">&gt; these are really labels then those operations don't really make sense anyway.
</em><br />
<em class="quotelev1">&gt; In that case it would be more suitable to store the IDs in an auxiliary
</em><br />
<em class="quotelev1">&gt; coordinate variable, which doesn't have the same name as the dimension, and
</em><br />
<em class="quotelev1">&gt; is listed in the coordinates attribute of the data variable. Values in aux
</em><br />
<em class="quotelev1">&gt; coord variables do not have to be unique or monotonic or even numeric. It is
</em><br />
<em class="quotelev1">&gt; not mandatory to include a coordinate variable (in the Unidata sense).
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Best wishes
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; Jonathan
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; ----- Forwarded message from Tom Evans &lt;Tom.Evans at niwa.co.nz&gt; -----
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev2">&gt; &gt; Date: Mon, 8 Jul 2019 01:51:19 +0000
</em><br />
<em class="quotelev2">&gt; &gt; From: Tom Evans &lt;Tom.Evans at niwa.co.nz&gt;
</em><br />
<em class="quotelev2">&gt; &gt; To: &quot;cf-metadata at cgd.ucar.edu&quot; &lt;cf-metadata at cgd.ucar.edu&gt;
</em><br />
<em class="quotelev2">&gt; &gt; Subject: [CF-metadata] Indices or Labels as Coordinate Variables
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; I have a question regarding coordinate variables:
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; I am working with time-series data representing hydrological conditions at fixed locations in a stream network. The values are generated by a model at regular time intervals, and I believe that the data will fit well into the timeSeries feature type described in the &quot;Discrete Sampling Geometries&quot; chapter of the CF conventions. For example, we would put all the discharge values into a single 2D array:
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt;     double flow(time, location)
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; The dimension &quot;location&quot; here is the &quot;instance dimension&quot; described in the convention.
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; I would like to use an integer variable named &quot;location&quot; as a coordinate variable to go along with the location dimension. I think this would provide a handy way for post-processing programs to locate a time series in our model result files. The Best Practices guidance on the Unidata website, though, says that coordinate variables &quot;must be strictly monotonic&quot; and the order of the IDs in my location variable is arbitrary. All of the location values are unique, but the location numbers are essentially numerical labels - location 1524 is distinct from location 2817, but neither is greater than the other in a way that means anything to the model. Location IDs do not consistently increase or decrease traveling downstream, for example.
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; So, is the guidance that coordinate variable should strictly increase or decrease relevant to my case? I've built some sample files and examined them using Panoply, and in Python using xarray. I haven't seen any problems with using non-monotonic integer &quot;ID numbers&quot; as coordinate variables, but that &quot;must&quot; in the guidance troubles me. If my locations are identified by arbitrary numbers, do I run the risk of scrambling the links between my time series and their identifiers?
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; Thanks
</em><br />
<em class="quotelev2">&gt; &gt; Tom Evans
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; [cid:image9ef98c.PNG at 58bab801.4bad83a3]&lt;<a href="http://www.niwa.co.nz">http://www.niwa.co.nz</a>&gt;
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; Dr Tom Evans
</em><br />
<em class="quotelev2">&gt; &gt; Software Developer
</em><br />
<em class="quotelev2">&gt; &gt; T +64-7-859-1832
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; National Institute of Water &amp; Atmospheric Research Ltd (NIWA)
</em><br />
<em class="quotelev2">&gt; &gt; Gate 10 Silverdale Road, Hillcrest, Hamilton
</em><br />
<em class="quotelev2">&gt; &gt; Connect with NIWA: niwa.co.nz&lt;<a href="https://www.niwa.co.nz">https://www.niwa.co.nz</a>&gt; Facebook&lt;<a href="https://www.facebook.com/nzniwa">https://www.facebook.com/nzniwa</a>&gt; Twitter&lt;<a href="https://twitter.com/niwa_nz">https://twitter.com/niwa_nz</a>&gt; LinkedIn&lt;<a href="https://www.linkedin.com/company/niwa">https://www.linkedin.com/company/niwa</a>&gt; Instagram&lt;<a href="https://www.instagram.com/niwa_science">https://www.instagram.com/niwa_science</a>&gt;
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt; To ensure compliance with legal requirements and to maintain cyber security standards, NIWA's IT systems are subject to ongoing monitoring, activity logging and auditing. This monitoring and auditing service may be provided by third parties. Such third parties can access information transmitted to, processed by and stored on NIWA's IT systems.
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev2">&gt; &gt;
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev2">&gt; &gt; _______________________________________________
</em><br />
<em class="quotelev2">&gt; &gt; CF-metadata mailing list
</em><br />
<em class="quotelev2">&gt; &gt; CF-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev2">&gt; &gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; ----- End forwarded message -----
</em><br />
<em class="quotelev1">&gt; _______________________________________________
</em><br />
<em class="quotelev1">&gt; CF-metadata mailing list
</em><br />
<em class="quotelev1">&gt; CF-metadata at cgd.ucar.edu
</em><br />
<em class="quotelev1">&gt; <a href="http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://mailman.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<em class="quotelev1">&gt; 
</em><br />
<br /><br /><br />----- End forwarded message -----
<br />
<span id="received"><dfn>Received on</dfn> Wed Jul 10 2019 - 10:55:13 BST</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start9765">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./9766.html" title="Next message in the list">Martin Juckes - UKRI STFC: "[CF-metadata] Indices or Labels as Coordinate Variables"</a></li>
<li><dfn>Previous message</dfn>: <a href="./9764.html" title="Previous message in the list">Klaus Zimmermann: "[CF-metadata] Renaming of GitHub repositories"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="./9766.html" title="Next message in this discussion thread">Martin Juckes - UKRI STFC: "[CF-metadata] Indices or Labels as Coordinate Variables"</a></li>
<li><a name="replies" id="replies"></a>
<dfn>Reply</dfn>: <a href="./9766.html" title="Message sent in reply to this message">Martin Juckes - UKRI STFC: "[CF-metadata] Indices or Labels as Coordinate Variables"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg9765" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg9765" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg9765" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg9765" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Wed Jul 27 2022 - 12:59:35 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./9764.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./9766.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
